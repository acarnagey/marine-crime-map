/*! For license information please see main.7e92bc56.js.LICENSE.txt */
!function(){var e={110:function(e,t,r){"use strict";var n=r(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?o:s[e.$$typeof]||i}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!==typeof r){if(f){var i=p(r);i&&i!==f&&e(t,i,n)}var o=u(r);d&&(o=o.concat(d(r)));for(var s=l(t),m=l(r),g=0;g<o.length;++g){var y=o[g];if(!a[y]&&(!n||!n[y])&&(!m||!m[y])&&(!s||!s[y])){var b=h(r,y);try{c(t,y,b)}catch(_){}}}}return t}},746:function(e,t){"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,v=r?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case d:case a:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||x(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===a},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===s||e===o||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===b||e.$$typeof===_||e.$$typeof===v||e.$$typeof===y)},t.typeOf=x},309:function(e,t,r){"use strict";e.exports=r(746)},198:function(e,t,r){e=r.nmd(e);var n="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",o="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",c="[object Null]",u="[object Object]",d="[object Proxy]",h="[object Undefined]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m[a]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m[s]=m["[object Map]"]=m["[object Number]"]=m[u]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1;var g="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,y="object"==typeof self&&self&&self.Object===Object&&self,b=g||y||Function("return this")(),_=t&&!t.nodeType&&t,v=_&&e&&!e.nodeType&&e,x=v&&v.exports===_,w=x&&g.process,k=function(){try{var e=v&&v.require&&v.require("util").types;return e||w&&w.binding&&w.binding("util")}catch(t){}}(),S=k&&k.isTypedArray;var T,A,C=Array.prototype,E=Function.prototype,I=Object.prototype,P=b["__core-js_shared__"],M=E.toString,D=I.hasOwnProperty,z=function(){var e=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),L=I.toString,R=M.call(Object),B=RegExp("^"+M.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=x?b.Buffer:void 0,F=b.Symbol,U=b.Uint8Array,N=O?O.allocUnsafe:void 0,j=(T=Object.getPrototypeOf,A=Object,function(e){return T(A(e))}),V=Object.create,W=I.propertyIsEnumerable,q=C.splice,G=F?F.toStringTag:void 0,$=function(){try{var e=be(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),H=O?O.isBuffer:void 0,Z=Math.max,X=Date.now,Y=be(b,"Map"),K=be(Object,"create"),J=function(){function e(){}return function(t){if(!Pe(t))return{};if(V)return V(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ee(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function te(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function re(e){var t=this.__data__=new ee(e);this.size=t.size}function ne(e,t){var r=Te(e),n=!r&&Se(e),i=!r&&!n&&Ce(e),a=!r&&!n&&!i&&De(e),o=r||n||i||a,s=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var c in e)!t&&!D.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_e(c,l))||s.push(c);return s}function ie(e,t,r){(void 0!==r&&!ke(e[t],r)||void 0===r&&!(t in e))&&se(e,t,r)}function ae(e,t,r){var n=e[t];D.call(e,t)&&ke(n,r)&&(void 0!==r||t in e)||se(e,t,r)}function oe(e,t){for(var r=e.length;r--;)if(ke(e[r][0],t))return r;return-1}function se(e,t,r){"__proto__"==t&&$?$(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}Q.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},Q.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Q.prototype.get=function(e){var t=this.__data__;if(K){var r=t[e];return r===n?void 0:r}return D.call(t,e)?t[e]:void 0},Q.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:D.call(t,e)},Q.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=K&&void 0===t?n:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,r=oe(t,e);return!(r<0)&&(r==t.length-1?t.pop():q.call(t,r,1),--this.size,!0)},ee.prototype.get=function(e){var t=this.__data__,r=oe(t,e);return r<0?void 0:t[r][1]},ee.prototype.has=function(e){return oe(this.__data__,e)>-1},ee.prototype.set=function(e,t){var r=this.__data__,n=oe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(Y||ee),string:new Q}},te.prototype.delete=function(e){var t=ye(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return ye(this,e).get(e)},te.prototype.has=function(e){return ye(this,e).has(e)},te.prototype.set=function(e,t){var r=ye(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},re.prototype.clear=function(){this.__data__=new ee,this.size=0},re.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},re.prototype.get=function(e){return this.__data__.get(e)},re.prototype.has=function(e){return this.__data__.has(e)},re.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ee){var n=r.__data__;if(!Y||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new te(n)}return r.set(e,t),this.size=r.size,this};var le,ce=function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[le?o:++n];if(!1===t(i[s],s,i))break}return e};function ue(e){return null==e?void 0===e?h:c:G&&G in Object(e)?function(e){var t=D.call(e,G),r=e[G];try{e[G]=void 0;var n=!0}catch(a){}var i=L.call(e);n&&(t?e[G]=r:delete e[G]);return i}(e):function(e){return L.call(e)}(e)}function de(e){return Me(e)&&ue(e)==a}function he(e){return!(!Pe(e)||function(e){return!!z&&z in e}(e))&&(Ee(e)?B:p).test(function(e){if(null!=e){try{return M.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function pe(e){if(!Pe(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ve(e),r=[];for(var n in e)("constructor"!=n||!t&&D.call(e,n))&&r.push(n);return r}function fe(e,t,r,n,i){e!==t&&ce(t,(function(a,o){if(i||(i=new re),Pe(a))!function(e,t,r,n,i,a,o){var s=xe(e,r),l=xe(t,r),c=o.get(l);if(c)return void ie(e,r,c);var d=a?a(s,l,r+"",e,t,o):void 0,h=void 0===d;if(h){var p=Te(l),f=!p&&Ce(l),m=!p&&!f&&De(l);d=l,p||f||m?Te(s)?d=s:Me(g=s)&&Ae(g)?d=function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(s):f?(h=!1,d=function(e,t){if(t)return e.slice();var r=e.length,n=N?N(r):new e.constructor(r);return e.copy(n),n}(l,!0)):m?(h=!1,d=function(e,t){var r=t?function(e){var t=new e.constructor(e.byteLength);return new U(t).set(new U(e)),t}(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(l,!0)):d=[]:function(e){if(!Me(e)||ue(e)!=u)return!1;var t=j(e);if(null===t)return!0;var r=D.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&M.call(r)==R}(l)||Se(l)?(d=s,Se(s)?d=function(e){return function(e,t,r,n){var i=!r;r||(r={});var a=-1,o=t.length;for(;++a<o;){var s=t[a],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?se(r,s,l):ae(r,s,l)}return r}(e,ze(e))}(s):Pe(s)&&!Ee(s)||(d=function(e){return"function"!=typeof e.constructor||ve(e)?{}:J(j(e))}(l))):h=!1}var g;h&&(o.set(l,d),i(d,l,n,a,o),o.delete(l));ie(e,r,d)}(e,t,o,r,fe,n,i);else{var s=n?n(xe(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),ie(e,o,s)}}),ze)}function me(e,t){return we(function(e,t,r){return t=Z(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Z(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,Be),e+"")}var ge=$?function(e,t){return $(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Be;function ye(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function be(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return he(r)?r:void 0}function _e(e,t){var r=typeof e;return!!(t=null==t?i:t)&&("number"==r||"symbol"!=r&&f.test(e))&&e>-1&&e%1==0&&e<t}function ve(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||I)}function xe(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var we=function(e){var t=0,r=0;return function(){var n=X(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ge);function ke(e,t){return e===t||e!==e&&t!==t}var Se=de(function(){return arguments}())?de:function(e){return Me(e)&&D.call(e,"callee")&&!W.call(e,"callee")},Te=Array.isArray;function Ae(e){return null!=e&&Ie(e.length)&&!Ee(e)}var Ce=H||function(){return!1};function Ee(e){if(!Pe(e))return!1;var t=ue(e);return t==s||t==l||t==o||t==d}function Ie(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Pe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Me(e){return null!=e&&"object"==typeof e}var De=S?function(e){return function(t){return e(t)}}(S):function(e){return Me(e)&&Ie(e.length)&&!!m[ue(e)]};function ze(e){return Ae(e)?ne(e,!0):pe(e)}var Le,Re=(Le=function(e,t,r,n){fe(e,t,r,n)},me((function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,a=n>2?t[2]:void 0;for(i=Le.length>3&&"function"==typeof i?(n--,i):void 0,a&&function(e,t,r){if(!Pe(r))return!1;var n=typeof t;return!!("number"==n?Ae(r)&&_e(t,r.length):"string"==n&&t in r)&&ke(r[t],e)}(t[0],t[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var o=t[r];o&&Le(e,o,r,i)}return e})));function Be(e){return e}e.exports=Re},463:function(e,t,r){"use strict";var n=r(791),i=r(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,r,n,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,r,n){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var z=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var B,O=Object.assign;function F(e){if(void 0===B)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var U=!1;function N(e,t){if(!e||U)return"";U=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=n.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function j(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=N(e.type,!1);case 11:return e=N(e.type.render,!1);case 1:return e=N(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case T:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var r=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=q(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){K(e,t);var r=q(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Z(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+q(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:q(r)}}function ae(e,t){var r=q(t.value),n=q(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Se=null;function Te(e){if(e=_i(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Ae(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Se;if(Se=ke=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ee(e,t){return e(t)}function Ie(){}var Pe=!1;function Me(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Ee(e,t,r)}finally{Pe=!1,(null!==ke||null!==Se)&&(Ie(),Ce())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var n=xi(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var ze=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){ze=!1}function Re(e,t,r,n,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Be=!1,Oe=null,Fe=!1,Ue=null,Ne={onError:function(e){Be=!0,Oe=e}};function je(e,t,r,n,i,a,o,s,l){Be=!1,Oe=null,Re.apply(Ne,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return qe(i),e;if(o===n)return qe(i),t;o=o.sibling}throw Error(a(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=o;break}if(l===n){s=!0,n=i,r=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===r){s=!0,r=o,n=i;break}if(l===n){s=!0,n=o,r=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Ke=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&r;if(0!==o){var s=o&~i;0!==s?n=dt(s):0!==(a&=o)&&(n=dt(a))}else 0!==(o=r&~i)?n=dt(o):0!==a&&(n=dt(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-ot(t)),n|=e[r],t&=~i;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function bt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var _t=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,kt,St,Tt,At=!1,Ct=[],Et=null,It=null,Pt=null,Mt=new Map,Dt=new Map,zt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Bt(e,t,r,n,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=bi(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void Tt(e.priority,(function(){kt(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=_i(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);ve=n,r.target.dispatchEvent(n),ve=null,t.shift()}return!0}function Ut(e,t,r){Ft(e)&&r.delete(t)}function Nt(){At=!1,null!==Et&&Ft(Et)&&(Et=null),null!==It&&Ft(It)&&(It=null),null!==Pt&&Ft(Pt)&&(Pt=null),Mt.forEach(Ut),Dt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Nt)))}function Vt(e){function t(t){return jt(t,e)}if(0<Ct.length){jt(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&jt(Et,e),null!==It&&jt(It,e),null!==Pt&&jt(Pt,e),Mt.forEach(t),Dt.forEach(t),r=0;r<zt.length;r++)(n=zt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<zt.length&&null===(r=zt[0]).blockedOn;)Ot(r),null===r.blockedOn&&zt.shift()}var Wt=v.ReactCurrentBatchConfig,qt=!0;function Gt(e,t,r,n){var i=_t,a=Wt.transition;Wt.transition=null;try{_t=1,Ht(e,t,r,n)}finally{_t=i,Wt.transition=a}}function $t(e,t,r,n){var i=_t,a=Wt.transition;Wt.transition=null;try{_t=4,Ht(e,t,r,n)}finally{_t=i,Wt.transition=a}}function Ht(e,t,r,n){if(qt){var i=Xt(e,t,r,n);if(null===i)qn(e,t,n,Zt,r),Rt(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Et=Bt(Et,e,t,r,n,i),!0;case"dragenter":return It=Bt(It,e,t,r,n,i),!0;case"mouseover":return Pt=Bt(Pt,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Mt.set(a,Bt(Mt.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Bt(Dt.get(a)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Rt(e,n),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var a=_i(i);if(null!==a&&xt(a),null===(a=Xt(e,t,r,n))&&qn(e,t,n,Zt,r),a===i)break;i=a}null!==i&&n.stopPropagation()}else qn(e,t,n,null,r)}}var Zt=null;function Xt(e,t,r,n){if(Zt=null,null!==(e=bi(e=xe(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Kt=null,Jt=null,Qt=null;function er(){if(Qt)return Qt;var e,t,r=Jt,n=r.length,i="value"in Kt?Kt.value:Kt.textContent,a=i.length;for(e=0;e<n&&r[e]===i[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,a){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,or,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ir(lr),ur=O({},lr,{view:0,detail:0}),dr=ir(ur),hr=O({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(ar=e.screenX-sr.screenX,or=e.screenY-sr.screenY):or=ar=0,sr=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:or}}),pr=ir(hr),fr=ir(O({},hr,{dataTransfer:0})),mr=ir(O({},ur,{relatedTarget:0})),gr=ir(O({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=O({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=ir(yr),_r=ir(O({},lr,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function Sr(){return kr}var Tr=O({},ur,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ar=ir(Tr),Cr=ir(O({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=ir(O({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Ir=ir(O({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=O({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mr=ir(Pr),Dr=[9,13,27,32],zr=u&&"CompositionEvent"in window,Lr=null;u&&"documentMode"in document&&(Lr=document.documentMode);var Rr=u&&"TextEvent"in window&&!Lr,Br=u&&(!zr||Lr&&8<Lr&&11>=Lr),Or=String.fromCharCode(32),Fr=!1;function Ur(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jr=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function qr(e,t,r,n){Ae(n),0<(t=$n(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Gr=null,$r=null;function Hr(e){Fn(e,0)}function Zr(e){if(H(vi(e)))return e}function Xr(e,t){if("change"===e)return t}var Yr=!1;if(u){var Kr;if(u){var Jr="oninput"in document;if(!Jr){var Qr=document.createElement("div");Qr.setAttribute("oninput","return;"),Jr="function"===typeof Qr.oninput}Kr=Jr}else Kr=!1;Yr=Kr&&(!document.documentMode||9<document.documentMode)}function en(){Gr&&(Gr.detachEvent("onpropertychange",tn),$r=Gr=null)}function tn(e){if("value"===e.propertyName&&Zr($r)){var t=[];qr(t,$r,e,xe(e)),Me(Hr,t)}}function rn(e,t,r){"focusin"===e?(en(),$r=r,(Gr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zr($r)}function an(e,t){if("click"===e)return Zr(t)}function on(e,t){if("input"===e||"change"===e)return Zr(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!d.call(t,i)||!sn(e[i],t[i]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Z((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=void 0===n.end?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=un(r,a);var o=un(r,n);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,bn=null,_n=!1;function vn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;_n||null==gn||gn!==Z(n)||("selectionStart"in(n=gn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&ln(bn,n)||(bn=n,0<(n=$n(yn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function xn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wn={animationend:xn("Animation","AnimationEnd"),animationiteration:xn("Animation","AnimationIteration"),animationstart:xn("Animation","AnimationStart"),transitionend:xn("Transition","TransitionEnd")},kn={},Sn={};function Tn(e){if(kn[e])return kn[e];if(!wn[e])return e;var t,r=wn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Sn)return kn[e]=r[t];return e}u&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var An=Tn("animationend"),Cn=Tn("animationiteration"),En=Tn("animationstart"),In=Tn("transitionend"),Pn=new Map,Mn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){Pn.set(e,t),l(t,[e])}for(var zn=0;zn<Mn.length;zn++){var Ln=Mn[zn];Dn(Ln.toLowerCase(),"on"+(Ln[0].toUpperCase()+Ln.slice(1)))}Dn(An,"onAnimationEnd"),Dn(Cn,"onAnimationIteration"),Dn(En,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(In,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rn));function On(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,o,s,l,c){if(je.apply(this,arguments),Be){if(!Be)throw Error(a(198));var u=Oe;Be=!1,Oe=null,Fe||(Fe=!0,Ue=u)}}(n,t,void 0,e),e.currentTarget=null}function Fn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;On(i,s,c),a=l}else for(o=0;o<n.length;o++){if(l=(s=n[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;On(i,s,c),a=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Un(e,t){var r=t[mi];void 0===r&&(r=t[mi]=new Set);var n=e+"__bubble";r.has(n)||(Wn(t,e,2,!1),r.add(n))}function Nn(e,t,r){var n=0;t&&(n|=4),Wn(r,e,n,t)}var jn="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[jn]){e[jn]=!0,o.forEach((function(t){"selectionchange"!==t&&(Bn.has(t)||Nn(t,!1,e),Nn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jn]||(t[jn]=!0,Nn("selectionchange",!1,t))}}function Wn(e,t,r,n){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=$t;break;default:i=Ht}r=i.bind(null,t,r,e),i=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function qn(e,t,r,n,i){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=bi(s)))return;if(5===(l=o.tag)||6===l){n=a=o;continue e}s=s.parentNode}}n=n.return}Me((function(){var n=a,i=xe(r),o=[];e:{var s=Pn.get(e);if(void 0!==s){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Ar;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case An:case Cn:case En:l=gr;break;case In:l=Ir;break;case"scroll":l=dr;break;case"wheel":l=Mr;break;case"copy":case"cut":case"paste":l=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cr}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=De(f,h))&&u.push(Gn(f,m,p)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,r,i),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!bi(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?bi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=pr,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cr,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:vi(l),p=null==c?s:vi(c),(s=new u(m,f+"leave",l,r,i)).target=d,s.relatedTarget=p,m=null,bi(i)===n&&((u=new u(h,f+"enter",c,r,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Hn(p))f++;for(p=0,m=h;m;m=Hn(m))p++;for(;0<f-p;)u=Hn(u),f--;for(;0<p-f;)h=Hn(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Hn(u),h=Hn(h)}u=null}else u=null;null!==l&&Zn(o,s,l,u,!1),null!==c&&null!==d&&Zn(o,d,c,u,!0)}if("select"===(l=(s=n?vi(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xr;else if(Wr(s))if(Yr)g=on;else{g=nn;var y=rn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=an);switch(g&&(g=g(e,n))?qr(o,g,r,i):(y&&y(e,s,n),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=n?vi(n):window,e){case"focusin":(Wr(y)||"true"===y.contentEditable)&&(gn=y,yn=n,bn=null);break;case"focusout":bn=yn=gn=null;break;case"mousedown":_n=!0;break;case"contextmenu":case"mouseup":case"dragend":_n=!1,vn(o,r,i);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":vn(o,r,i)}var b;if(zr)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else jr?Ur(e,r)&&(_="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(_="onCompositionStart");_&&(Br&&"ko"!==r.locale&&(jr||"onCompositionStart"!==_?"onCompositionEnd"===_&&jr&&(b=er()):(Jt="value"in(Kt=i)?Kt.value:Kt.textContent,jr=!0)),0<(y=$n(n,_)).length&&(_=new _r(_,e,null,r,i),o.push({event:_,listeners:y}),b?_.data=b:null!==(b=Nr(r))&&(_.data=b))),(b=Rr?function(e,t){switch(e){case"compositionend":return Nr(t);case"keypress":return 32!==t.which?null:(Fr=!0,Or);case"textInput":return(e=t.data)===Or&&Fr?null:e;default:return null}}(e,r):function(e,t){if(jr)return"compositionend"===e||!zr&&Ur(e,t)?(e=er(),Qt=Jt=Kt=null,jr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Br&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=$n(n,"onBeforeInput")).length&&(i=new _r("onBeforeInput","beforeinput",null,r,i),o.push({event:i,listeners:n}),i.data=b))}Fn(o,t)}))}function Gn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function $n(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,r))&&n.unshift(Gn(e,a,i)),null!=(a=De(e,t))&&n.push(Gn(e,a,i))),e=e.return}return n}function Hn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zn(e,t,r,n,i){for(var a=t._reactName,o=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=De(r,a))&&o.unshift(Gn(r,l,s)):i||null!=(l=De(r,a))&&o.push(Gn(r,l,s))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Xn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Kn(e){return("string"===typeof e?e:""+e).replace(Xn,"\n").replace(Yn,"")}function Jn(e,t,r){if(t=Kn(t),Kn(e)!==t&&r)throw Error(a(425))}function Qn(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ni;function si(e){setTimeout((function(){throw e}))}function li(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function bi(e){var t=e[hi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fi]||r[hi]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ui(e);null!==e;){if(r=e[hi])return r;e=ui(e)}return t}r=(e=r).parentNode}return null}function _i(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[pi]||null}var wi=[],ki=-1;function Si(e){return{current:e}}function Ti(e){0>ki||(e.current=wi[ki],wi[ki]=null,ki--)}function Ai(e,t){ki++,wi[ki]=e.current,e.current=t}var Ci={},Ei=Si(Ci),Ii=Si(!1),Pi=Ci;function Mi(e,t){var r=e.type.contextTypes;if(!r)return Ci;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in r)a[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function zi(){Ti(Ii),Ti(Ei)}function Li(e,t,r){if(Ei.current!==Ci)throw Error(a(168));Ai(Ei,t),Ai(Ii,r)}function Ri(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(a(108,W(e)||"Unknown",i));return O({},r,n)}function Bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Pi=Ei.current,Ai(Ei,e),Ai(Ii,Ii.current),!0}function Oi(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=Ri(e,t,Pi),n.__reactInternalMemoizedMergedChildContext=e,Ti(Ii),Ti(Ei),Ai(Ei,e)):Ti(Ii),Ai(Ii,r)}var Fi=null,Ui=!1,Ni=!1;function ji(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Ni&&null!==Fi){Ni=!0;var e=0,t=_t;try{var r=Fi;for(_t=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),He(Qe,Vi),i}finally{_t=t,Ni=!1}}return null}var Wi=[],qi=0,Gi=null,$i=0,Hi=[],Zi=0,Xi=null,Yi=1,Ki="";function Ji(e,t){Wi[qi++]=$i,Wi[qi++]=Gi,Gi=e,$i=t}function Qi(e,t,r){Hi[Zi++]=Yi,Hi[Zi++]=Ki,Hi[Zi++]=Xi,Xi=e;var n=Yi;e=Ki;var i=32-ot(n)-1;n&=~(1<<i),r+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Yi=1<<32-ot(t)+i|r<<i|n,Ki=a+e}else Yi=1<<a|r<<i|n,Ki=e}function ea(e){null!==e.return&&(Ji(e,1),Qi(e,1,0))}function ta(e){for(;e===Gi;)Gi=Wi[--qi],Wi[qi]=null,$i=Wi[--qi],Wi[qi]=null;for(;e===Xi;)Xi=Hi[--Zi],Hi[Zi]=null,Ki=Hi[--Zi],Hi[Zi]=null,Yi=Hi[--Zi],Hi[Zi]=null}var ra=null,na=null,ia=!1,aa=null;function oa(e,t){var r=Dc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function sa(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,na=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Xi?{id:Yi,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Dc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,na=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=na;if(t){var r=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ci(r.nextSibling);var n=ra;t&&sa(e,t)?oa(n,r):(e.flags=-4097&e.flags|2,ia=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,ra=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function da(e){if(e!==ra)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=na)){if(la(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){na=ci(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}na=null}}else na=ra?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=na;e;)e=ci(e.nextSibling)}function pa(){na=ra=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=v.ReactCurrentBatchConfig;function ga(e,t){if(e&&e.defaultProps){for(var r in t=O({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var ya=Si(null),ba=null,_a=null,va=null;function xa(){va=_a=ba=null}function wa(e){var t=ya.current;Ti(ya),e._currentValue=t}function ka(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Sa(e,t){ba=e,va=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vs=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(va!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ba)throw Error(a(308));_a=e,ba.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Aa=null;function Ca(e){null===Aa?Aa=[e]:Aa.push(e)}function Ea(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Ca(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ia(e,n)}function Ia(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Pa=!1;function Ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Il)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ia(e,r)}return null===(i=n.interleaved)?(t.next=t,Ca(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ia(e,r)}function Ra(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}function Ba(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?i=a=o:a=a.next=o,r=r.next}while(null!==r);null===a?i=a=t:a=a.next=t}else i=a=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Oa(e,t,r,n){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(o=0,u=c=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=r,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=O({},d,h);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ol|=o,e.lanes=o,e.memoizedState=d}}function Fa(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(a(191,i));i.call(n)}}}var Ua=(new n.Component).refs;function Na(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:O({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tc(),i=rc(e),a=za(n,i);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=La(e,a,i))&&(nc(t,e,i,n),Ra(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tc(),i=rc(e),a=za(n,i);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=La(e,a,i))&&(nc(t,e,i,n),Ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tc(),n=rc(e),i=za(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=La(e,i,n))&&(nc(t,e,n,r),Ra(t,e,n))}};function Va(e,t,r,n,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(i,a))}function Wa(e,t,r){var n=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(i=Di(t)?Pi:Ei.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?Mi(e,i):Ci),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function qa(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ga(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Ua,Ma(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ta(a):(a=Di(t)?Pi:Ei.current,i.context=Mi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Na(e,t,a,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Oa(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function $a(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var i=n,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Fc(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r,n){var a=r.type;return a===k?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Za(a)===t.type)?((n=i(t,r.props)).ref=$a(e,t,r),n.return=e,n):((n=Rc(r.type,r.key,r.props,null,e.mode,n)).ref=$a(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Uc(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function d(e,t,r,n,a){return null===t||7!==t.tag?((t=Bc(r,e.mode,n,a)).return=e,t):((t=i(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(r=Rc(t.type,t.key,t.props,null,e.mode,r)).ref=$a(e,null,t),r.return=e,r;case w:return(t=Uc(t,e.mode,r)).return=e,t;case D:return h(e,(0,t._init)(t._payload),r)}if(te(t)||R(t))return(t=Bc(t,e.mode,r,null)).return=e,t;Ha(e,t)}return null}function p(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return r.key===i?c(e,t,r,n):null;case w:return r.key===i?u(e,t,r,n):null;case D:return p(e,t,(i=r._init)(r._payload),n)}if(te(r)||R(r))return null!==i?null:d(e,t,r,n,null);Ha(e,r)}return null}function f(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case w:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case D:return f(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||R(n))return d(t,e=e.get(r)||null,n,i,null);Ha(t,n)}return null}function m(i,a,s,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(i,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),a=o(y,a,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return r(i,d),ia&&Ji(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(a=o(d,a,m),null===u?c=d:u.sibling=d,u=d);return ia&&Ji(i,m),c}for(d=n(i,d);m<s.length;m++)null!==(g=f(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),c}function g(i,s,l,c){var u=R(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=s,g=s=0,y=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=p(i,m,b.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),s=o(_,s,g),null===d?u=_:d.sibling=_,d=_,m=y}if(b.done)return r(i,m),ia&&Ji(i,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=h(i,b.value,c))&&(s=o(b,s,g),null===d?u=b:d.sibling=b,d=b);return ia&&Ji(i,g),u}for(m=n(i,m);!b.done;g++,b=l.next())null!==(b=f(m,i,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),s=o(b,s,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return t(i,e)})),ia&&Ji(i,g),u}return function e(n,a,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){r(n,u.sibling),(a=i(u,o.props.children)).return=n,n=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Za(c)===u.type){r(n,u.sibling),(a=i(u,o.props)).ref=$a(n,u,o),a.return=n,n=a;break e}r(n,u);break}t(n,u),u=u.sibling}o.type===k?((a=Bc(o.props.children,n.mode,l,o.key)).return=n,n=a):((l=Rc(o.type,o.key,o.props,null,n.mode,l)).ref=$a(n,a,o),l.return=n,n=l)}return s(n);case w:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){r(n,a.sibling),(a=i(a,o.children||[])).return=n,n=a;break e}r(n,a);break}t(n,a),a=a.sibling}(a=Uc(o,n.mode,l)).return=n,n=a}return s(n);case D:return e(n,a,(u=o._init)(o._payload),l)}if(te(o))return m(n,a,o,l);if(R(o))return g(n,a,o,l);Ha(n,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(r(n,a.sibling),(a=i(a,o)).return=n,n=a):(r(n,a),(a=Fc(o,n.mode,l)).return=n,n=a),s(n)):r(n,a)}}var Ya=Xa(!0),Ka=Xa(!1),Ja={},Qa=Si(Ja),eo=Si(Ja),to=Si(Ja);function ro(e){if(e===Ja)throw Error(a(174));return e}function no(e,t){switch(Ai(to,t),Ai(eo,e),Ai(Qa,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Qa),Ai(Qa,t)}function io(){Ti(Qa),Ti(eo),Ti(to)}function ao(e){ro(to.current);var t=ro(Qa.current),r=le(t,e.type);t!==r&&(Ai(eo,e),Ai(Qa,r))}function oo(e){eo.current===e&&(Ti(Qa),Ti(eo))}var so=Si(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=v.ReactCurrentDispatcher,po=v.ReactCurrentBatchConfig,fo=0,mo=null,go=null,yo=null,bo=!1,_o=!1,vo=0,xo=0;function wo(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function So(e,t,r,n,i,o){if(fo=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=r(n,i),_o){o=0;do{if(_o=!1,vo=0,25<=o)throw Error(a(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=cs,e=r(n,i)}while(_o)}if(ho.current=os,t=null!==go&&null!==go.next,fo=0,yo=go=mo=null,bo=!1,t)throw Error(a(300));return e}function To(){var e=0!==vo;return vo=0,e}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Eo(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=Co(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=go,i=n.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(null!==i){o=i.next,n=n.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((fo&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=n):c=c.next=h,mo.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==o);null===c?s=n:c.next=l,sn(n,t.memoizedState)||(vs=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Ol|=o,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Po(e){var t=Co(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sn(o,t.memoizedState)||(vs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Mo(){}function Do(e,t){var r=mo,n=Co(),i=t(),o=!sn(n.memoizedState,i);if(o&&(n.memoizedState=i,vs=!0),n=n.queue,qo(Ro.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(r.flags|=2048,Uo(9,Lo.bind(null,r,n,i,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&fo)||zo(r,t,i)}return i}function zo(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Lo(e,t,r,n){t.value=r,t.getSnapshot=n,Bo(t)&&Oo(e)}function Ro(e,t,r){return r((function(){Bo(t)&&Oo(e)}))}function Bo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(n){return!0}}function Oo(e){var t=Ia(e,1);null!==t&&nc(t,e,1,-1)}function Fo(e){var t=Ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,mo,e),[t.memoizedState,e]}function Uo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function No(){return Co().memoizedState}function jo(e,t,r,n){var i=Ao();mo.flags|=e,i.memoizedState=Uo(1|t,r,void 0,void 0===n?null:n)}function Vo(e,t,r,n){var i=Co();n=void 0===n?null:n;var a=void 0;if(null!==go){var o=go.memoizedState;if(a=o.destroy,null!==n&&ko(n,o.deps))return void(i.memoizedState=Uo(t,r,a,n))}mo.flags|=e,i.memoizedState=Uo(1|t,r,a,n)}function Wo(e,t){return jo(8390656,8,e,t)}function qo(e,t){return Vo(2048,8,e,t)}function Go(e,t){return Vo(4,2,e,t)}function $o(e,t){return Vo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Zo(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Vo(4,4,Ho.bind(null,t,e),r)}function Xo(){}function Yo(e,t){var r=Co();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ko(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ko(e,t){var r=Co();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ko(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Jo(e,t,r){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,vs=!0),e.memoizedState=r):(sn(r,t)||(r=mt(),mo.lanes|=r,Ol|=r,e.baseState=!0),t)}function Qo(e,t){var r=_t;_t=0!==r&&4>r?r:4,e(!0);var n=po.transition;po.transition={};try{e(!1),t()}finally{_t=r,po.transition=n}}function es(){return Co().memoizedState}function ts(e,t,r){var n=rc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ns(e))is(t,r);else if(null!==(r=Ea(e,t,r,n))){nc(r,e,n,tc()),as(r,t,n)}}function rs(e,t,r){var n=rc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ns(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,sn(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ca(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(r=Ea(e,t,i,n))&&(nc(r,e,n,i=tc()),as(r,t,n))}}function ns(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function is(e,t){_o=bo=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function as(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}var os={readContext:Ta,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ta,useCallback:function(e,t){return Ao().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Wo,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,jo(4194308,4,Ho.bind(null,t,e),r)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var r=Ao();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ao();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ts.bind(null,mo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ao().memoizedState=e},useState:Fo,useDebugValue:Xo,useDeferredValue:function(e){return Ao().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Qo.bind(null,e[1]),Ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=mo,i=Ao();if(ia){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Pl)throw Error(a(349));0!==(30&fo)||zo(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,Wo(Ro.bind(null,n,o,e),[e]),n.flags|=2048,Uo(9,Lo.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Ao(),t=Pl.identifierPrefix;if(ia){var r=Ki;t=":"+t+"R"+(r=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+r),0<(r=vo++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ta,useCallback:Yo,useContext:Ta,useEffect:qo,useImperativeHandle:Zo,useInsertionEffect:Go,useLayoutEffect:$o,useMemo:Ko,useReducer:Io,useRef:No,useState:function(){return Io(Eo)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(Co(),go.memoizedState,e)},useTransition:function(){return[Io(Eo)[0],Co().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ta,useCallback:Yo,useContext:Ta,useEffect:qo,useImperativeHandle:Zo,useInsertionEffect:Go,useLayoutEffect:$o,useMemo:Ko,useReducer:Po,useRef:No,useState:function(){return Po(Eo)},useDebugValue:Xo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Jo(t,go.memoizedState,e)},useTransition:function(){return[Po(Eo)[0],Co().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var r="",n=t;do{r+=j(n),n=n.return}while(n);var i=r}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,r){(r=za(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Gl||(Gl=!0,$l=n),hs(0,t)},r}function ms(e,t,r){(r=za(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){hs(0,t),"function"!==typeof n&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function gs(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ps;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Ac.bind(null,e,t,r),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,r,n,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=za(-1,1)).tag=2,La(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _s=v.ReactCurrentOwner,vs=!1;function xs(e,t,r,n){t.child=null===e?Ka(t,null,r,n):Ya(t,e.child,r,n)}function ws(e,t,r,n,i){r=r.render;var a=t.ref;return Sa(t,i),n=So(e,t,r,n,a,i),r=To(),null===e||vs?(ia&&r&&ea(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function ks(e,t,r,n,i){if(null===e){var a=r.type;return"function"!==typeof a||zc(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Rc(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,n,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(o,n)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Lc(a,n)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,r,n,i){if(null!==e){var a=e.memoizedProps;if(ln(a,n)&&e.ref===t.ref){if(vs=!1,t.pendingProps=n=a,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(vs=!0)}}return Cs(e,t,r,n,i)}function Ts(e,t,r){var n=t.pendingProps,i=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ll,zl),zl|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ll,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:r,Ai(Ll,zl),zl|=n}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ai(Ll,zl),zl|=n;return xs(e,t,i,r),t.child}function As(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,r,n,i){var a=Di(r)?Pi:Ei.current;return a=Mi(t,a),Sa(t,i),r=So(e,t,r,n,a,i),n=To(),null===e||vs?(ia&&n&&ea(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Es(e,t,r,n,i){if(Di(r)){var a=!0;Bi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)qs(e,t),Wa(t,r,n),Ga(t,r,n,i),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Mi(t,c=Di(r)?Pi:Ei.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==n||l!==c)&&qa(t,o,n,c),Pa=!1;var h=t.memoizedState;o.state=h,Oa(t,n,o,i),l=t.memoizedState,s!==n||h!==l||Ii.current||Pa?("function"===typeof u&&(Na(t,r,u,n),l=t.memoizedState),(s=Pa||Va(t,r,s,n,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Da(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ga(t.type,s),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ta(l):l=Mi(t,l=Di(r)?Pi:Ei.current);var p=r.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&qa(t,o,n,l),Pa=!1,h=t.memoizedState,o.state=h,Oa(t,n,o,i);var f=t.memoizedState;s!==d||h!==f||Ii.current||Pa?("function"===typeof p&&(Na(t,r,p,n),f=t.memoizedState),(c=Pa||Va(t,r,c,n,h,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=l,n=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Is(e,t,r,n,a,i)}function Is(e,t,r,n,i,a){As(e,t);var o=0!==(128&t.flags);if(!n&&!o)return i&&Oi(t,r,!1),Gs(e,t,a);n=t.stateNode,_s.current=t;var s=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):xs(e,t,s,a),t.memoizedState=n.state,i&&Oi(t,r,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),no(e,t.containerInfo)}function Ms(e,t,r,n,i){return pa(),fa(i),t.flags|=256,xs(e,t,r,n),t.child}var Ds,zs,Ls,Rs,Bs={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,r){var n,i=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ai(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,i,0,null),e=Bc(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(r),t.memoizedState=Bs,e):Us(t,l));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,r,n,i,o,s){if(r)return 256&t.flags?(t.flags&=-257,Ns(e,t,s,n=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=Oc({mode:"visible",children:n.children},i,0,null),(o=Bc(o,i,s,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Bs,o);if(0===(1&t.mode))return Ns(e,t,s,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Ns(e,t,s,n=ds(o=Error(a(419)),n,void 0))}if(l=0!==(s&e.childLanes),vs||l){if(null!==(n=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ia(e,i),nc(n,e,i,-1))}return gc(),Ns(e,t,s,n=ds(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,na=ci(i.nextSibling),ra=t,ia=!0,aa=null,null!==e&&(Hi[Zi++]=Yi,Hi[Zi++]=Ki,Hi[Zi++]=Xi,Yi=e.id,Ki=e.overflow,Xi=t),t=Us(t,n.children),t.flags|=4096,t)}(e,t,l,i,n,o,r);if(s){s=i.fallback,l=t.mode,n=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==n?s=Lc(n,s):(s=Bc(s,l,r,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=Bs,i}return e=(s=e.child).sibling,i=Lc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ns(e,t,r,n){return null!==n&&fa(n),Ya(t,e.child,null,r),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ka(e.return,t,r)}function Vs(e,t,r,n,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Ws(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(xs(e,t,n.children,r),0!==(2&(n=so.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,r,t);else if(19===e.tag)js(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ai(so,n),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===lo(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Vs(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Vs(t,!0,r,null,a);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Lc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Lc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function $s(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Zs(e,t,r){var n=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Di(t.type)&&zi(),Hs(t),null;case 3:return n=t.stateNode,io(),Ti(Ii),Ti(Ei),uo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),zs(e,t),Hs(t),null;case 5:oo(t);var i=ro(to.current);if(r=t.type,null!==e&&null!=t.stateNode)Ls(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=ro(Qa.current),da(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[hi]=t,n[pi]=o,e=0!==(1&t.mode),r){case"dialog":Un("cancel",n),Un("close",n);break;case"iframe":case"object":case"embed":Un("load",n);break;case"video":case"audio":for(i=0;i<Rn.length;i++)Un(Rn[i],n);break;case"source":Un("error",n);break;case"img":case"image":case"link":Un("error",n),Un("load",n);break;case"details":Un("toggle",n);break;case"input":Y(n,o),Un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Un("invalid",n);break;case"textarea":ie(n,o),Un("invalid",n)}for(var l in be(r,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,c,e),i=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Un("scroll",n)}switch(r){case"input":$(n),Q(n,o,!0);break;case"textarea":$(n),oe(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=Qn)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[hi]=t,e[pi]=n,Ds(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(r,n),r){case"dialog":Un("cancel",e),Un("close",e),i=n;break;case"iframe":case"object":case"embed":Un("load",e),i=n;break;case"video":case"audio":for(i=0;i<Rn.length;i++)Un(Rn[i],e);i=n;break;case"source":Un("error",e),i=n;break;case"img":case"image":case"link":Un("error",e),Un("load",e),i=n;break;case"details":Un("toggle",e),i=n;break;case"input":Y(e,n),i=X(e,n),Un("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=O({},n,{value:void 0}),Un("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),Un("invalid",e)}for(o in be(r,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==r||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Un("scroll",e):null!=u&&_(e,o,u,l))}switch(r){case"input":$(e),Q(e,n,!1);break;case"textarea":$(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+q(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?re(e,!!n.multiple,o,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));if(r=ro(to.current),ro(Qa.current),da(t)){if(n=t.stateNode,r=t.memoizedProps,n[hi]=t,(o=n.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Jn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[hi]=t,t.stateNode=n}return Hs(t),null;case 13:if(Ti(so),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==na&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,o=!1;else if(o=da(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),zs(e,t),null===e&&Vn(t.stateNode.containerInfo),Hs(t),null;case 10:return wa(t.type._context),Hs(t),null;case 19:if(Ti(so),null===(o=t.memoizedState))return Hs(t),null;if(n=0!==(128&t.flags),null===(l=o.rendering))if(n)$s(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,$s(o,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ai(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ke()>Wl&&(t.flags|=128,n=!0,$s(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=lo(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),$s(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Hs(t),null}else 2*Ke()-o.renderingStartTime>Wl&&1073741824!==r&&(t.flags|=128,n=!0,$s(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,r=so.current,Ai(so,n?1&r|2:1&r),t):(Hs(t),null);case 22:case 23:return hc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&zl)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xs(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&zi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ii),Ti(Ei),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ds=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},zs=function(){},Ls=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ro(Qa.current);var a,o=null;switch(r){case"input":i=X(e,i),n=X(e,n),o=[];break;case"select":i=O({},i,{value:void 0}),n=O({},n,{value:void 0}),o=[];break;case"textarea":i=ne(e,i),n=ne(e,n),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=Qn)}for(u in be(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Un("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Rs=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ys=!1,Ks=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function el(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Tc(e,t,n)}else r.current=null}function tl(e,t,r){try{r()}catch(n){Tc(e,t,n)}}var rl=!1;function nl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tl(t,r,a)}i=i.next}while(i!==n)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Qn));else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}function ul(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(ul(e,t,r),e=e.sibling;null!==e;)ul(e,t,r),e=e.sibling}var dl=null,hl=!1;function pl(e,t,r){for(r=r.child;null!==r;)fl(e,t,r),r=r.sibling}function fl(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,r)}catch(s){}switch(r.tag){case 5:Ks||el(r,t);case 6:var n=dl,i=hl;dl=null,pl(e,t,r),hl=i,null!==(dl=n)&&(hl?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(hl?(e=dl,r=r.stateNode,8===e.nodeType?li(e.parentNode,r):1===e.nodeType&&li(e,r),Vt(e)):li(dl,r.stateNode));break;case 4:n=dl,i=hl,dl=r.stateNode.containerInfo,hl=!0,pl(e,t,r),dl=n,hl=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(r,t,o),i=i.next}while(i!==n)}pl(e,t,r);break;case 1:if(!Ks&&(el(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Tc(r,t,s)}pl(e,t,r);break;case 21:pl(e,t,r);break;case 22:1&r.mode?(Ks=(n=Ks)||null!==r.memoizedState,pl(e,t,r),Ks=n):pl(e,t,r);break;default:pl(e,t,r)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Js),t.forEach((function(t){var n=Ic.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function gl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(a(160));fl(o,s,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),bl(e),4&n){try{nl(3,e,e.return),il(3,e)}catch(g){Tc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:gl(t,e),bl(e),512&n&&null!==r&&el(r,r.return);break;case 5:if(gl(t,e),bl(e),512&n&&null!==r&&el(r,r.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Tc(e,e.return,g)}}if(4&n&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==r?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&K(i,o),_e(l,s);var u=_e(l,o);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):_(i,d,h,u)}switch(l){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?re(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?re(i,!!o.multiple,o.defaultValue,!0):re(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Tc(e,e.return,g)}}break;case 6:if(gl(t,e),bl(e),4&n){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tc(e,e.return,g)}}break;case 3:if(gl(t,e),bl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:gl(t,e),bl(e);break;case 13:gl(t,e),bl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Ke())),4&n&&ml(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Ks=(u=Ks)||d,gl(t,e),Ks=u):gl(t,e),bl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Qs=e,d=e.child;null!==d;){for(h=Qs=d;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(n,r,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Qs=f):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Tc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),bl(e),4&n&&ml(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(sl(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(he(i,""),n.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(a(161))}}catch(s){Tc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,r){Qs=e,vl(e,t,r)}function vl(e,t,r){for(var n=0!==(1&e.mode);null!==Qs;){var i=Qs,a=i.child;if(22===i.tag&&n){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Ys;var c=Ks;if(Ys=o,(Ks=l)&&!c)for(Qs=i;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?kl(i):null!==l?(l.return=o,Qs=l):kl(i);for(;null!==a;)Qs=a,vl(a,t,r),a=a.sibling;Qs=i,Ys=s,Ks=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qs=a):xl(e)}}function xl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||il(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ks)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ga(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Fa(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(a(163))}Ks||512&t.flags&&al(t)}catch(p){Tc(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(r=t.sibling)){r.return=t.return,Qs=r;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Qs=r;break}Qs=t.return}}function kl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{il(4,t)}catch(l){Tc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){Tc(t,i,l)}}var a=t.return;try{al(t)}catch(l){Tc(t,a,l)}break;case 5:var o=t.return;try{al(t)}catch(l){Tc(t,o,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var Sl,Tl=Math.ceil,Al=v.ReactCurrentDispatcher,Cl=v.ReactCurrentOwner,El=v.ReactCurrentBatchConfig,Il=0,Pl=null,Ml=null,Dl=0,zl=0,Ll=Si(0),Rl=0,Bl=null,Ol=0,Fl=0,Ul=0,Nl=null,jl=null,Vl=0,Wl=1/0,ql=null,Gl=!1,$l=null,Hl=null,Zl=!1,Xl=null,Yl=0,Kl=0,Jl=null,Ql=-1,ec=0;function tc(){return 0!==(6&Il)?Ke():-1!==Ql?Ql:Ql=Ke()}function rc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Dl?Dl&-Dl:null!==ma.transition?(0===ec&&(ec=mt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,r,n){if(50<Kl)throw Kl=0,Jl=null,Error(a(185));yt(e,r,n),0!==(2&Il)&&e===Pl||(e===Pl&&(0===(2&Il)&&(Fl|=r),4===Rl&&lc(e,Dl)),ic(e,n),1===r&&0===Il&&0===(1&t.mode)&&(Wl=Ke()+500,Ui&&Vi()))}function ic(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&r)&&0===(s&n)||(i[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var n=ht(e,e===Pl?Dl:0);if(0===n)null!==r&&Ze(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ze(r),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&Il)&&Vi()})),r=null;else{switch(vt(n)){case 1:r=Qe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Pc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Ql=-1,ec=0,0!==(6&Il))throw Error(a(327));var r=e.callbackNode;if(kc()&&e.callbackNode!==r)return null;var n=ht(e,e===Pl?Dl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=yc(e,n);else{t=n;var i=Il;Il|=2;var o=mc();for(Pl===e&&Dl===t||(ql=null,Wl=Ke()+500,pc(e,t));;)try{_c();break}catch(l){fc(e,l)}xa(),Al.current=o,Il=i,null!==Ml?t=0:(Pl=null,Dl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(n=i,t=oc(e,i))),1===t)throw r=Bl,pc(e,0),lc(e,n),ic(e,Ke()),r;if(6===t)lc(e,n);else{if(i=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!sn(a(),i))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,n))&&(0!==(o=ft(e))&&(n=o,t=oc(e,o))),1===t))throw r=Bl,pc(e,0),lc(e,n),ic(e,Ke()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,jl,ql);break;case 3:if(lc(e,n),(130023424&n)===n&&10<(t=Vl+500-Ke())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&n)!==n){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(wc.bind(null,e,jl,ql),t);break}wc(e,jl,ql);break;case 4:if(lc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-ot(n);o=1<<s,(s=t[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Ke()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tl(n/1960))-n)){e.timeoutHandle=ni(wc.bind(null,e,jl,ql),n);break}wc(e,jl,ql);break;default:throw Error(a(329))}}}return ic(e,Ke()),e.callbackNode===r?ac.bind(null,e):null}function oc(e,t){var r=Nl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=jl,jl=r,null!==t&&sc(t)),e}function sc(e){null===jl?jl=e:jl.push.apply(jl,e)}function lc(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function cc(e){if(0!==(6&Il))throw Error(a(327));kc();var t=ht(e,0);if(0===(1&t))return ic(e,Ke()),null;var r=yc(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=oc(e,n))}if(1===r)throw r=Bl,pc(e,0),lc(e,t),ic(e,Ke()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,jl,ql),ic(e,Ke()),null}function uc(e,t){var r=Il;Il|=1;try{return e(t)}finally{0===(Il=r)&&(Wl=Ke()+500,Ui&&Vi())}}function dc(e){null!==Xl&&0===Xl.tag&&0===(6&Il)&&kc();var t=Il;Il|=1;var r=El.transition,n=_t;try{if(El.transition=null,_t=1,e)return e()}finally{_t=n,El.transition=r,0===(6&(Il=t))&&Vi()}}function hc(){zl=Ll.current,Ti(Ll)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==Ml)for(r=Ml.return;null!==r;){var n=r;switch(ta(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&zi();break;case 3:io(),Ti(Ii),Ti(Ei),uo();break;case 5:oo(n);break;case 4:io();break;case 13:case 19:Ti(so);break;case 10:wa(n.type._context);break;case 22:case 23:hc()}r=r.return}if(Pl=e,Ml=e=Lc(e.current,null),Dl=zl=t,Rl=0,Bl=null,Ul=Fl=Ol=0,jl=Nl=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(n=(r=Aa[t]).interleaved)){r.interleaved=null;var i=n.next,a=r.pending;if(null!==a){var o=a.next;a.next=i,n.next=o}r.pending=n}Aa=null}return e}function fc(e,t){for(;;){var r=Ml;try{if(xa(),ho.current=os,bo){for(var n=mo.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}bo=!1}if(fo=0,yo=go=mo=null,_o=!1,vo=0,Cl.current=null,null===r||null===r.return){Rl=1,Bl=t,Ml=null;break}e:{var o=e,s=r.return,l=r,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,bs(f,s,l,0,t),1&f.mode&&gs(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gs(o,u,t),gc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bs(y,s,l,0,t),fa(us(c,l));break e}}o=c=us(c,l),4!==Rl&&(Rl=2),null===Nl?Nl=[o]:Nl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,fs(0,c,t));break e;case 1:l=c;var b=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Hl||!Hl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}xc(r)}catch(v){t=v,Ml===r&&null!==r&&(Ml=r=r.return);continue}break}}function mc(){var e=Al.current;return Al.current=os,null===e?os:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Pl||0===(268435455&Ol)&&0===(268435455&Fl)||lc(Pl,Dl)}function yc(e,t){var r=Il;Il|=2;var n=mc();for(Pl===e&&Dl===t||(ql=null,pc(e,t));;)try{bc();break}catch(i){fc(e,i)}if(xa(),Il=r,Al.current=n,null!==Ml)throw Error(a(261));return Pl=null,Dl=0,Rl}function bc(){for(;null!==Ml;)vc(Ml)}function _c(){for(;null!==Ml&&!Xe();)vc(Ml)}function vc(e){var t=Sl(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?xc(e):Ml=t,Cl.current=null}function xc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Zs(r,t,zl)))return void(Ml=r)}else{if(null!==(r=Xs(r,t)))return r.flags&=32767,void(Ml=r);if(null===e)return Rl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,r){var n=_t,i=El.transition;try{El.transition=null,_t=1,function(e,t,r,n){do{kc()}while(null!==Xl);if(0!==(6&Il))throw Error(a(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ot(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}(e,o),e===Pl&&(Ml=Pl=null,Dl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Zl||(Zl=!0,Pc(tt,(function(){return kc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=El.transition,El.transition=null;var s=_t;_t=1;var l=Il;Il|=4,Cl.current=null,function(e,t){if(ei=qt,pn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(x){r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==r||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==n&&3!==h.nodeType||(c=s+n),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++u===i&&(l=s),p===o&&++d===n&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ti={focusedElem:e,selectionRange:r},qt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=t.stateNode,_=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ga(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(a(163))}}catch(x){Tc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=rl,rl=!1}(e,r),yl(r,e),fn(ti),qt=!!ei,ti=ei=null,e.current=r,_l(r,e,i),Ye(),Il=l,_t=s,El.transition=o}else e.current=r;if(Zl&&(Zl=!1,Xl=e,Yl=i),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ic(e,Ke()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=$l,$l=null,e;0!==(1&Yl)&&0!==e.tag&&kc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Kl++:(Kl=0,Jl=e):Kl=0,Vi()}(e,t,r,n)}finally{El.transition=i,_t=n}return null}function kc(){if(null!==Xl){var e=vt(Yl),t=El.transition,r=_t;try{if(El.transition=null,_t=16>e?16:e,null===Xl)var n=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Il))throw Error(a(331));var i=Il;for(Il|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var d=Qs;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Qs=h;else for(;null!==Qs;){var p=(d=Qs).sibling,f=d.return;if(ol(d),d===u){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Qs=b;break e}Qs=o.return}}var _=e.current;for(Qs=_;null!==Qs;){var v=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==v)v.return=s,Qs=v;else e:for(s=_;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Tc(l,l.return,w)}if(l===s){Qs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Qs=x;break e}Qs=l.return}}if(Il=i,Vi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}n=!0}return n}finally{_t=r,El.transition=t}}return!1}function Sc(e,t,r){e=La(e,t=fs(0,t=us(r,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Tc(e,t,r){if(3===e.tag)Sc(e,e,r);else for(;null!==t;){if(3===t.tag){Sc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Hl||!Hl.has(n))){t=La(t,e=ms(t,e=us(r,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ac(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&r,Pl===e&&(Dl&r)===r&&(4===Rl||3===Rl&&(130023424&Dl)===Dl&&500>Ke()-Vl?pc(e,0):Ul|=r),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=tc();null!==(e=Ia(e,t))&&(yt(e,t,r),ic(e,r))}function Ec(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cc(e,r)}function Ic(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t),Cc(e,r)}function Pc(e,t){return He(e,t)}function Mc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,r,n){return new Mc(e,t,r,n)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var r=e.alternate;return null===r?((r=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Rc(e,t,r,n,i,o){var s=2;if(n=e,"function"===typeof e)zc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Bc(r.children,i,o,t);case S:s=8,i|=8;break;case T:return(e=Dc(12,r,t,2|i)).elementType=T,e.lanes=o,e;case I:return(e=Dc(13,r,t,i)).elementType=I,e.lanes=o,e;case P:return(e=Dc(19,r,t,i)).elementType=P,e.lanes=o,e;case z:return Oc(r,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case C:s=9;break e;case E:s=11;break e;case M:s=14;break e;case D:s=16,n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(s,r,t,i)).elementType=e,t.type=n,t.lanes=o,t}function Bc(e,t,r,n){return(e=Dc(7,e,n,t)).lanes=r,e}function Oc(e,t,r,n){return(e=Dc(22,e,n,t)).elementType=z,e.lanes=r,e.stateNode={isHidden:!1},e}function Fc(e,t,r){return(e=Dc(6,e,null,t)).lanes=r,e}function Uc(e,t,r){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nc(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,r,n,i,a,o,s,l){return e=new Nc(e,t,r,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(a),e}function Vc(e){if(!e)return Ci;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(Di(r))return Ri(e,r,t)}return t}function Wc(e,t,r,n,i,a,o,s,l){return(e=jc(r,n,!0,e,0,a,0,s,l)).context=Vc(null),r=e.current,(a=za(n=tc(),i=rc(r))).callback=void 0!==t&&null!==t?t:null,La(r,a,i),e.current.lanes=i,yt(e,i,n),ic(e,n),e}function qc(e,t,r,n){var i=t.current,a=tc(),o=rc(i);return r=Vc(r),null===t.context?t.context=r:t.pendingContext=r,(t=za(a,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=La(i,t,o))&&(nc(e,i,o,a),Ra(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Hc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}Sl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)vs=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return vs=!1,function(e,t,r){switch(t.tag){case 3:Ps(t),pa();break;case 5:ao(t);break;case 1:Di(t.type)&&Bi(t);break;case 4:no(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ai(ya,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ai(so,1&so.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Fs(e,t,r):(Ai(so,1&so.current),null!==(e=Gs(e,t,r))?e.sibling:null);Ai(so,1&so.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Ws(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(so,so.current),n)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,r)}return Gs(e,t,r)}(e,t,r);vs=0!==(131072&e.flags)}else vs=!1,ia&&0!==(1048576&t.flags)&&Qi(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;qs(e,t),e=t.pendingProps;var i=Mi(t,Ei.current);Sa(t,r),i=So(null,t,n,e,i,r);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(n)?(o=!0,Bi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ma(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ga(t,n,e,r),t=Is(null,t,n,!0,o,r)):(t.tag=0,ia&&o&&ea(t),xs(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"===typeof e)return zc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===M)return 14}return 2}(n),e=ga(n,e),i){case 0:t=Cs(null,t,n,e,r);break e;case 1:t=Es(null,t,n,e,r);break e;case 11:t=ws(null,t,n,e,r);break e;case 14:t=ks(null,t,n,ga(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Cs(e,t,n,i=t.elementType===n?i:ga(n,i),r);case 1:return n=t.type,i=t.pendingProps,Es(e,t,n,i=t.elementType===n?i:ga(n,i),r);case 3:e:{if(Ps(t),null===e)throw Error(a(387));n=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Oa(t,n,null,r);var s=t.memoizedState;if(n=s.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ms(e,t,n,r,i=us(Error(a(423)),t));break e}if(n!==i){t=Ms(e,t,n,r,i=us(Error(a(424)),t));break e}for(na=ci(t.stateNode.containerInfo.firstChild),ra=t,ia=!0,aa=null,r=Ka(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pa(),n===i){t=Gs(e,t,r);break e}xs(e,t,n,r)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),n=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ri(n,i)?s=null:null!==o&&ri(n,o)&&(t.flags|=32),As(e,t),xs(e,t,s,r),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,r);case 4:return no(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ya(t,null,n,r):xs(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,ws(e,t,n,i=t.elementType===n?i:ga(n,i),r);case 7:return xs(e,t,t.pendingProps,r),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ai(ya,n._currentValue),n._currentValue=s,null!==o)if(sn(o.value,s)){if(o.children===i.children&&!Ii.current){t=Gs(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===o.tag){(c=za(-1,r&-r)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,null!==(c=o.alternate)&&(c.lanes|=r),ka(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),ka(s,r,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Sa(t,r),n=n(i=Ta(i)),t.flags|=1,xs(e,t,n,r),t.child;case 14:return i=ga(n=t.type,t.pendingProps),ks(e,t,n,i=ga(n.type,i),r);case 15:return Ss(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ga(n,i),qs(e,t),t.tag=1,Di(n)?(e=!0,Bi(t)):e=!1,Sa(t,r),Wa(t,n,i),Ga(t,n,i,r),Is(null,t,n,!0,e,r);case 19:return Ws(e,t,r);case 22:return Ts(e,t,r)}throw Error(a(156,t.tag))};var Zc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function eu(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Gc(o);s.call(e)}}qc(t,o,e,i)}else o=function(e,t,r,n,i){if(i){if("function"===typeof n){var a=n;n=function(){var e=Gc(o);a.call(e)}}var o=Wc(t,n,e,0,null,!1,0,"",Qc);return e._reactRootContainer=o,e[fi]=o.current,Vn(8===e.nodeType?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var s=n;n=function(){var e=Gc(l);s.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fi]=l.current,Vn(8===e.nodeType?e.parentNode:e),dc((function(){qc(t,l,r,n)})),l}(r,t,e,i,n);return Gc(o)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){qc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zt.length&&0!==t&&t<zt[r].priority;r++);zt.splice(r,0,e),0===r&&Ot(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(bt(t,1|r),ic(t,Ke()),0===(6&Il)&&(Wl=Ke()+500,Vi()))}break;case 13:dc((function(){var t=Ia(e,1);if(null!==t){var r=tc();nc(t,e,1,r)}})),Hc(e,1)}},wt=function(e){if(13===e.tag){var t=Ia(e,134217728);if(null!==t)nc(t,e,134217728,tc());Hc(e,134217728)}},kt=function(e){if(13===e.tag){var t=rc(e),r=Ia(e,t);if(null!==r)nc(r,e,t,tc());Hc(e,t)}},St=function(){return _t},Tt=function(e,t){var r=_t;try{return _t=e,t()}finally{_t=r}},we=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=xi(n);if(!i)throw Error(a(90));H(n),J(n,i)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=uc,Ie=dc;var tu={usingClientEntryPoint:!1,Events:[_i,vi,xi,Ae,Ce,uc]},ru={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(nu),at=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(a(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Kc(e))throw Error(a(299));var r=!1,n="",i=Zc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,r,0,n,i),e[fi]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Kc(e))throw Error(a(405));var n=null!=r&&r.hydratedSources||null,i=!1,o="",s=Zc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Wc(t,null,e,1,null!=r?r:null,i,0,o,s),e[fi]=t.current,Vn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Yc(t)},t.render=function(e,t,r){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,r){"use strict";var n=r(164);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},164:function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(463)},77:function(e){var t="undefined"!==typeof Element,r="function"===typeof Map,n="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var s,l,c,u;if(Array.isArray(e)){if((s=e.length)!=o.length)return!1;for(l=s;0!==l--;)if(!a(e[l],o[l]))return!1;return!0}if(r&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!a(l.value[1],o.get(l.value[0])))return!1;return!0}if(n&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((s=e.length)!=o.length)return!1;for(l=s;0!==l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof o.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof o.toString)return e.toString()===o.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=s;0!==l--;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=s;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!a(e[c[l]],o[c[l]]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return a(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}},374:function(e,t,r){"use strict";var n=r(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,a={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function b(){}function _(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var v=_.prototype=new b;v.constructor=_,m(v,y.prototype),v.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:r,type:e,key:o,ref:s,props:a,_owner:k.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return o=o(l=e),e=""===a?"."+E(l,0):a,x(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var u=a+E(s=e[c],c);l+=I(s,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=a+E(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,r){if(null==e)return e;var n=[],i=0;return I(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},z={transition:null},L={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:z,ReactCurrentOwner:k};t.Children={map:P,forEach:function(e,t,r){P(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:r,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=z.transition;z.transition={};try{e()}finally{z.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,r){"use strict";e.exports=r(117)},184:function(e,t,r){"use strict";e.exports=r(374)},813:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<a(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,o=i>>>1;n<o;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,r))c<i&&0>a(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[s]=r,n=s);else{if(!(c<i&&0>a(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=n(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function x(e){if(g=!1,v(e),!m)if(null!==n(c))m=!0,z(w);else{var t=n(u);null!==t&&L(x,t.startTime-e)}}function w(e,r){m=!1,g&&(g=!1,b(A),A=-1),f=!0;var a=p;try{for(v(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?h.callback=s:h===n(c)&&i(c),v(r)}else i(c);h=n(c)}if(null!==h)var l=!0;else{var d=n(u);null!==d&&L(x,d.startTime-r),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,T=null,A=-1,C=5,E=-1;function I(){return!(t.unstable_now()-E<C)}function P(){if(null!==T){var e=t.unstable_now();E=e;var r=!0;try{r=T(!0,e)}finally{r?k():(S=!1,T=null)}}else S=!1}if("function"===typeof _)k=function(){_(P)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,D=M.port2;M.port1.onmessage=P,k=function(){D.postMessage(null)}}else k=function(){y(P,0)};function z(e){T=e,S||(S=!0,k())}function L(e,r){A=y((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,z(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,r(u,e),null===n(c)&&e===n(u)&&(g?(b(A),A=-1):g=!0,L(x,a-o))):(e.sortIndex=s,r(c,e),m||f||(m=!0,z(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},296:function(e,t,r){"use strict";e.exports=r(813)},373:function(e){e.exports=function(){"use strict";var e,t,r;function n(n,i){if(e)if(t){var a="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",o={};e(o),r=i(o),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(r.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=i;else e=i}return n(["exports"],(function(e){var t="undefined"!=typeof self?self:{},r="2.15.0";let n;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==n){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{n=null!={NODE_ENV:"production",PUBLIC_URL:"/marine-crime-map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX:"pk.eyJ1IjoiYWNhcm5hZ2V5IiwiYSI6ImNrZGNpYmZsbzBseXYyeXA5OXo2OXVwcngifQ.GAt6a5pZrIGFHxVL5Q9Lbw"}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"/marine-crime-map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX:"pk.eyJ1IjoiYWNhcm5hZ2V5IiwiYSI6ImNrZGNpYmZsbzBseXYyeXA5OXo2OXVwcngifQ.GAt6a5pZrIGFHxVL5Q9Lbw"}.API_URL_REGEX):e}catch(t){n=e}}return n},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!i.API_URL)return null;try{const e=new URL(i.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},a={supported:!1,testSupport:function(e){!l&&s&&(c?u(e):o=e)}};let o,s,l=!1,c=!1;function u(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s),e.isContextLost())return;a.supported=!0}catch(e){}e.deleteTexture(t),l=!0}t.document&&(s=t.document.createElement("img"),s.onload=function(){o&&u(o),o=null,c=!0},s.onerror=function(){l=!0,o=null},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const d="01";function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var p=f;function f(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}f.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var i=this.sampleCurveX(r)-e;if(Math.abs(i)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r-=i/a}var o=0,s=1;for(r=e,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-e)<t));n++)e>i?o=r:s=r,r=.5*(s-o)+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var m=h(p),g=y;function y(e,t){this.x=e,this.y=t}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=n,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-n*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(e){return e instanceof y?e:Array.isArray(e)?new y(e[0],e[1]):e};var b=h(g);const _=Math.PI/180,v=180/Math.PI;function x(e){return e*_}function w(e){return e*v}const k=[[0,0],[1,0],[1,1],[0,1]];function S(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function T(e,t,r,n){const i=new m(e,t,r,n);return function(e){return i.solve(e)}}const A=T(.25,.1,.25,1);function C(e,t,r){return Math.min(r,Math.max(t,e))}function E(e,t,r){return(r=C((r-e)/(t-e),0,1))*r*(3-2*r)}function I(e,t,r){const n=r-t,i=((e-t)%n+n)%n+t;return i===t?r:i}function P(e,t,r){if(!e.length)return r(null,[]);let n=e.length;const i=new Array(e.length);let a=null;e.forEach(((e,o)=>{t(e,((e,t)=>{e&&(a=e),i[o]=t,0==--n&&r(a,i)}))}))}function M(e){const t=[];for(const r in e)t.push(e[r]);return t}function D(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}let z=1;function L(){return z++}function R(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function B(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function O(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function F(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function U(e,t){return-1!==e.indexOf(t,e.length-t.length)}function N(e,t,r){const n={};for(const i in e)n[i]=t.call(r||this,e[i],i,e);return n}function j(e,t,r){const n={};for(const i in e)t.call(r||this,e[i],i,e)&&(n[i]=e[i]);return n}function V(e){return Array.isArray(e)?e.map(V):"object"==typeof e&&e?N(e,V):e}const W={};function q(e){W[e]||("undefined"!=typeof console&&console.warn(e),W[e]=!0)}function G(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function $(e){let t=0;for(let r,n,i=0,a=e.length,o=a-1;i<a;o=i++)r=e[i],n=e[o],t+=(n.x-r.x)*(r.y+n.y);return t}function H(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Z(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,r,n,i)=>{const a=n||i;return t[r]=!a||a.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let X=null;function Y(e){if(null==X){const t=e.navigator?e.navigator.userAgent:null;X=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return X}function K(e){try{const r=t[e];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function J(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const Q="mapbox-tiles";let ee,te,re=500,ne=50;function ie(){try{return t.caches}catch(e){}}function ae(){ie()&&!ee&&(ee=t.caches.open(Q))}function oe(e){const t=e.indexOf("?");if(t<0)return e;const r=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),n=r.filter((e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return n.length?`${e.slice(0,t)}?${n.join("&")}`:e.slice(0,t)}let se=1/0;const le={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(le);class ce extends Error{constructor(e,t,r){401===t&&ve(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=r}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ue=H()?()=>self.worker&&self.worker.referrer:()=>("blob:"===t.location.protocol?t.parent:t).location.href,de=function(e,r){if(!(/^file:/.test(n=e.url)||/^file:/.test(ue())&&!/^\w+:/.test(n))){if(t.fetch&&t.Request&&t.AbortController&&t.Request.prototype.hasOwnProperty("signal"))return function(e,r){const n=new t.AbortController,i=new t.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ue(),referrerPolicy:e.referrerPolicy,signal:n.signal});let a=!1,o=!1;const s=(l=i.url).indexOf("sku=")>0&&ve(l);var l;"json"===e.type&&i.headers.set("Accept","application/json");const c=(n,a,l)=>{if(o)return;if(n&&"SecurityError"!==n.message&&q(n.toString()),a&&l)return u(a);const c=Date.now();t.fetch(i).then((t=>{if(t.ok){const e=s?t.clone():null;return u(t,e,c)}return r(new ce(t.statusText,t.status,e.url))})).catch((t=>{"AbortError"!==t.name&&r(new Error(`${t.message} ${e.url}`))}))},u=(n,s,l)=>{("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((e=>{o||(s&&l&&function(e,r,n){if(ae(),!ee)return;const i={status:r.status,statusText:r.statusText,headers:new t.Headers};r.headers.forEach(((e,t)=>i.headers.set(t,e)));const a=Z(r.headers.get("Cache-Control")||"");if(a["no-store"])return;a["max-age"]&&i.headers.set("Expires",new Date(n+1e3*a["max-age"]).toUTCString());const o=i.headers.get("Expires");o&&(new Date(o).getTime()-n<42e4||function(e,t){if(void 0===te)try{new Response(new ReadableStream),te=!0}catch(e){te=!1}te?t(e.body):e.blob().then(t)}(r,(r=>{const n=new t.Response(r,i);ae(),ee&&ee.then((t=>t.put(oe(e.url),n))).catch((e=>q(e.message)))})))}(i,s,l),a=!0,r(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((e=>{o||r(new Error(e.message))}))};return s?function(e,t){if(ae(),!ee)return t(null);const r=oe(e.url);ee.then((e=>{e.match(r).then((n=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),r=Z(e.headers.get("Cache-Control")||"");return t>Date.now()&&!r["no-cache"]}(n);e.delete(r),i&&e.put(r,n.clone()),t(null,n,i)})).catch(t)})).catch(t)}(i,c):c(null,null),{cancel:()=>{o=!0,a||n.abort()}}}(e,r);if(H()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,r,void 0,!0)}var n;return function(e,r){const n=new t.XMLHttpRequest;n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer");for(const t in e.headers)n.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=()=>{r(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let t=n.response;if("json"===e.type)try{t=JSON.parse(n.response)}catch(e){return r(e)}r(null,t,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else r(new ce(n.statusText,n.status,e.url))},n.send(e.body),{cancel:()=>n.abort()}}(e,r)},he=function(e,t){return de(D(e,{type:"arrayBuffer"}),t)};function pe(e){const r=t.document.createElement("a");return r.href=e,r.protocol===t.document.location.protocol&&r.host===t.document.location.host}const fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let me,ge;me=[],ge=0;const ye=function(e,r){if(a.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ge>=i.MAX_PARALLEL_IMAGE_REQUESTS){const t={requestParameters:e,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return me.push(t),t}ge++;let n=!1;const o=()=>{if(!n)for(n=!0,ge--;me.length&&ge<i.MAX_PARALLEL_IMAGE_REQUESTS;){const e=me.shift(),{requestParameters:t,callback:r,cancelled:n}=e;n||(e.cancel=ye(t,r).cancel)}},s=he(e,((e,n,i,a)=>{o(),e?r(e):n&&(t.createImageBitmap?function(e,r){const n=new t.Blob([new Uint8Array(e)],{type:"image/png"});t.createImageBitmap(n).then((e=>{r(null,e)})).catch((e=>{r(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(n,((e,t)=>r(e,t,i,a))):function(e,r){const n=new t.Image,i=t.URL;n.onload=()=>{r(null,n),i.revokeObjectURL(n.src),n.onload=null,t.requestAnimationFrame((()=>{n.src=fe}))},n.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const a=new t.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?i.createObjectURL(a):fe}(n,((e,t)=>r(e,t,i,a))))}));return{cancel:()=>{s.cancel(),o()}}},be="NO_ACCESS_TOKEN";function _e(e){return 0===e.indexOf("mapbox:")}function ve(e){return i.API_URL_REGEX.test(e)}function xe(e){return i.API_CDN_URL_REGEX.test(e)}function we(e){return i.API_STYLE_REGEX.test(e)&&!ke(e)}function ke(e){return i.API_SPRITE_REGEX.test(e)}const Se=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Te(e){const t=e.match(Se);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Ae(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}const Ce="mapbox.eventData";function Ee(e){if(!e)return null;const r=e.split(".");if(!r||3!==r.length)return null;try{return JSON.parse(decodeURIComponent(t.atob(r[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class Ie{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=Ee(i.ACCESS_TOKEN);let n="";return n=r&&r.u?t.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):i.ACCESS_TOKEN||"",e?`${Ce}.${e}:${n}`:`${Ce}:${n}`}fetchEventData(){const e=K("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{const e=t.localStorage.getItem(r);e&&(this.eventData=JSON.parse(e));const i=t.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){q("Unable to read from LocalStorage")}}saveEventData(){const e=K("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{t.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&t.localStorage.setItem(r,JSON.stringify(this.eventData))}catch(e){q("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,r,n){if(!i.EVENTS_URL)return;const a=Te(i.EVENTS_URL);a.params.push(`access_token=${n||i.ACCESS_TOKEN||""}`);const o={event:this.type,created:new Date(e).toISOString()},s=t?D(o,t):o,l={url:Ae(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return de(D(e,{method:"POST"}),t)}(l,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Pe=new class extends Ie{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>_e(e)||ve(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Ee(i.ACCESS_TOKEN),n=t?t.u:i.ACCESS_TOKEN;let a=n!==this.eventData.tokenU;O(this.anonId)||(this.anonId=R(),a=!0);const o=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(o),r=(o-this.eventData.lastSuccess)/864e5;a=a||r>=1||r<-1||e.getDate()!==t.getDate()}else a=!0;a?this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:d,"enabled.telemetry":!1,userId:this.anonId},(e=>{e||(this.eventData.lastSuccess=o,this.eventData.tokenU=n)}),e):this.processRequests()}},Me=Pe.postTurnstileEvent.bind(Pe),De=new class extends Ie{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,r,n){this.skuToken=t,this.errorCb=n,i.EVENTS_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(be)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),O(this.anonId)||(this.anonId=R()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:d,skuToken:this.skuToken,userId:this.anonId},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},ze=De.postMapLoadEvent.bind(De),Le=new class extends Ie{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){i.EVENTS_URL&&(e||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:n,performanceData:i}=this.queue.shift(),a=function(e){const n=t.performance.getEntriesByType("resource"),i=t.performance.getEntriesByType("mark"),a=function(e){const t={};if(e)for(const r in e)if("other"!==r)for(const n of e[r]){const e=`${r}ResolveRangeMin`,i=`${r}ResolveRangeMax`,a=`${r}RequestCount`,o=`${r}RequestCachedCount`;t[e]=Math.min(t[e]||1/0,n.startTime),t[i]=Math.max(t[i]||-1/0,n.responseEnd);const s=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==n.transferSize&&0===n.transferSize&&s(o),s(a)}return t}(function(e,t){const r={};if(e)for(const n of e){const e=t(n);void 0===r[e]&&(r[e]=[]),r[e].push(n)}return r}(n,je)),o=t.devicePixelRatio,s=t.navigator.connection||t.navigator.mozConnection||t.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(e,t,r)=>{null!=r&&e.push({name:t,value:r.toString()})};for(const t in a)c(l.counters,t,a[t]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",e.interactionRange[0]),c(l.counters,"interactionRangeMax",e.interactionRange[1])),i)for(const t of Object.keys(Ue)){const e=Ue[t],r=i.find((t=>t.name===e));r&&c(l.counters,e,r.startTime)}return c(l.counters,"visibilityHidden",e.visibilityHidden),c(l.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(we(e)){const t=e.split("/").slice(-2);if(2===t.length)return`mapbox://styles/${t[0]}/${t[1]}`}}}(n)),c(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),c(l.attributes,"projection",e.projection),c(l.attributes,"zoom",e.zoom),c(l.metadata,"devicePixelRatio",o),c(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",t.navigator.userAgent),c(l.metadata,"screenWidth",t.screen.width),c(l.metadata,"screenHeight",t.screen.height),c(l.metadata,"windowWidth",t.innerWidth),c(l.metadata,"windowHeight",t.innerHeight),c(l.metadata,"mapWidth",e.width/o),c(l.metadata,"mapHeight",e.height/o),c(l.metadata,"webglRenderer",e.renderer),c(l.metadata,"webglVendor",e.vendor),c(l.metadata,"sdkVersion",r),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(const t of a.metadata);for(const t of a.counters);for(const t of a.attributes);this.postEvent(n,a,(()=>{}),e)}},Re=Le.postPerformanceEvent.bind(Le),Be=new class extends Ie{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,r,n){if(!i.API_URL||!i.SESSION_PATH)return;const a=Te(i.API_URL+i.SESSION_PATH);a.params.push(`sku=${t||""}`),a.params.push(`access_token=${n||i.ACCESS_TOKEN||""}`);const o={url:Ae(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return de(D(e,{method:"GET"}),t)}(o,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)}))}getSessionAPI(e,t,r,n){this.skuToken=t,this.errorCb=n,i.SESSION_PATH&&i.API_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(be)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||this.getSession(r,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},Oe=Be.getSessionAPI.bind(Be),Fe=new Set,Ue={create:"create",load:"load",fullLoad:"fullLoad"},Ne={mark(e){t.performance.mark(e)},measure(e,r,n){t.performance.measure(e,r,n)}};function je(e){const t=e.name.split("?")[0];return xe(t)&&t.includes("mapbox-gl.js")?"javascript":xe(t)&&t.includes("mapbox-gl.css")?"css":function(e){return i.API_FONTS_REGEX.test(e)}(t)?"fontRange":ke(t)?"sprite":we(t)?"style":function(e){return i.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const Ve=t.performance;function We(e){const t=e?e.url.toString():void 0;return Ve.getEntriesByName(t)}let qe,Ge,$e,He;const Ze={now:()=>void 0!==$e?$e:t.performance.now(),setNow(e){$e=e},restoreNow(){$e=void 0},frame(e){const r=t.requestAnimationFrame(e);return{cancel:()=>t.cancelAnimationFrame(r)}},getImageData(e,r=0){const{width:n,height:i}=e;He||(He=t.document.createElement("canvas"));const a=He.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return(n>He.width||i>He.height)&&(He.width=n,He.height=i),a.clearRect(-r,-r,n+2*r,i+2*r),a.drawImage(e,0,0,n,i),a.getImageData(-r,-r,n+2*r,i+2*r)},resolveURL:e=>(qe||(qe=t.document.createElement("a")),qe.href=e,qe.href),get devicePixelRatio(){return t.devicePixelRatio},get prefersReducedMotion(){return!!t.matchMedia&&(null==Ge&&(Ge=t.matchMedia("(prefers-reduced-motion: reduce)")),Ge.matches)}};function Xe(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function Ye(e,t,r){if(r&&r[e]){const n=r[e].indexOf(t);-1!==n&&r[e].splice(n,1)}}class Ke{constructor(e,t={}){D(this,t),this.type=e}}class Je extends Ke{constructor(e,t={}){super("error",D({error:e},t))}}class Qe{on(e,t){return this._listeners=this._listeners||{},Xe(e,t,this._listeners),this}off(e,t){return Ye(e,t,this._listeners),Ye(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Xe(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new Ke(e,t||{}));const r=e.type;if(this.listens(r)){e.target=this;const t=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of t)r.call(this,e);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const a of n)Ye(r,a,this._oneTimeListeners),a.call(this,e);const i=this._eventedParent;i&&(D(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof Je&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var et=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function tt(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}function rt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function nt(e){if(Array.isArray(e))return e.map(nt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=nt(e[r]);return t}return rt(e)}class it extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var at=it;class ot{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,n]of t)this.bindings[r]=n}concat(e){return new ot(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var st=ot;const lt={kind:"null"},ct={kind:"number"},ut={kind:"string"},dt={kind:"boolean"},ht={kind:"color"},pt={kind:"object"},ft={kind:"value"},mt={kind:"collator"},gt={kind:"formatted"},yt={kind:"resolvedImage"};function bt(e,t){return{kind:"array",itemType:e,N:t}}function _t(e){if("array"===e.kind){const t=_t(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const vt=[lt,ct,ut,dt,ht,gt,pt,bt(ft),yt];function xt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!xt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of vt)if(!xt(e,t))return null}return`Expected ${_t(e)} but found ${_t(t)} instead.`}function wt(e,t){return t.some((t=>t.kind===e.kind))}function kt(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var St,Tt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function At(e){return(e=Math.round(e))<0?0:e>255?255:e}function Ct(e){return At("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Et(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function It(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{St={}.parseCSSColor=function(e){var t,r=e.replace(/ /g,"").toLowerCase();if(r in Tt)return Tt[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var n=r.indexOf("("),i=r.indexOf(")");if(-1!==n&&i+1===r.length){var a=r.substr(0,n),o=r.substr(n+1,i-(n+1)).split(","),s=1;switch(a){case"rgba":if(4!==o.length)return null;s=Et(o.pop());case"rgb":return 3!==o.length?null:[Ct(o[0]),Ct(o[1]),Ct(o[2]),s];case"hsla":if(4!==o.length)return null;s=Et(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,c=Et(o[1]),u=Et(o[2]),d=u<=.5?u*(c+1):u+c-u*c,h=2*u-d;return[At(255*It(h,d,l+1/3)),At(255*It(h,d,l)),At(255*It(h,d,l-1/3)),s];default:return null}}return null}}catch(e){}class Pt{constructor(e,t,r,n=1){this.r=e,this.g=t,this.b=r,this.a=n}static parse(e){if(!e)return;if(e instanceof Pt)return e;if("string"!=typeof e)return;const t=St(e);return t?new Pt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,r,n]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(r)},${n})`}toArray(){const{r:e,g:t,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*r/n,n]}toArray01(){const{r:e,g:t,b:r,a:n}=this;return 0===n?[0,0,0,0]:[e/n,t/n,r/n,n]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:r,a:n}=this;return[e,t,r,n]}}Pt.black=new Pt(0,0,0,1),Pt.white=new Pt(1,1,1,1),Pt.transparent=new Pt(0,0,0,0),Pt.red=new Pt(1,0,0,1),Pt.blue=new Pt(0,0,1,1);var Mt=Pt;class Dt{constructor(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class zt{constructor(e,t,r,n,i){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=n,this.textColor=i}}class Lt{constructor(e){this.sections=e}static fromString(e){return new Lt([new zt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Lt?e:Lt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class Rt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Rt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Bt(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ot(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Mt)return!0;if(e instanceof Dt)return!0;if(e instanceof Lt)return!0;if(e instanceof Rt)return!0;if(Array.isArray(e)){for(const t of e)if(!Ot(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Ot(e[t]))return!1;return!0}return!1}function Ft(e){if(null===e)return lt;if("string"==typeof e)return ut;if("boolean"==typeof e)return dt;if("number"==typeof e)return ct;if(e instanceof Mt)return ht;if(e instanceof Dt)return mt;if(e instanceof Lt)return gt;if(e instanceof Rt)return yt;if(Array.isArray(e)){const t=e.length;let r;for(const n of e){const e=Ft(n);if(r){if(r===e)continue;r=ft;break}r=e}return bt(r||ft,t)}return pt}function Ut(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Mt||e instanceof Lt||e instanceof Rt?e.toString():JSON.stringify(e)}class Nt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ot(e[1]))return t.error("invalid value");const r=e[1];let n=Ft(r);const i=t.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new Nt(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Mt?["rgba"].concat(this.value.toArray()):this.value instanceof Lt?this.value.serialize():this.value}}var jt=Nt,Vt=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const Wt={string:ut,number:ct,boolean:dt,object:pt};class qt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r,n=1;const i=e[0];if("array"===i){let i,a;if(e.length>2){const r=e[1];if("string"!=typeof r||!(r in Wt)||"object"===r)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=Wt[r],n++}else i=ft;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],n++}r=bt(i,a)}else r=Wt[i];const a=[];for(;n<e.length;n++){const r=t.parse(e[n],n,ft);if(!r)return null;a.push(r)}return new qt(r,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(!xt(this.type,Ft(r)))return r;if(t===this.args.length-1)throw new Vt(`Expected value to be of type ${_t(this.type)}, but found ${_t(Ft(r))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);const n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map((e=>e.serialize())))}}var Gt=qt;class $t{constructor(e){this.type=gt,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");const n=[];let i=!1;for(let a=1;a<=e.length-1;++a){const r=e[a];if(i&&"object"==typeof r&&!Array.isArray(r)){i=!1;let e=null;if(r["font-scale"]&&(e=t.parse(r["font-scale"],1,ct),!e))return null;let a=null;if(r["text-font"]&&(a=t.parse(r["text-font"],1,bt(ut)),!a))return null;let o=null;if(r["text-color"]&&(o=t.parse(r["text-color"],1,ht),!o))return null;const s=n[n.length-1];s.scale=e,s.font=a,s.textColor=o}else{const r=t.parse(e[a],1,ft);if(!r)return null;const o=r.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:r,scale:null,font:null,textColor:null})}}return new $t(n)}evaluate(e){return new Lt(this.sections.map((t=>{const r=t.content.evaluate(e);return Ft(r)===yt?new zt("",r,null,null,null):new zt(Ut(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class Ht{constructor(e){this.type=yt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ut);return r?new Ht(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Rt.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Zt={"to-boolean":dt,"to-color":ht,"to-number":ct,"to-string":ut};class Xt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");const n=Zt[r],i=[];for(let a=1;a<e.length;a++){const r=t.parse(e[a],a,ft);if(!r)return null;i.push(r)}return new Xt(n,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,r;for(const n of this.args){if(t=n.evaluate(e),r=null,t instanceof Mt)return t;if("string"==typeof t){const r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&(r=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Bt(t[0],t[1],t[2],t[3]),!r))return new Mt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Vt(r||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const r of this.args){if(t=r.evaluate(e),null===t)return 0;const n=Number(t);if(!isNaN(n))return n}throw new Vt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Lt.fromString(Ut(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Rt.fromString(Ut(this.args[0].evaluate(e))):Ut(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new $t([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ht(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Yt=Xt;const Kt=["Unknown","Point","LineString","Polygon"];var Jt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Kt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*t-e[0])+this.featureDistanceData.bearing[1]*(n*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Mt.parse(e)),t}};class Qt{constructor(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const r=e[0],n=Qt.definitions[r];if(!n)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,o=a.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[l,c]of o){s=new Ar(t.registry,t.path,null,t.scope);const n=[];let a=!1;for(let t=1;t<e.length;t++){const r=e[t],i=Array.isArray(l)?l[t-1]:l.type,o=s.parse(r,1+n.length,i);if(!o){a=!0;break}n.push(o)}if(!a)if(Array.isArray(l)&&l.length!==n.length)s.error(`Expected ${l.length} arguments, but found ${n.length} instead.`);else{for(let e=0;e<n.length;e++){const t=Array.isArray(l)?l[e]:l.type,r=n[e];s.concat(e+1).checkSubtype(t,r.type)}if(0===s.errors.length)return new Qt(r,i,c,n)}}if(1===o.length)t.errors.push(...s.errors);else{const r=(o.length?o:a).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(_t).join(", ")})`:`(${_t(t.type)}...)`;var t})).join(" | "),n=[];for(let i=1;i<e.length;i++){const r=t.parse(e[i],1+n.length);if(!r)return null;n.push(_t(r.type))}t.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(e,t){Qt.definitions=t;for(const r in t)e[r]=Qt}}var er=Qt;class tr{constructor(e,t,r){this.type=mt,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");const n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,dt);if(!n)return null;const i=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,dt);if(!i)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,ut),!a)?null:new tr(n,i,a)}evaluate(e){return new Dt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const rr=8192;function nr(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ir(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function ar(e,t){const r=(180+e[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(r*i*rr),Math.round(n*i*rr)]}function or(e,t,r){const n=e[0]-t[0],i=e[1]-t[1],a=e[0]-r[0],o=e[1]-r[1];return n*o-a*i==0&&n*a<=0&&i*o<=0}function sr(e,t){let r=!1;for(let o=0,s=t.length;o<s;o++){const s=t[o];for(let t=0,o=s.length;t<o-1;t++){if(or(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(n=e)[1]!=(a=s[t+1])[1]>n[1]&&n[0]<(a[0]-i[0])*(n[1]-i[1])/(a[1]-i[1])+i[0]&&(r=!r)}}var n,i,a;return r}function lr(e,t){for(let r=0;r<t.length;r++)if(sr(e,t[r]))return!0;return!1}function cr(e,t,r,n){const i=n[0]-r[0],a=n[1]-r[1],o=(e[0]-r[0])*a-i*(e[1]-r[1]),s=(t[0]-r[0])*a-i*(t[1]-r[1]);return o>0&&s<0||o<0&&s>0}function ur(e,t,r){for(const c of r)for(let r=0;r<c.length-1;++r)if(0!=(s=[(o=c[r+1])[0]-(a=c[r])[0],o[1]-a[1]])[0]*(l=[(i=t)[0]-(n=e)[0],i[1]-n[1]])[1]-s[1]*l[0]&&cr(n,i,a,o)&&cr(a,o,n,i))return!0;var n,i,a,o,s,l;return!1}function dr(e,t){for(let r=0;r<e.length;++r)if(!sr(e[r],t))return!1;for(let r=0;r<e.length-1;++r)if(ur(e[r],e[r+1],t))return!1;return!0}function hr(e,t){for(let r=0;r<t.length;r++)if(dr(e,t[r]))return!0;return!1}function pr(e,t,r){const n=[];for(let i=0;i<e.length;i++){const a=[];for(let n=0;n<e[i].length;n++){const o=ar(e[i][n],r);nr(t,o),a.push(o)}n.push(a)}return n}function fr(e,t,r){const n=[];for(let i=0;i<e.length;i++){const a=pr(e[i],t,r);n.push(a)}return n}function mr(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){const t=.5*n;let i=e[0]-r[0]>t?-n:r[0]-e[0]>t?n:0;0===i&&(i=e[0]-r[2]>t?-n:r[2]-e[0]>t?n:0),e[0]+=i}nr(t,e)}function gr(e,t,r,n){const i=Math.pow(2,n.z)*rr,a=[n.x*rr,n.y*rr],o=[];if(!e)return o;for(const s of e)for(const e of s){const n=[e.x+a[0],e.y+a[1]];mr(n,t,r,i),o.push(n)}return o}function yr(e,t,r,n){const i=Math.pow(2,n.z)*rr,a=[n.x*rr,n.y*rr],o=[];if(!e)return o;for(const l of e){const e=[];for(const r of l){const n=[r.x+a[0],r.y+a[1]];nr(t,n),e.push(n)}o.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of o)for(const n of e)mr(n,t,r,i)}var s;return o}class br{constructor(e,t){this.type=dt,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ot(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const r=t.features[e].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new br(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new br(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new br(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const a=pr(t.coordinates,n,i),o=gr(e.geometry(),r,n,i);if(!ir(r,n))return!1;for(const e of o)if(!sr(e,a))return!1}if("MultiPolygon"===t.type){const a=fr(t.coordinates,n,i),o=gr(e.geometry(),r,n,i);if(!ir(r,n))return!1;for(const e of o)if(!lr(e,a))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const a=pr(t.coordinates,n,i),o=yr(e.geometry(),r,n,i);if(!ir(r,n))return!1;for(const e of o)if(!dr(e,a))return!1}if("MultiPolygon"===t.type){const a=fr(t.coordinates,n,i),o=yr(e.geometry(),r,n,i);if(!ir(r,n))return!1;for(const e of o)if(!hr(e,a))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var _r=br;function vr(e){if(e instanceof er){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof _r)return!1;let t=!0;return e.eachChild((e=>{t&&!vr(e)&&(t=!1)})),t}function xr(e){if(e instanceof er&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!xr(e)&&(t=!1)})),t}function wr(e,t){if(e instanceof er&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild((e=>{r&&!wr(e,t)&&(r=!1)})),r}class kr{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new kr(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Sr=kr;class Tr{constructor(e,t=[],r,n=new st,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=n,this.errors=i,this.expectedType=r}parse(e,t,r,n,i={}){return t?this.concat(t,r,n)._parse(e,i):this._parse(e,i)}_parse(e,t){function r(e,t,r){return"assert"===r?new Gt(t,[e]):"coerce"===r?new Yt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(e,this);if(!n)return null;if(this.expectedType){const e=this.expectedType,i=n.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else n=r(n,e,t.typeAnnotation||"coerce");else n=r(n,e,t.typeAnnotation||"assert")}if(!(n instanceof jt)&&"resolvedImage"!==n.type.kind&&Cr(n)){const t=new Jt;try{n=new jt(n.type,n.evaluate(t))}catch(e){return this.error(e.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const n="number"==typeof e?this.path.concat(e):this.path,i=r?this.scope.concat(r):this.scope;return new Tr(this.registry,n,t||null,i,this.errors)}error(e,...t){const r=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new at(r,e))}checkSubtype(e,t){const r=xt(e,t);return r&&this.error(r),r}}var Ar=Tr;function Cr(e){if(e instanceof Sr)return Cr(e.boundExpression);if(e instanceof er&&"error"===e.name)return!1;if(e instanceof tr)return!1;if(e instanceof _r)return!1;const t=e instanceof Yt||e instanceof Gt;let r=!0;return e.eachChild((e=>{r=t?r&&Cr(e):r&&e instanceof jt})),!!r&&vr(e)&&wr(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Er(e,t){const r=e.length-1;let n,i,a=0,o=r,s=0;for(;a<=o;)if(s=Math.floor((a+o)/2),n=e[s],i=e[s+1],n<=t){if(s===r||t<i)return s;a=s+1}else{if(!(n>t))throw new Vt("Input is not a number.");o=s-1}return 0}class Ir{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[n,i]of r)this.labels.push(n),this.outputs.push(i)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,ct);if(!r)return null;const n=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let a=1;a<e.length;a+=2){const r=1===a?-1/0:e[a],o=e[a+1],s=a,l=a+1;if("number"!=typeof r)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=r)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(o,l,i);if(!c)return null;i=i||c.type,n.push([r,c])}return new Ir(i,r,n)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const i=t.length;return n>=t[i-1]?r[i-1].evaluate(e):r[Er(t,n)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Pr=Ir;function Mr(e,t,r){return e*(1-r)+t*r}var Dr=Object.freeze({__proto__:null,array:function(e,t,r){return e.map(((e,n)=>Mr(e,t[n],r)))},color:function(e,t,r){return new Mt(Mr(e.r,t.r,r),Mr(e.g,t.g,r),Mr(e.b,t.b,r),Mr(e.a,t.a,r))},number:Mr});const zr=.95047,Lr=1.08883,Rr=4/29,Br=6/29,Or=3*Br*Br,Fr=Br*Br*Br,Ur=Math.PI/180,Nr=180/Math.PI;function jr(e){return e>Fr?Math.pow(e,1/3):e/Or+Rr}function Vr(e){return e>Br?e*e*e:Or*(e-Rr)}function Wr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function qr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Gr(e){const t=qr(e.r),r=qr(e.g),n=qr(e.b),i=jr((.4124564*t+.3575761*r+.1804375*n)/zr),a=jr((.2126729*t+.7151522*r+.072175*n)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-jr((.0193339*t+.119192*r+.9503041*n)/Lr)),alpha:e.a}}function $r(e){let t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=1*Vr(t),r=zr*Vr(r),n=Lr*Vr(n),new Mt(Wr(3.2404542*r-1.5371385*t-.4985314*n),Wr(-.969266*r+1.8760108*t+.041556*n),Wr(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function Hr(e,t,r){const n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const Zr={forward:Gr,reverse:$r,interpolate:function(e,t,r){return{l:Mr(e.l,t.l,r),a:Mr(e.a,t.a,r),b:Mr(e.b,t.b,r),alpha:Mr(e.alpha,t.alpha,r)}}},Xr={forward:function(e){const{l:t,a:r,b:n}=Gr(e),i=Math.atan2(n,r)*Nr;return{h:i<0?i+360:i,c:Math.sqrt(r*r+n*n),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Ur,r=e.c;return $r({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:Hr(e.h,t.h,r),c:Mr(e.c,t.c,r),l:Mr(e.l,t.l,r),alpha:Mr(e.alpha,t.alpha,r)}}};var Yr=Object.freeze({__proto__:null,hcl:Xr,lab:Zr});class Kr{constructor(e,t,r,n,i){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[a,o]of i)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,r,n){let i=0;if("exponential"===e.name)i=Jr(t,e.base,r,n);else if("linear"===e.name)i=Jr(t,1,r,n);else if("cubic-bezier"===e.name){const a=e.controlPoints;i=new m(a[0],a[1],a[2],a[3]).solve(Jr(t,1,r,n))}return i}static parse(e,t){let[r,n,i,...a]=e;if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const e=n[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:e}}else{if("cubic-bezier"!==n[0])return t.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const e=n.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,ct),!i)return null;const o=[];let s=null;"interpolate-hcl"===r||"interpolate-lab"===r?s=ht:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<a.length;l+=2){const e=a[l],r=a[l+1],n=l+3,i=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(o.length&&o[o.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);const c=t.parse(r,i,s);if(!c)return null;s=s||c.type,o.push([e,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Kr(s,r,n,i,o):t.error(`Type ${_t(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const i=t.length;if(n>=t[i-1])return r[i-1].evaluate(e);const a=Er(t,n),o=Kr.interpolationFactor(this.interpolation,n,t[a],t[a+1]),s=r[a].evaluate(e),l=r[a+1].evaluate(e);return"interpolate"===this.operator?Dr[this.type.kind.toLowerCase()](s,l,o):"interpolate-hcl"===this.operator?Xr.reverse(Xr.interpolate(Xr.forward(s),Xr.forward(l),o)):Zr.reverse(Zr.interpolate(Zr.forward(s),Zr.forward(l),o))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t}}function Jr(e,t,r,n){const i=n-r,a=e-r;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}var Qr=Kr;class en{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const n=t.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const o of e.slice(1)){const e=t.parse(o,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,i.push(e)}const a=n&&i.some((e=>xt(n,e.type)));return new en(a?ft:r,i)}evaluate(e){let t,r=null,n=0;for(const i of this.args){if(n++,r=i.evaluate(e),r&&r instanceof Rt&&!r.available&&(t||(t=r),r=null,n===this.args.length))return t;if(null!==r)break}return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var tn=en;class rn{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let i=1;i<e.length-1;i+=2){const n=e[i];if("string"!=typeof n)return t.error(`Expected string, but found ${typeof n} instead.`,i);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const a=t.parse(e[i+1],i+1);if(!a)return null;r.push([n,a])}const n=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return n?new rn(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}var nn=rn;class an{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ct),n=t.parse(e[2],2,bt(t.expectedType||ft));return r&&n?new an(n.type.itemType,r,n):null}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Vt(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new Vt(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new Vt(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var on=an;class sn{constructor(e,t){this.type=dt,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ft),n=t.parse(e[2],2,ft);return r&&n?wt(r.type,[dt,ut,ct,lt,ft])?new sn(r,n):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_t(r.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(null==r)return!1;if(!kt(t,["boolean","string","number","null"]))throw new Vt(`Expected first argument to be of type boolean, string, number or null, but found ${_t(Ft(t))} instead.`);if(!kt(r,["string","array"]))throw new Vt(`Expected second argument to be of type array or string, but found ${_t(Ft(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ln=sn;class cn{constructor(e,t,r){this.type=ct,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ft),n=t.parse(e[2],2,ft);if(!r||!n)return null;if(!wt(r.type,[dt,ut,ct,lt,ft]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_t(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ct);return i?new cn(r,n,i):null}return new cn(r,n)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!kt(t,["boolean","string","number","null"]))throw new Vt(`Expected first argument to be of type boolean, string, number or null, but found ${_t(Ft(t))} instead.`);if(!kt(r,["string","array"]))throw new Vt(`Expected second argument to be of type array or string, but found ${_t(Ft(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(e);return r.indexOf(t,n)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var un=cn;class dn{constructor(e,t,r,n,i,a){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=i,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const i={},a=[];for(let l=2;l<e.length-1;l+=2){let o=e[l];const s=e[l+1];Array.isArray(o)||(o=[o]);const c=t.concat(l);if(0===o.length)return c.error("Expected at least one branch label.");for(const e of o){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Ft(e)))return null}else r=Ft(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=a.length}const u=t.parse(s,l,n);if(!u)return null;n=n||u.type,a.push(u)}const o=t.parse(e[1],1,ft);if(!o)return null;const s=t.parse(e[e.length-1],e.length-1,n);return s?"value"!==o.type.kind&&t.concat(1).checkSubtype(r,o.type)?null:new dn(r,n,o,i,a,s):null}evaluate(e){const t=this.input.evaluate(e);return(Ft(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],n={};for(const a of t){const e=n[this.cases[a]];void 0===e?(n[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[e][1].push(a)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[a,o]of r)e.push(1===o.length?i(o[0]):o.map(i)),e.push(this.outputs[a].serialize());return e.push(this.otherwise.serialize()),e}}var hn=dn;class pn{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const n=[];for(let a=1;a<e.length-1;a+=2){const i=t.parse(e[a],a,dt);if(!i)return null;const o=t.parse(e[a+1],a+1,r);if(!o)return null;n.push([i,o]),r=r||o.type}const i=t.parse(e[e.length-1],e.length-1,r);return i?new pn(r,n,i):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var fn=pn;class mn{constructor(e,t,r,n){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ft),n=t.parse(e[2],2,ct);if(!r||!n)return null;if(!wt(r.type,[bt(ft),ut,ft]))return t.error(`Expected first argument to be of type array or string, but found ${_t(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ct);return i?new mn(r.type,r,n,i):null}return new mn(r.type,r,n)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!kt(t,["string","array"]))throw new Vt(`Expected first argument to be of type array or string, but found ${_t(Ft(t))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(e);return t.slice(r,n)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var gn=mn;function yn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function bn(e,t,r,n){return 0===n.compare(t,r)}function _n(e,t,r){const n="=="!==e&&"!="!==e;return class i{constructor(e,t,r){this.type=dt,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const r=e[0];let a=t.parse(e[1],1,ft);if(!a)return null;if(!yn(r,a.type))return t.concat(1).error(`"${r}" comparisons are not supported for type '${_t(a.type)}'.`);let o=t.parse(e[2],2,ft);if(!o)return null;if(!yn(r,o.type))return t.concat(2).error(`"${r}" comparisons are not supported for type '${_t(o.type)}'.`);if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error(`Cannot compare types '${_t(a.type)}' and '${_t(o.type)}'.`);n&&("value"===a.type.kind&&"value"!==o.type.kind?a=new Gt(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new Gt(a.type,[o])));let s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,mt),!s)return null}return new i(a,o,s)}evaluate(i){const a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const t=Ft(a),r=Ft(o);if(t.kind!==r.kind||"string"!==t.kind&&"number"!==t.kind)throw new Vt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const e=Ft(a),r=Ft(o);if("string"!==e.kind||"string"!==r.kind)return t(i,a,o)}return this.collator?r(i,a,o,this.collator.evaluate(i)):t(i,a,o)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const vn=_n("==",(function(e,t,r){return t===r}),bn),xn=_n("!=",(function(e,t,r){return t!==r}),(function(e,t,r,n){return!bn(0,t,r,n)})),wn=_n("<",(function(e,t,r){return t<r}),(function(e,t,r,n){return n.compare(t,r)<0})),kn=_n(">",(function(e,t,r){return t>r}),(function(e,t,r,n){return n.compare(t,r)>0})),Sn=_n("<=",(function(e,t,r){return t<=r}),(function(e,t,r,n){return n.compare(t,r)<=0})),Tn=_n(">=",(function(e,t,r){return t>=r}),(function(e,t,r,n){return n.compare(t,r)>=0}));class An{constructor(e,t,r,n,i,a){this.type=ut,this.number=e,this.locale=t,this.currency=r,this.unit=n,this.minFractionDigits=i,this.maxFractionDigits=a}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ct);if(!r)return null;const n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&(i=t.parse(n.locale,1,ut),!i))return null;let a=null;if(n.currency&&(a=t.parse(n.currency,1,ut),!a))return null;let o=null;if(n.unit&&(o=t.parse(n.unit,1,ut),!o))return null;let s=null;if(n["min-fraction-digits"]&&(s=t.parse(n["min-fraction-digits"],1,ct),!s))return null;let l=null;return n["max-fraction-digits"]&&(l=t.parse(n["max-fraction-digits"],1,ct),!l)?null:new An(r,i,a,o,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Cn{constructor(e){this.type=ct,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error(`Expected argument of type string or array, but found ${_t(r.type)} instead.`):new Cn(r):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Vt(`Expected value to be of type string or array, but found ${_t(Ft(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const En={"==":vn,"!=":xn,">":kn,"<":wn,">=":Tn,"<=":Sn,array:Gt,at:on,boolean:Gt,case:fn,coalesce:tn,collator:tr,format:$t,image:Ht,in:ln,"index-of":un,interpolate:Qr,"interpolate-hcl":Qr,"interpolate-lab":Qr,length:Cn,let:nn,literal:jt,match:hn,number:Gt,"number-format":An,object:Gt,slice:gn,step:Pr,string:Gt,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:Sr,within:_r};function In(e,[t,r,n,i]){t=t.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);const a=i?i.evaluate(e):1,o=Bt(t,r,n,a);if(o)throw new Vt(o);return new Mt(t/255*a,r/255*a,n/255*a,a)}function Pn(e,t){return e in t}function Mn(e,t){const r=t[e];return void 0===r?null:r}function Dn(e){return{type:e}}er.register(En,{error:[{kind:"error"},[ut],(e,[t])=>{throw new Vt(t.evaluate(e))}],typeof:[ut,[ft],(e,[t])=>_t(Ft(t.evaluate(e)))],"to-rgba":[bt(ct,4),[ht],(e,[t])=>t.evaluate(e).toArray()],rgb:[ht,[ct,ct,ct],In],rgba:[ht,[ct,ct,ct,ct],In],has:{type:dt,overloads:[[[ut],(e,[t])=>Pn(t.evaluate(e),e.properties())],[[ut,pt],(e,[t,r])=>Pn(t.evaluate(e),r.evaluate(e))]]},get:{type:ft,overloads:[[[ut],(e,[t])=>Mn(t.evaluate(e),e.properties())],[[ut,pt],(e,[t,r])=>Mn(t.evaluate(e),r.evaluate(e))]]},"feature-state":[ft,[ut],(e,[t])=>Mn(t.evaluate(e),e.featureState||{})],properties:[pt,[],e=>e.properties()],"geometry-type":[ut,[],e=>e.geometryType()],id:[ft,[],e=>e.id()],zoom:[ct,[],e=>e.globals.zoom],pitch:[ct,[],e=>e.globals.pitch||0],"distance-from-center":[ct,[],e=>e.distanceFromCenter()],"heatmap-density":[ct,[],e=>e.globals.heatmapDensity||0],"line-progress":[ct,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[ct,[],e=>e.globals.skyRadialProgress||0],accumulated:[ft,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ct,Dn(ct),(e,t)=>{let r=0;for(const n of t)r+=n.evaluate(e);return r}],"*":[ct,Dn(ct),(e,t)=>{let r=1;for(const n of t)r*=n.evaluate(e);return r}],"-":{type:ct,overloads:[[[ct,ct],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[ct],(e,[t])=>-t.evaluate(e)]]},"/":[ct,[ct,ct],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[ct,[ct,ct],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[ct,[],()=>Math.LN2],pi:[ct,[],()=>Math.PI],e:[ct,[],()=>Math.E],"^":[ct,[ct,ct],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[ct,[ct],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ct,[ct],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ct,[ct],(e,[t])=>Math.log(t.evaluate(e))],log2:[ct,[ct],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ct,[ct],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ct,[ct],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ct,[ct],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ct,[ct],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ct,[ct],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ct,[ct],(e,[t])=>Math.atan(t.evaluate(e))],min:[ct,Dn(ct),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ct,Dn(ct),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ct,[ct],(e,[t])=>Math.abs(t.evaluate(e))],round:[ct,[ct],(e,[t])=>{const r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[ct,[ct],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ct,[ct],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[dt,[ut,ft],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[dt,[ft],(e,[t])=>e.id()===t.value],"filter-type-==":[dt,[ut],(e,[t])=>e.geometryType()===t.value],"filter-<":[dt,[ut,ft],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[dt,[ft],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<n}],"filter->":[dt,[ut,ft],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[dt,[ft],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>n}],"filter-<=":[dt,[ut,ft],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[dt,[ft],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<=n}],"filter->=":[dt,[ut,ft],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[dt,[ft],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>=n}],"filter-has":[dt,[ft],(e,[t])=>t.value in e.properties()],"filter-has-id":[dt,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[dt,[bt(ut)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[dt,[bt(ft)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[dt,[ut,bt(ft)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[dt,[ut,bt(ft)],(e,[t,r])=>function(e,t,r,n){for(;r<=n;){const i=r+n>>1;if(t[i]===e)return!0;t[i]>e?n=i-1:r=i+1}return!1}(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:dt,overloads:[[[dt,dt],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[Dn(dt),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:dt,overloads:[[[dt,dt],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[Dn(dt),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[dt,[dt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[dt,[ut],(e,[t])=>{const r=e.globals&&e.globals.isSupportedScript;return!r||r(t.evaluate(e))}],upcase:[ut,[ut],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[ut,[ut],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[ut,Dn(ft),(e,t)=>t.map((t=>Ut(t.evaluate(e)))).join("")],"resolved-locale":[ut,[mt],(e,[t])=>t.evaluate(e).resolvedLocale()]});var zn=En;function Ln(e){return{result:"success",value:e}}function Rn(e){return{result:"error",value:e}}function Bn(e){return"data-driven"===e["property-type"]}function On(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Fn(e){return!!e.expression&&e.expression.interpolated}function Un(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Nn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function jn(e){return e}function Vn(e,t){const r="color"===t.type,n=e.stops&&"object"==typeof e.stops[0][0],i=n||!(n||void 0!==e.property),a=e.type||(Fn(t)?"exponential":"interval");if(r&&((e=tt({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],Mt.parse(e[1])]))),e.default=Mt.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Yr[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let o,s,l;if("exponential"===a)o=$n;else if("interval"===a)o=Gn;else if("categorical"===a){o=qn,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);o=Hn}if(n){const r={},n=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],a=i[0].zoom;void 0===r[a]&&(r[a]={zoom:a,type:e.type,property:e.property,default:e.default,stops:[]},n.push(a)),r[a].stops.push([i[0].value,i[1]])}const i=[];for(const e of n)i.push([r[e].zoom,Vn(r[e],t)]);const a={name:"linear"};return{kind:"composite",interpolationType:a,interpolationFactor:Qr.interpolationFactor.bind(void 0,a),zoomStops:i.map((e=>e[0])),evaluate:({zoom:r},n)=>$n({stops:i,base:e.base},t,r).evaluate(r,n)}}if(i){const r="exponential"===a?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:Qr.interpolationFactor.bind(void 0,r),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:r})=>o(e,t,r,s,l)}}return{kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[e.property]:void 0;return void 0===i?Wn(e.default,t.default):o(e,t,i,s,l)}}}function Wn(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function qn(e,t,r,n,i){return Wn(typeof r===i?n[r]:void 0,e.default,t.default)}function Gn(e,t,r){if("number"!==Un(r))return Wn(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const i=Er(e.stops.map((e=>e[0])),r);return e.stops[i][1]}function $n(e,t,r){const n=void 0!==e.base?e.base:1;if("number"!==Un(r))return Wn(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];const a=Er(e.stops.map((e=>e[0])),r),o=function(e,t,r,n){const i=n-r,a=e-r;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(r,n,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],l=e.stops[a+1][1];let c=Dr[t.type]||jn;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Yr[e.colorSpace];c=(e,r)=>t.reverse(t.interpolate(t.forward(e),t.forward(r),o))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==r)return c(t,r,o)}}:c(s,l,o)}function Hn(e,t,r){return"color"===t.type?r=Mt.parse(r):"formatted"===t.type?r=Lt.fromString(r.toString()):"resolvedImage"===t.type?r=Rt.fromString(r.toString()):Un(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),Wn(r,e.default,t.default)}class Zn{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Jt,this._defaultValue=t?function(e){return"color"===e.type&&(Nn(e.default)||Array.isArray(e.default))?new Mt(0,0,0,0):"color"===e.type?Mt.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,n,i,a,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,n,i,a,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Vt(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Xn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in zn}function Yn(e,t){const r=new Ar(zn,[],t?function(e){const t={color:ht,string:ut,number:ct,enum:ut,boolean:dt,formatted:gt,resolvedImage:yt};return"array"===e.type?bt(t[e.value]||ft,e.length):t[e.type]}(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Ln(new Zn(n,t)):Rn(r.errors)}class Kn{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!xr(t.expression)}evaluateWithoutErrorHandling(e,t,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,a)}evaluate(e,t,r,n,i,a){return this._styleExpression.evaluate(e,t,r,n,i,a)}}class Jn{constructor(e,t,r,n){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!xr(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,a)}evaluate(e,t,r,n,i,a){return this._styleExpression.evaluate(e,t,r,n,i,a)}interpolationFactor(e,t,r){return this.interpolationType?Qr.interpolationFactor(this.interpolationType,e,t,r):0}}function Qn(e,t){if("error"===(e=Yn(e,t)).result)return e;const r=e.value.expression,n=vr(r);if(!n&&!Bn(t))return Rn([new at("","data expressions not supported")]);const i=wr(r,["zoom","pitch","distance-from-center"]);if(!i&&!On(t))return Rn([new at("","zoom expressions not supported")]);const a=ti(r);return a||i?a instanceof at?Rn([a]):a instanceof Qr&&!Fn(t)?Rn([new at("",'"interpolate" expressions cannot be used with this property')]):Ln(a?new Jn(n?"camera":"composite",e.value,a.labels,a instanceof Qr?a.interpolation:void 0):new Kn(n?"constant":"source",e.value)):Rn([new at("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ei{constructor(e,t){this._parameters=e,this._specification=t,tt(this,Vn(this._parameters,this._specification))}static deserialize(e){return new ei(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ti(e){let t=null;if(e instanceof nn)t=ti(e.result);else if(e instanceof tn){for(const r of e.args)if(t=ti(r),t)break}else(e instanceof Pr||e instanceof Qr)&&e.input instanceof er&&"zoom"===e.input.name&&(t=e);return t instanceof at||e.eachChild((e=>{const r=ti(e);r instanceof at?t=r:!t&&r?t=new at("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new at("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}class ri{constructor(e,t,r,n){this.message=(e?`${e}: `:"")+r,n&&(this.identifier=n),null!=t&&t.__line__&&(this.line=t.__line__)}}function ni(e){const t=e.key,r=e.value,n=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec;let s=[];const l=Un(r);if("object"!==l)return[new ri(t,r,`object expected, ${l} found`)];for(const c in r){const e=c.split(".")[0];let l;i[e]?l=i[e]:n[e]?l=Oi:i["*"]?l=i["*"]:n["*"]&&(l=Oi),l?s=s.concat(l({key:(t?`${t}.`:t)+c,value:r[c],valueSpec:n[e]||n["*"],style:a,styleSpec:o,object:r,objectKey:c},r)):s.push(new ri(t,r[c],`unknown property "${c}"`))}for(const c in n)i[c]||n[c].required&&void 0===n[c].default&&void 0===r[c]&&s.push(new ri(t,r,`missing required property "${c}"`));return s}function ii(e){const t=e.value,r=e.valueSpec,n=e.style,i=e.styleSpec,a=e.key,o=e.arrayElementValidator||Oi;if("array"!==Un(t))return[new ri(a,t,`array expected, ${Un(t)} found`)];if(r.length&&t.length!==r.length)return[new ri(a,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new ri(a,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let s={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};i.$version<7&&(s.function=r.function),"object"===Un(r.value)&&(s=r.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(o({array:t,arrayIndex:c,value:t[c],valueSpec:s,style:n,styleSpec:i,key:`${a}[${c}]`}));return l}function ai(e){const t=e.key,r=e.value,n=e.valueSpec;let i=Un(r);if("number"===i&&r!=r&&(i="NaN"),"number"!==i)return[new ri(t,r,`number expected, ${i} found`)];if("minimum"in n){let i=n.minimum;if("array"===Un(n.minimum)&&(i=n.minimum[e.arrayIndex]),r<i)return[new ri(t,r,`${r} is less than the minimum value ${i}`)]}if("maximum"in n){let i=n.maximum;if("array"===Un(n.maximum)&&(i=n.maximum[e.arrayIndex]),r>i)return[new ri(t,r,`${r} is greater than the maximum value ${i}`)]}return[]}function oi(e){const t=e.valueSpec,r=rt(e.value.type);let n,i,a,o={};const s="categorical"!==r&&void 0===e.value.property,l=!s,c="array"===Un(e.value.stops)&&"array"===Un(e.value.stops[0])&&"object"===Un(e.value.stops[0][0]),u=ni({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new ri(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const n=e.value;return t=t.concat(ii({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===Un(n)&&0===n.length&&t.push(new ri(e.key,n,"array must have at least one stop")),t},default:function(e){return Oi({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&s&&u.push(new ri(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||u.push(new ri(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!Fn(e.valueSpec)&&u.push(new ri(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Bn(e.valueSpec)?u.push(new ri(e.key,e.value,"property functions not supported")):s&&!On(e.valueSpec)&&u.push(new ri(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!c||void 0!==e.value.property||u.push(new ri(e.key,e.value,'"property" property is required')),u;function d(e){let r=[];const n=e.value,s=e.key;if("array"!==Un(n))return[new ri(s,n,`array expected, ${Un(n)} found`)];if(2!==n.length)return[new ri(s,n,`array length 2 expected, length ${n.length} found`)];if(c){if("object"!==Un(n[0]))return[new ri(s,n,`object expected, ${Un(n[0])} found`)];if(void 0===n[0].zoom)return[new ri(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new ri(s,n,"object stop key must have value")];const t=rt(n[0].zoom);if("number"!=typeof t)return[new ri(s,n[0].zoom,"stop zoom values must be numbers")];if(a&&a>t)return[new ri(s,n[0].zoom,"stop zoom values must appear in ascending order")];t!==a&&(a=t,i=void 0,o={}),r=r.concat(ni({key:`${s}[0]`,value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:ai,value:h}}))}else r=r.concat(h({key:`${s}[0]`,value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return Xn(nt(n[1]))?r.concat([new ri(`${s}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(Oi({key:`${s}[1]`,value:n[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function h(e,a){const s=Un(e.value),l=rt(e.value),c=null!==e.value?e.value:a;if(n){if(s!==n)return[new ri(e.key,c,`${s} stop domain type must match previous stop domain type ${n}`)]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new ri(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==r){let n=`number expected, ${s} found`;return Bn(t)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ri(e.key,c,n)]}return"categorical"!==r||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===s&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new ri(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===r&&l in o?[new ri(e.key,c,"stop domain values must be unique")]:(o[l]=!0,[])):[new ri(e.key,c,`integer expected, found ${String(l)}`)]}}function si(e){const t=("property"===e.expressionContext?Qn:Yn)(nt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ri(`${e.key}${t.key}`,e.value,t.message)));const r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new ri(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!xr(r))return[new ri(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return li(r,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!wr(r,["zoom","feature-state"]))return[new ri(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!vr(r))return[new ri(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function li(e,t){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const i of t.valueSpec.expression.parameters)r.delete(i);if(0===r.size)return[];const n=[];return e instanceof er&&r.has(e.name)?[new ri(t.key,t.value,`["${e.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(e.eachChild((e=>{n.push(...li(e,t))})),n)}function ci(e){const t=e.key,r=e.value,n=e.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(rt(r))&&i.push(new ri(t,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(rt(r))&&i.push(new ri(t,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function ui(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ui(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function di(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ui(e)||(e=bi(e));const r=e;let n=!0;try{n=function(e){if(!fi(e))return e;let t=nt(e);return pi(t),t=hi(t),t}(r)}catch(e){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(r,null,2)}\n        `)}const i=et[`filter_${t}`],a=Yn(n,i);let o=null;if("error"===a.result)throw new Error(a.value.map((e=>`${e.key}: ${e.message}`)).join(", "));o=(e,t,r)=>a.value.evaluate(e,t,{},r);let s=null,l=null;if(n!==r){const e=Yn(r,i);if("error"===e.result)throw new Error(e.value.map((e=>`${e.key}: ${e.message}`)).join(", "));s=(t,r,n,i,a)=>e.value.evaluate(t,r,{},n,void 0,void 0,i,a),l=!vr(e.value.expression)}return{filter:o,dynamicFilter:s||void 0,needGeometry:yi(n),needFeature:!!l}}function hi(e){if(!Array.isArray(e))return e;const t=function(e){if(mi.has(e[0]))for(let t=1;t<e.length;t++)if(fi(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>hi(e)))}function pi(e){let t=!1;const r=[];if("case"===e[0]){for(let n=1;n<e.length-1;n+=2)t=t||fi(e[n]),r.push(e[n+1]);r.push(e[e.length-1])}else if("match"===e[0]){t=t||fi(e[1]);for(let t=2;t<e.length-1;t+=2)r.push(e[t+1]);r.push(e[e.length-1])}else if("step"===e[0]){t=t||fi(e[1]);for(let t=1;t<e.length-1;t+=2)r.push(e[t+1])}t&&(e.length=0,e.push("any",...r));for(let n=1;n<e.length;n++)pi(e[n])}function fi(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let r=1;r<e.length;r++)if(fi(e[r]))return!0;return!1}const mi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function gi(e,t){return e<t?-1:e>t?1:0}function yi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(yi(e[t]))return!0;return!1}function bi(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?_i(e[1],e[2],"=="):"!="===t?wi(_i(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?_i(e[1],e[2],t):"any"===t?(r=e.slice(1),["any"].concat(r.map(bi))):"all"===t?["all"].concat(e.slice(1).map(bi)):"none"===t?["all"].concat(e.slice(1).map(bi).map(wi)):"in"===t?vi(e[1],e.slice(2)):"!in"===t?wi(vi(e[1],e.slice(2))):"has"===t?xi(e[1]):"!has"===t?wi(xi(e[1])):"within"!==t||e;var r}function _i(e,t,r){switch(e){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,e,t]}}function vi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(gi)]]:["filter-in-small",e,["literal",t]]}}function xi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function wi(e){return["!",e]}function ki(e){return ui(nt(e.value))?si(tt({},e,{expressionContext:"filter",valueSpec:e.styleSpec[`filter_${e.layerType||"fill"}`]})):Si(e)}function Si(e){const t=e.value,r=e.key;if("array"!==Un(t))return[new ri(r,t,`array expected, ${Un(t)} found`)];const n=e.styleSpec;let i,a=[];if(t.length<1)return[new ri(r,t,"filter array must have at least 1 element")];switch(a=a.concat(ci({key:`${r}[0]`,value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),rt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===rt(t[1])&&a.push(new ri(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&a.push(new ri(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Un(t[1]),"string"!==i&&a.push(new ri(`${r}[1]`,t[1],`string expected, ${i} found`)));for(let o=2;o<t.length;o++)i=Un(t[o]),"$type"===rt(t[1])?a=a.concat(ci({key:`${r}[${o}]`,value:t[o],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new ri(`${r}[${o}]`,t[o],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let n=1;n<t.length;n++)a=a.concat(Si({key:`${r}[${n}]`,value:t[n],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Un(t[1]),2!==t.length?a.push(new ri(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&a.push(new ri(`${r}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=Un(t[1]),2!==t.length?a.push(new ri(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&a.push(new ri(`${r}[1]`,t[1],`object expected, ${i} found`))}return a}function Ti(e,t){const r=e.key,n=e.style,i=e.styleSpec,a=e.value,o=e.objectKey,s=i[`${t}_${e.layerType}`];if(!s)return[];const l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Oi({key:r,value:a,valueSpec:i.transition,style:n,styleSpec:i});const c=e.valueSpec||s[o];if(!c)return[new ri(r,a,`unknown property "${o}"`)];let u;if("string"===Un(a)&&Bn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a))){const e=`\`{ "type": "identity", "property": ${u?JSON.stringify(u[1]):'"_"'} }\``;return[new ri(r,a,`"${o}" does not support interpolation syntax\nUse an identity property function instead: ${e}.`)]}const d=[];return"symbol"===e.layerType&&("text-field"===o&&n&&!n.glyphs&&d.push(new ri(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Nn(nt(a))&&"identity"===rt(a.type)&&d.push(new ri(r,a,'"text-font" does not support identity functions'))),d.concat(Oi({key:e.key,value:a,valueSpec:c,style:n,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:o}))}function Ai(e){return Ti(e,"paint")}function Ci(e){return Ti(e,"layout")}function Ei(e){let t=[];const r=e.value,n=e.key,i=e.style,a=e.styleSpec;r.type||r.ref||t.push(new ri(n,r,'either "type" or "ref" is required'));let o=rt(r.type);const s=rt(r.ref);if(r.id){const a=rt(r.id);for(let o=0;o<e.arrayIndex;o++){const e=i.layers[o];rt(e.id)===a&&t.push(new ri(n,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in r&&t.push(new ri(n,r[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{rt(t.id)===s&&(e=t)})),e?e.ref?t.push(new ri(n,r.ref,"ref cannot reference another ref layer")):o=rt(e.type):"string"==typeof s&&t.push(new ri(n,r.ref,`ref layer "${s}" not found`))}else if("background"!==o&&"sky"!==o)if(r.source){const e=i.sources&&i.sources[r.source],a=e&&rt(e.type);e?"vector"===a&&"raster"===o?t.push(new ri(n,r.source,`layer "${r.id}" requires a raster source`)):"raster"===a&&"raster"!==o?t.push(new ri(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==a||r["source-layer"]?"raster-dem"===a&&"hillshade"!==o?t.push(new ri(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||"geojson"===a&&e.lineMetrics||t.push(new ri(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ri(n,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new ri(n,r.source,`source "${r.source}" not found`))}else t.push(new ri(n,r,'missing required property "source"'));return t=t.concat(ni({key:n,value:r,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Oi({key:`${n}.type`,value:r.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"}),filter:e=>ki(tt({layerType:o},e)),layout:e=>ni({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Ci(tt({layerType:o},e))}}),paint:e=>ni({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Ai(tt({layerType:o},e))}})}})),t}function Ii(e){const t=e.value,r=e.key,n=Un(t);return"string"!==n?[new ri(r,t,`string expected, ${n} found`)]:[]}const Pi={promoteId:function({key:e,value:t}){if("string"===Un(t))return Ii({key:e,value:t});{const r=[];for(const n in t)r.push(...Ii({key:`${e}.${n}`,value:t[n]}));return r}}};function Mi(e){const t=e.value,r=e.key,n=e.styleSpec,i=e.style;if(!t.type)return[new ri(r,t,'"type" is required')];const a=rt(t.type);let o;switch(a){case"vector":case"raster":case"raster-dem":return o=ni({key:r,value:t,valueSpec:n[`source_${a.replace("-","_")}`],style:e.style,styleSpec:n,objectElementValidators:Pi}),o;case"geojson":if(o=ni({key:r,value:t,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:Pi}),t.cluster)for(const e in t.clusterProperties){const[n,i]=t.clusterProperties[e],a="string"==typeof n?[n,["accumulated"],["get",e]]:n;o.push(...si({key:`${r}.${e}.map`,value:i,expressionContext:"cluster-map"})),o.push(...si({key:`${r}.${e}.reduce`,value:a,expressionContext:"cluster-reduce"}))}return o;case"video":return ni({key:r,value:t,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return ni({key:r,value:t,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new ri(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:`${r}.type`,value:t.type,valueSpec:{values:Di(n)},style:i,styleSpec:n})}}function Di(e){return e.source.reduce(((t,r)=>{const n=e[r];return"enum"===n.type.type&&(t=t.concat(Object.keys(n.type.values))),t}),[])}function zi(e){const t=e.value,r=e.styleSpec,n=r.light,i=e.style;let a=[];const o=Un(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new ri("light",t,`object expected, ${o} found`)]),a;for(const s in t){const e=s.match(/^(.*)-transition$/);a=a.concat(e&&n[e[1]]&&n[e[1]].transition?Oi({key:s,value:t[s],valueSpec:r.transition,style:i,styleSpec:r}):n[s]?Oi({key:s,value:t[s],valueSpec:n[s],style:i,styleSpec:r}):[new ri(s,t[s],`unknown property "${s}"`)])}return a}function Li(e){const t=e.value,r=e.key,n=e.style,i=e.styleSpec,a=i.terrain;let o=[];const s=Un(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new ri("terrain",t,`object expected, ${s} found`)]),o;for(const l in t){const e=l.match(/^(.*)-transition$/);o=o.concat(e&&a[e[1]]&&a[e[1]].transition?Oi({key:l,value:t[l],valueSpec:i.transition,style:n,styleSpec:i}):a[l]?Oi({key:l,value:t[l],valueSpec:a[l],style:n,styleSpec:i}):[new ri(l,t[l],`unknown property "${l}"`)])}if(t.source){const e=n.sources&&n.sources[t.source],i=e&&rt(e.type);e?"raster-dem"!==i&&o.push(new ri(r,t.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):o.push(new ri(r,t.source,`source "${t.source}" not found`))}else o.push(new ri(r,t,'terrain is missing required property "source"'));return o}function Ri(e){const t=e.value,r=e.style,n=e.styleSpec,i=n.fog;let a=[];const o=Un(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new ri("fog",t,`object expected, ${o} found`)]),a;for(const s in t){const e=s.match(/^(.*)-transition$/);a=a.concat(e&&i[e[1]]&&i[e[1]].transition?Oi({key:s,value:t[s],valueSpec:n.transition,style:r,styleSpec:n}):i[s]?Oi({key:s,value:t[s],valueSpec:i[s],style:r,styleSpec:n}):[new ri(s,t[s],`unknown property "${s}"`)])}return a}const Bi={"*":()=>[],array:ii,boolean:function(e){const t=e.value,r=e.key,n=Un(t);return"boolean"!==n?[new ri(r,t,`boolean expected, ${n} found`)]:[]},number:ai,color:function(e){const t=e.key,r=e.value,n=Un(r);return"string"!==n?[new ri(t,r,`color expected, ${n} found`)]:null===St(r)?[new ri(t,r,`color expected, "${r}" found`)]:[]},enum:ci,filter:ki,function:oi,layer:Ei,object:ni,source:Mi,light:zi,terrain:Li,fog:Ri,string:Ii,formatted:function(e){return 0===Ii(e).length?[]:si(e)},resolvedImage:function(e){return 0===Ii(e).length?[]:si(e)},projection:function(e){const t=e.value,r=e.styleSpec,n=r.projection,i=e.style;let a=[];const o=Un(t);if("object"===o)for(const s in t)a=a.concat(Oi({key:s,value:t[s],valueSpec:n[s],style:i,styleSpec:r}));else"string"!==o&&(a=a.concat([new ri("projection",t,`object or string expected, ${o} found`)]));return a}};function Oi(e){const t=e.value,r=e.valueSpec,n=e.styleSpec;return r.expression&&Nn(rt(t))?oi(e):r.expression&&Xn(nt(t))?si(e):r.type&&Bi[r.type]?Bi[r.type](e):ni(tt({},e,{valueSpec:r.type?n[r.type]:r}))}function Fi(e){const t=e.value,r=e.key,n=Ii(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new ri(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new ri(r,t,'"glyphs" url must include a "{range}" token'))),n}function Ui(e,t=et){return Vi(Oi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Fi,"*":()=>[]}}))}const Ni=e=>Vi(Ai(e)),ji=e=>Vi(Ci(e));function Vi(e){return e.slice().sort(((e,t)=>e.line&&t.line?e.line-t.line:0))}function Wi(e,t){let r=!1;if(t&&t.length)for(const n of t)e.fire(new Je(new Error(n.message))),r=!0;return r}var qi=$i,Gi=3;function $i(e,t,r){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(r=i[2]);for(var a=0;a<this.d*this.d;a++){var o=i[Gi+a],s=i[Gi+a+1];n.push(o===s?null:i.subarray(o,s))}var l=i[Gi+n.length+1];this.keys=i.subarray(i[Gi+n.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*r;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;var u=r/t*e;this.min=-u,this.max=e+u}$i.prototype.insert=function(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},$i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$i.prototype._insertCell=function(e,t,r,n,i,a){this.cells[i].push(a)},$i.prototype.query=function(e,t,r,n,i){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=r&&o<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,r,n,this._queryCell,s,{},i),s},$i.prototype._queryCell=function(e,t,r,n,i,a,o,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,d=0;d<l.length;d++){var h=l[d];if(void 0===o[h]){var p=4*h;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):e<=u[p+2]&&t<=u[p+3]&&r>=u[p+0]&&n>=u[p+1])?(o[h]=!0,a.push(c[h])):o[h]=!1}}},$i.prototype._forEachCell=function(e,t,r,n,i,a,o,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(r),d=this._convertToCellCoord(n),h=l;h<=u;h++)for(var p=c;p<=d;p++){var f=this.d*p+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(p),this._convertFromCellCoord(h+1),this._convertFromCellCoord(p+1)))&&i.call(this,e,t,r,n,f,a,o,s))return}},$i.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},$i.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},$i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=Gi+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(t+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];i[Gi+o]=a,i.set(s,a),a+=s.length}return i[Gi+e.length]=a,i.set(this.keys,a),i[Gi+e.length+1]=a+=this.keys.length,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var Hi=h(qi);const Zi={};function Xi(e,t,r={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Zi[t]={klass:e,omit:r.omit||[]}}Xi(Object,"Object"),Hi.serialize=function(e,t){const r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}},Hi.deserialize=function(e){return new Hi(e.buffer)},Object.defineProperty(Hi,"name",{value:"Grid"}),Xi(Hi,"Grid"),Xi(Mt,"Color"),Xi(Error,"Error"),Xi(ce,"AJAXError"),Xi(Rt,"ResolvedImage"),Xi(ei,"StylePropertyFunction"),Xi(Zn,"StyleExpression",{omit:["_evaluator"]}),Xi(Jn,"ZoomDependentExpression"),Xi(Kn,"ZoomConstantExpression"),Xi(er,"CompoundExpression",{omit:["_evaluate"]});for(const km in zn)Zi[zn[km]._classRegistryKey]||Xi(zn[km],`Expression${km}`);function Yi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Ki(e){return t.ImageBitmap&&e instanceof t.ImageBitmap}function Ji(e,r){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Yi(e)||Ki(e))return r&&r.push(e),e;if(ArrayBuffer.isView(e)){const t=e;return r&&r.push(t.buffer),t}if(e instanceof t.ImageData)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){const t=[];for(const n of e)t.push(Ji(n,r));return t}if("object"==typeof e){const t=e.constructor,n=t._classRegistryKey;if(!n)throw new Error(`can't serialize object of unregistered class ${n}`);const i=t.serialize?t.serialize(e,r):{};if(!t.serialize){for(const t in e)e.hasOwnProperty(t)&&(Zi[n].omit.indexOf(t)>=0||(i[t]=Ji(e[t],r)));e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(i.$name=n),i}throw new Error("can't serialize object of type "+typeof e)}function Qi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Yi(e)||Ki(e)||ArrayBuffer.isView(e)||e instanceof t.ImageData)return e;if(Array.isArray(e))return e.map(Qi);if("object"==typeof e){const t=e.$name||"Object",{klass:r}=Zi[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(e);const n=Object.create(r.prototype);for(const i of Object.keys(e))"$name"!==i&&(n[i]=Qi(e[i]));return n}throw new Error("can't deserialize object of type "+typeof e)}const ea={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function ta(e){for(const t of e)if(ia(t.charCodeAt(0)))return!0;return!1}function ra(e){for(const t of e)if(!na(t.charCodeAt(0)))return!1;return!0}function na(e){return!(ea.Arabic(e)||ea["Arabic Supplement"](e)||ea["Arabic Extended-A"](e)||ea["Arabic Presentation Forms-A"](e)||ea["Arabic Presentation Forms-B"](e))}function ia(e){return!(746!==e&&747!==e&&(e<4352||!(ea["Bopomofo Extended"](e)||ea.Bopomofo(e)||ea["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||ea["CJK Compatibility Ideographs"](e)||ea["CJK Compatibility"](e)||ea["CJK Radicals Supplement"](e)||ea["CJK Strokes"](e)||!(!ea["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||ea["CJK Unified Ideographs Extension A"](e)||ea["CJK Unified Ideographs"](e)||ea["Enclosed CJK Letters and Months"](e)||ea["Hangul Compatibility Jamo"](e)||ea["Hangul Jamo Extended-A"](e)||ea["Hangul Jamo Extended-B"](e)||ea["Hangul Jamo"](e)||ea["Hangul Syllables"](e)||ea.Hiragana(e)||ea["Ideographic Description Characters"](e)||ea.Kanbun(e)||ea["Kangxi Radicals"](e)||ea["Katakana Phonetic Extensions"](e)||ea.Katakana(e)&&12540!==e||!(!ea["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!ea["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||ea["Unified Canadian Aboriginal Syllabics"](e)||ea["Unified Canadian Aboriginal Syllabics Extended"](e)||ea["Vertical Forms"](e)||ea["Yijing Hexagram Symbols"](e)||ea["Yi Syllables"](e)||ea["Yi Radicals"](e))))}function aa(e){return!(ia(e)||function(e){return!!(ea["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||ea["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||ea["Letterlike Symbols"](e)||ea["Number Forms"](e)||ea["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||ea["Control Pictures"](e)&&9251!==e||ea["Optical Character Recognition"](e)||ea["Enclosed Alphanumerics"](e)||ea["Geometric Shapes"](e)||ea["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||ea["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ea["CJK Symbols and Punctuation"](e)||ea.Katakana(e)||ea["Private Use Area"](e)||ea["CJK Compatibility Forms"](e)||ea["Small Form Variants"](e)||ea["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function oa(e){return e>=1424&&e<=2303||ea["Arabic Presentation Forms-A"](e)||ea["Arabic Presentation Forms-B"](e)}function sa(e,t){return!(!t&&oa(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||ea.Khmer(e))}function la(e){for(const t of e)if(oa(t.charCodeAt(0)))return!0;return!1}const ca="deferred",ua="loading",da="loaded";let ha=null,pa="unavailable",fa=null;const ma=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(pa="error"),ha&&ha(e)};function ga(){ya.fire(new Ke("pluginStateChange",{pluginStatus:pa,pluginURL:fa}))}const ya=new Qe,ba=function(){return pa},_a=function(){if(pa!==ca||!fa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");pa=ua,ga(),fa&&he({url:fa},(e=>{e?ma(e):(pa=da,ga())}))},va={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>pa===da||null!=va.applyArabicShaping,isLoading:()=>pa===ua,setState(e){pa=e.pluginStatus,fa=e.pluginURL},isParsed:()=>null!=va.applyArabicShaping&&null!=va.processBidirectionalText&&null!=va.processStyledBidirectionalText,getPluginURL:()=>fa};class xa{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const r of e)if(!sa(r.charCodeAt(0),t))return!1;return!0}(e,va.isLoaded())}}class wa{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Nn(e))return new ei(e,t);if(Xn(e)){const r=Qn(e,t);if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return r.value}{let r=e;return"string"==typeof e&&"color"===t.type&&(r=Mt.parse(e)),{kind:"constant",evaluate:()=>r}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}class ka{constructor(e){this.property=e,this.value=new wa(e,void 0)}transitioned(e,t){return new Ta(this.property,this.value,t,D({},e.transition,this.transition),e.now)}untransitioned(){return new Ta(this.property,this.value,null,{},0)}}class Sa{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return V(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ka(this._values[e].property)),this._values[e].value=new wa(this._values[e].property,null===t?void 0:V(t))}getTransition(e){return V(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ka(this._values[e].property)),this._values[e].transition=V(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r);const n=this.getTransition(t);void 0!==n&&(e[`${t}-transition`]=n)}return e}transitioned(e,t){const r=new Aa(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(e,t._values[n]);return r}untransitioned(){const e=new Aa(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Ta{constructor(e,t,r,n,i){const a=n.delay||0,o=n.duration||0;i=i||0,this.property=e,this.value=t,this.begin=i+a,this.end=this.begin+o,e.specification.transition&&(n.delay||n.duration)&&(this.prior=r)}possiblyEvaluate(e,t,r){const n=e.now||0,i=this.value.possiblyEvaluate(e,t,r),a=this.prior;if(a){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return a.possiblyEvaluate(e,t,r);{const o=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,r),i,S(o))}}return i}}class Aa{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,r){const n=new Ia(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(e,t,r);return n}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ca{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return V(this._values[e].value)}setValue(e,t){this._values[e]=new wa(this._values[e].property,null===t?void 0:V(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r)}return e}possiblyEvaluate(e,t,r){const n=new Ia(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(e,t,r);return n}}class Ea{constructor(e,t,r){this.property=e,this.value=t,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,r,n){return this.property.evaluate(this.value,this.parameters,e,t,r,n)}}class Ia{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Pa{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,r){const n=Dr[this.specification.type];return n?n(e,t,r):e}}class Ma{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,r,n){return new Ea(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,n)}:e.expression,t)}interpolate(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Ea(this,{kind:"constant",value:void 0},e.parameters);const n=Dr[this.specification.type];return n?new Ea(this,{kind:"constant",value:n(e.value.value,t.value.value,r)},e.parameters):e}evaluate(e,t,r,n,i,a){return"constant"===e.kind?e.value:e.evaluate(t,r,n,i,a)}}class Da{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){return!!e.expression.evaluate(t,null,{},r,n)}interpolate(){return!1}}class za{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new xa(0,{});for(const r in e){const n=e[r];n.specification.overridable&&this.overridableProperties.push(r);const i=this.defaultPropertyValues[r]=new wa(n,void 0),a=this.defaultTransitionablePropertyValues[r]=new ka(n);this.defaultTransitioningPropertyValues[r]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=i.possiblyEvaluate(t)}}}function La(e,t){return 256*(e=C(Math.floor(e),0,255))+C(Math.floor(t),0,255)}Xi(Ma,"DataDrivenProperty"),Xi(Pa,"DataConstantProperty"),Xi(Da,"ColorRampProperty");const Ra={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ba{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Oa{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Fa(e,t=1){let r=0,n=0;return{members:e.map((e=>{const i=Ra[e.type].BYTES_PER_ELEMENT,a=r=Ua(r,Math.max(t,i)),o=e.components||1;return n=Math.max(n,i),r+=i*o,{name:e.name,type:e.type,components:o,offset:a}})),size:Ua(r,Math.max(n,t)),alignment:t}}function Ua(e,t){return Math.ceil(e/t)*t}class Na extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.int16[n+0]=t,this.int16[n+1]=r,e}}Na.prototype.bytesPerElement=4,Xi(Na,"StructArrayLayout2i4");class ja extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=n,e}}ja.prototype.bytesPerElement=6,Xi(ja,"StructArrayLayout3i6");class Va extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const a=4*e;return this.int16[a+0]=t,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,e}}Va.prototype.bytesPerElement=8,Xi(Va,"StructArrayLayout4i8");class Wa extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,a,o)}emplace(e,t,r,n,i,a,o,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.uint8[c+4]=n,this.uint8[c+5]=i,this.uint8[c+6]=a,this.uint8[c+7]=o,this.float32[u+2]=s,e}}Wa.prototype.bytesPerElement=12,Xi(Wa,"StructArrayLayout2i4ub1f12");class qa extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const a=4*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,e}}qa.prototype.bytesPerElement=16,Xi(qa,"StructArrayLayout4f16");class Ga extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i)}emplace(e,t,r,n,i,a){const o=6*e,s=3*e;return this.uint16[o+0]=t,this.uint16[o+1]=r,this.uint16[o+2]=n,this.uint16[o+3]=i,this.float32[s+2]=a,e}}Ga.prototype.bytesPerElement=12,Xi(Ga,"StructArrayLayout4ui1f12");class $a extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const a=4*e;return this.uint16[a+0]=t,this.uint16[a+1]=r,this.uint16[a+2]=n,this.uint16[a+3]=i,e}}$a.prototype.bytesPerElement=8,Xi($a,"StructArrayLayout4ui8");class Ha extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n,i,a)}emplace(e,t,r,n,i,a,o){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e}}Ha.prototype.bytesPerElement=12,Xi(Ha,"StructArrayLayout6i12");class Za extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,o,s,l,c,u,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,r,n,i,a,o,s,l,c,u,d)}emplace(e,t,r,n,i,a,o,s,l,c,u,d,h){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=i,this.uint16[p+4]=a,this.uint16[p+5]=o,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=d,this.int16[p+11]=h,e}}Za.prototype.bytesPerElement=24,Xi(Za,"StructArrayLayout4i4ui4i24");class Xa extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n,i,a)}emplace(e,t,r,n,i,a,o){const s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.float32[l+2]=i,this.float32[l+3]=a,this.float32[l+4]=o,e}}Xa.prototype.bytesPerElement=20,Xi(Xa,"StructArrayLayout3i3f20");class Ya extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Ya.prototype.bytesPerElement=4,Xi(Ya,"StructArrayLayout1ul4");class Ka extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,o,s,l,c,u,d,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,r,n,i,a,o,s,l,c,u,d,h)}emplace(e,t,r,n,i,a,o,s,l,c,u,d,h,p){const f=20*e,m=10*e;return this.int16[f+0]=t,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.int16[f+4]=a,this.float32[m+3]=o,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[f+14]=u,this.uint32[m+8]=d,this.uint16[f+18]=h,this.uint16[f+19]=p,e}}Ka.prototype.bytesPerElement=40,Xi(Ka,"StructArrayLayout5i4f1i1ul2ui40");class Ja extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,a,o)}emplace(e,t,r,n,i,a,o,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+4]=i,this.int16[l+5]=a,this.int16[l+6]=o,this.int16[l+7]=s,e}}Ja.prototype.bytesPerElement=16,Xi(Ja,"StructArrayLayout3i2i2i16");class Qa extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i)}emplace(e,t,r,n,i,a){const o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=n,this.int16[s+6]=i,this.int16[s+7]=a,e}}Qa.prototype.bytesPerElement=16,Xi(Qa,"StructArrayLayout2f1f2i16");class eo extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=r,this.float32[o+1]=n,this.float32[o+2]=i,e}}eo.prototype.bytesPerElement=12,Xi(eo,"StructArrayLayout2ub2f12");class to extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,e}}to.prototype.bytesPerElement=12,Xi(to,"StructArrayLayout3f12");class ro extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,this.uint16[i+2]=n,e}}ro.prototype.bytesPerElement=6,Xi(ro,"StructArrayLayout3ui6");class no extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y,b,_,v){const x=this.length;return this.resize(x+1),this.emplace(x,e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y,b,_,v)}emplace(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y,b,_,v,x){const w=30*e,k=15*e,S=60*e;return this.int16[w+0]=t,this.int16[w+1]=r,this.int16[w+2]=n,this.float32[k+2]=i,this.float32[k+3]=a,this.uint16[w+8]=o,this.uint16[w+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=c,this.uint32[k+7]=u,this.uint16[w+16]=d,this.uint16[w+17]=h,this.uint16[w+18]=p,this.float32[k+10]=f,this.float32[k+11]=m,this.uint8[S+48]=g,this.uint8[S+49]=y,this.uint8[S+50]=b,this.uint32[k+13]=_,this.int16[w+28]=v,this.uint8[S+58]=x,e}}no.prototype.bytesPerElement=60,Xi(no,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class io extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y,b,_,v,x,w,k,S,T,A,C,E,I){const P=this.length;return this.resize(P+1),this.emplace(P,e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y,b,_,v,x,w,k,S,T,A,C,E,I)}emplace(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y,b,_,v,x,w,k,S,T,A,C,E,I,P){const M=38*e,D=19*e;return this.int16[M+0]=t,this.int16[M+1]=r,this.int16[M+2]=n,this.float32[D+2]=i,this.float32[D+3]=a,this.int16[M+8]=o,this.int16[M+9]=s,this.int16[M+10]=l,this.int16[M+11]=c,this.int16[M+12]=u,this.int16[M+13]=d,this.uint16[M+14]=h,this.uint16[M+15]=p,this.uint16[M+16]=f,this.uint16[M+17]=m,this.uint16[M+18]=g,this.uint16[M+19]=y,this.uint16[M+20]=b,this.uint16[M+21]=_,this.uint16[M+22]=v,this.uint16[M+23]=x,this.uint16[M+24]=w,this.uint16[M+25]=k,this.uint16[M+26]=S,this.uint16[M+27]=T,this.uint16[M+28]=A,this.uint32[D+15]=C,this.float32[D+16]=E,this.float32[D+17]=I,this.float32[D+18]=P,e}}io.prototype.bytesPerElement=76,Xi(io,"StructArrayLayout3i2f6i15ui1ul3f76");class ao extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}ao.prototype.bytesPerElement=4,Xi(ao,"StructArrayLayout1f4");class oo extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i)}emplace(e,t,r,n,i,a){const o=5*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=n,this.float32[o+3]=i,this.float32[o+4]=a,e}}oo.prototype.bytesPerElement=20,Xi(oo,"StructArrayLayout5f20");class so extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=r,this.uint16[a+3]=n,this.uint16[a+4]=i,e}}so.prototype.bytesPerElement=12,Xi(so,"StructArrayLayout1ul3ui12");class lo extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,e}}lo.prototype.bytesPerElement=4,Xi(lo,"StructArrayLayout2ui4");class co extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}co.prototype.bytesPerElement=2,Xi(co,"StructArrayLayout1ui2");class uo extends Oa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.float32[n+0]=t,this.float32[n+1]=r,e}}uo.prototype.bytesPerElement=8,Xi(uo,"StructArrayLayout2f8");class ho extends Ba{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ho.prototype.size=40;class po extends Ka{get(e){return new ho(this,e)}}Xi(po,"CollisionBoxArray");class fo extends Ba{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}fo.prototype.size=60;class mo extends no{get(e){return new fo(this,e)}}Xi(mo,"PlacedSymbolArray");class go extends Ba{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}go.prototype.size=76;class yo extends io{get(e){return new go(this,e)}}Xi(yo,"SymbolInstanceArray");class bo extends ao{getoffsetX(e){return this.float32[1*e+0]}}Xi(bo,"GlyphOffsetArray");class _o extends Na{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Xi(_o,"SymbolLineVertexArray");class vo extends Ba{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}vo.prototype.size=12;class xo extends so{get(e){return new vo(this,e)}}Xi(xo,"FeatureIndexArray");class wo extends lo{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Xi(wo,"FillExtrusionCentroidArray");const ko=Fa([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),So=Fa([{name:"a_dash",components:4,type:"Uint16"}]);var To={exports:{}},Ao={exports:{}};Ao.exports=function(e,t){var r,n,i,a,o,s,l,c;for(n=e.length-(r=3&e.length),i=t,o=3432918353,s=461845907,c=0;c<n;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(a=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Co=Ao.exports,Eo={exports:{}};Eo.exports=function(e,t){for(var r,n=e.length,i=t^n,a=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Io=Co,Po=Eo.exports;To.exports=Io,To.exports.murmur3=Io,To.exports.murmur2=Po;var Mo=h(To.exports);class Do{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,r,n){this.ids.push(zo(e)),this.positions.push(t,r,n)}getPositions(e){const t=zo(e);let r=0,n=this.ids.length-1;for(;r<n;){const e=r+n>>1;this.ids[e]>=t?n=e:r=e+1}const i=[];for(;this.ids[r]===t;)i.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return i}static serialize(e,t){const r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return Lo(r,n,0,r.length-1),t&&t.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(e){const t=new Do;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function zo(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Mo(String(e))}function Lo(e,t,r,n){for(;r<n;){const i=e[r+n>>1];let a=r-1,o=n+1;for(;;){do{a++}while(e[a]<i);do{o--}while(e[o]>i);if(a>=o)break;Ro(e,a,o),Ro(t,3*a,3*o),Ro(t,3*a+1,3*o+1),Ro(t,3*a+2,3*o+2)}o-r<n-o?(Lo(e,t,r,o),r=o+1):(Lo(e,t,o+1,n),n=o)}}function Ro(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}Xi(Do,"FeaturePositionMap");class Bo{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class Oo extends Bo{constructor(e){super(e),this.current=0}set(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Fo extends Bo{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3])))}}class Uo extends Bo{constructor(e){super(e),this.current=Mt.transparent}set(e,t,r){this.fetchUniformLocation(e,t)&&(r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a)))}}const No=new Float32Array(16),jo=new Float32Array(9),Vo=new Float32Array(4);function Wo(e){return[La(255*e.r,255*e.g),La(255*e.b,255*e.a)]}class qo{constructor(e,t,r){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=r}setUniform(e,t,r,n,i){t.set(e,i,n.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new Uo(e):new Oo(e)}}class Go{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,t,r,n,i){const a="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;a&&t.set(e,i,a)}getBinding(e,t){return"u_pattern"===t||"u_dash"===t?new Fo(e):new Oo(e)}}class $o{constructor(e,t,r,n){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(e,t,r,n,i,a){const o=this.paintVertexArray.length,s=this.expression.evaluate(new xa(0),t,{},i,n,a);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}updatePaintArray(e,t,r,n,i){const a=this.expression.evaluate({zoom:0},r,n,void 0,i);this._setPaintValue(e,t,a)}_setPaintValue(e,t,r){if("color"===this.type){const n=Wo(r);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n[0],n[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ho{constructor(e,t,r,n,i,a){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new a}populatePaintArray(e,t,r,n,i,a){const o=this.expression.evaluate(new xa(this.zoom),t,{},i,n,a),s=this.expression.evaluate(new xa(this.zoom+1),t,{},i,n,a),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,o,s)}updatePaintArray(e,t,r,n,i){const a=this.expression.evaluate({zoom:this.zoom},r,n,void 0,i),o=this.expression.evaluate({zoom:this.zoom+1},r,n,void 0,i);this._setPaintValue(e,t,a,o)}_setPaintValue(e,t,r,n){if("color"===this.type){const i=Wo(r),a=Wo(n);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,i[0],i[1],a[0],a[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,r,n,i){const a=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,o=C(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);t.set(e,i,o)}getBinding(e,t){return new Oo(e)}}class Zo{constructor(e,t,r,n,i){this.expression=e,this.layerId=i,this.paintVertexAttributes=("array"===r?So:ko).members;for(let a=0;a<t.length;++a);this.paintVertexArray=new n}populatePaintArray(e,t,r){const n=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],r)}updatePaintArray(e,t,r,n,i,a){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],a)}_setPaintValues(e,t,r,n){if(!n||!r)return;const i=n[r];if(!i)return;const{tl:a,br:o,pixelRatio:s}=i;for(let l=e;l<t;l++)this.paintVertexArray.emplace(l,a[0],a[1],o[0],o[1],s)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xo{constructor(e,t,r=(()=>!0)){this.binders={},this._buffers=[];const n=[];for(const i in e.paint._values){if(!r(i))continue;const a=e.paint.get(i);if(!(a instanceof Ea&&Bn(a.property.specification)))continue;const o=Jo(i,e.type),s=a.value,l=a.property.specification.type,c=!!a.property.useIntegerZoom,u="line-dasharray"===i||i.endsWith("pattern"),d="line-dasharray"===i&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||u){const t=ts(i,l,"source");this.binders[i]=u?new Zo(s,o,l,t,e.id):new $o(s,o,l,t),n.push(`/a_${i}`)}else{const e=ts(i,l,"composite");this.binders[i]=new Ho(s,o,l,c,t,e),n.push(`/z_${i}`)}else this.binders[i]=u?new Go(s.value,o):new qo(s.value,o,l),n.push(`/u_${i}`)}this.cacheKey=n.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof $o||t instanceof Ho?t.maxValue:0}populatePaintArrays(e,t,r,n,i,a){for(const o in this.binders){const s=this.binders[o];(s instanceof $o||s instanceof Ho||s instanceof Zo)&&s.populatePaintArray(e,t,r,n,i,a)}}setConstantPatternPositions(e){for(const t in this.binders){const r=this.binders[t];r instanceof Go&&r.setConstantPatternPositions(e)}}updatePaintArrays(e,t,r,n,i,a){let o=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=r.feature(t.index);for(const r in this.binders){const c=this.binders[r];if((c instanceof $o||c instanceof Ho||c instanceof Zo)&&!0===c.expression.isStateDependent){const u=n.paint.get(r);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[s],i,a),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const r=this.binders[t];(r instanceof qo||r instanceof Go)&&e.push(...r.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof $o||r instanceof Ho||r instanceof Zo)for(let t=0;t<r.paintVertexAttributes.length;t++)e.push(r.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof qo||r instanceof Go||r instanceof Ho)for(const t of r.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof qo||n instanceof Go||n instanceof Ho)for(const i of n.uniformNames)t.push({name:i,property:r,binding:n.getBinding(e,i)})}return t}setUniforms(e,t,r,n,i){for(const{name:a,property:o,binding:s}of r)this.binders[o].setUniform(e,s,i,n.get(o),a)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof $o||t instanceof Ho||t instanceof Zo)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(const t in this.binders){const r=this.binders[t];(r instanceof $o||r instanceof Ho||r instanceof Zo)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof $o||t instanceof Ho||t instanceof Zo)&&t.destroy()}}}class Yo{constructor(e,t,r=(()=>!0)){this.programConfigurations={};for(const n of e)this.programConfigurations[n.id]=new Xo(n,t,r);this.needsUpload=!1,this._featureMap=new Do,this._bufferOffset=0}populatePaintArrays(e,t,r,n,i,a,o){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,n,i,a,o);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,r,n,i){for(const a of r)this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,this._featureMap,t,a,n,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Ko={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Jo(e,t){return Ko[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const Qo={"line-pattern":{source:Ga,composite:Ga},"fill-pattern":{source:Ga,composite:Ga},"fill-extrusion-pattern":{source:Ga,composite:Ga},"line-dasharray":{source:$a,composite:$a}},es={color:{source:uo,composite:qa},number:{source:ao,composite:uo}};function ts(e,t,r){const n=Qo[e];return n&&n[r]||es[t][r]}Xi(qo,"ConstantBinder"),Xi(Go,"PatternConstantBinder"),Xi($o,"SourceExpressionBinder"),Xi(Zo,"PatternCompositeBinder"),Xi(Ho,"CompositeExpressionBinder"),Xi(Xo,"ProgramConfiguration",{omit:["_buffers"]}),Xi(Yo,"ProgramConfigurationSet");const rs="-transition";class ns extends Qe{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Ca(t.layout)),t.paint)){this._transitionablePaint=new Sa(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ia(t.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,r={}){null!=t&&this._validate(ji,`layers.${this.id}.layout.${e}`,e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return U(e,rs)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,r={}){if(null!=t&&this._validate(Ni,`layers.${this.id}.paint.${e}`,e,t,r))return!1;if(U(e,rs))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const r=this._transitionablePaint._values[e],n=r.value.isDataDriven(),i=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value,o=a.isDataDriven(),s=U(e,"pattern")||"line-dasharray"===e;return o||n||s||this._handleOverridablePaintPropertyUpdate(e,i,a)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),j(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,r,n,i={}){return(!i||!1!==i.validate)&&Wi(this,e.call(Ui,{key:t,layerType:this.type,objectKey:r,value:n,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Ea&&Bn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=di(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const is=Fa([{name:"a_pos",components:2,type:"Int16"}],4),as=Fa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class os{constructor(e=[]){this.segments=e}prepareSegment(e,t,r,n){let i=this.segments[this.segments.length-1];return e>os.MAX_VERTEX_ARRAY_LENGTH&&q(`Max vertices per segment is ${os.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>os.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,r,n){return new os([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}os.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xi(os,"SegmentVector");var ss=8192;class ls{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Vl?new Vl(e.lng,e.lat):Vl.convert(e),this}setSouthWest(e){return this._sw=e instanceof Vl?new Vl(e.lng,e.lat):Vl.convert(e),this}extend(e){const t=this._sw,r=this._ne;let n,i;if(e instanceof Vl)n=e,i=e;else{if(!(e instanceof ls))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(ls.convert(e)):this.extend(Vl.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Vl.convert(e)):this;if(n=e._sw,i=e._ne,!n||!i)return this}return t||r?(t.lng=Math.min(n.lng,t.lng),t.lat=Math.min(n.lat,t.lat),r.lng=Math.max(i.lng,r.lng),r.lat=Math.max(i.lat,r.lat)):(this._sw=new Vl(n.lng,n.lat),this._ne=new Vl(i.lng,i.lat)),this}getCenter(){return new Vl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Vl(this.getWest(),this.getNorth())}getSouthEast(){return new Vl(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:r}=Vl.convert(e);let n=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(e){return!e||e instanceof ls?e:new ls(e)}}var cs=1e-6,us="undefined"!=typeof Float32Array?Float32Array:Array;function ds(){var e=new us(9);return us!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function hs(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=r[0],p=r[1],f=r[2],m=r[3],g=r[4],y=r[5],b=r[6],_=r[7],v=r[8];return e[0]=h*n+p*o+f*c,e[1]=h*i+p*s+f*u,e[2]=h*a+p*l+f*d,e[3]=m*n+g*o+y*c,e[4]=m*i+g*s+y*u,e[5]=m*a+g*l+y*d,e[6]=b*n+_*o+v*c,e[7]=b*i+_*s+v*u,e[8]=b*a+_*l+v*d,e}function ps(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fs(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],b=r*s-n*o,_=r*l-i*o,v=r*c-a*o,x=n*l-i*s,w=n*c-a*s,k=i*c-a*l,S=u*m-d*f,T=u*g-h*f,A=u*y-p*f,C=d*g-h*m,E=d*y-p*m,I=h*y-p*g,P=b*I-_*E+v*C+x*A-w*T+k*S;return P?(e[0]=(s*I-l*E+c*C)*(P=1/P),e[1]=(i*E-n*I-a*C)*P,e[2]=(m*k-g*w+y*x)*P,e[3]=(h*w-d*k-p*x)*P,e[4]=(l*A-o*I-c*T)*P,e[5]=(r*I-i*A+a*T)*P,e[6]=(g*v-f*k-y*_)*P,e[7]=(u*k-h*v+p*_)*P,e[8]=(o*E-s*A+c*S)*P,e[9]=(n*A-r*E-a*S)*P,e[10]=(f*w-m*v+y*b)*P,e[11]=(d*v-u*w-p*b)*P,e[12]=(s*T-o*C-l*S)*P,e[13]=(r*C-n*T+i*S)*P,e[14]=(m*_-f*x-g*b)*P,e[15]=(u*x-d*_+h*b)*P,e):null}function ms(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],b=t[15],_=r[0],v=r[1],x=r[2],w=r[3];return e[0]=_*n+v*s+x*d+w*m,e[1]=_*i+v*l+x*h+w*g,e[2]=_*a+v*c+x*p+w*y,e[3]=_*o+v*u+x*f+w*b,e[4]=(_=r[4])*n+(v=r[5])*s+(x=r[6])*d+(w=r[7])*m,e[5]=_*i+v*l+x*h+w*g,e[6]=_*a+v*c+x*p+w*y,e[7]=_*o+v*u+x*f+w*b,e[8]=(_=r[8])*n+(v=r[9])*s+(x=r[10])*d+(w=r[11])*m,e[9]=_*i+v*l+x*h+w*g,e[10]=_*a+v*c+x*p+w*y,e[11]=_*o+v*u+x*f+w*b,e[12]=(_=r[12])*n+(v=r[13])*s+(x=r[14])*d+(w=r[15])*m,e[13]=_*i+v*l+x*h+w*g,e[14]=_*a+v*c+x*p+w*y,e[15]=_*o+v*u+x*f+w*b,e}function gs(e,t,r){var n,i,a,o,s,l,c,u,d,h,p,f,m=r[0],g=r[1],y=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],e[0]=n=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=p,e[11]=f,e[12]=n*m+s*g+d*y+t[12],e[13]=i*m+l*g+h*y+t[13],e[14]=a*m+c*g+p*y+t[14],e[15]=o*m+u*g+f*y+t[15]),e}function ys(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function bs(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*n,e[5]=o*i+u*n,e[6]=s*i+d*n,e[7]=l*i+h*n,e[8]=c*i-a*n,e[9]=u*i-o*n,e[10]=d*i-s*n,e[11]=h*i-l*n,e}function _s(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*n,e[1]=o*i-u*n,e[2]=s*i-d*n,e[3]=l*i-h*n,e[8]=a*n+c*i,e[9]=o*n+u*i,e[10]=s*n+d*i,e[11]=l*n+h*i,e}function vs(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xs(e,t,r){var n,i,a,o=r[0],s=r[1],l=r[2],c=Math.hypot(o,s,l);return c<cs?null:(o*=c=1/c,s*=c,l*=c,n=Math.sin(t),i=Math.cos(t),e[0]=o*o*(a=1-i)+i,e[1]=s*o*a+l*n,e[2]=l*o*a-s*n,e[3]=0,e[4]=o*s*a-l*n,e[5]=s*s*a+i,e[6]=l*s*a+o*n,e[7]=0,e[8]=o*l*a+s*n,e[9]=s*l*a-o*n,e[10]=l*l*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ws=ms;function ks(){var e=new us(3);return us!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ss(e){var t=new us(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ts(e){return Math.hypot(e[0],e[1],e[2])}function As(e,t,r){var n=new us(3);return n[0]=e,n[1]=t,n[2]=r,n}function Cs(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Es(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Is(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Ps(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function Ms(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function Ds(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function zs(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function Ls(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function Rs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Bs(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2];return e[0]=i*l-a*s,e[1]=a*o-n*l,e[2]=n*s-i*o,e}function Os(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/(o=o||1),e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,e}function Fs(e,t,r){var n=r[0],i=r[1],a=r[2],o=t[0],s=t[1],l=t[2],c=i*l-a*s,u=a*o-n*l,d=n*s-i*o,h=i*d-a*u,p=a*c-n*d,f=n*u-i*c,m=2*r[3];return u*=m,d*=m,p*=2,f*=2,e[0]=o+(c*=m)+(h*=2),e[1]=s+u+p,e[2]=l+d+f,e}var Us,Ns=Es,js=Is,Vs=Ts;function Ws(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function qs(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=a*o,e}function Gs(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}function $s(){var e=new us(4);return us!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Hs(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Zs(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*s,e[1]=i*l+a*s,e[2]=a*l-i*s,e[3]=o*l-n*s,e}function Xs(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-a*s,e[1]=i*l+o*s,e[2]=a*l+n*s,e[3]=o*l-i*s,e}ks(),Us=new us(4),us!=Float32Array&&(Us[0]=0,Us[1]=0,Us[2]=0,Us[3]=0);var Ys=qs;ks(),As(1,0,0),As(0,1,0),$s(),$s(),ds();const Ks=Fa([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Js}=Ks,Qs=Fa([{name:"a_pos_3",components:3,type:"Int16"}]);var el=Fa([{name:"a_pos",type:"Int16",components:2}]);class tl{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,r){const n=Rs(t,this.dir);if(Math.abs(n)<1e-6)return!1;const i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/n;return r[0]=this.pos[0]+this.dir[0]*i,r[1]=this.pos[1]+this.dir[1]*i,r[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(e,t,r){if(function(e,t){var r=e[0],n=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(r-a)<=cs*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=cs*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=cs*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return r[0]=r[1]=r[2]=0,!1;const[n,i,a]=this.dir,o=this.pos[0]-e[0],s=this.pos[1]-e[1],l=this.pos[2]-e[2],c=n*n+i*i+a*a,u=2*(o*n+s*i+l*a),d=u*u-4*c*(o*o+s*s+l*l-t*t);if(d<0){const e=Math.max(-u/2,0),c=o+n*e,d=s+i*e,h=l+a*e,p=Math.hypot(c,d,h);return r[0]=c*t/p,r[1]=d*t/p,r[2]=h*t/p,!1}{const e=(-u-Math.sqrt(d))/(2*c);if(e<0){const e=Math.hypot(o,s,l);return r[0]=o*t/e,r[1]=s*t/e,r[2]=l*t/e,!1}return r[0]=o+n*e,r[1]=s+i*e,r[2]=l+a*e,!0}}}class rl{constructor(e,t,r,n,i){this.TL=e,this.TR=t,this.BR=r,this.BL=n,this.horizon=i}static fromInvProjectionMatrix(e,t,r){const n=[-1,1,1],i=[1,1,1],a=[1,-1,1],o=[-1,-1,1],s=Os(n,n,e),l=Os(i,i,e),c=Os(a,a,e),u=Os(o,o,e);return new rl(s,l,c,u,t/r)}}class nl{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,r,n){const i=Math.pow(2,r),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const a=Gs([],r,e),o=1/a[3]/t*i;return function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}(a,a,[o,o,n?1/a[3]:o,o])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=Ls([],Bs([],Ns([],a[e[0]],a[e[1]]),Ns([],a[e[2]],a[e[1]]))),r=-Rs(t,a[e[1]]);return t.concat(r)}));return new nl(a,o)}}class il{static fromPoints(e){const t=[1/0,1/0,1/0],r=[-1/0,-1/0,-1/0];for(const n of e)Ps(t,t,n),Ms(r,r,n);return new il(t,r)}static applyTransform(e,t){const r=e.getCorners();for(let n=0;n<r.length;++n)Os(r[n],r[n],t);return il.fromPoints(r)}constructor(e,t){this.min=e,this.max=t,this.center=Ds([],Cs([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],r=Ss(this.min),n=Ss(this.max);for(let i=0;i<t.length;i++)r[i]=t[i]?this.min[i]:this.center[i],n[i]=t[i]?this.center[i]:this.max[i];return n[2]=this.max[2],new il(r,n)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let r=!0;for(let n=0;n<e.planes.length;n++){const i=e.planes[n];let a=0;for(let e=0;e<t.length;e++)a+=Rs(i,t[e])+i[3]>=0;if(0===a)return 0;a!==t.length&&(r=!1)}if(r)return 2;for(let n=0;n<3;n++){let t=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const a=e.points[i][n]-this.min[n];t=Math.min(t,a),r=Math.max(r,a)}if(r<0||t>this.max[n]-this.min[n])return 0}return 1}}const al=5,ol=6,sl=ss/Math.PI/2,ll=16383,cl=64,ul=[cl,32,16],dl=-sl,hl=sl,pl=[new il([dl,dl,dl],[hl,hl,hl]),new il([dl,dl,dl],[0,0,hl]),new il([0,dl,dl],[hl,0,hl]),new il([dl,0,dl],[0,hl,hl]),new il([0,0,dl],[hl,hl,hl])];function fl(e){return e*sl/Ul}function ml(e,t,r,n=!0){const i=Ds([],e._camera.position,e.worldSize),a=[t,r,1,1];Gs(a,a,e.pixelMatrixInverse),Ws(a,a,1/a[3]);const o=Ls([],Ns([],a,i)),s=e.globeMatrix,l=[s[12],s[13],s[14]],c=Ns([],l,i),u=Ts(c),d=Ls([],c),h=e.worldSize/(2*Math.PI),p=Rs(d,o),f=Math.asin(h/u);if(f<Math.acos(p)){if(!n)return null;const e=[],t=[];Ds(e,o,u/p),Ls(t,Ns(t,e,c)),Ls(o,Cs(o,c,Ds(o,t,Math.tan(f)*u)))}const m=[];new tl(i,o).closestPointOnSphere(l,h,m);const g=Ls([],J(s,0)),y=Ls([],J(s,1)),b=Ls([],J(s,2)),_=Rs(g,m),v=Rs(y,m),x=Rs(b,m),k=w(Math.asin(-v/h));let S=w(Math.atan2(_,x));S=e.center.lng+function(e,t){const r=(t-e+180)%360-180;return r<-180?r+360:r}(e.center.lng,S);const T=ql(S),A=C(Gl(k),0,1);return new Jl(T,A)}class gl{constructor(e,t,r){this.a=Ns([],e,r),this.b=Ns([],t,r),this.center=r;const n=Ls([],this.a),i=Ls([],this.b);this.angle=Math.acos(Rs(n,i))}}function yl(e,t){if(0===e.angle)return null;let r;return r=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),r<0||r>1?null:function(e,t,r,n){const i=Math.sin(r);return e*(Math.sin((1-n)*r)/i)+t*(Math.sin(n*r)/i)}(e.a[t],e.b[t],e.angle,C(r,0,1))+e.center[t]}function bl(e){if(e.z<=1)return pl[e.z+2*e.y+e.x];const t=Sl(kl(e));return il.fromPoints(t)}function _l(e,t,r){return Ds(e,e,1-r),zs(e,e,t,r)}function vl(e,t){const r=zl(t.zoom);if(0===r)return bl(e);const n=kl(e),i=Sl(n),a=ql(n.getWest())*t.worldSize,o=ql(n.getEast())*t.worldSize,s=Gl(n.getNorth())*t.worldSize,l=Gl(n.getSouth())*t.worldSize,c=[a,s,0],u=[o,s,0],d=[a,l,0],h=[o,l,0],p=fs([],t.globeMatrix);return Os(c,c,p),Os(u,u,p),Os(d,d,p),Os(h,h,p),i[0]=_l(i[0],d,r),i[1]=_l(i[1],h,r),i[2]=_l(i[2],u,r),i[3]=_l(i[3],c,r),il.fromPoints(i)}function xl(e,t,r){for(const n of e)Os(n,n,t),Ds(n,n,r)}function wl(e,t,r){const n=t/e.worldSize,i=e.globeMatrix;if(r.z<=1){const e=bl(r).getCorners();return xl(e,i,n),il.fromPoints(e)}const a=kl(r),o=Sl(a);xl(o,i,n);const s=Number.MAX_VALUE,l=[-s,-s,-s],c=[s,s,s];if(a.contains(e.center)){for(const e of o)Ps(c,c,e),Ms(l,l,e);l[2]=0;const t=e.point,r=[t.x*n,t.y*n,0];return Ps(c,c,r),Ms(l,l,r),new il(c,l)}const u=[i[12]*n,i[13]*n,i[14]*n],d=a.getCenter(),h=C(e.center.lat,-Yl,Yl),p=C(d.lat,-Yl,Yl),f=ql(e.center.lng),m=Gl(h);let g=f-ql(d.lng);const y=m-Gl(p);g>.5?g-=1:g<-.5&&(g+=1);let b=0;Math.abs(g)>Math.abs(y)?b=g>=0?1:3:(b=y>=0?0:2,zs(u,u,[i[4]*n,i[5]*n,i[6]*n],-Math.sin(x(y>=0?a.getSouth():a.getNorth()))*sl));const _=o[b],v=o[(b+1)%4],w=new gl(_,v,u),k=[yl(w,0)||_[0],yl(w,1)||_[1],yl(w,2)||_[2]],S=zl(e.zoom);if(S>0){const n=function({x:e,y:t,z:r},n,i,a,o){const s=1/(1<<r);let l=e*s,c=l+s,u=t*s,d=u+s,h=0;const p=(l+c)/2-a;return p>.5?h=-1:p<-.5&&(h=1),l=((l+h)*n-(a*=n))*i+a,c=((c+h)*n-a)*i+a,u=(u*n-(o*=n))*i+o,d=(d*n-o)*i+o,[[l,d,0],[c,d,0],[c,u,0],[l,u,0]]}(r,t,e._pixelsPerMercatorPixel,f,m);for(let e=0;e<o.length;e++)_l(o[e],n[e],S);const i=Cs([],n[b],n[(b+1)%4]);Ds(i,i,.5),_l(k,i,S)}for(const x of o)Ps(c,c,x),Ms(l,l,x);return c[2]=Math.min(_[2],v[2]),Ps(c,c,k),Ms(l,l,k),new il(c,l)}function kl({x:e,y:t,z:r}){const n=1/(1<<r),i=new Vl(Hl(e*n),Zl((t+1)*n)),a=new Vl(Hl((e+1)*n),Zl(t*n));return new ls(i,a)}function Sl(e){const t=x(e.getNorth()),r=x(e.getSouth()),n=Math.cos(t),i=Math.cos(r),a=Math.sin(t),o=Math.sin(r),s=e.getWest(),l=e.getEast();return[Tl(i,o,s),Tl(i,o,l),Tl(n,a,l),Tl(n,a,s)]}function Tl(e,t,r,n=sl){return r=x(r),[e*Math.sin(r)*n,-t*n,e*Math.cos(r)*n]}function Al(e,t,r){return Tl(Math.cos(x(e)),Math.sin(x(e)),t,r)}function Cl(e,t,r,n){const i=1<<r.z,a=(e/ss+r.x)/i;return Al(Zl((t/ss+r.y)/i),Hl(a),n)}function El({min:e,max:t}){return ll/Math.max(t[0]-e[0],t[1]-e[1],t[2]-e[2])}const Il=new Float64Array(16);function Pl(e){const t=El(e),r=vs(Il,[t,t,t]);return gs(r,r,((n=[])[0]=-(i=e.min)[0],n[1]=-i[1],n[2]=-i[2],n));var n,i}function Ml(e){const t=(n=e.min,(r=Il)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r);var r,n;const i=1/El(e);return ys(t,t,[i,i,i])}function Dl(e,t,r,n,i){const a=function(e){const t=ss/(2*Math.PI);return e/(2*Math.PI)/t}(r),o=[e,t,-r/(2*Math.PI)],s=ps(new Float64Array(16));return gs(s,s,o),ys(s,s,[a,a,a]),bs(s,s,x(-i)),_s(s,s,x(-n)),s}function zl(e){return E(al,ol,e)}function Ll(e,t){const r=Al(t.lat,t.lng),n=function(e){const t=Al(e._center.lat,e._center.lng);let r=Bs([],As(0,1,0),t);const n=xs([],-e.angle,t);r=Os(r,r,n),xs(n,-e._pitch,r);const i=Ls([],t);return Ds(i,i,fl(e.cameraToCenterDistance/e.pixelsPerMeter)),Os(i,i,n),Cs([],t,i)}(e);return o=(i=Es([],n,r))[0],s=i[1],l=i[2],c=(a=r)[0],u=a[1],d=a[2],p=(h=Math.sqrt(o*o+s*s+l*l)*Math.sqrt(c*c+u*u+d*d))&&Rs(i,a)/h,Math.acos(Math.min(Math.max(p,-1),1));var i,a,o,s,l,c,u,d,h,p}function Rl(e,t){return Ll(e,t)>Math.PI/2*1.01}const Bl=x(85),Ol=Math.cos(Bl),Fl=Math.sin(Bl),Ul=6371008.8,Nl=2*Math.PI*Ul;class jl{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new jl(I(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,r=this.lat*t,n=e.lat*t,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((e.lng-this.lng)*t);return Ul*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,r=t/Math.cos(Math.PI/180*this.lat);return new ls(new jl(this.lng-r,this.lat-t),new jl(this.lng+r,this.lat+t))}toEcef(e){const t=fl(e);return Al(this.lat,this.lng,sl+t)}static convert(e){if(e instanceof jl)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new jl(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new jl(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Vl=jl;function Wl(e){return Nl*Math.cos(e*Math.PI/180)}function ql(e){return(180+e)/360}function Gl(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function $l(e,t){return e/Wl(t)}function Hl(e){return 360*e-180}function Zl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Xl(e,t){return e*Wl(Zl(t))}const Yl=85.051129;function Kl(e){return 1/Math.cos(e*Math.PI/180)}class Jl{constructor(e,t,r=0){this.x=+e,this.y=+t,this.z=+r}static fromLngLat(e,t=0){const r=Vl.convert(e);return new Jl(ql(r.lng),Gl(r.lat),$l(t,r.lat))}toLngLat(){return new Vl(Hl(this.x),Zl(this.y))}toAltitude(){return Xl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Nl*Kl(Zl(this.y))}}function Ql(e,t,r,n,i,a,o,s,l){const c=(t+n)/2,u=(r+i)/2,d=new b(c,u);s(d),function(e,t,r,n,i,a){const o=r-i,s=n-a;return Math.abs((n-t)*o-(r-e)*s)/Math.hypot(o,s)}(d.x,d.y,a.x,a.y,o.x,o.y)>=l?(Ql(e,t,r,c,u,a,d,s,l),Ql(e,c,u,n,i,d,o,s,l)):e.push(o)}function ec(e,t,r){let n=e[0],i=n.x,a=n.y;t(n);const o=[n];for(let s=1;s<e.length;s++){const l=e[s],{x:c,y:u}=l;t(l),Ql(o,i,a,c,u,n,l,t,r),i=c,a=u,n=l}return o}function tc(e,t,r,n){if(n(t,r)){const i=t.add(r)._mult(.5);tc(e,t,i,n),tc(e,i,r,n)}else e.push(r)}function rc(e,t){let r=e[0];const n=[r];for(let i=1;i<e.length;i++){const a=e[i];tc(n,r,a,t),r=a}return n}const nc=Math.pow(2,14)-1,ic=-nc-1;function ac(e,t){const r=Math.round(e.x*t),n=Math.round(e.y*t);return e.x=C(r,ic,nc),e.y=C(n,ic,nc),(r<e.x||r>e.x+1||n<e.y||n>e.y+1)&&q("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function oc(e,t,r){const n=e.loadGeometry(),i=e.extent,a=ss/i;if(t&&r&&r.projection.isReprojectedInTileSpace){const a=1<<t.z,{scale:o,x:s,y:l,projection:c}=r,u=e=>{const r=Hl((t.x+e.x/i)/a),n=Zl((t.y+e.y/i)/a),u=c.project(r,n);e.x=(u.x*o-s)*i,e.y=(u.y*o-l)*i};for(let t=0;t<n.length;t++)if(1!==e.type)n[t]=ec(n[t],u,1);else{const e=[];for(const r of n[t])r.x<0||r.x>=i||r.y<0||r.y>=i||(u(r),e.push(r));n[t]=e}}for(const o of n)for(const e of o)ac(e,a);return n}function sc(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?oc(e):[]}}function lc(e,t,r,n,i){e.emplaceBack(2*t+(n+1)/2,2*r+(i+1)/2)}function cc(e,t,r){const n=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*n,r[1]*n,r[2]*n)}class uc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Na,this.indexArray=new ro,this.segments=new os,this.programConfigurations=new Yo(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r,n){const i=this.layers[0],a=[];let o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));for(const{feature:l,id:c,index:u,sourceLayerIndex:d}of e){const e=this.layers[0]._featureFilter.needGeometry,t=sc(l,e);if(!this.layers[0]._featureFilter.filter(new xa(this.zoom),t,r))continue;const i=o?o.evaluate(t,{},r):void 0,s={id:c,properties:l.properties,type:l.type,sourceLayerIndex:d,index:u,geometry:e?t.geometry:oc(l,r,n),patterns:{},sortKey:i};a.push(s)}o&&a.sort(((e,t)=>e.sortKey-t.sortKey));let s=null;"globe"===n.projection.name&&(this.globeExtVertexArray=new Ha,s=n.projection);for(const l of a){const{geometry:n,index:i,sourceLayerIndex:a}=l,o=e[i].feature;this.addFeature(l,n,i,t.availableImages,r,s),t.featureIndex.insert(o,n,i,a,this.index)}}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,is.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,as.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,r,n,i,a){for(const o of t)for(const t of o){const r=t.x,n=t.y;if(r<0||r>=ss||n<0||n>=ss)continue;if(a){const e=a.projectTilePoint(r,n,i),t=a.upVector(i,r,n),o=this.globeExtVertexArray;cc(o,e,t),cc(o,e,t),cc(o,e,t),cc(o,e,t)}const o=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=o.vertexLength;lc(this.layoutVertexArray,r,n,-1,-1),lc(this.layoutVertexArray,r,n,1,-1),lc(this.layoutVertexArray,r,n,1,1),lc(this.layoutVertexArray,r,n,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),o.vertexLength+=4,o.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},n,i)}}function dc(e,t){for(let r=0;r<e.length;r++)if(vc(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(vc(e,t[r]))return!0;return!!mc(e,t)}function hc(e,t,r){return!!vc(e,t)||!!yc(t,e,r)}function pc(e,t){if(1===e.length)return _c(t,e[0]);for(let r=0;r<t.length;r++){const n=t[r];for(let t=0;t<n.length;t++)if(vc(e,n[t]))return!0}for(let r=0;r<e.length;r++)if(_c(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(mc(e,t[r]))return!0;return!1}function fc(e,t,r){if(e.length>1){if(mc(e,t))return!0;for(let n=0;n<t.length;n++)if(yc(t[n],e,r))return!0}for(let n=0;n<e.length;n++)if(yc(e[n],t,r))return!0;return!1}function mc(e,t){if(0===e.length||0===t.length)return!1;for(let r=0;r<e.length-1;r++){const n=e[r],i=e[r+1];for(let e=0;e<t.length-1;e++)if(gc(n,i,t[e],t[e+1]))return!0}return!1}function gc(e,t,r,n){return G(e,r,n)!==G(t,r,n)&&G(e,t,r)!==G(e,t,n)}function yc(e,t,r){const n=r*r;if(1===t.length)return e.distSqr(t[0])<n;for(let i=1;i<t.length;i++)if(bc(e,t[i-1],t[i])<n)return!0;return!1}function bc(e,t,r){const n=t.distSqr(r);if(0===n)return e.distSqr(t);const i=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;return e.distSqr(i<0?t:i>1?r:r.sub(t)._mult(i)._add(t))}function _c(e,t){let r,n,i,a=!1;for(let o=0;o<e.length;o++){r=e[o];for(let e=0,o=r.length-1;e<r.length;o=e++)n=r[e],i=r[o],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(a=!a)}return a}function vc(e,t){let r=!1;for(let n=0,i=e.length-1;n<e.length;i=n++){const a=e[n],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(r=!r)}return r}function xc(e,t,r,n,i){for(const o of e)if(t<=o.x&&r<=o.y&&n>=o.x&&i>=o.y)return!0;const a=[new b(t,r),new b(t,i),new b(n,i),new b(n,r)];if(e.length>2)for(const o of a)if(vc(e,o))return!0;for(let o=0;o<e.length-1;o++)if(wc(e[o],e[o+1],a))return!0;return!1}function wc(e,t,r){const n=r[0],i=r[2];if(e.x<n.x&&t.x<n.x||e.x>i.x&&t.x>i.x||e.y<n.y&&t.y<n.y||e.y>i.y&&t.y>i.y)return!1;const a=G(e,t,r[0]);return a!==G(e,t,r[1])||a!==G(e,t,r[2])||a!==G(e,t,r[3])}function kc(e,t,r){const n=t.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(t.id).getMaxValue(e)}function Sc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Tc(e,t,r,n,i){if(!t[0]&&!t[1])return e;const a=b.convert(t)._mult(i);"viewport"===r&&a._rotate(-n);const o=[];for(let s=0;s<e.length;s++)o.push(e[s].sub(a));return o}function Ac(e,t,r,n){const i=b.convert(e)._mult(n);return"viewport"===t&&i._rotate(-r),i}Xi(uc,"CircleBucket",{omit:["layers"]});const Cc=new za({"circle-sort-key":new Ma(et.layout_circle["circle-sort-key"])});var Ec={paint:new za({"circle-radius":new Ma(et.paint_circle["circle-radius"]),"circle-color":new Ma(et.paint_circle["circle-color"]),"circle-blur":new Ma(et.paint_circle["circle-blur"]),"circle-opacity":new Ma(et.paint_circle["circle-opacity"]),"circle-translate":new Pa(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Pa(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pa(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pa(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ma(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ma(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ma(et.paint_circle["circle-stroke-opacity"])}),layout:Cc};function Ic(e,t,r,n,i,a,o,s,l){if(a&&e.queryGeometry.isAboveHorizon)return!1;a&&(l*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,u=r.projection.upVectorScale(c,r.center.lat,r.worldSize).metersToTile;for(const d of t)for(const t of d){const d=t.add(s),h=i&&r.elevation?r.elevation.exaggeration()*i.getElevationAt(d.x,d.y,!0):0,p=r.projection.projectTilePoint(d.x,d.y,c);if(h>0){const e=r.projection.upVector(c,d.x,d.y);p.x+=e[0]*u*h,p.y+=e[1]*u*h,p.z+=e[2]*u*h}const f=a?d:Pc(p.x,p.y,p.z,n),m=a?e.tilespaceRays.map((e=>zc(e,h))):e.queryGeometry.screenGeometry,g=Gs([],[p.x,p.y,p.z,1],n);if(!o&&a?l*=g[3]/r.cameraToCenterDistance:o&&!a&&(l*=r.cameraToCenterDistance/g[3]),a){const e=Zl((t.y/ss+c.y)/(1<<c.z));l/=r.projection.pixelsPerMeter(e,1)/$l(1,e)}if(hc(m,f,l))return!0}return!1}function Pc(e,t,r,n){const i=Gs([],[e,t,r,1],n);return new b(i[0]/i[3],i[1]/i[3])}const Mc=As(0,0,0),Dc=As(0,0,1);function zc(e,t){const r=ks();return Mc[2]=t,e.intersectsPlane(Mc,Dc,r),new b(r[0],r[1])}class Lc extends uc{}function Rc(e,{width:t,height:r},n,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*r*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*r*n);return e.width=t,e.height=r,e.data=i,e}function Bc(e,t,r){const{width:n,height:i}=t;n===e.width&&i===e.height||(Oc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,i)},r),e.width=n,e.height=i,e.data=t.data)}function Oc(e,t,r,n,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const o=e.data,s=t.data;for(let l=0;l<i.height;l++){const c=((r.y+l)*e.width+r.x)*a,u=((n.y+l)*t.width+n.x)*a;for(let e=0;e<i.width*a;e++)s[u+e]=o[c+e]}return t}Xi(Lc,"HeatmapBucket",{omit:["layers"]});class Fc{constructor(e,t){Rc(this,e,1,t)}resize(e){Bc(this,new Fc(e),1)}clone(){return new Fc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,i){Oc(e,t,r,n,i,1)}}class Uc{constructor(e,t){Rc(this,e,4,t)}resize(e){Bc(this,new Uc(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Uc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,i){Oc(e,t,r,n,i,4)}}Xi(Fc,"AlphaImage"),Xi(Uc,"RGBAImage");var Nc={paint:new za({"heatmap-radius":new Ma(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ma(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pa(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Da(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pa(et.paint_heatmap["heatmap-opacity"])})};function jc(e){const t={},r=e.resolution||256,n=e.clips?e.clips.length:1,i=e.image||new Uc({width:r,height:n}),a=(r,n,a)=>{t[e.evaluationKey]=a;const o=e.expression.evaluate(t);i.data[r+n+0]=Math.floor(255*o.r/o.a),i.data[r+n+1]=Math.floor(255*o.g/o.a),i.data[r+n+2]=Math.floor(255*o.b/o.a),i.data[r+n+3]=Math.floor(255*o.a)};if(e.clips)for(let o=0,s=0;o<n;++o,s+=4*r)for(let t=0,n=0;t<r;t++,n+=4){const i=t/(r-1),{start:l,end:c}=e.clips[o];a(s,n,l*(1-i)+c*i)}else for(let o=0,s=0;o<r;o++,s+=4)a(0,s,o/(r-1));return i}var Vc={paint:new za({"hillshade-illumination-direction":new Pa(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pa(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pa(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pa(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pa(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pa(et.paint_hillshade["hillshade-accent-color"])})};const Wc=Fa([{name:"a_pos",components:2,type:"Int16"}],4),{members:qc}=Wc;var Gc={exports:{}};function $c(e,t,r){r=r||2;var n,i,a,o,s,l,c,u=t&&t.length,d=u?t[0]*r:e.length,h=Hc(e,0,d,r,!0),p=[];if(!h||h.next===h.prev)return p;if(u&&(h=function(e,t,r,n){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Hc(e,t[i]*n,i<a-1?t[i+1]*n:e.length,n,!1))===o.next&&(o.steiner=!0),s.push(iu(o));for(s.sort(eu),i=0;i<s.length;i++)r=tu(s[i],r);return r}(e,t,h,r)),e.length>80*r){n=a=e[0],i=o=e[1];for(var f=r;f<d;f+=r)(s=e[f])<n&&(n=s),(l=e[f+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);c=0!==(c=Math.max(a-n,o-i))?32767/c:0}return Xc(h,p,r,n,i,c,0),p}function Hc(e,t,r,n,i){var a,o;if(i===yu(e,t,r,n)>0)for(a=t;a<r;a+=n)o=fu(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=fu(a,e[a],e[a+1],o);return o&&lu(o,o.next)&&(mu(o),o=o.next),o}function Zc(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!lu(n,n.next)&&0!==su(n.prev,n,n.next))n=n.next;else{if(mu(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Xc(e,t,r,n,i,a,o){if(e){!o&&a&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=nu(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,a,o,s,l,c=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,c*=2}while(o>1)}(i)}(e,n,i,a);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?Kc(e,n,i,a):Yc(e))t.push(s.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),mu(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?Xc(e=Jc(Zc(e),t,r),t,r,n,i,a,2):2===o&&Qc(e,t,r,n,i,a):Xc(Zc(e),t,r,n,i,a,1);break}}}function Yc(e){var t=e.prev,r=e,n=e.next;if(su(t,r,n)>=0)return!1;for(var i=t.x,a=r.x,o=n.x,s=t.y,l=r.y,c=n.y,u=i<a?i<o?i:o:a<o?a:o,d=s<l?s<c?s:c:l<c?l:c,h=i>a?i>o?i:o:a>o?a:o,p=s>l?s>c?s:c:l>c?l:c,f=n.next;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&au(i,s,a,l,o,c,f.x,f.y)&&su(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Kc(e,t,r,n){var i=e.prev,a=e,o=e.next;if(su(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,c=o.x,u=i.y,d=a.y,h=o.y,p=s<l?s<c?s:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=s>l?s>c?s:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,y=nu(p,f,t,r,n),b=nu(m,g,t,r,n),_=e.prevZ,v=e.nextZ;_&&_.z>=y&&v&&v.z<=b;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==o&&au(s,u,l,d,c,h,_.x,_.y)&&su(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==o&&au(s,u,l,d,c,h,v.x,v.y)&&su(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;_&&_.z>=y;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==o&&au(s,u,l,d,c,h,_.x,_.y)&&su(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;v&&v.z<=b;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==o&&au(s,u,l,d,c,h,v.x,v.y)&&su(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Jc(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!lu(i,a)&&cu(i,n,n.next,a)&&hu(i,a)&&hu(a,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(a.i/r|0),mu(n),mu(n.next),n=e=a),n=n.next}while(n!==e);return Zc(n)}function Qc(e,t,r,n,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&ou(o,s)){var l=pu(o,s);return o=Zc(o,o.next),l=Zc(l,l.next),Xc(o,t,r,n,i,a,0),void Xc(l,t,r,n,i,a,0)}s=s.next}o=o.next}while(o!==e)}function eu(e,t){return e.x-t.x}function tu(e,t){var r=function(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o&&(o=s,r=n.x<n.next.x?n:n.next,s===i))return r}n=n.next}while(n!==t);if(!r)return null;var l,c=r,u=r.x,d=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&au(a<d?i:o,a,u,d,a<d?o:i,a,n.x,n.y)&&(l=Math.abs(a-n.y)/(i-n.x),hu(n,e)&&(l<h||l===h&&(n.x>r.x||n.x===r.x&&ru(r,n)))&&(r=n,h=l)),n=n.next}while(n!==c);return r}(e,t);if(!r)return t;var n=pu(r,e);return Zc(n,n.next),Zc(r,r.next)}function ru(e,t){return su(e.prev,e,t.prev)<0&&su(t.next,e,e.next)<0}function nu(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function iu(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function au(e,t,r,n,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(n-s)>=(r-o)*(t-s)&&(r-o)*(a-s)>=(i-o)*(n-s)}function ou(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&cu(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(hu(e,t)&&hu(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(su(e.prev,e,t.prev)||su(e,t.prev,t))||lu(e,t)&&su(e.prev,e,e.next)>0&&su(t.prev,t,t.next)>0)}function su(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function lu(e,t){return e.x===t.x&&e.y===t.y}function cu(e,t,r,n){var i=du(su(e,t,r)),a=du(su(e,t,n)),o=du(su(r,n,e)),s=du(su(r,n,t));return i!==a&&o!==s||!(0!==i||!uu(e,r,t))||!(0!==a||!uu(e,n,t))||!(0!==o||!uu(r,e,n))||!(0!==s||!uu(r,t,n))}function uu(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function du(e){return e>0?1:e<0?-1:0}function hu(e,t){return su(e.prev,e,e.next)<0?su(e,t,e.next)>=0&&su(e,e.prev,t)>=0:su(e,t,e.prev)<0||su(e,e.next,t)<0}function pu(e,t){var r=new gu(e.i,e.x,e.y),n=new gu(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function fu(e,t,r,n){var i=new gu(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function mu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function gu(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yu(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}Gc.exports=$c,Gc.exports.default=$c,$c.deviation=function(e,t,r,n){var i=t&&t.length,a=Math.abs(yu(e,0,i?t[0]*r:e.length,r));if(i)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(yu(e,t[o]*r,o<s-1?t[o+1]*r:e.length,r));var l=0;for(o=0;o<n.length;o+=3){var c=n[o]*r,u=n[o+1]*r,d=n[o+2]*r;l+=Math.abs((e[c]-e[d])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[d+1]-e[c+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},$c.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[i][a][o]);i>0&&r.holes.push(n+=e[i-1].length)}return r};var bu=h(Gc.exports);function _u(e,t,r,n,i){vu(e,t,r||0,n||e.length-1,i||wu)}function vu(e,t,r,n,i){for(;n>r;){if(n-r>600){var a=n-r+1,o=t-r+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);vu(e,t,Math.max(r,Math.floor(t-o*l/a+c)),Math.min(n,Math.floor(t+(a-o)*l/a+c)),i)}var u=e[t],d=r,h=n;for(xu(e,r,t),i(e[n],u)>0&&xu(e,r,n);d<h;){for(xu(e,d,h),d++,h--;i(e[d],u)<0;)d++;for(;i(e[h],u)>0;)h--}0===i(e[r],u)?xu(e,r,h):xu(e,++h,n),h<=t&&(r=h+1),t<=h&&(n=h-1)}}function xu(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function wu(e,t){return e<t?-1:e>t?1:0}function ku(e,t){const r=e.length;if(r<=1)return[e];const n=[];let i,a;for(let o=0;o<r;o++){const t=$(e[o]);0!==t&&(e[o].area=Math.abs(t),void 0===a&&(a=t<0),a===t<0?(i&&n.push(i),i=[e[o]]):i.push(e[o]))}if(i&&n.push(i),t>1)for(let o=0;o<n.length;o++)n[o].length<=t||(_u(n[o],t,1,n[o].length-1,Su),n[o]=n[o].slice(0,t));return n}function Su(e,t){return t.area-e.area}function Tu(e,t,r){const n=r.patternDependencies;let i=!1;for(const a of t){const t=a.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const r=t.constantOr(null);r&&(i=!0,n[r]=!0)}return i}function Au(e,t,r,n,i){const a=i.patternDependencies;for(const o of t){const t=o.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:n},r,{},i.availableImages);e=e&&e.name?e.name:e,a[e]=!0,r.patterns[o.id]=e}}return r}class Cu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Na,this.indexArray=new ro,this.indexArray2=new lo,this.programConfigurations=new Yo(e.layers,e.zoom),this.segments=new os,this.segments2=new os,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.projection=e.projection}populate(e,t,r,n){this.hasPattern=Tu("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),a=[];for(const{feature:o,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=sc(o,e);if(!this.layers[0]._featureFilter.filter(new xa(this.zoom),u,r))continue;const d=i?i.evaluate(u,{},r,t.availableImages):void 0,h={id:s,properties:o.properties,type:o.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:oc(o,r,n),patterns:{},sortKey:d};a.push(h)}i&&a.sort(((e,t)=>e.sortKey-t.sortKey));for(const o of a){const{geometry:n,index:i,sourceLayerIndex:a}=o;if(this.hasPattern){const e=Au("fill",this.layers,o,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(o,n,i,r,{},t.availableImages);t.featureIndex.insert(e[i].feature,n,i,a,this.index)}}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}addFeatures(e,t,r,n,i){for(const a of this.patternFeatures)this.addFeature(a,a.geometry,a.index,t,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,r,n,i,a=[]){for(const o of ku(t,500)){let e=0;for(const s of o)e+=s.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),r=t.vertexLength,n=[],i=[];for(const s of o){if(0===s.length)continue;s!==o[0]&&i.push(n.length/2);const e=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(t+s.length-1,t),n.push(s[0].x),n.push(s[0].y);for(let r=1;r<s.length;r++)this.layoutVertexArray.emplaceBack(s[r].x,s[r].y),this.indexArray2.emplaceBack(t+r-1,t+r),n.push(s[r].x),n.push(s[r].y);e.vertexLength+=s.length,e.primitiveLength+=s.length}const a=bu(n,i);for(let o=0;o<a.length;o+=3)this.indexArray.emplaceBack(r+a[o],r+a[o+1],r+a[o+2]);t.vertexLength+=e,t.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,a,n)}}Xi(Cu,"FillBucket",{omit:["layers","patternFeatures"]});const Eu=new za({"fill-sort-key":new Ma(et.layout_fill["fill-sort-key"])});var Iu={paint:new za({"fill-antialias":new Pa(et.paint_fill["fill-antialias"]),"fill-opacity":new Ma(et.paint_fill["fill-opacity"]),"fill-color":new Ma(et.paint_fill["fill-color"]),"fill-outline-color":new Ma(et.paint_fill["fill-outline-color"]),"fill-translate":new Pa(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Pa(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ma(et.paint_fill["fill-pattern"])}),layout:Eu};const Pu=Fa([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Mu=Fa([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Du=Fa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:zu}=Pu;var Lu={},Ru=g,Bu=Ou;function Ou(e,t,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=i,e.readFields(Fu,this,t)}function Fu(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function Uu(e){for(var t,r,n=0,i=0,a=e.length,o=a-1;i<a;o=i++)n+=((r=e[o]).x-(t=e[i]).x)*(t.y+r.y);return n}Ou.types=["Unknown","Point","LineString","Polygon"],Ou.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,i=0,a=0,o=0,s=[];e.pos<r;){if(i<=0){var l=e.readVarint();n=7&l,i=l>>3}if(i--,1===n||2===n)a+=e.readSVarint(),o+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new Ru(a,o));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Ou.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,a=0,o=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(n<=0){var u=e.readVarint();r=7&u,n=u>>3}if(n--,1===r||2===r)(i+=e.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=e.readSVarint())<l&&(l=a),a>c&&(c=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,l,s,c]},Ou.prototype.toGeoJSON=function(e,t,r){var n,i,a=this.extent*Math.pow(2,r),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=Ou.types[this.type];function u(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(n=0;n<l.length;n++)d[n]=l[n][0];u(l=d);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,n,i=[],a=0;a<t;a++){var o=Uu(e[a]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&i.push(r),r=[e[a]]):r.push(e[a]))}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)u(l[n][i])}1===l.length?l=l[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Nu=Bu,ju=Vu;function Vu(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Wu,this,t),this.length=this._features.length}function Wu(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}Vu.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Nu(this._pbf,t,this.extent,this._keys,this._values)};var qu=ju;function Gu(e,t,r){if(3===e){var n=new qu(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}var $u=Lu.VectorTile=function(e,t){this.layers=e.readFields(Gu,{},t)},Hu=Lu.VectorTileFeature=Bu;function Zu(e,t,r,n){const i=[],a=0===n?(e,t,r,n,i,a)=>{e.push(new b(a,r+(a-t)/(n-t)*(i-r)))}:(e,t,r,n,i,a)=>{e.push(new b(t+(a-r)/(i-r)*(n-t),a))};for(const o of e){const e=[];for(const i of o){if(i.length<=2)continue;const o=[];for(let e=0;e<i.length-1;e++){const s=i[e].x,l=i[e].y,c=i[e+1].x,u=i[e+1].y,d=0===n?s:l,h=0===n?c:u;d<t?h>t&&a(o,s,l,c,u,t):d>r?h<r&&a(o,s,l,c,u,r):o.push(i[e]),h<t&&d>=t&&a(o,s,l,c,u,t),h>r&&d<=r&&a(o,s,l,c,u,r)}let s=i[i.length-1];const l=0===n?s.x:s.y;l>=t&&l<=r&&o.push(s),o.length&&(s=o[o.length-1],o[0].x===s.x&&o[0].y===s.y||o.push(o[0]),e.push(o))}e.length&&i.push(e)}return i}Lu.VectorTileLayer=ju;const Xu=Hu.types,Yu=Math.pow(2,13);function Ku(e,t,r,n,i,a,o,s){e.emplaceBack((t<<1)+o,(r<<1)+a,(Math.floor(n*Yu)<<1)+i,Math.round(s))}function Ju(e,t,r){const n=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*n,r[1]*n,r[2]*n)}class Qu{constructor(){this.acc=new b(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new b(e.x,e.y),this.max=new b(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const r=this.min,n=this.max;e.x<r.x?r.x=e.x:e.x>n.x&&(n.x=e.x),e.y<r.y?r.y=e.y:e.y>n.y&&(n.y=e.y),((0===e.x||e.x===ss)&&e.x===t.x)!=((0===e.y||e.y===ss)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Mr(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>ss!=e.x>ss&&this.addBorderIntersection(1,Mr(t.y,e.y,(ss-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Mr(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>ss!=e.y>ss&&this.addBorderIntersection(3,Mr(t.x,e.x,(ss-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const r=this.borders[e];t<r[0]&&(r[0]=t),t>r[1]&&(r[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const r=0===e.x?0:1;this.addBorderIntersection(r,t.y),this.addBorderIntersection(r,e.y)}else{const r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new b(0,0)}span(){return new b(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class ed{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Va,this.centroidVertexArray=new wo,this.indexArray=new ro,this.programConfigurations=new Yo(e.layers,e.zoom),this.segments=new os,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,r,n){this.features=[],this.hasPattern=Tu("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/ss/(1<<e.z)}(r),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:a,index:o,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=sc(i,e);if(!this.layers[0]._featureFilter.filter(new xa(this.zoom),l,r))continue;const c={id:a,sourceLayerIndex:s,index:o,geometry:e?l.geometry:oc(i,r,n),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(Au("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,o,r,{},t.availableImages,n),t.featureIndex.insert(i,c.geometry,o,s,this.index,u)}this.sortBorders()}addFeatures(e,t,r,n,i){for(const a of this.features){const{geometry:e}=a;this.addFeature(a,e,a.index,t,r,n,i)}this.sortBorders()}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Du.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Mu.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,n,i,a,o){const s=[new b(0,0),new b(ss,ss)],l=o.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new Qu:null,d="Polygon"===Xu[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ha);const h=ku(t,500);for(let g=h.length-1;g>=0;g--){const e=h[g];(0===e.length||(p=e[0]).every((e=>e.x<=0))||p.every((e=>e.x>=ss))||p.every((e=>e.y<=0))||p.every((e=>e.y>=ss)))&&h.splice(g,1)}var p;let f;if(c)f=ld(h,s,n);else{f=[];for(const e of h)f.push({polygon:e,bounds:s})}const m=d?this.edgeRadius:0;for(const{polygon:g,bounds:y}of f){let e=0,t=0;for(const n of g)d&&!n[0].equals(n[n.length-1])&&n.push(n[0]),t+=d?n.length-1:n.length;const r=this.segments.prepareSegment((d?5:4)*t,this.layoutVertexArray,this.indexArray);if(d){const t=[],i=[];e=r.vertexLength;for(const e of g){let a,o;e.length&&e!==g[0]&&i.push(t.length/2),a=e[1].sub(e[0])._perp()._unit();for(let i=1;i<e.length;i++){const s=e[i],u=e[i===e.length-1?1:i+1];let{x:d,y:h}=s;if(m){o=u.sub(s)._perp()._unit();const e=a.add(o)._unit(),t=m*Math.min(4,1/(a.x*e.x+a.y*e.y));d+=t*e.x,h+=t*e.y,a=o}Ku(this.layoutVertexArray,d,h,0,0,1,1,0),r.vertexLength++,t.push(s.x,s.y),c&&Ju(this.layoutVertexExtArray,l.projectTilePoint(d,h,n),l.upVector(n,d,h))}}const a=bu(t,i);for(let n=0;n<a.length;n+=3)this.indexArray.emplaceBack(e+a[n],e+a[n+2],e+a[n+1]),r.primitiveLength++}for(const i of g){u&&i.length&&u.startRing(i[0]);let t,a,o,s=i.length>4&&ad(i[i.length-2],i[0],i[1]),h=m?rd(i[i.length-2],i[0],i[1],m):0;a=i[1].sub(i[0])._perp()._unit();let p=!0;for(let f=1,g=0;f<i.length;f++){let b=i[f-1],_=i[f];const v=i[f===i.length-1?1:f+1];if(u&&d&&u.currentPolyCount.top++,id(_,b,y)){m&&(a=v.sub(_)._perp()._unit(),p=!p);continue}u&&u.append(_,b);const x=_.sub(b)._perp(),w=x.x/(Math.abs(x.x)+Math.abs(x.y)),k=x.y>0?1:0,S=b.dist(_);if(g+S>32768&&(g=0),m){o=v.sub(_)._perp()._unit();let e=nd(b,_,v,td(a,o),m);isNaN(e)&&(e=0);const t=_.sub(b)._unit();b=b.add(t.mult(h))._round(),_=_.add(t.mult(-e))._round(),h=e,a=o}const T=r.vertexLength,A=i.length>4&&ad(b,_,v);let C=od(g,s,p);if(Ku(this.layoutVertexArray,b.x,b.y,w,k,0,0,C),Ku(this.layoutVertexArray,b.x,b.y,w,k,0,1,C),g+=S,C=od(g,A,!p),s=A,Ku(this.layoutVertexArray,_.x,_.y,w,k,0,0,C),Ku(this.layoutVertexArray,_.x,_.y,w,k,0,1,C),r.vertexLength+=4,this.indexArray.emplaceBack(T+0,T+1,T+2),this.indexArray.emplaceBack(T+1,T+3,T+2),r.primitiveLength+=2,m){const n=e+(1===f?i.length-2:f-2),a=1===f?e:n+1;if(this.indexArray.emplaceBack(T+1,n,T+3),this.indexArray.emplaceBack(n,a,T+3),r.primitiveLength+=2,void 0===t&&(t=T),!id(v,i[f],y)){const e=f===i.length-1?t:r.vertexLength;this.indexArray.emplaceBack(T+2,T+3,e),this.indexArray.emplaceBack(T+3,e+1,e),this.indexArray.emplaceBack(T+3,a,e+1),r.primitiveLength+=3}p=!p}if(c){const e=this.layoutVertexExtArray,t=l.projectTilePoint(b.x,b.y,n),r=l.projectTilePoint(_.x,_.y,n),i=l.upVector(n,b.x,b.y),a=l.upVector(n,_.x,_.y);Ju(e,t,i),Ju(e,t,i),Ju(e,r,a),Ju(e,r,a)}}d&&(e+=i.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const e=u.borders,t=this.featuresOnBorder.push(u)-1;for(let r=0;r<4;r++)e[r][0]!==Number.MAX_VALUE&&this.borders[r].push(t)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,a,n)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,r)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[r].borders[e][0]))}encodeCentroid(e,t,r=!0){let n,i;if(e)if(0!==e.y){const r=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(r.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(r.y/10))}else n=Math.ceil(7*(e.x+450)),i=0;else n=0,i=+r;let a=r?this.centroidVertexArray.length:t.vertexArrayOffset;for(const o of t.polyCount){r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*o.edges+o.top);for(let e=0;e<o.top;e++)this.centroidVertexArray.emplace(a++,n,i);for(let e=0;e<2*o.edges;e++)this.centroidVertexArray.emplace(a++,0,i),this.centroidVertexArray.emplace(a++,n,i)}}}function td(e,t){const r=e.add(t)._unit();return e.x*r.x+e.y*r.y}function rd(e,t,r,n){const i=t.sub(e)._perp()._unit(),a=r.sub(t)._perp()._unit();return nd(e,t,r,td(i,a),n)}function nd(e,t,r,n,i){const a=Math.sqrt(1-n*n);return Math.min(e.dist(t)/3,t.dist(r)/3,i*a/n)}function id(e,t,r){return e.x<r[0].x&&t.x<r[0].x||e.x>r[1].x&&t.x>r[1].x||e.y<r[0].y&&t.y<r[0].y||e.y>r[1].y&&t.y>r[1].y}function ad(e,t,r){if(e.x<0||e.x>=ss||t.x<0||t.x>=ss||r.x<0||r.x>=ss)return!1;const n=r.sub(t),i=n.perp(),a=e.sub(t);return(n.x*a.x+n.y*a.y)/Math.sqrt((n.x*n.x+n.y*n.y)*(a.x*a.x+a.y*a.y))>-.866&&i.x*a.x+i.y*a.y<0}function od(e,t,r){const n=t?2|e:-3&e;return r?1|n:-2&n}function sd(){const e=Math.PI/32,t=Math.tan(e),r=Ul;return r*Math.sqrt(1+2*t*t)-r}function ld(e,t,r){const n=1<<r.z,i=Hl(r.x/n),a=Hl((r.x+1)/n),o=Zl(r.y/n),s=Zl((r.y+1)/n);return function(e,t,r,n,i=0,a){const o=[];if(!e.length||!r||!n)return o;const s=(e,t)=>{for(const r of e)o.push({polygon:r,bounds:t})},l=Math.ceil(Math.log2(r)),c=Math.ceil(Math.log2(n)),u=l-c,d=[];for(let f=0;f<Math.abs(u);f++)d.push(u>0?0:1);for(let f=0;f<Math.min(l,c);f++)d.push(0),d.push(1);let h=e;if(h=Zu(h,t[0].y-i,t[1].y+i,1),h=Zu(h,t[0].x-i,t[1].x+i,0),!h.length)return o;const p=[];for(d.length?p.push({polygons:h,bounds:t,depth:0}):s(h,t);p.length;){const e=p.pop(),t=e.depth,r=d[t],n=e.bounds[0],o=e.bounds[1],l=0===r?n.x:n.y,c=0===r?o.x:o.y,u=a?a(r,l,c):.5*(l+c),h=Zu(e.polygons,l-i,u+i,r),f=Zu(e.polygons,u-i,c+i,r);if(h.length){const e=[n,new b(0===r?u:o.x,1===r?u:o.y)];d.length>t+1?p.push({polygons:h,bounds:e,depth:t+1}):s(h,e)}if(f.length){const e=[new b(0===r?u:n.x,1===r?u:n.y),o];d.length>t+1?p.push({polygons:f,bounds:e,depth:t+1}):s(f,e)}}return o}(e,t,Math.ceil((a-i)/11.25),Math.ceil((o-s)/11.25),1,((e,t,i)=>{if(0===e)return.5*(t+i);{const e=Zl((r.y+t/ss)/n);return(Gl(.5*(Zl((r.y+i/ss)/n)+e))*n-r.y)*ss}}))}Xi(ed,"FillExtrusionBucket",{omit:["layers","features"]}),Xi(Qu,"PartMetadata");const cd=new za({"fill-extrusion-edge-radius":new Pa(et["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ud={paint:new za({"fill-extrusion-opacity":new Pa(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ma(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pa(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pa(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ma(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ma(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ma(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pa(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Pa(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Pa(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Pa(et["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:cd};function dd(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}class hd{constructor(e,t,r){this.z=e,this.x=t,this.y=r,this.key=md(0,e,e,t,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const r=function(e,t,r){var n=dd(256*e,256*(t=Math.pow(2,r)-t-1),r),i=dd(256*(e+1),256*(t+1),r);return n[0]+","+n[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),n=function(e,t,r){let n,i="";for(let a=e;a>0;a--)n=1<<a-1,i+=(t&n?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",r)}toString(){return`${this.z}/${this.x}/${this.y}`}}class pd{constructor(e,t){this.wrap=e,this.canonical=t,this.key=md(e,t.z,t.z,t.x,t.y)}}class fd{constructor(e,t,r,n,i){this.overscaledZ=e,this.wrap=t,this.canonical=new hd(r,+n,+i),this.key=0===t&&e===r?this.canonical.key:md(t,e,r,n,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new fd(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fd(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return md(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const r=this.canonical.z-e;return md(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new fd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new fd(t,this.wrap,t,r,n),new fd(t,this.wrap,t,r+1,n),new fd(t,this.wrap,t,r,n+1),new fd(t,this.wrap,t,r+1,n+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new fd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new fd(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function md(e,t,r,n,i){const a=1<<Math.min(r,22);let o=a*(i%a)+n%a;return e&&r<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-r)))),16*(32*o+r)+(t-r)}Xi(hd,"CanonicalTileID"),Xi(fd,"OverscaledTileID",{omit:["projMatrix"]});class gd extends b{constructor(e,t,r){super(e,t),this.z=r}}function yd(e,t){return e.x*t.x+e.y*t.y}function bd(e,t){if(1===e.length){let r=0;const n=t[r++];let i;for(;!i||n.equals(i);)if(i=t[r++],!i)return 1/0;for(;r<t.length;r++){const a=t[r],o=e[0],s=i.sub(n),l=a.sub(n),c=o.sub(n),u=yd(s,s),d=yd(s,l),h=yd(l,l),p=yd(c,s),f=yd(c,l),m=u*h-d*d,g=(h*p-d*f)/m,y=(u*f-d*p)/m,b=n.z*(1-g-y)+i.z*g+a.z*y;if(isFinite(b))return b}return 1/0}{let e=1/0;for(const r of t)e=Math.min(e,r.z);return e}}function _d(e,t,r,n,i,a,o,s){const l=o*i.getElevationAt(e,t,!0,!0),c=0!==a[0],u=c?0===a[1]?o*(a[0]/7-450):o*function(e,t,r){const n=Math.floor(t[0]/8),i=Math.floor(t[1]/8),a=10*(t[0]-8*n),o=10*(t[1]-8*i),s=e.getElevationAt(n,i,!0,!0),l=e.getMeterToDEM(r),c=Math.floor(.5*(a*l-1)),u=Math.floor(.5*(o*l-1)),d=e.tileCoordToPixel(n,i),h=2*c+1,p=2*u+1,f=function(e,t,r,n,i){return[e.getElevationAtPixel(t,r,!0),e.getElevationAtPixel(t+i,r,!0),e.getElevationAtPixel(t,r+i,!0),e.getElevationAtPixel(t+n,r+i,!0)]}(e,d.x-c,d.y-u,h,p),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),b=Math.min(.25,.5*l*(m+g)/h),_=Math.min(.25,.5*l*y/p);return s+Math.max(b*a,_*o)}(i,a,s):l;return{base:l+(0===r)?-1:r,top:c?Math.max(u+n,l+r+2):l+n}}const vd=Fa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:xd}=vd,wd=Fa([{name:"a_packed",components:4,type:"Float32"}]),{members:kd}=wd,Sd=Hu.types,Td=Math.cos(Math.PI/180*37.5);class Ad{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new Wa,this.layoutVertexArray2=new qa,this.indexArray=new ro,this.programConfigurations=new Yo(e.layers,e.zoom),this.segments=new os,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r,n){this.hasPattern=Tu("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),a=[];for(const{feature:c,id:u,index:d,sourceLayerIndex:h}of e){const e=this.layers[0]._featureFilter.needGeometry,t=sc(c,e);if(!this.layers[0]._featureFilter.filter(new xa(this.zoom),t,r))continue;const o=i?i.evaluate(t,{},r):void 0,s={id:u,properties:c.properties,type:c.type,sourceLayerIndex:h,index:d,geometry:e?t.geometry:oc(c,r,n),patterns:{},sortKey:o};a.push(s)}i&&a.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:o,featureIndex:s}=t,l=this.addConstantDashes(o);for(const c of a){const{geometry:n,index:i,sourceLayerIndex:a}=c;if(l&&this.addFeatureDashes(c,o),this.hasPattern){const e=Au("line",this.layers,c,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(c,n,i,r,o.positions,t.availableImages);s.insert(e[i].feature,n,i,a,this.index)}}addConstantDashes(e){let t=!1;for(const r of this.layers){const n=r.paint.get("line-dasharray").value,i=r.layout.get("line-cap").value;if("constant"!==n.kind||"constant"!==i.kind)t=!0;else{const t=i.value,r=n.value;if(!r)continue;e.addDash(r,t)}}return t}addFeatureDashes(e,t){const r=this.zoom;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,a=n.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===a.kind)continue;let o,s;if("constant"===i.kind){if(o=i.value,!o)continue}else o=i.evaluate({zoom:r},e);s="constant"===a.kind?a.value:a.evaluate({zoom:r},e),t.addDash(o,s),e.patterns[n.id]=t.getKey(o,s)}}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}addFeatures(e,t,r,n,i){for(const a of this.patternFeatures)this.addFeature(a,a.geometry,a.index,t,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,kd)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xd),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,r,n,i,a){const o=this.layers[0].layout,s=o.get("line-join").evaluate(e,{}),l=o.get("line-cap").evaluate(e,{}),c=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const d of t)this.addLine(d,e,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,a,n)}addLine(e,t,r,n,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const o="Polygon"===Sd[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(o?3:2))return;"bevel"===r&&(i=1.05);const c=this.overscaling<=16?15*ss/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let d,h,p,f,m;this.e1=this.e2=-1,o&&(d=e[s-2],m=e[l].sub(d)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?o?e[l+1]:void 0:e[g+1],p&&e[g].equals(p))continue;m&&(f=m),d&&(h=d),d=e[g],m=p?p.sub(d)._unit()._perp():f,f=f||m;let t=f.add(m);0===t.x&&0===t.y||t._unit();const y=f.x*m.x+f.y*m.y,b=t.x*m.x+t.y*m.y,_=0!==b?1/b:1/0,v=2*Math.sqrt(2-2*b),x=b<Td&&h&&p,w=f.x*m.y-f.y*m.x>0;if(x&&g>l){const e=d.dist(h);if(e>2*c){const t=d.sub(d.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,f,0,0,u),h=t}}const k=h&&p;let S=k?r:o?"butt":n;if(k&&"round"===S&&(_<a?S="miter":_<=2&&(S="fakeround")),"miter"===S&&_>i&&(S="bevel"),"bevel"===S&&(_>2&&(S="flipbevel"),_<i&&(S="miter")),h&&this.updateDistance(h,d),"miter"===S)t._mult(_),this.addCurrentVertex(d,t,0,0,u);else if("flipbevel"===S){if(_>100)t=m.mult(-1);else{const e=_*f.add(m).mag()/f.sub(m).mag();t._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(d,t,0,0,u),this.addCurrentVertex(d,t.mult(-1),0,0,u)}else if("bevel"===S||"fakeround"===S){const e=-Math.sqrt(_*_-1),t=w?e:0,r=w?0:e;if(h&&this.addCurrentVertex(d,f,t,r,u),"fakeround"===S){const e=Math.round(180*v/Math.PI/20);for(let t=1;t<e;t++){let r=t/e;if(.5!==r){const e=r-.5;r+=r*e*(r-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const n=m.sub(f)._mult(r)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(d,n.x,n.y,!1,w,0,u)}}p&&this.addCurrentVertex(d,m,-t,-r,u)}else if("butt"===S)this.addCurrentVertex(d,t,0,0,u);else if("square"===S){const e=h?1:-1;h||this.addCurrentVertex(d,t,e,e,u),this.addCurrentVertex(d,t,0,0,u),h&&this.addCurrentVertex(d,t,e,e,u)}else"round"===S&&(h&&(this.addCurrentVertex(d,f,0,0,u),this.addCurrentVertex(d,f,1,1,u,!0)),p&&(this.addCurrentVertex(d,m,-1,-1,u,!0),this.addCurrentVertex(d,m,0,0,u)));if(x&&g<s-1){const e=d.dist(p);if(e>2*c){const t=d.add(p.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,m,0,0,u),d=t}}}}addCurrentVertex(e,t,r,n,i,a=!1){const o=t.y*n-t.x,s=-t.y-t.x*n;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,a,!1,r,i),this.addHalfVertex(e,o,s,a,!0,-n,i)}addHalfVertex({x:e,y:t},r,n,i,a,o,s){this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(a?1:0),Math.round(63*r)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),a?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Xi(Ad,"LineBucket",{omit:["layers","patternFeatures"]});const Cd=new za({"line-cap":new Ma(et.layout_line["line-cap"]),"line-join":new Ma(et.layout_line["line-join"]),"line-miter-limit":new Pa(et.layout_line["line-miter-limit"]),"line-round-limit":new Pa(et.layout_line["line-round-limit"]),"line-sort-key":new Ma(et.layout_line["line-sort-key"])});var Ed={paint:new za({"line-opacity":new Ma(et.paint_line["line-opacity"]),"line-color":new Ma(et.paint_line["line-color"]),"line-translate":new Pa(et.paint_line["line-translate"]),"line-translate-anchor":new Pa(et.paint_line["line-translate-anchor"]),"line-width":new Ma(et.paint_line["line-width"]),"line-gap-width":new Ma(et.paint_line["line-gap-width"]),"line-offset":new Ma(et.paint_line["line-offset"]),"line-blur":new Ma(et.paint_line["line-blur"]),"line-dasharray":new Ma(et.paint_line["line-dasharray"]),"line-pattern":new Ma(et.paint_line["line-pattern"]),"line-gradient":new Da(et.paint_line["line-gradient"]),"line-trim-offset":new Pa(et.paint_line["line-trim-offset"])}),layout:Cd};const Id=new class extends Ma{possiblyEvaluate(e,t){return t=new xa(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,r,n){return t=D({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,r,n)}}(Ed.paint.properties["line-width"].specification);function Pd(e,t){return t>0?t+2*e:e}Id.useIntegerZoom=!0;const Md=Fa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Dd=Fa([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),zd=Fa([{name:"a_projected_pos",components:4,type:"Float32"}],4);Fa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ld=Fa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Rd=Fa([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Fa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bd=Fa([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Od=Fa([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Fa([{name:"triangle",components:3,type:"Uint16"}]),Fa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Fa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Fa([{type:"Float32",name:"offsetX"}]),Fa([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Fd=24;const Ud=128;function Nd(e,t){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new xa(e+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:n}=r;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let a=i;for(;a<t.length&&t[a]<e+1;)a++;a=Math.min(t.length-1,a);const o=t[i],s=t[a];return"composite"===r.kind?{kind:"composite",minZoom:o,maxZoom:s,interpolationType:n}:{kind:"camera",minZoom:o,maxZoom:s,minSize:r.evaluate(new xa(o)),maxSize:r.evaluate(new xa(s)),interpolationType:n}}}function jd(e,{uSize:t,uSizeT:r},{lowerSize:n,upperSize:i}){return"source"===e.kind?n/Ud:"composite"===e.kind?Mr(n/Ud,i/Ud,r):t}function Vd(e,t){let r=0,n=0;if("constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:a,maxZoom:o}=e,s=i?C(Qr.interpolationFactor(i,t,a,o),0,1):0;"camera"===e.kind?n=Mr(e.minSize,e.maxSize,s):r=s}return{uSizeT:r,uSize:n}}var Wd=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Ud,evaluateSizeForFeature:jd,evaluateSizeForZoom:Vd,getSizeData:Nd});function qd(e,t,r){return e.sections.forEach((e=>{e.text=function(e,t,r){const n=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),va.applyArabicShaping&&(e=va.applyArabicShaping(e)),e}(e.text,t,r)})),e}const Gd={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function $d(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function Hd(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var Zd=Kd,Xd=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=r?i-1:0,h=r?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=h,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=n;u>0;o=256*o+e[t+d],d+=h,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=c}return(p?-1:1)*o*Math.pow(2,a-n)},Yd=function(e,t,r,n,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&s,p+=f,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+p]=255&o,p+=f,o/=256,c-=8);e[r+p-f]|=128*m};function Kd(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Kd.Varint=0,Kd.Fixed64=1,Kd.Bytes=2,Kd.Fixed32=5;var Jd=4294967296,Qd=1/Jd,eh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function th(e){return e.type===Kd.Bytes?e.readVarint()+e.pos:e.pos+1}function rh(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function nh(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function ih(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function ah(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function oh(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function sh(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function lh(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function ch(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function uh(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function dh(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function hh(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function ph(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function fh(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function mh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Kd.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,e(i,t,this),this.pos===a&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ph(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=mh(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ph(this.buf,this.pos)+ph(this.buf,this.pos+4)*Jd;return this.pos+=8,e},readSFixed64:function(){var e=ph(this.buf,this.pos)+mh(this.buf,this.pos+4)*Jd;return this.pos+=8,e},readFloat:function(){var e=Xd(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Xd(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,i,a=r.buf;if(n=(112&(i=a[r.pos++]))>>4,i<128)return rh(e,n,t);if(n|=(127&(i=a[r.pos++]))<<3,i<128)return rh(e,n,t);if(n|=(127&(i=a[r.pos++]))<<10,i<128)return rh(e,n,t);if(n|=(127&(i=a[r.pos++]))<<17,i<128)return rh(e,n,t);if(n|=(127&(i=a[r.pos++]))<<24,i<128)return rh(e,n,t);if(n|=(1&(i=a[r.pos++]))<<31,i<128)return rh(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&eh?function(e,t,r){return eh.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var n="",i=t;i<r;){var a,o,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>r)break;1===u?l<128&&(c=l):2===u?128==(192&(a=e[i+1]))&&(c=(31&l)<<6|63&a)<=127&&(c=null):3===u?(o=e[i+2],128==(192&(a=e[i+1]))&&128==(192&o)&&((c=(15&l)<<12|(63&a)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=e[i+2],s=e[i+3],128==(192&(a=e[i+1]))&&128==(192&o)&&128==(192&s)&&((c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),i+=u}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Kd.Bytes)return e.push(this.readVarint(t));var r=th(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Kd.Bytes)return e.push(this.readSVarint());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Kd.Bytes)return e.push(this.readBoolean());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Kd.Bytes)return e.push(this.readFloat());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Kd.Bytes)return e.push(this.readDouble());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Kd.Bytes)return e.push(this.readFixed32());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Kd.Bytes)return e.push(this.readSFixed32());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Kd.Bytes)return e.push(this.readFixed64());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Kd.Bytes)return e.push(this.readSFixed64());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Kd.Varint)for(;this.buf[this.pos++]>127;);else if(t===Kd.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Kd.Fixed32)this.pos+=4;else{if(t!==Kd.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),fh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),fh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),fh(this.buf,-1&e,this.pos),fh(this.buf,Math.floor(e*Qd),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),fh(this.buf,-1&e,this.pos),fh(this.buf,Math.floor(e*Qd),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,i,a=0;a<t.length;a++){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){n>56319||a+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&nh(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Yd(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Yd(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&nh(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Kd.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,ih,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ah,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,lh,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,oh,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,sh,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,ch,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,uh,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,dh,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,hh,t)},writeBytesField:function(e,t){this.writeTag(e,Kd.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Kd.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Kd.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Kd.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Kd.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Kd.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Kd.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Kd.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Kd.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Kd.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var gh=h(Zd);const yh=3;function bh(e,t,r){t.glyphs=[],1===e&&r.readMessage(_h,t)}function _h(e,t,r){if(3===e){const{id:e,bitmap:n,width:i,height:a,left:o,top:s,advance:l}=r.readMessage(vh,{});t.glyphs.push({id:e,bitmap:new Fc({width:i+2*yh,height:a+2*yh},n),metrics:{width:i,height:a,left:o,top:s,advance:l}})}else 4===e?t.ascender=r.readSVarint():5===e&&(t.descender=r.readSVarint())}function vh(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}const xh=yh;function wh(e){let t=0,r=0;for(const o of e)t+=o.w*o.h,r=Math.max(r,o.w);e.sort(((e,t)=>t.h-e.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let i=0,a=0;for(const o of e)for(let e=n.length-1;e>=0;e--){const t=n[e];if(!(o.w>t.w||o.h>t.h)){if(o.x=t.x,o.y=t.y,a=Math.max(a,o.y+o.h),i=Math.max(i,o.x+o.w),o.w===t.w&&o.h===t.h){const t=n.pop();e<n.length&&(n[e]=t)}else o.h===t.h?(t.x+=o.w,t.w-=o.w):o.w===t.w?(t.y+=o.h,t.h-=o.h):(n.push({x:t.x+o.w,y:t.y,w:t.w-o.w,h:o.h}),t.y+=o.h,t.h-=o.h);break}}return{w:i,h:a,fill:t/(i*a)||0}}const kh=1;class Sh{constructor(e,{pixelRatio:t,version:r,stretchX:n,stretchY:i,content:a}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=n,this.stretchY=i,this.content=a,this.version=r}get tl(){return[this.paddedRect.x+kh,this.paddedRect.y+kh]}get br(){return[this.paddedRect.x+this.paddedRect.w-kh,this.paddedRect.y+this.paddedRect.h-kh]}get displaySize(){return[(this.paddedRect.w-2*kh)/this.pixelRatio,(this.paddedRect.h-2*kh)/this.pixelRatio]}}class Th{constructor(e,t){const r={},n={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,r,i),this.addImages(t,n,i);const{w:a,h:o}=wh(i),s=new Uc({width:a||1,height:o||1});for(const l in e){const t=e[l],n=r[l].paddedRect;Uc.copy(t.data,s,{x:0,y:0},{x:n.x+kh,y:n.y+kh},t.data)}for(const l in t){const e=t[l],r=n[l].paddedRect,i=r.x+kh,a=r.y+kh,o=e.data.width,c=e.data.height;Uc.copy(e.data,s,{x:0,y:0},{x:i,y:a},e.data),Uc.copy(e.data,s,{x:0,y:c-1},{x:i,y:a-1},{width:o,height:1}),Uc.copy(e.data,s,{x:0,y:0},{x:i,y:a+c},{width:o,height:1}),Uc.copy(e.data,s,{x:o-1,y:0},{x:i-1,y:a},{width:1,height:c}),Uc.copy(e.data,s,{x:0,y:0},{x:i+o,y:a},{width:1,height:c})}this.image=s,this.iconPositions=r,this.patternPositions=n}addImages(e,t,r){for(const n in e){const i=e[n],a={x:0,y:0,w:i.data.width+2*kh,h:i.data.height+2*kh};r.push(a),t[n]=new Sh(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((t=>e.hasImage(t))),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}patchUpdatedImage(e,t,r){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[n,i]=e.tl;r.update(t.data,void 0,{x:n,y:i})}}Xi(Sh,"ImagePosition"),Xi(Th,"ImageAtlas");const Ah={horizontal:1,vertical:2,horizontalOnly:3},Ch=-17;class Eh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const r=new Eh;return r.scale=e||1,r.fontStack=t,r}static forImage(e){const t=new Eh;return t.imageName=e,t}}class Ih{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const r=new Ih;for(let n=0;n<e.sections.length;n++){const i=e.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,t)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let r="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n+1)||null,a=e.charCodeAt(n-1)||null;r+=!t&&(i&&aa(i)&&!Gd[e[n+1]]||a&&aa(a)&&!Gd[e[n-1]])||!Gd[e[n]]?e[n]:Gd[e[n]]}return r}(this.text,e)}trim(){let e=0;for(let r=0;r<this.text.length&&Mh[this.text.charCodeAt(r)];r++)e++;let t=this.text.length;for(let r=this.text.length-1;r>=0&&r>=e&&Mh[this.text.charCodeAt(r)];r--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const r=new Ih;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Eh.forText(e.scale,e.fontStack||t));const r=this.sections.length-1;for(let n=0;n<e.text.length;++n)this.sectionIndex.push(r)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void q("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(Eh.forImage(t)),this.sectionIndex.push(this.sections.length-1)):q("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ph(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f){const m=Ih.fromFeature(e,i);d===Ah.vertical&&m.verticalizePunctuation(h);let g=[];const y=function(e,t,r,n,i,a){if(!e)return[];const o=[],s=function(e,t,r,n,i,a){let o=0;for(let s=0;s<e.length();s++){const r=e.getSection(s);o+=zh(e.getCharCode(s),r,n,i,t,a)}return o/Math.max(1,Math.ceil(o/r))}(e,t,r,n,i,a),l=e.text.indexOf("\u200b")>=0;let c=0;for(let d=0;d<e.length();d++){const r=e.getSection(d),h=e.getCharCode(d);if(Mh[h]||(c+=zh(h,r,n,i,t,a)),d<e.length()-1){const t=!((u=h)<11904||!(ea["Bopomofo Extended"](u)||ea.Bopomofo(u)||ea["CJK Compatibility Forms"](u)||ea["CJK Compatibility Ideographs"](u)||ea["CJK Compatibility"](u)||ea["CJK Radicals Supplement"](u)||ea["CJK Strokes"](u)||ea["CJK Symbols and Punctuation"](u)||ea["CJK Unified Ideographs Extension A"](u)||ea["CJK Unified Ideographs"](u)||ea["Enclosed CJK Letters and Months"](u)||ea["Halfwidth and Fullwidth Forms"](u)||ea.Hiragana(u)||ea["Ideographic Description Characters"](u)||ea["Kangxi Radicals"](u)||ea["Katakana Phonetic Extensions"](u)||ea.Katakana(u)||ea["Vertical Forms"](u)||ea["Yi Radicals"](u)||ea["Yi Syllables"](u)));(Dh[h]||t||r.imageName)&&o.push(Bh(d+1,c,s,o,Rh(h,e.getCharCode(d+1),t&&l),!1))}}var u;return Oh(Bh(e.length(),c,s,o,0,!0))}(m,c,a,t,n,p),{processBidirectionalText:b,processStyledBidirectionalText:_}=va;if(b&&1===m.sections.length){const e=b(m.toString(),y);for(const t of e){const e=new Ih;e.text=t,e.sections=m.sections;for(let r=0;r<t.length;r++)e.sectionIndex.push(0);g.push(e)}}else if(_){const e=_(m.text,m.sectionIndex,y);for(const t of e){const e=new Ih;e.text=t[0],e.sectionIndex=t[1],e.sections=m.sections,g.push(e)}}else g=function(e,t){const r=[],n=e.text;let i=0;for(const a of t)r.push(e.substring(i,a)),i=a;return i<n.length&&r.push(e.substring(i,n.length)),r}(m,y);const v=[],x={positionedLines:v,text:m.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:d,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,r,n,i,a,o,s,l,c,u,d){let h=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const w of i){const e=w.getSections();for(const r of e){if(r.imageName)continue;const e=t[r.fontStack];if(e&&(g=void 0!==e.ascender&&void 0!==e.descender,!g))break}if(!g)break}let y=0;for(const w of i){w.trim();const i=w.getMaxScale(),o=(i-1)*Fd,s={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=s;const _=s.positionedGlyphs;let v=0;if(!w.length()){p+=a,++y;continue}let x=0,k=0;for(let a=0;a<w.length();a++){const o=w.getSection(a),s=w.getSectionIndex(a),f=w.getCharCode(a);let m=o.scale,y=null,S=null,T=null,A=Fd,C=0;const E=!(l===Ah.horizontal||!u&&!ia(f)||u&&(Mh[f]||(b=f,ea.Arabic(b)||ea["Arabic Supplement"](b)||ea["Arabic Extended-A"](b)||ea["Arabic Presentation Forms-A"](b)||ea["Arabic Presentation Forms-B"](b))));if(o.imageName){const t=n[o.imageName];if(!t)continue;T=o.imageName,e.iconsInText=e.iconsInText||!0,S=t.paddedRect;const r=t.displaySize;m=m*Fd/d,y={width:r[0],height:r[1],left:kh,top:-xh,advance:E?r[1]:r[0],localGlyph:!1},C=g?-y.height*m:Ch+i*Fd-r[1]*m,A=y.advance;const a=(E?r[0]:r[1])*m-Fd*i;a>0&&a>v&&(v=a)}else{const e=r[o.fontStack];if(!e)continue;e[f]&&(S=e[f]);const n=t[o.fontStack];if(!n)continue;const a=n.glyphs[f];if(!a)continue;if(y=a.metrics,A=8203!==f?Fd:0,g){const e=void 0!==n.ascender?Math.abs(n.ascender):0,t=void 0!==n.descender?Math.abs(n.descender):0,r=(e+t)*m;x<r&&(x=r,k=(e-t)/2*m),C=-e*m}else C=Ch+(i-m)*Fd}E?(e.verticalizable=!0,_.push({glyph:f,imageName:T,x:h,y:p+C,vertical:E,scale:m,localGlyph:y.localGlyph,fontStack:o.fontStack,sectionIndex:s,metrics:y,rect:S}),h+=A*m+c):(_.push({glyph:f,imageName:T,x:h,y:p+C,vertical:E,scale:m,localGlyph:y.localGlyph,fontStack:o.fontStack,sectionIndex:s,metrics:y,rect:S}),h+=y.advance*m+c)}0!==_.length&&(f=Math.max(h-c,f),g?Uh(_,m,v,k,a*i/2):Uh(_,m,v,0,a/2)),h=0;const S=a*i+v;s.lineOffset=Math.max(v,o),p+=S,++y}var b;const _=p,{horizontalAlign:v,verticalAlign:x}=Fh(o);(function(e,t,r,n,i,a){const o=(t-r)*i,s=-a*n;for(const l of e)for(const e of l.positionedGlyphs)e.x+=o,e.y+=s})(e.positionedLines,m,v,x,f,_),e.top+=-x*_,e.bottom=e.top+_,e.left+=-v*f,e.right=e.left+f,e.hasBaseline=g}(x,t,r,n,g,o,s,l,d,c,h,f),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(v)&&x}const Mh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Dh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function zh(e,t,r,n,i,a){if(t.imageName){const e=n[t.imageName];return e?e.displaySize[0]*t.scale*Fd/a+i:0}{const n=r[t.fontStack],a=n&&n.glyphs[e];return a?a.metrics.advance*t.scale+i:0}}function Lh(e,t,r,n){const i=Math.pow(e-t,2);return n?e<t?i/2:2*i:i+Math.abs(r)*r}function Rh(e,t,r){let n=0;return 10===e&&(n-=1e4),r&&(n+=150),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function Bh(e,t,r,n,i,a){let o=null,s=Lh(t,r,i,a);for(const l of n){const e=Lh(t-l.x,r,i,a)+l.badness;e<=s&&(o=l,s=e)}return{index:e,x:t,priorBreak:o,badness:s}}function Oh(e){return e?Oh(e.priorBreak).concat(e.index):[]}function Fh(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Uh(e,t,r,n,i){if(!(t||r||n||i))return;const a=e.length-1,o=e[a],s=(o.x+o.metrics.advance*o.scale)*t;for(let l=0;l<=a;l++)e[l].x-=s,e[l].y+=r+n+i}function Nh(e,t,r){const{horizontalAlign:n,verticalAlign:i}=Fh(r),a=t[0]-e.displaySize[0]*n,o=t[1]-e.displaySize[1]*i;return{image:e,top:o,bottom:o+e.displaySize[1],left:a,right:a+e.displaySize[0]}}function jh(e,t,r,n,i,a){const o=e.image;let s;if(o.content){const e=o.content,t=o.pixelRatio||1;s=[e[0]/t,e[1]/t,o.displaySize[0]-e[2]/t,o.displaySize[1]-e[3]/t]}const l=t.left*a,c=t.right*a;let u,d,h,p;"width"===r||"both"===r?(p=i[0]+l-n[3],d=i[0]+c+n[1]):(p=i[0]+(l+c-o.displaySize[0])/2,d=p+o.displaySize[0]);const f=t.top*a,m=t.bottom*a;return"height"===r||"both"===r?(u=i[1]+f-n[0],h=i[1]+m+n[2]):(u=i[1]+(f+m-o.displaySize[1])/2,h=u+o.displaySize[1]),{image:o,top:u,right:d,bottom:h,left:p,collisionPadding:s}}class Vh extends b{constructor(e,t,r,n,i){super(e,t),this.angle=n,this.z=r,void 0!==i&&(this.segment=i)}clone(){return new Vh(this.x,this.y,this.z,this.angle,this.segment)}}function Wh(e,t,r,n,i){if(void 0===t.segment)return!0;let a=t,o=t.segment+1,s=0;for(;s>-r/2;){if(o--,o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;const l=[];let c=0;for(;s<r/2;){const t=e[o],r=e[o+1];if(!r)return!1;let a=e[o-1].angleTo(t)-t.angleTo(r);for(a=Math.abs((a+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:a}),c+=a;s-l[0].distance>n;)c-=l.shift().angleDelta;if(c>i)return!1;o++,s+=t.dist(r)}return!0}function qh(e){let t=0;for(let r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function Gh(e,t,r){return e?.6*t*r:0}function $h(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Hh(e,t,r,n,i,a){const o=Gh(r,i,a),s=$h(r,n)*a;let l=0;const c=qh(e)/2;for(let u=0;u<e.length-1;u++){const r=e[u],n=e[u+1],i=r.dist(n);if(l+i>c){const a=(c-l)/i,d=Mr(r.x,n.x,a),h=Mr(r.y,n.y,a),p=new Vh(d,h,0,n.angleTo(r),u);return!o||Wh(e,p,s,o,t)?p:void 0}l+=i}}function Zh(e,t,r,n,i,a,o,s,l){const c=Gh(n,a,o),u=$h(n,i),d=u*o,h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-d<t/4&&(t=d+t/4),Xh(e,h?t/2*s%t:(u/2+2*a)*o*s%t,t,c,r,d,h,!1,l)}function Xh(e,t,r,n,i,a,o,s,l){const c=a/2,u=qh(e);let d=0,h=t-r,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],o=e[f+1],s=t.dist(o),m=o.angleTo(t);for(;h+r<d+s;){h+=r;const g=(h-d)/s,y=Mr(t.x,o.x,g),b=Mr(t.y,o.y,g);if(y>=0&&y<l&&b>=0&&b<l&&h-c>=0&&h+c<=u){const t=new Vh(y,b,0,m,f);t._round(),n&&!Wh(e,t,a,n,i)||p.push(t)}}d+=s}return s||p.length||o||(p=Xh(e,d/2,r,n,i,a,o,!0,l)),p}function Yh(e,t,r,n,i){const a=[];for(let o=0;o<e.length;o++){const s=e[o];let l;for(let e=0;e<s.length-1;e++){let o=s[e],c=s[e+1];o.x<t&&c.x<t||(o.x<t?o=new b(t,o.y+(t-o.x)/(c.x-o.x)*(c.y-o.y))._round():c.x<t&&(c=new b(t,o.y+(t-o.x)/(c.x-o.x)*(c.y-o.y))._round()),o.y<r&&c.y<r||(o.y<r?o=new b(o.x+(r-o.y)/(c.y-o.y)*(c.x-o.x),r)._round():c.y<r&&(c=new b(o.x+(r-o.y)/(c.y-o.y)*(c.x-o.x),r)._round()),o.x>=n&&c.x>=n||(o.x>=n?o=new b(n,o.y+(n-o.x)/(c.x-o.x)*(c.y-o.y))._round():c.x>=n&&(c=new b(n,o.y+(n-o.x)/(c.x-o.x)*(c.y-o.y))._round()),o.y>=i&&c.y>=i||(o.y>=i?o=new b(o.x+(i-o.y)/(c.y-o.y)*(c.x-o.x),i)._round():c.y>=i&&(c=new b(o.x+(i-o.y)/(c.y-o.y)*(c.x-o.x),i)._round()),l&&o.equals(l[l.length-1])||(l=[o],a.push(l)),l.push(c)))))}}return a}Xi(Vh,"Anchor");const Kh=1e20;function Jh(e,t,r,n,i,a,o,s,l){for(let c=t;c<t+n;c++)Qh(e,r*a+c,a,i,o,s,l);for(let c=r;c<r+i;c++)Qh(e,c*a+t,1,n,o,s,l)}function Qh(e,t,r,n,i,a,o){a[0]=0,o[0]=-Kh,o[1]=Kh,i[0]=e[t];for(let s=1,l=0,c=0;s<n;s++){i[s]=e[t+s*r];const n=s*s;do{const e=a[l];c=(i[s]-i[e]+n-e*e)/(s-e)/2}while(c<=o[l]&&--l>-1);l++,a[l]=s,o[l]=c,o[l+1]=Kh}for(let s=0,l=0;s<n;s++){for(;o[l+1]<s;)l++;const n=a[l],c=s-n;e[t+s*r]=i[n]+c*c}}const ep=2,tp={none:0,ideographs:1,all:2};class rp{constructor(e,t,r){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const r=[];for(const n in e)for(const t of e[n])r.push({stack:n,id:t});P(r,(({stack:e,id:t},r)=>{let n=this.entries[e];n||(n=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=n.glyphs[t];if(void 0!==i)return void r(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(n,e,t),i)return n.glyphs[t]=i,void r(null,{stack:e,id:t,glyph:i});const a=Math.floor(t/256);if(256*a>65535)return void r(new Error("glyphs > 65535 not supported"));if(n.ranges[a])return void r(null,{stack:e,id:t,glyph:i});let o=n.requests[a];o||(o=n.requests[a]=[],rp.loadGlyphRange(e,a,this.url,this.requestManager,((e,t)=>{if(t){n.ascender=t.ascender,n.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(n.glyphs[+e]=t.glyphs[+e]);n.ranges[a]=!0}for(const r of o)r(e,t);delete n.requests[a]}))),o.push(((n,i)=>{n?r(n):i&&r(null,{stack:e,id:t,glyph:i.glyphs[t]||null})}))}),((e,r)=>{if(e)t(e);else if(r){const e={};for(const{stack:t,id:n,glyph:i}of r)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[n]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==tp.none&&(this.localGlyphMode===tp.all?!!this.localFontFamily:!!this.localFontFamily&&(ea["CJK Unified Ideographs"](e)||ea["Hangul Syllables"](e)||ea.Hiragana(e)||ea.Katakana(e)||ea["CJK Symbols and Punctuation"](e)))}_tinySDF(e,t,r){const n=this.localFontFamily;if(!n||!this._doesCharSupportLocalGlyph(r))return;let i=e.tinySDF;if(!i){let r="400";/bold/i.test(t)?r="900":/medium/i.test(t)?r="500":/light/i.test(t)&&(r="200"),i=e.tinySDF=new rp.TinySDF({fontFamily:n,fontWeight:r,fontSize:24*ep,buffer:3*ep,radius:8*ep}),i.fontWeight=r}if(this.localGlyphs[i.fontWeight][r])return this.localGlyphs[i.fontWeight][r];const a=String.fromCharCode(r),{data:o,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:d,glyphTop:h,glyphAdvance:p}=i.draw(a);return this.localGlyphs[i.fontWeight][r]={id:r,bitmap:new Fc({width:s,height:l},o),metrics:{width:c/ep,height:u/ep,left:d/ep,top:h/ep-27,advance:p/ep,localGlyph:!0}}}}rp.loadGlyphRange=function(e,t,r,n,i){const a=256*t,o=a+255,s=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",`${a}-${o}`),le.Glyphs);he(s,((e,t)=>{if(e)i(e);else if(t){const e={},r=function(e){return new gh(e).readFields(bh,{})}(t);for(const t of r.glyphs)e[t.id]=t;i(null,{glyphs:e,ascender:r.ascender,descender:r.descender})}}))},rp.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:r=8,cutoff:n=.25,fontFamily:i="sans-serif",fontWeight:a="normal",fontStyle:o="normal"}={}){this.buffer=t,this.cutoff=n,this.radius=r;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${o} ${a} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:i,actualBoundingBoxRight:a}=this.ctx.measureText(e),o=Math.ceil(r),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-i))),l=Math.min(this.size-this.buffer,o+Math.ceil(n)),c=s+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),p={data:h,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:o,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+o);const b=f.getImageData(m,m,s,l);y.fill(Kh,0,d),g.fill(0,0,d);for(let _=0;_<l;_++)for(let e=0;e<s;e++){const t=b.data[4*(_*s+e)+3]/255;if(0===t)continue;const r=(_+m)*c+e+m;if(1===t)y[r]=0,g[r]=Kh;else{const e=.5-t;y[r]=e>0?e*e:0,g[r]=e<0?e*e:0}}Jh(y,0,0,c,u,c,this.f,this.v,this.z),Jh(g,m,m,s,l,c,this.f,this.v,this.z);for(let _=0;_<d;_++){const e=Math.sqrt(y[_])-Math.sqrt(g[_]);h[_]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};const np=kh;function ip(e,t,r,n){const i=[],a=e.image,o=a.pixelRatio,s=a.paddedRect.w-2*np,l=a.paddedRect.h-2*np,c=e.right-e.left,u=e.bottom-e.top,d=a.stretchX||[[0,s]],h=a.stretchY||[[0,l]],p=(e,t)=>e+t[1]-t[0],f=d.reduce(p,0),m=h.reduce(p,0),g=s-f,y=l-m;let _=0,v=f,x=0,w=m,k=0,S=g,T=0,A=y;if(a.content&&n){const e=a.content;_=ap(d,0,e[0]),x=ap(h,0,e[1]),v=ap(d,e[0],e[2]),w=ap(h,e[1],e[3]),k=e[0]-_,T=e[1]-x,S=e[2]-e[0]-v,A=e[3]-e[1]-w}const C=(n,i,s,l)=>{const d=sp(n.stretch-_,v,c,e.left),h=lp(n.fixed-k,S,n.stretch,f),p=sp(i.stretch-x,w,u,e.top),g=lp(i.fixed-T,A,i.stretch,m),y=sp(s.stretch-_,v,c,e.left),C=lp(s.fixed-k,S,s.stretch,f),E=sp(l.stretch-x,w,u,e.top),I=lp(l.fixed-T,A,l.stretch,m),P=new b(d,p),M=new b(y,p),D=new b(y,E),z=new b(d,E),L=new b(h/o,g/o),R=new b(C/o,I/o),B=t*Math.PI/180;if(B){const e=Math.sin(B),t=Math.cos(B),r=[t,-e,e,t];P._matMult(r),M._matMult(r),z._matMult(r),D._matMult(r)}const O=n.stretch+n.fixed,F=i.stretch+i.fixed;return{tl:P,tr:M,bl:z,br:D,tex:{x:a.paddedRect.x+np+O,y:a.paddedRect.y+np+F,w:s.stretch+s.fixed-O,h:l.stretch+l.fixed-F},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:R,minFontScaleX:S/o/c,minFontScaleY:A/o/u,isSDF:r}};if(n&&(a.stretchX||a.stretchY)){const e=op(d,g,f),t=op(h,y,m);for(let r=0;r<e.length-1;r++){const n=e[r],a=e[r+1];for(let e=0;e<t.length-1;e++)i.push(C(n,t[e],a,t[e+1]))}}else i.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function ap(e,t,r){let n=0;for(const i of e)n+=Math.max(t,Math.min(r,i[1]))-Math.max(t,Math.min(r,i[0]));return n}function op(e,t,r){const n=[{fixed:-np,stretch:0}];for(const[i,a]of e){const e=n[n.length-1];n.push({fixed:i-e.stretch,stretch:e.stretch}),n.push({fixed:i-e.stretch,stretch:e.stretch+(a-i)})}return n.push({fixed:t+np,stretch:r}),n}function sp(e,t,r,n){return e/t*r+n}function lp(e,t,r,n){return e-t*r/n}function cp(e,t,r,n){const i=t+e.positionedLines[n].lineOffset;return 0===n?r+i/2:r+(i+(t+e.positionedLines[n-1].lineOffset))/2}class up{constructor(e=[],t=dp){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const i=e-1>>1,a=t[i];if(r(n,a)>=0)break;t[e]=a,e=i}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,i=t[e];for(;e<n;){let n=1+(e<<1),a=t[n];const o=n+1;if(o<this.length&&r(t[o],a)<0&&(n=o,a=t[o]),r(a,i)>=0)break;t[e]=a,e=n}t[e]=i}}function dp(e,t){return e<t?-1:e>t?1:0}function hp(e,t=1,r=!1){let n=1/0,i=1/0,a=-1/0,o=-1/0;const s=e[0];for(let p=0;p<s.length;p++){const e=s[p];(!p||e.x<n)&&(n=e.x),(!p||e.y<i)&&(i=e.y),(!p||e.x>a)&&(a=e.x),(!p||e.y>o)&&(o=e.y)}const l=Math.min(a-n,o-i);let c=l/2;const u=new up([],pp);if(0===l)return new b(n,i);for(let p=n;p<a;p+=l)for(let t=i;t<o;t+=l)u.push(new fp(p+c,t+c,c,e));let d=function(e){let t=0,r=0,n=0;const i=e[0];for(let a=0,o=i.length,s=o-1;a<o;s=a++){const e=i[a],o=i[s],l=e.x*o.y-o.x*e.y;r+=(e.x+o.x)*l,n+=(e.y+o.y)*l,t+=3*l}return new fp(r/t,n/t,0,e)}(e),h=u.length;for(;u.length;){const n=u.pop();(n.d>d.d||!d.d)&&(d=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,h)),n.max-d.d<=t||(c=n.h/2,u.push(new fp(n.p.x-c,n.p.y-c,c,e)),u.push(new fp(n.p.x+c,n.p.y-c,c,e)),u.push(new fp(n.p.x-c,n.p.y+c,c,e)),u.push(new fp(n.p.x+c,n.p.y+c,c,e)),h+=4)}return r&&(console.log(`num probes: ${h}`),console.log(`best distance: ${d.d}`)),d.p}function pp(e,t){return t.max-e.max}class fp{constructor(e,t,r,n){this.p=new b(e,t),this.h=r,this.d=function(e,t){let r=!1,n=1/0;for(let i=0;i<t.length;i++){const a=t[i];for(let t=0,i=a.length,o=i-1;t<i;o=t++){const i=a[t],s=a[o];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(r=!r),n=Math.min(n,bc(e,i,s))}}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}}const mp=7,gp=Number.POSITIVE_INFINITY,yp=Math.sqrt(2);function bp(e,[t,r]){let n=0,i=0;if(r===gp){t<0&&(t=0);const r=t/yp;switch(e){case"top-right":case"top-left":i=r-mp;break;case"bottom-right":case"bottom-left":i=-r+mp;break;case"bottom":i=-t+mp;break;case"top":i=t-mp}switch(e){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=t;break;case"right":n=-t}}else{switch(t=Math.abs(t),r=Math.abs(r),e){case"top-right":case"top-left":case"top":i=r-mp;break;case"bottom-right":case"bottom-left":case"bottom":i=-r+mp}switch(e){case"top-right":case"bottom-right":case"right":n=-t;break;case"top-left":case"bottom-left":case"left":n=t}}return[n,i]}function _p(e,t,r,n,i,a,o,s,l,c){e.createArrays(),e.tilePixelRatio=ss/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,d=e.layers[0]._unevaluatedLayout._values,h={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:r}=e.textSizeData;h.compositeTextSizes=[d["text-size"].possiblyEvaluate(new xa(t),s),d["text-size"].possiblyEvaluate(new xa(r),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:r}=e.iconSizeData;h.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new xa(t),s),d["icon-size"].possiblyEvaluate(new xa(r),s)]}h.layoutTextSize=d["text-size"].possiblyEvaluate(new xa(l+1),s),h.layoutIconSize=d["icon-size"].possiblyEvaluate(new xa(l+1),s),h.textMaxSize=d["text-size"].possiblyEvaluate(new xa(18),s);const p="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),f=u.get("text-size");for(const m of e.features){const a=u.get("text-font").evaluate(m,{},s).join(","),l=f.evaluate(m,{},s),d=h.layoutTextSize.evaluate(m,{},s),g=(h.layoutIconSize.evaluate(m,{},s),{horizontal:{},vertical:void 0}),y=m.text;let b,_=[0,0];if(y){const n=y.toString(),o=u.get("text-letter-spacing").evaluate(m,{},s)*Fd,c=u.get("text-line-height").evaluate(m,{},s)*Fd,h=ra(n)?o:0,f=u.get("text-anchor").evaluate(m,{},s),b=u.get("text-variable-anchor");if(!b){const e=u.get("text-radial-offset").evaluate(m,{},s);_=e?bp(f,[e*Fd,gp]):u.get("text-offset").evaluate(m,{},s).map((e=>e*Fd))}let v=p?"center":u.get("text-justify").evaluate(m,{},s);const x="point"===u.get("symbol-placement"),w=x?u.get("text-max-width").evaluate(m,{},s)*Fd:1/0,k=o=>{e.allowVerticalPlacement&&ta(n)&&(g.vertical=Ph(y,t,r,i,a,w,c,f,o,h,_,Ah.vertical,!0,d,l))};if(!p&&b){const e="auto"===v?b.map((e=>vp(e))):[v];let n=!1;for(let o=0;o<e.length;o++){const s=e[o];if(!g.horizontal[s])if(n)g.horizontal[s]=g.horizontal[0];else{const e=Ph(y,t,r,i,a,w,c,"center",s,h,_,Ah.horizontal,!1,d,l);e&&(g.horizontal[s]=e,n=1===e.positionedLines.length)}}k("left")}else{if("auto"===v&&(v=vp(f)),x||u.get("text-writing-mode").indexOf("horizontal")>=0||!ta(n)){const e=Ph(y,t,r,i,a,w,c,f,v,h,_,Ah.horizontal,!1,d,l);e&&(g.horizontal[v]=e)}k(x?"left":v)}}let v=!1;if(m.icon&&m.icon.name){const t=n[m.icon.name];t&&(b=Nh(i[m.icon.name],u.get("icon-offset").evaluate(m,{},s),u.get("icon-anchor").evaluate(m,{},s)),v=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&q("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const x=Tp(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!x&&x.iconsInText),(x||b)&&xp(e,m,g,b,n,h,d,0,_,v,o,s,c)}a&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function vp(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xp(e,t,r,n,i,a,o,s,l,c,u,d,h){let p=a.textMaxSize.evaluate(t,{},d);void 0===p&&(p=o);const f=e.layers[0].layout,m=f.get("icon-offset").evaluate(t,{},d),g=Tp(r.horizontal)||r.vertical,y="globe"===h.name,b=Fd,_=o/b,v=e.tilePixelRatio*p/b,w=(P=e.overscaling,e.zoom>18&&P>2&&(P>>=1),Math.max(ss/(512*P),1)*f.get("symbol-spacing")),k=f.get("text-padding")*e.tilePixelRatio,S=f.get("icon-padding")*e.tilePixelRatio,T=x(f.get("text-max-angle")),A="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),C="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),E=f.get("symbol-placement"),I=w/2;var P;const M=f.get("icon-text-fit");let D;n&&"none"!==M&&(e.allowVerticalPlacement&&r.vertical&&(D=jh(n,r.vertical,M,f.get("icon-text-fit-padding"),m,_)),g&&(n=jh(n,g,M,f.get("icon-text-fit-padding"),m,_)));const z=(o,s,p)=>{if(s.x<0||s.x>=ss||s.y<0||s.y>=ss)return;let f=null;if(y){const{x:e,y:t,z:r}=h.projectTilePoint(s.x,s.y,p);f={anchor:new Vh(e,t,r,0,void 0),up:h.upVector(p,s.x,s.y)}}!function(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y,b,_,v,x,w,k,S){const T=e.addToLineVertexArray(t,n);let A,C,E,I,P,M,D,z=0,L=0,R=0,B=0,O=-1,F=-1;const U={};let N=Mo("");const j=r?r.anchor:t;let V=0,W=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[V,W]=l.layout.get("text-offset").evaluate(v,{},S).map((e=>e*Fd)):(V=l.layout.get("text-radial-offset").evaluate(v,{},S)*Fd,W=gp),e.allowVerticalPlacement&&i.vertical){const e=i.vertical;if(f)M=Cp(e),s&&(D=Cp(s));else{const r=l.layout.get("text-rotate").evaluate(v,{},S)+90;E=Ap(c,j,t,u,d,h,e,p,r,m),s&&(I=Ap(c,j,t,u,d,h,s,y,r))}}if(a){const n=l.layout.get("icon-rotate").evaluate(v,{},S),i="none"!==l.layout.get("icon-text-fit"),o=ip(a,n,w,i),p=s?ip(s,n,w,i):void 0;C=Ap(c,j,t,u,d,h,a,y,n),z=4*o.length;const f=e.iconSizeData;let m=null;"source"===f.kind?(m=[Ud*l.layout.get("icon-size").evaluate(v,{},S)],m[0]>kp&&q(`${e.layerIds[0]}: Value for "icon-size" is >= ${wp}. Reduce your "icon-size".`)):"composite"===f.kind&&(m=[Ud*x.compositeIconSizes[0].evaluate(v,{},S),Ud*x.compositeIconSizes[1].evaluate(v,{},S)],(m[0]>kp||m[1]>kp)&&q(`${e.layerIds[0]}: Value for "icon-size" is >= ${wp}. Reduce your "icon-size".`)),e.addSymbols(e.icon,o,m,_,b,v,!1,r,t,T.lineStartIndex,T.lineLength,-1,k,S),O=e.icon.placedSymbolArray.length-1,p&&(L=4*p.length,e.addSymbols(e.icon,p,m,_,b,v,Ah.vertical,r,t,T.lineStartIndex,T.lineLength,-1,k,S),F=e.icon.placedSymbolArray.length-1)}for(const q in i.horizontal){const n=i.horizontal[q];A||(N=Mo(n.text),f?P=Cp(n):A=Ap(c,j,t,u,d,h,n,p,l.layout.get("text-rotate").evaluate(v,{},S),m));const a=1===n.positionedLines.length;if(R+=Sp(e,r,t,n,o,l,f,v,m,T,i.vertical?Ah.horizontal:Ah.horizontalOnly,a?Object.keys(i.horizontal):[q],U,O,x,k,S),a)break}i.vertical&&(B+=Sp(e,r,t,i.vertical,o,l,f,v,m,T,Ah.vertical,["vertical"],U,F,x,k,S));let G=-1;const $=(e,t)=>e?Math.max(e,t):t;G=$(P,G),G=$(M,G),G=$(D,G);const H=G>-1?1:0;e.glyphOffsetArray.length>=sf.MAX_GLYPHS&&q("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==v.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,v.sortKey),e.symbolInstances.emplaceBack(j.x,j.y,j.z,t.x,t.y,U.right>=0?U.right:-1,U.center>=0?U.center:-1,U.left>=0?U.left:-1,U.vertical>=0?U.vertical:-1,O,F,N,void 0!==A?A:e.collisionBoxArray.length,void 0!==A?A+1:e.collisionBoxArray.length,void 0!==E?E:e.collisionBoxArray.length,void 0!==E?E+1:e.collisionBoxArray.length,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,I||e.collisionBoxArray.length,I?I+1:e.collisionBoxArray.length,u,R,B,z,L,H,0,V,W,G)}(e,s,f,o,r,n,i,D,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,k,A,l,0,S,C,m,t,a,c,u,d)};if("line"===E)for(const x of Yh(t.geometry,0,0,ss,ss)){const t=Zh(x,w,T,r.vertical||g,n,b,v,e.overscaling,ss);for(const r of t)g&&Ep(e,g.text,I,r)||z(x,r,d)}else if("line-center"===E){for(const x of t.geometry)if(x.length>1){const e=Hh(x,T,r.vertical||g,n,b,v);e&&z(x,e,d)}}else if("Polygon"===t.type)for(const x of ku(t.geometry,0)){const e=hp(x,16);z(x[0],new Vh(e.x,e.y,0,0,void 0),d)}else if("LineString"===t.type)for(const x of t.geometry)z(x,new Vh(x[0].x,x[0].y,0,0,void 0),d);else if("Point"===t.type)for(const x of t.geometry)for(const e of x)z([e],new Vh(e.x,e.y,0,0,void 0),d)}const wp=255,kp=wp*Ud;function Sp(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g){const y=function(e,t,r,n,i,a,o,s){const l=[];if(0===t.positionedLines.length)return l;const c=n.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=function(e){const t=e[0],r=e[1],n=t*r;return n>0?[t,-r]:n<0?[-t,r]:0===t?[r,t]:[r,-t]}(r);let d=Math.abs(t.top-t.bottom);for(const m of t.positionedLines)d-=m.lineOffset;const h=t.positionedLines.length,p=d/h;let f=t.top-r[1];for(let m=0;m<h;++m){const e=t.positionedLines[m];f=cp(t,p,f,m);for(const n of e.positionedGlyphs){if(!n.rect)continue;const e=n.rect||{};let a=xh+1,d=!0,h=1,p=0;if(n.imageName){const e=o[n.imageName];if(!e)continue;if(e.sdf){q("SDF images are not supported in formatted text and will be ignored.");continue}d=!1,h=e.pixelRatio,a=kh/h}const m=(i||s)&&n.vertical,g=n.metrics.advance*n.scale/2,y=n.metrics,_=n.rect;if(null===_)continue;s&&t.verticalizable&&(p=n.imageName?g-n.metrics.width*n.scale/2:0);const v=i?[n.x+g,n.y]:[0,0];let x=[0,0],w=[0,0],k=!1;i||(m?(w=[n.x+g+u[0],n.y+u[1]-p],k=!0):x=[n.x+g+r[0],n.y+r[1]-p]);const S=_.w*n.scale/(h*(n.localGlyph?ep:1)),T=_.h*n.scale/(h*(n.localGlyph?ep:1));let A,C,E,I;if(m){const e=n.y-f,t=new b(-g,g-e),r=-Math.PI/2,i=new b(...w);A=new b(-g+x[0],x[1]),A._rotateAround(r,t)._add(i),A.x+=-e+g,A.y-=(y.left-a)*n.scale;const o=n.imageName?y.advance*n.scale:Fd*n.scale,s=String.fromCharCode(n.glyph);$d(s)?A.x+=(1-a)*n.scale:Hd(s)?A.x+=o-y.height*n.scale+(-a-1)*n.scale:A.x+=n.imageName||y.width+2*a===_.w&&y.height+2*a===_.h?(o-T)/2:(o-(y.height+2*a)*n.scale)/2,C=new b(A.x,A.y-S),E=new b(A.x+T,A.y),I=new b(A.x+T,A.y-S)}else{const e=(y.left-a)*n.scale-g+x[0],t=(-y.top-a)*n.scale+x[1],r=e+S,i=t+T;A=new b(e,t),C=new b(r,t),E=new b(e,i),I=new b(r,i)}if(c){let e;e=i?new b(0,0):k?new b(u[0],u[1]):new b(r[0],r[1]),A._rotateAround(c,e),C._rotateAround(c,e),E._rotateAround(c,e),I._rotateAround(c,e)}const P=new b(0,0),M=new b(0,0);l.push({tl:A,tr:C,bl:E,br:I,tex:e,writingMode:t.writingMode,glyphOffset:v,sectionIndex:n.sectionIndex,isSDF:d,pixelOffsetTL:P,pixelOffsetBR:M,minFontScaleX:0,minFontScaleY:0})}}return l}(0,n,l,a,o,s,i,e.allowVerticalPlacement),_=e.textSizeData;let v=null;"source"===_.kind?(v=[Ud*a.layout.get("text-size").evaluate(s,{},g)],v[0]>kp&&q(`${e.layerIds[0]}: Value for "text-size" is >= ${wp}. Reduce your "text-size".`)):"composite"===_.kind&&(v=[Ud*f.compositeTextSizes[0].evaluate(s,{},g),Ud*f.compositeTextSizes[1].evaluate(s,{},g)],(v[0]>kp||v[1]>kp)&&q(`${e.layerIds[0]}: Value for "text-size" is >= ${wp}. Reduce your "text-size".`)),e.addSymbols(e.text,y,v,l,o,s,u,t,r,c.lineStartIndex,c.lineLength,p,m,g);for(const b of d)h[b]=e.text.placedSymbolArray.length-1;return 4*y.length}function Tp(e){for(const t in e)return e[t];return null}function Ap(e,t,r,n,i,a,o,s,l,c){let u=o.top,d=o.bottom,h=o.left,p=o.right;const f=o.collisionPadding;if(f&&(h-=f[0],u-=f[1],p+=f[2],d+=f[3]),l){const e=new b(h,u),t=new b(p,u),r=new b(h,d),n=new b(p,d),i=x(l);let a=new b(0,0);c&&(a=new b(c[0],c[1])),e._rotateAround(i,a),t._rotateAround(i,a),r._rotateAround(i,a),n._rotateAround(i,a),h=Math.min(e.x,t.x,r.x,n.x),p=Math.max(e.x,t.x,r.x,n.x),u=Math.min(e.y,t.y,r.y,n.y),d=Math.max(e.y,t.y,r.y,n.y)}return e.emplaceBack(t.x,t.y,t.z,r.x,r.y,h,u,p,d,s,n,i,a),e.length-1}function Cp(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Ep(e,t,r,n){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(n.dist(e[t])<r)return!0}else i[t]=[];return i[t].push(n),!1}function Ip(e,t){const r=e.fovAboveCenter,n=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-n)/Math.cos(e._pitch),a=Math.sin(r)*i/Math.sin(Math.max(Math.PI/2-e._pitch-r,.01)),o=Math.sin(e._pitch)*a+i;return Math.min(1.01*o,i*(1/e._horizonShift))}function Pp(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const r=Math.pow(2,-e.z),n=e.x*r,i=(e.x+1)*r,a=e.y*r,o=(e.y+1)*r,s=Hl(n),l=Hl(i),c=Zl(a),u=Zl(o),d=t.project(s,c),h=t.project(l,c),p=t.project(l,u),f=t.project(s,u);let m=Math.min(d.x,h.x,p.x,f.x),g=Math.min(d.y,h.y,p.y,f.y),y=Math.max(d.x,h.x,p.x,f.x),b=Math.max(d.y,h.y,p.y,f.y);const _=r/16;function v(e,r,n,i,a,o){const s=(n+a)/2,l=(i+o)/2,c=t.project(Hl(s),Zl(l)),u=Math.max(0,m-c.x,g-c.y,c.x-y,c.y-b);m=Math.min(m,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),b=Math.max(b,c.y),u>_&&(v(e,c,n,i,s,l),v(c,r,s,l,a,o))}v(d,h,n,a,i,a),v(h,p,i,a,i,o),v(p,f,i,o,n,o),v(f,d,n,o,n,a),m-=_,g-=_,y+=_,b+=_;const x=1/Math.max(y-m,b-g);return{scale:x,x:m*x,y:g*x,x2:y*x,y2:b*x,projection:t}}const Mp=ps(new Float32Array(16));class Dp{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new Vl(0,0)}projectTilePoint(e,t,r){return{x:e,y:t,z:0}}locationPoint(e,t,r=!0){return e._coordinatePoint(e.locationCoordinate(t),r)}pixelsPerMeter(e,t){return $l(1,e)*t}pixelSpaceConversion(e,t,r){return 1}farthestPixelDistance(e){return Ip(e,e.pixelsPerMeter)}pointCoordinate(e,t,r,n){const i=e.horizonLineFromTop(!1),a=new b(t,Math.max(i,r));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,n))}pointCoordinate3D(e,t,r){const n=new b(t,r);if(e.elevation)return e.elevation.pointCoordinate(n);{const t=this.pointCoordinate(e,n.x,n.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const r=e.horizonLineFromTop();return t.y<r}createInversionMatrix(e,t){return Mp}createTileMatrix(e,t,r){let n,i,a;const o=r.canonical,s=ps(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Pp(o,this);n=1,i=l.x+r.wrap*l.scale,a=l.y,ys(s,s,[n/l.scale,n/l.scale,e.pixelsPerMeter/t])}else n=t/e.zoomScale(o.z),i=(o.x+Math.pow(2,o.z)*r.wrap)*n,a=o.y*n;return gs(s,s,[i,a,0]),ys(s,s,[n/ss,n/ss,1]),s}upVector(e,t,r){return[0,0,1]}upVectorScale(e,t,r){return{metersToTile:1}}}class zp extends Dp{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,r]=this.parallels=e.parallels||[29.5,45.5],n=Math.sin(x(t));this.n=(n+Math.sin(x(r)))/2,this.c=1+n*(2*this.n-n),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:r,c:n,r0:i}=this,a=x(e-this.center[0]),o=x(t),s=Math.sqrt(n-2*r*Math.sin(o))/r;return{x:s*Math.sin(a*r),y:s*Math.cos(a*r)-i,z:0}}unproject(e,t){const{n:r,c:n,r0:i}=this,a=i+t;let o=Math.atan2(e,Math.abs(a))*Math.sign(a);a*r<0&&(o-=Math.PI*Math.sign(e)*Math.sign(a));const s=x(this.center[0])*r;o=I(o,-Math.PI-s,Math.PI-s);const l=C(w(o/r)+this.center[0],-180,180),c=Math.asin(C((n-(e*e+a*a)*r*r)/(2*r),-1,1)),u=C(w(c),-Yl,Yl);return new Vl(l,u)}}const Lp=1.340264,Rp=-.081106,Bp=893e-6,Op=.003796,Fp=Math.sqrt(3)/2;class Up extends Dp{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const r=Math.asin(Fp*Math.sin(t)),n=r*r,i=n*n*n;return{x:.5*(e*Math.cos(r)/(Fp*(Lp+3*Rp*n+i*(7*Bp+9*Op*n)))/Math.PI+.5),y:1-.5*(r*(Lp+Rp*n+i*(Bp+Op*n))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let r=t=(2*(1-t)-1)*Math.PI,n=r*r,i=n*n*n;for(let c,u,d,h=0;h<12&&(u=r*(Lp+Rp*n+i*(Bp+Op*n))-t,d=Lp+3*Rp*n+i*(7*Bp+9*Op*n),c=u/d,r=C(r-c,-Math.PI/3,Math.PI/3),n=r*r,i=n*n*n,!(Math.abs(c)<1e-12));++h);const a=Fp*e*(Lp+3*Rp*n+i*(7*Bp+9*Op*n))/Math.cos(r),o=Math.asin(Math.sin(r)/Fp),s=C(180*a/Math.PI,-180,180),l=C(180*o/Math.PI,-Yl,Yl);return new Vl(s,l)}}class Np extends Dp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const r=360*(e-.5),n=C(360*(.5-t),-Yl,Yl);return new Vl(r,n)}}const jp=Math.PI/2;function Vp(e){return Math.tan((jp+e)/2)}class Wp extends Dp{constructor(e){super(e),this.center=e.center||[0,30];const[t,r]=this.parallels=e.parallels||[30,30];let n=x(t),i=x(r);this.southernCenter=n+i<0,this.southernCenter&&(n=-n,i=-i);const a=Math.cos(n),o=Vp(n);this.n=n===i?Math.sin(n):Math.log(a/Math.cos(i))/Math.log(Vp(i)/o),this.f=a*Math.pow(Vp(n),this.n)/this.n}project(e,t){t=x(t),this.southernCenter&&(t=-t),e=x(e-this.center[0]);const r=1e-6,{n:n,f:i}=this;i>0?t<-jp+r&&(t=-jp+r):t>jp-r&&(t=jp-r);const a=i/Math.pow(Vp(t),n);let o=a*Math.sin(n*e),s=i-a*Math.cos(n*e);return o=.5*(o/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:o,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:r,f:n}=this,i=n-t,a=Math.sign(i),o=Math.sign(r)*Math.sqrt(e*e+i*i);let s=Math.atan2(e,Math.abs(i))*a;i*r<0&&(s-=Math.PI*Math.sign(e)*a);const l=C(w(s/r)+this.center[0],-180,180),c=C(w(2*Math.atan(Math.pow(n/o,1/r))-jp),-Yl,Yl);return new Vl(l,this.southernCenter?-c:c)}}class qp extends Dp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:ql(e),y:Gl(t),z:0}}unproject(e,t){const r=Hl(e),n=Zl(t);return new Vl(r,n)}}const Gp=x(Yl);class $p extends Dp{project(e,t){const r=(t=x(t))*t,n=r*r;return{x:.5*((e=x(e))*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let r=t=(2*(1-t)-1)*Math.PI,n=25,i=0,a=r*r;do{a=r*r;const e=a*a;i=(r*(1.007226+a*(.015085+e*(.028874*a-.044475-.005916*e)))-t)/(1.007226+a*(.045255+e*(.259866*a-.311325-.005916*11*e))),r=C(r-i,-Gp,Gp)}while(Math.abs(i)>1e-6&&--n>0);a=r*r;const o=C(w(e/(.8707+a*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979))),-180,180),s=w(r);return new Vl(o,s)}}const Hp=x(Yl);class Zp extends Dp{project(e,t){t=x(t),e=x(e);const r=Math.cos(t),n=2/Math.PI,i=Math.acos(r*Math.cos(e/2)),a=Math.sin(i)/i,o=.5*(e*n+2*r*Math.sin(e/2)/a)||0,s=.5*(t+Math.sin(t)/a)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let r=e=(2*e-.5)*Math.PI,n=t=(2*(1-t)-1)*Math.PI,i=25;const a=1e-6;let o=0,s=0;do{const i=Math.cos(n),a=Math.sin(n),l=2*a*i,c=a*a,u=i*i,d=Math.cos(r/2),h=Math.sin(r/2),p=2*d*h,f=h*h,m=1-u*d*d,g=m?1/m:0,y=m?Math.acos(i*d)*Math.sqrt(1/m):0,b=.5*(2*y*i*h+2*r/Math.PI)-e,_=.5*(y*a+n)-t,v=.5*g*(u*f+y*i*d*c)+1/Math.PI,x=g*(p*l/4-y*a*h),w=.125*g*(l*h-y*a*u*p),k=.5*g*(c*d+y*f*i)+.5,S=x*w-k*v;o=(_*x-b*k)/S,s=(b*w-_*v)/S,r=C(r-o,-Math.PI,Math.PI),n=C(n-s,-Hp,Hp)}while((Math.abs(o)>a||Math.abs(s)>a)&&--i>0);return new Vl(w(r),w(n))}}class Xp extends Dp{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(x(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:r,cosPhi:n}=this;return{x:x(e)*n*r+.5,y:-Math.sin(x(t))/n*r+.5,z:0}}unproject(e,t){const{scale:r,cosPhi:n}=this,i=-(t-.5)/r,a=C(w((e-.5)/r)/n,-180,180),o=Math.asin(C(i*n,-1,1)),s=C(w(o),-Yl,Yl);return new Vl(a,s)}}class Yp extends qp{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,r){const n=Cl(e,t,r);return Os(n,n,Pl(bl(r))),{x:n[0],y:n[1],z:n[2]}}locationPoint(e,t){const r=Al(t.lat,t.lng),n=Ls([],r),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;zs(r,r,n,$l(1,0)*ss*i);const a=ps(new Float64Array(16));return ms(a,e.pixelMatrix,e.globeMatrix),Os(r,r,a),new b(r[0],r[1])}pixelsPerMeter(e,t){return $l(1,0)*t}pixelSpaceConversion(e,t,r){const n=$l(1,e)*t,i=Mr($l(1,45)*t,n,r);return this.pixelsPerMeter(e,t)/i}createTileMatrix(e,t,r){const n=Ml(bl(r.canonical));return ms(new Float64Array(16),e.globeMatrix,n)}createInversionMatrix(e,t){const{center:r}=e,n=Pl(bl(t));return _s(n,n,x(r.lng)),bs(n,n,x(r.lat)),ys(n,n,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(n)}pointCoordinate(e,t,r,n){return ml(e,t,r,!0)||new Jl(0,0)}pointCoordinate3D(e,t,r){const n=this.pointCoordinate(e,t,r,0);return[n.x,n.y,n.z]}isPointAboveHorizon(e,t){return!ml(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const r=e.cameraToCenterDistance,n=e._centerAltitude*t,i=e._camera,a=e._camera.forward(),o=Cs([],Ds([],a,-r),[0,0,n]),s=e.worldSize/(2*Math.PI),l=[0,0,-s],c=e.width/e.height,u=Math.tan(e.fovAboveCenter),d=Ds([],i.up(),u),h=Ds([],i.right(),u*c),p=Ls([],Cs([],Cs([],a,d),h)),f=[];let m;if(new tl(o,p).closestPointOnSphere(l,s,f)){const t=Cs([],f,l),r=Ns([],t,o);m=Math.cos(e.fovAboveCenter)*Ts(r)}else{const e=Ns([],o,l),t=Ns([],l,o);Ls(t,t);const r=Ts(e)-s;m=Math.sqrt(r*(r+2*s));const n=Math.acos(m/(s+r))-Math.acos(Rs(a,t));m*=Math.cos(n)}return 1.01*m}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),r=zl(e.zoom);if(r>0){const n=Ip(e,$l(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),a=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Mr(t,n+i*(1-Math.cos(a)),Math.pow(r,10))}return t}upVector(e,t,r){return Cl(t,r,e,1)}upVectorScale(e){return{metersToTile:fl(El(bl(e)))}}}function Kp(e){const t=e.parallels,r=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new qp(e);case"equirectangular":return new Np(e);case"naturalEarth":return new $p(e);case"equalEarth":return new Up(e);case"winkelTripel":return new Zp(e);case"albers":return r?new Xp(e):new zp(e);case"lambertConformalConic":return r?new Xp(e):new Wp(e);case"globe":return new Yp(e)}throw new Error(`Invalid projection name: ${e.name}`)}const Jp=Hu.types,Qp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ef(e,t,r,n,i,a,o,s,l,c,u,d,h){const p=s?Math.min(kp,Math.round(s[0])):0,f=s?Math.min(kp,Math.round(s[1])):0;e.emplaceBack(t,r,Math.round(32*n),Math.round(32*i),a,o,(p<<1)+(l?1:0),f,16*c,16*u,256*d,256*h)}function tf(e,t,r,n,i,a,o){e.emplaceBack(t,r,n,i,a,o)}function rf(e,t,r,n,i){e.emplaceBack(t,r,n,i),e.emplaceBack(t,r,n,i),e.emplaceBack(t,r,n,i),e.emplaceBack(t,r,n,i)}function nf(e){for(const t of e.sections)if(la(t.text))return!0;return!1}class af{constructor(e){this.layoutVertexArray=new Za,this.indexArray=new ro,this.programConfigurations=e,this.segments=new os,this.dynamicLayoutVertexArray=new qa,this.opacityVertexArray=new Ya,this.placedSymbolArray=new mo,this.globeExtVertexArray=new Xa}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Md.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,zd.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Qp,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Dd.members,!0)),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Xi(af,"SymbolBuffers");class of{constructor(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new os,this.collisionVertexArray=new eo,this.collisionVertexArrayExt=new to}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Ld.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Rd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Xi(of,"CollisionBuffers");class sf{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ps([]),this.placementViewportMatrix=ps([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Nd(this.zoom,t["text-size"]),this.iconSizeData=Nd(this.zoom,t["icon-size"]);const r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((e=>Ah[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new af(new Yo(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new af(new Yo(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new bo,this.lineVertexArray=new _o,this.symbolInstances=new yo}calculateGlyphDependencies(e,t,r,n,i){for(let a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,n&&i){const r=Gd[e.charAt(a)];r&&(t[r.charCodeAt(0)]=!0)}}populate(e,t,r,n){const i=this.layers[0],a=i.layout,o="globe"===this.projection.name,s=a.get("text-font"),l=a.get("text-field"),c=a.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof Lt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),d="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,h=a.get("symbol-sort-key");if(this.features=[],!u&&!d)return;const p=t.iconDependencies,f=t.glyphDependencies,m=t.availableImages,g=new xa(this.zoom);for(const{feature:y,id:b,index:_,sourceLayerIndex:v}of e){const e=i._featureFilter.needGeometry,t=sc(y,e);if(!i._featureFilter.filter(g,t,r))continue;if(e||(t.geometry=oc(y,r,n)),o&&1!==y.type&&r.z<=5){const e=t.geometry,n=.98078528056,i=(e,t)=>Rs(Cl(e.x,e.y,r,1),Cl(t.x,t.y,r,1))<n;for(let t=0;t<e.length;t++)e[t]=rc(e[t],i)}let l,c;if(u){const e=i.getValueAndResolveTokens("text-field",t,r,m),n=Lt.factory(e);nf(n)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ba()||this.hasRTLText&&va.isParsed())&&(l=qd(n,i,t))}if(d){const e=i.getValueAndResolveTokens("icon-image",t,r,m);c=e instanceof Rt?e:Rt.fromString(e)}if(!l&&!c)continue;const x=this.sortFeaturesByKey?h.evaluate(t,{},r):void 0;if(this.features.push({id:b,text:l,icon:c,index:_,sourceLayerIndex:v,geometry:t.geometry,properties:y.properties,type:Jp[y.type],sortKey:x}),c&&(p[c.name]=!0),l){const e=s.evaluate(t,{},r).join(","),n="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ah.vertical)>=0;for(const t of l.sections)if(t.image)p[t.image.name]=!0;else{const r=ta(l.toString()),i=t.fontStack||e,a=f[i]=f[i]||{};this.calculateGlyphDependencies(t.text,a,n,this.allowVerticalPlacement,r)}}}"line"===a.get("symbol-placement")&&(this.features=function(e){const t={},r={},n=[];let i=0;function a(t){n.push(e[t]),i++}function o(e,t,i){const a=r[e];return delete r[e],r[t]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(i[0]),a}function s(e,r,i){const a=t[r];return delete t[r],t[e]=a,n[a].geometry[0].shift(),n[a].geometry[0]=i[0].concat(n[a].geometry[0]),a}function l(e,t,r){const n=r?t[0][t[0].length-1]:t[0][0];return`${e}:${n.x}:${n.y}`}for(let c=0;c<e.length;c++){const u=e[c],d=u.geometry,h=u.text?u.text.toString():null;if(!h){a(c);continue}const p=l(h,d),f=l(h,d,!0);if(p in r&&f in t&&r[p]!==t[f]){const e=s(p,f,d),i=o(p,f,n[e].geometry);delete t[p],delete r[f],r[l(h,n[i].geometry,!0)]=i,n[e].geometry=null}else p in r?o(p,f,d):f in t?s(p,f,d):(a(c),t[p]=i-1,r[f]=i-1)}return n.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,r,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Kp(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const r=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:n,y:i}of t)this.lineVertexArray.emplaceBack(n,i);return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(e,t,r,n,i,a,o,s,l,c,u,d,h,p){const f=e.indexArray,m=e.layoutVertexArray,g=e.globeExtVertexArray,y=e.segments.prepareSegment(4*t.length,m,f,this.canOverlap?a.sortKey:void 0),b=this.glyphOffsetArray.length,_=y.vertexLength,v=this.allowVerticalPlacement&&o===Ah.vertical?Math.PI/2:0,x=a.text&&a.text.sections;for(let k=0;k<t.length;k++){const{tl:n,tr:i,bl:o,br:c,tex:u,pixelOffsetTL:d,pixelOffsetBR:b,minFontScaleX:_,minFontScaleY:w,glyphOffset:S,isSDF:T,sectionIndex:A}=t[k],C=y.vertexLength,E=S[1];if(ef(m,l.x,l.y,n.x,E+n.y,u.x,u.y,r,T,d.x,d.y,_,w),ef(m,l.x,l.y,i.x,E+i.y,u.x+u.w,u.y,r,T,b.x,d.y,_,w),ef(m,l.x,l.y,o.x,E+o.y,u.x,u.y+u.h,r,T,d.x,b.y,_,w),ef(m,l.x,l.y,c.x,E+c.y,u.x+u.w,u.y+u.h,r,T,b.x,b.y,_,w),s){const{x:t,y:r,z:n}=s.anchor,[i,a,o]=s.up;tf(g,t,r,n,i,a,o),tf(g,t,r,n,i,a,o),tf(g,t,r,n,i,a,o),tf(g,t,r,n,i,a,o),rf(e.dynamicLayoutVertexArray,t,r,n,v)}else rf(e.dynamicLayoutVertexArray,l.x,l.y,l.z,v);f.emplaceBack(C,C+1,C+2),f.emplaceBack(C+1,C+2,C+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),k!==t.length-1&&A===t[k+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,a,a.index,{},h,p,x&&x[A])}const w=s?s.anchor:l;e.placedSymbolArray.emplaceBack(w.x,w.y,w.z,l.x,l.y,b,this.glyphOffsetArray.length-b,_,c,u,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,0,!1,0,d,0)}_commitLayoutVertex(e,t,r,n,i,a,o){e.emplaceBack(t,r,n,i,a,Math.round(o.x),Math.round(o.y))}_addCollisionDebugVertices(e,t,r,n,i,a,o){const s=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=s.vertexLength,c=o.tileAnchorX,u=o.tileAnchorY;for(let h=0;h<4;h++)r.collisionVertexArray.emplaceBack(0,0,0,0);r.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),r.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(r.layoutVertexArray,n,i,a,c,u,new b(e.x1,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,a,c,u,new b(e.x2,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,a,c,u,new b(e.x2,e.y2)),this._commitLayoutVertex(r.layoutVertexArray,n,i,a,c,u,new b(e.x1,e.y2)),s.vertexLength+=4;const d=r.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,r,n,i,a){for(let o=n;o<i;o++){const n=r.get(o),i=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(n,i,this.textCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,a)}}_addIconDebugCollisionBoxes(e,t,r,n,i,a){for(let o=n;o<i;o++){const n=r.get(o),i=this.getSymbolInstanceIconSize(e,t,a.placedIconSymbolIndex);this._addCollisionDebugVertices(n,i,this.iconCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,a)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new of(Ja,Bd.members,lo),this.iconCollisionBox=new of(Ja,Bd.members,lo);const r=Vd(this.iconSizeData,e),n=Vd(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const a=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(n,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(n,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(r,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(r,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}getSymbolInstanceTextSize(e,t,r,n){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:n),a=jd(this.textSizeData,e,i)/Fd;return this.tilePixelRatio*a}getSymbolInstanceIconSize(e,t,r){const n=this.icon.placedSymbolArray.get(r),i=jd(this.iconSizeData,e,n);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,r){e.emplaceBack(t,-r,-r),e.emplaceBack(t,r,-r),e.emplaceBack(t,r,r),e.emplaceBack(t,-r,r)}_updateTextDebugCollisionBoxes(e,t,r,n,i,a){for(let o=n;o<i;o++){const n=r.get(o),i=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,n.padding)}}_updateIconDebugCollisionBoxes(e,t,r,n,i,a){for(let o=n;o<i;o++){const n=r.get(o),i=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,n.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const r=Vd(this.iconSizeData,e),n=Vd(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const a=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(n,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(n,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(r,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(r,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,r,n,i,a,o,s,l){const c={};if(t<r){const{x1:r,y1:n,x2:i,y2:a,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(t);c.textBox={x1:r,y1:n,x2:i,y2:a,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.textFeatureIndex=p}if(n<i){const{x1:t,y1:r,x2:i,y2:a,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(n);c.verticalTextBox={x1:t,y1:r,x2:i,y2:a,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.verticalTextFeatureIndex=p}if(a<o){const{x1:t,y1:r,x2:n,y2:i,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(a);c.iconBox={x1:t,y1:r,x2:n,y2:i,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.iconFeatureIndex=p}if(s<l){const{x1:t,y1:r,x2:n,y2:i,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(s);c.verticalIconBox={x1:t,y1:r,x2:n,y2:i,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.verticalIconFeatureIndex=p}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const r=e.placedSymbolArray.get(t),n=r.vertexStartIndex+4*r.numGlyphs;for(let i=r.vertexStartIndex;i<n;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),r=Math.cos(e),n=[],i=[],a=[];for(let o=0;o<this.symbolInstances.length;++o){a.push(o);const e=this.symbolInstances.get(o);n.push(0|Math.round(t*e.tileAnchorX+r*e.tileAnchorY)),i.push(e.featureIndex)}return a.sort(((e,t)=>n[e]-n[t]||i[t]-i[e])),a}addToSortKeyRanges(e,t){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:r,centerJustifiedTextSymbolIndex:n,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:a,placedIconSymbolIndex:o,verticalPlacedIconSymbolIndex:s}=t;r>=0&&this.addIndicesForPlacedSymbol(this.text,r),n>=0&&n!==r&&this.addIndicesForPlacedSymbol(this.text,n),i>=0&&i!==n&&i!==r&&this.addIndicesForPlacedSymbol(this.text,i),a>=0&&this.addIndicesForPlacedSymbol(this.text,a),o>=0&&this.addIndicesForPlacedSymbol(this.icon,o),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Xi(sf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sf.MAX_GLYPHS=65535,sf.addDynamicAttributes=rf;const lf=new za({"symbol-placement":new Pa(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Pa(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pa(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ma(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pa(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pa(et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pa(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pa(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pa(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ma(et.layout_symbol["icon-size"]),"icon-text-fit":new Pa(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pa(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ma(et.layout_symbol["icon-image"]),"icon-rotate":new Ma(et.layout_symbol["icon-rotate"]),"icon-padding":new Pa(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Pa(et.layout_symbol["icon-keep-upright"]),"icon-offset":new Ma(et.layout_symbol["icon-offset"]),"icon-anchor":new Ma(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pa(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pa(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pa(et.layout_symbol["text-rotation-alignment"]),"text-field":new Ma(et.layout_symbol["text-field"]),"text-font":new Ma(et.layout_symbol["text-font"]),"text-size":new Ma(et.layout_symbol["text-size"]),"text-max-width":new Ma(et.layout_symbol["text-max-width"]),"text-line-height":new Ma(et.layout_symbol["text-line-height"]),"text-letter-spacing":new Ma(et.layout_symbol["text-letter-spacing"]),"text-justify":new Ma(et.layout_symbol["text-justify"]),"text-radial-offset":new Ma(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pa(et.layout_symbol["text-variable-anchor"]),"text-anchor":new Ma(et.layout_symbol["text-anchor"]),"text-max-angle":new Pa(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Pa(et.layout_symbol["text-writing-mode"]),"text-rotate":new Ma(et.layout_symbol["text-rotate"]),"text-padding":new Pa(et.layout_symbol["text-padding"]),"text-keep-upright":new Pa(et.layout_symbol["text-keep-upright"]),"text-transform":new Ma(et.layout_symbol["text-transform"]),"text-offset":new Ma(et.layout_symbol["text-offset"]),"text-allow-overlap":new Pa(et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pa(et.layout_symbol["text-ignore-placement"]),"text-optional":new Pa(et.layout_symbol["text-optional"])});var cf={paint:new za({"icon-opacity":new Ma(et.paint_symbol["icon-opacity"]),"icon-color":new Ma(et.paint_symbol["icon-color"]),"icon-halo-color":new Ma(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ma(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ma(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Pa(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pa(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ma(et.paint_symbol["text-opacity"]),"text-color":new Ma(et.paint_symbol["text-color"],{runtimeType:ht,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Ma(et.paint_symbol["text-halo-color"]),"text-halo-width":new Ma(et.paint_symbol["text-halo-width"]),"text-halo-blur":new Ma(et.paint_symbol["text-halo-blur"]),"text-translate":new Pa(et.paint_symbol["text-translate"]),"text-translate-anchor":new Pa(et.paint_symbol["text-translate-anchor"])}),layout:lf};class uf{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:lt,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xi(uf,"FormatSectionOverride",{omit:["defaultValue"]});class df extends ns{constructor(e){super(e,cf)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const r=this.layout.get("text-writing-mode");if(r){const e=[];for(const t of r)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,r,n){const i=this.layout.get(e).evaluate(t,{},r,n),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||Xn(a.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,r)=>r in e?String(e[r]):""))}(t.properties,i)}createBucket(e){return new sf(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of cf.paint.overridableProperties){if(!df.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),r=new uf(t),n=new Zn(r,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new Kn("source",n):new Jn("composite",n,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new Ea(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&df.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const r=e.get("text-field"),n=cf.paint.properties[t];let i=!1;const a=e=>{for(const t of e)if(n.overrides&&n.overrides.hasOverride(t))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof Lt)a(r.value.value.sections);else if("source"===r.value.kind){const e=t=>{i||(t instanceof jt&&Ft(t.value)===gt?a(t.value.sections):t instanceof $t?a(t.sections):t.eachChild(e))},t=r.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new Xo(this,e)}}var hf={paint:new za({"background-color":new Pa(et.paint_background["background-color"]),"background-pattern":new Pa(et.paint_background["background-pattern"]),"background-opacity":new Pa(et.paint_background["background-opacity"])})},pf={paint:new za({"raster-opacity":new Pa(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pa(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pa(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pa(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Pa(et.paint_raster["raster-saturation"]),"raster-contrast":new Pa(et.paint_raster["raster-contrast"]),"raster-resampling":new Pa(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Pa(et.paint_raster["raster-fade-duration"])})};class ff extends ns{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var mf={paint:new za({"sky-type":new Pa(et.paint_sky["sky-type"]),"sky-atmosphere-sun":new Pa(et.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Pa(et.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Pa(et.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Pa(et.paint_sky["sky-gradient-radius"]),"sky-gradient":new Da(et.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Pa(et.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Pa(et.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Pa(et.paint_sky["sky-opacity"])})};function gf(e,t,r){const n=[0,0,1],i=Hs([]);return Xs(i,i,r?-x(e)+Math.PI:x(e)),Zs(i,i,-x(t)),Fs(n,n,i),Ls(n,n)}const yf={circle:class extends ns{constructor(e){super(e,Ec)}createBucket(e){return new uc(e)}queryRadius(e){const t=e;return kc("circle-radius",this,t)+kc("circle-stroke-width",this,t)+Sc(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,r,n,i,a,o,s){const l=Ac(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r);return Ic(e,n,a,o,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Xo(this,e)}},heatmap:class extends ns{createBucket(e){return new Lc(e)}constructor(e){super(e,Nc),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return kc("heatmap-radius",this,e)}queryIntersectsFeature(e,t,r,n,i,a,o,s){const l=this.paint.get("heatmap-radius").evaluate(t,r);return Ic(e,n,a,o,s,!0,!0,new b(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Xo(this,e)}},hillshade:class extends ns{constructor(e){super(e,Vc)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ns{constructor(e){super(e,Iu)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),r=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(e){return new Xo(this,e)}recalculate(e,t){super.recalculate(e,t);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new Cu(e)}queryRadius(){return Sc(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,r,n,i,a){return!e.queryGeometry.isAboveHorizon&&pc(Tc(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),n)}isTileClipped(){return!0}},"fill-extrusion":class extends ns{constructor(e){super(e,ud)}createBucket(e){return new ed(e)}queryRadius(){return Sc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Xo(this,e)}queryIntersectsFeature(e,t,r,n,i,a,o,s,l){const c=Ac(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,r),d=this.paint.get("fill-extrusion-base").evaluate(t,r),h=[0,0],p=s&&a.elevation,f=a.elevation?a.elevation.exaggeration():1,m=e.tile.getBucket(this);if(p&&m instanceof ed){const e=m.centroidVertexArray,t=l+1;t<e.length&&(h[0]=e.geta_centroid_pos0(t),h[1]=e.geta_centroid_pos1(t))}if(0===h[0]&&1===h[1])return!1;"globe"===a.projection.name&&(n=ld([n],[new b(0,0),new b(ss,ss)],e.tileID.canonical).map((e=>e.polygon)).flat());const g=p?s:null,[y,_]=function(e,t,r,n,i,a,o,s,l,c,u){return"globe"===e.projection.name?function(e,t,r,n,i,a,o,s,l,c,u){const d=[],h=[],p=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,f=[0,0,0,1],m=[0,0,0,1],g=(e,t,r,n)=>{e[0]=t,e[1]=r,e[2]=n,e[3]=1},y=sd();r>0&&(r+=y),n+=y;for(const b of t){const t=[],y=[];for(const d of b){const h=d.x+i.x,b=d.y+i.y,_=e.projection.projectTilePoint(h,b,u),v=e.projection.upVector(u,d.x,d.y);let x=r,w=n;if(o){const e=_d(h,b,r,n,o,s,l,c);x+=e.base,w+=e.top}0!==r?g(f,_.x+v[0]*p*x,_.y+v[1]*p*x,_.z+v[2]*p*x):g(f,_.x,_.y,_.z),g(m,_.x+v[0]*p*w,_.y+v[1]*p*w,_.z+v[2]*p*w),Os(f,f,a),Os(m,m,a),t.push(new gd(f[0],f[1],f[2])),y.push(new gd(m[0],m[1],m[2]))}d.push(t),h.push(y)}return[d,h]}(e,t,r,n,i,a,o,s,l,c,u):o?function(e,t,r,n,i,a,o,s,l){const c=[],u=[],d=[0,0,0,1];for(const h of e){const e=[],p=[];for(const c of h){const u=c.x+n.x,h=c.y+n.y,f=_d(u,h,t,r,a,o,s,l);d[0]=u,d[1]=h,d[2]=f.base,d[3]=1,Gs(d,d,i),d[3]=Math.max(d[3],1e-5);const m=new gd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);d[0]=u,d[1]=h,d[2]=f.top,d[3]=1,Gs(d,d,i),d[3]=Math.max(d[3],1e-5);const g=new gd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);e.push(m),p.push(g)}c.push(e),u.push(p)}return[c,u]}(t,r,n,i,a,o,s,l,c):function(e,t,r,n,i){const a=[],o=[],s=i[8]*t,l=i[9]*t,c=i[10]*t,u=i[11]*t,d=i[8]*r,h=i[9]*r,p=i[10]*r,f=i[11]*r;for(const m of e){const e=[],t=[];for(const r of m){const a=r.x+n.x,o=r.y+n.y,m=i[0]*a+i[4]*o+i[12],g=i[1]*a+i[5]*o+i[13],y=i[2]*a+i[6]*o+i[14],b=i[3]*a+i[7]*o+i[15],_=m+s,v=g+l,x=y+c,w=Math.max(b+u,1e-5),k=m+d,S=g+h,T=y+p,A=Math.max(b+f,1e-5);e.push(new gd(_/w,v/w,x/w)),t.push(new gd(k/A,S/A,T/A))}a.push(e),o.push(t)}return[a,o]}(t,r,n,i,a)}(a,n,d,u,c,o,g,h,f,a.center.lat,e.tileID.canonical),v=e.queryGeometry;return function(e,t,r){let n=1/0;pc(r,t)&&(n=bd(r,t[0]));for(let i=0;i<t.length;i++){const a=t[i],o=e[i];for(let e=0;e<a.length-1;e++){const t=a[e],i=[t,a[e+1],o[e+1],o[e],t];dc(r,i)&&(n=Math.min(n,bd(r,i)))}}return n!==1/0&&n}(y,_,v.isPointQuery()?v.screenBounds:v.screenGeometry)}},line:class extends ns{constructor(e){super(e,Ed),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Pr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Id.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Ad(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new Xo(this,e)}queryRadius(e){const t=e,r=Pd(kc("line-width",this,t),kc("line-gap-width",this,t)),n=kc("line-offset",this,t);return r/2+Math.abs(n)+Sc(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,r,n,i,a){if(e.queryGeometry.isAboveHorizon)return!1;const o=Tc(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Pd(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),l=this.paint.get("line-offset").evaluate(t,r);return l&&(n=function(e,t){const r=[],n=new b(0,0);for(let i=0;i<e.length;i++){const a=e[i],o=[];for(let e=0;e<a.length;e++){const r=a[e],i=a[e+1],s=0===e?n:r.sub(a[e-1])._unit()._perp(),l=e===a.length-1?n:i.sub(r)._unit()._perp(),c=s._add(l)._unit();c._mult(1/(c.x*l.x+c.y*l.y)),o.push(c._mult(t)._add(r))}r.push(o)}return r}(n,l*e.pixelToTileUnitsFactor)),function(e,t,r){for(let n=0;n<t.length;n++){const i=t[n];if(e.length>=3)for(let t=0;t<i.length;t++)if(vc(e,i[t]))return!0;if(fc(e,i,r))return!0}return!1}(o,n,s)}isTileClipped(){return!0}},symbol:df,background:class extends ns{constructor(e){super(e,hf)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ns{constructor(e){super(e,pf)}getProgramIds(){return["raster"]}},sky:class extends ns{constructor(e){super(e,mf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=jc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const r=this.paint.get("sky-atmosphere-sun"),n=!r,i=e.style.light,a=i.properties.get("position");return n&&"viewport"===i.properties.get("anchor")&&q("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?gf(a.azimuthal,90-a.polar,t):gf(r[0],90-r[1],t)}const r=this.paint.get("sky-gradient-center");return gf(r[0],90-r[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class bf{constructor(e,t,r,n){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,n)}update(e,r,n){const{width:i,height:a}=e,{context:o}=this,{gl:s}=o,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:d,ImageBitmap:h}=t;if(s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!r||!1!==r.premultiply)),n||this.size&&this.size[0]===i&&this.size[1]===a){const{x:t,y:r}=n||{x:0,y:0};e instanceof l||e instanceof c||e instanceof u||e instanceof d||h&&e instanceof h?s.texSubImage2D(s.TEXTURE_2D,0,t,r,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,r,i,a,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[i,a],e instanceof l||e instanceof c||e instanceof u||e instanceof d||h&&e instanceof h?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,i,a,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?e===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class _f{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class vf{constructor(){this.tasks={},this.taskQueue=[],F(["process"],this),this.invoker=new _f(this.process),this.nextId=0}add(e,t){const r=this.nextId++,n=function({type:e,isSymbolTile:t,zoom:r}){return r=r||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-r:"maybePrepare"===e&&t?400-r:500:200-r:100-r}(t);if(0===n){H();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[r]={fn:e,metadata:t,priority:n,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:()=>{delete this.tasks[r]}}}process(){H();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let n=0;n<this.taskQueue.length;n++){const r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;const r=this.taskQueue[e];return this.taskQueue.splice(e,1),r}remove(){this.invoker.remove()}}class xf{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const wf=["tile","layer","source","sourceLayer","state"];class kf{constructor(e,t,r,n,i){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=r,this._y=n,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of wf)void 0!==this[t]&&(e[t]=this[t]);return e}}const Sf=32,Tf=33,Af=new Uint16Array(8184);for(let km=0;km<2046;km++){let e=km+2,t=0,r=0,n=0,i=0,a=0,o=0;for(1&e?n=i=a=Sf:t=r=o=Sf;(e>>=1)>1;){const s=t+n>>1,l=r+i>>1;1&e?(n=t,i=r,t=a,r=o):(t=n,r=i,n=a,i=o),a=s,o=l}const s=4*km;Af[s+0]=t,Af[s+1]=r,Af[s+2]=n,Af[s+3]=i}const Cf=new Uint16Array(2178),Ef=new Uint8Array(1089),If=new Uint16Array(1089);function Pf(e){return 0===e?-.03125:32===e?.03125:0}var Mf=Fa([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Df={type:2,extent:ss,loadGeometry:()=>[[new b(0,0),new b(ss+1,0),new b(ss+1,ss+1),new b(0,ss+1),new b(0,0)]]};class zf{constructor(e,t,r,n,i){this.tileID=e,this.uid=L(),this.uses=0,this.tileSize=t,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",n&&n.transform&&(this.projection=n.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Ze.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Pp(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,r){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const r={};if(!t)return r;for(const n of e){const e=n.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){n.layers=e,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)r[t.id]=n}}return r}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof sf){if(this.hasSymbolBuckets=!0,!r)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof sf&&t.hasRTLText){this.hasRTLText=!0,va.isLoading()||va.isLoaded()||"deferred"!==ba()||_a();break}}this.queryPadding=0;for(const e in this.buckets){const r=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(r))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new po}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const r in this.buckets){const t=this.buckets[r];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new bf(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new bf(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new bf(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,r,n,i,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:o,transform:a,params:i,tileTransform:this.tileTransform},e,t,r):{}}querySourceFeatures(e,t){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),i=t?t.sourceLayer:"",a=n._geojsonTileLayer||n[i];if(!a)return;const o=di(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let d=0;d<a.length;d++){const t=a.feature(d);if(o.needGeometry){const e=sc(t,!0);if(!o.filter(new xa(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!o.filter(new xa(this.tileID.overscaledZ),t))continue;const n=r.getId(t,i),h=new kf(t,s,l,c,n);h.tile=u,e.push(h)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=Z(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let r=!1;if(this.expirationTime>e)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{const n=this.expirationTime-t;n?this.expirationTime=e+Math.max(n,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const r=this.latestFeatureIndex.loadVTLayers(),n=t.style.listImages();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const a=this.buckets[i],o=a.layers[0].sourceLayer||"_geojsonTileLayer",s=r[o],l=e[o];if(!s||!l||0===Object.keys(l).length)continue;if(a.update(l,s,n,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a instanceof Ad||a instanceof Cu){const e=t.style._getSourceCache(a.layers[0].source);t._terrain&&t._terrain.enabled&&e&&a.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(a)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ze.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Ze.now()+e}setTexture(e,t){const r=t.context,n=r.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new bf(r,e,n.RGBA,{useMipmap:!0}),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE))}setDependencies(e,t){const r={};for(const n of t)r[n]=!0;this.dependencies[e]=r}hasDependency(e,t){for(const r of e){const e=this.dependencies[r];if(e)for(const r of t)if(e[r])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const r=oc(Df,this.tileID.canonical,this.tileTransform)[0],n=new Na,i=new co;for(let a=0;a<r.length;a++){const{x:e,y:t}=r[a];n.emplaceBack(e,t),i.emplaceBack(a)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(n,el.members),this._tileDebugSegments=os.simpleSegment(0,0,n.length,i.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const r=oc(Df,this.tileID.canonical,this.tileTransform)[0];let n,i;if(this.isRaster){const e=function(e,t){const r=Pp(e,t),n=Math.pow(2,e.z);for(let c=0;c<Tf;c++)for(let i=0;i<Tf;i++){const a=Hl((e.x+(i+Pf(i))/Sf)/n),o=Zl((e.y+(c+Pf(c))/Sf)/n),s=t.project(a,o),l=c*Tf+i;Cf[2*l+0]=Math.round((s.x*r.scale-r.x)*ss),Cf[2*l+1]=Math.round((s.y*r.scale-r.y)*ss)}Ef.fill(0),If.fill(0);for(let c=2045;c>=0;c--){const e=4*c,t=Af[e+0],r=Af[e+1],n=Af[e+2],i=Af[e+3],a=t+n>>1,o=r+i>>1,s=a+o-r,l=o+t-a,u=r*Tf+t,d=i*Tf+n,h=o*Tf+a,p=Math.hypot((Cf[2*u+0]+Cf[2*d+0])/2-Cf[2*h+0],(Cf[2*u+1]+Cf[2*d+1])/2-Cf[2*h+1])>=16;Ef[h]=Ef[h]||(p?1:0),c<1022&&(Ef[h]=Ef[h]||Ef[(r+l>>1)*Tf+(t+s>>1)]||Ef[(i+l>>1)*Tf+(n+s>>1)])}const i=new Va,a=new ro;let o=0;function s(e,t){const r=t*Tf+e;return 0===If[r]&&(i.emplaceBack(Cf[2*r+0],Cf[2*r+1],e*ss/Sf,t*ss/Sf),If[r]=++o),If[r]-1}function l(e,t,r,n,i,o){const c=e+r>>1,u=t+n>>1;if(Math.abs(e-i)+Math.abs(t-o)>1&&Ef[u*Tf+c])l(i,o,e,t,c,u),l(r,n,i,o,c,u);else{const l=s(e,t),c=s(r,n),u=s(i,o);a.emplaceBack(l,c,u)}}return l(0,0,Sf,Sf,Sf,0),l(Sf,Sf,0,0,0,Sf),{vertices:i,indices:a}}(this.tileID.canonical,t);n=e.vertices,i=e.indices}else{n=new Va,i=new ro;for(const{x:t,y:i}of r)n.emplaceBack(t,i,0,0);const e=bu(n.int16,void 0,4);for(let t=0;t<e.length;t+=3)i.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(n,Mf.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=os.simpleSegment(0,0,n.length,i.length)}_makeGlobeTileDebugBuffers(e,t){const r=t.projection;if(!r||"globe"!==r.name||t.freezeTileCoverage)return;const n=this.tileID.canonical,i=Pl(vl(n,t)),a=zl(t.zoom);let o;a>0&&(o=fs(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,n,t,i,o,a),this._makeGlobeTileDebugTextBuffer(e,n,t,i,o,a)}_globePoint(e,t,r,n,i,a,o){let s=Cl(e,t,r);if(a){const i=1<<r.z,l=ql(n.center.lng),c=Gl(n.center.lat),u=(r.x+.5)/i-l;let d=0;u>.5?d=-1:u<-.5&&(d=1);let h=(e/ss+r.x)/i+d,p=(t/ss+r.y)/i;h=(h-l)*n._pixelsPerMercatorPixel+l,p=(p-c)*n._pixelsPerMercatorPixel+c;const f=[h*n.worldSize,p*n.worldSize,0];Os(f,f,a),s=_l(s,f,o)}return Os(s,s,i)}_makeGlobeTileDebugBorderBuffer(e,t,r,n,i,a){const o=new Na,s=new co,l=new ja,c=(e,c,u,d,h)=>{const p=(u-e)/(h-1),f=(d-c)/(h-1),m=o.length;for(let g=0;g<h;g++){const u=e+g*p,d=c+g*f;o.emplaceBack(u,d);const h=this._globePoint(u,d,t,r,n,i,a);l.emplaceBack(h[0],h[1],h[2]),s.emplaceBack(m+g)}},u=ss;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(s),this._tileDebugBuffer=e.createVertexBuffer(o,el.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,Qs.members),this._tileDebugSegments=os.simpleSegment(0,0,o.length,s.length)}_makeGlobeTileDebugTextBuffer(e,t,r,n,i,a){const o=ss/4,s=new Na,l=new ro,c=new ja,u=25;l.reserve(32),s.reserve(u),c.reserve(u);const d=(e,t)=>u*e+t;for(let h=0;h<u;h++){const e=h*o;for(let l=0;l<u;l++){const u=l*o;s.emplaceBack(u,e);const d=this._globePoint(u,e,t,r,n,i,a);c.emplaceBack(d[0],d[1],d[2])}}for(let h=0;h<4;h++)for(let e=0;e<4;e++){const t=d(h,e),r=d(h,e+1),n=d(h+1,e),i=d(h+1,e+1);l.emplaceBack(t,r,n),l.emplaceBack(n,r,i)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(l),this._tileDebugTextBuffer=e.createVertexBuffer(s,el.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(c,Qs.members),this._tileDebugTextSegments=os.simpleSegment(0,0,u,32)}}class Lf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,r){const n=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},D(this.stateChanges[e][n],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==n&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][n]){this.deletedStates[e][n]={};for(const t in this.state[e][n])r[t]||(this.deletedStates[e][n][t]=null)}else for(const i in r)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][i]&&delete this.deletedStates[e][n][i]}removeFeatureState(e,t,r){if(null===this.deletedStates[e])return;const n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(r in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][r]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}getState(e,t){const r=String(t),n=D({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const r=this.deletedStates[e][t];if(null===r)return{};for(const e in r)delete n[e]}return n}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const r={};for(const n in this.stateChanges){this.state[n]=this.state[n]||{};const e={};for(const t in this.stateChanges[n])this.state[n][t]||(this.state[n][t]={}),D(this.state[n][t],this.stateChanges[n][t]),e[t]=this.state[n][t];r[n]=e}for(const n in this.deletedStates){this.state[n]=this.state[n]||{};const e={};if(null===this.deletedStates[n])for(const t in this.state[n])e[t]={},this.state[n][t]={};else for(const t in this.deletedStates[n]){if(null===this.deletedStates[n][t])this.state[n][t]={};else if(this.state[n][t])for(const e of Object.keys(this.deletedStates[n][t]))delete this.state[n][t][e];e[t]=this.state[n][t]}r[n]=r[n]||{},D(r[n],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const n in e)e[n].setFeatureState(r,t)}}class Rf{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const r=this.toIdx(e,t);return{min:this.minimums[r],max:this.maximums[r]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Bf(e,t,r,n){let i=0,a=Number.MAX_VALUE;for(let o=0;o<3;o++)if(Math.abs(n[o])<1e-15){if(r[o]<e[o]||r[o]>t[o])return null}else{const s=1/n[o];let l=(e[o]-r[o])*s,c=(t[o]-r[o])*s;if(l>c){const e=l;l=c,c=e}if(l>i&&(i=l),c<a&&(a=c),i>a)return null}return i}function Of(e,t,r,n,i,a,o,s,l,c,u){const d=n-e,h=i-t,p=a-r,f=o-e,m=s-t,g=l-r,y=u[1]*g-u[2]*m,b=u[2]*f-u[0]*g,_=u[0]*m-u[1]*f,v=d*y+h*b+p*_;if(Math.abs(v)<1e-15)return null;const x=1/v,w=c[0]-e,k=c[1]-t,S=c[2]-r,T=(w*y+k*b+S*_)*x;if(T<0||T>1)return null;const A=k*p-S*h,C=S*d-w*p,E=w*h-k*d,I=(u[0]*A+u[1]*C+u[2]*E)*x;return I<0||T+I>1?null:(f*A+m*C+g*E)*x}function Ff(e,t,r){return(e-t)/(r-t)}function Uf(e,t,r,n,i,a,o,s,l){const c=1<<r,u=a-n,d=o-i,h=(e+1)/c*u+n,p=(t+0)/c*d+i,f=(t+1)/c*d+i;s[0]=(e+0)/c*u+n,s[1]=p,l[0]=h,l[1]=f}class Nf{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),r=[];let n=Math.ceil(Math.pow(2,t));const i=1/n,a=(e,t,r,n,i)=>{const a=n?1:0,o=(e+1)*r-a,s=t*r,l=(t+1)*r-a;i[0]=e*r,i[1]=s,i[2]=o,i[3]=l};let o=new Rf(n);const s=[];for(let l=0;l<n*n;l++){a(l%n,Math.floor(l/n),i,!1,s);const t=Vf(s[0],s[1],e),r=Vf(s[2],s[1],e),c=Vf(s[2],s[3],e),u=Vf(s[0],s[3],e);o.minimums.push(Math.min(t,r,c,u)),o.maximums.push(Math.max(t,r,c,u)),o.leaves.push(1)}for(r.push(o),n/=2;n>=1;n/=2){const e=r[r.length-1];o=new Rf(n);for(let t=0;t<n*n;t++){a(t%n,Math.floor(t/n),2,!0,s);const r=e.getElevation(s[0],s[1]),i=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),d=e.isLeaf(s[2],s[1]),h=e.isLeaf(s[2],s[3]),p=e.isLeaf(s[0],s[3]),f=Math.min(r.min,i.min,l.min,c.min),m=Math.max(r.max,i.max,l.max,c.max),g=u&&d&&h&&p;o.maximums.push(m),o.minimums.push(f),o.leaves.push(m-f<=5&&g?1:0)}r.push(o)}return r}(this.dem),r=t.length-1,n=t[r];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(t,0,0,r,0)}raycastRoot(e,t,r,n,i,a,o=1){return Bf([e,t,-100],[r,n,this.maximums[0]*o],i,a)}raycast(e,t,r,n,i,a,o=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,r,n,i,a,o);if(null==s)return null;const l=[],c=[],u=[],d=[],h=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;h.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=h.pop();if(this.leaves[s]){Uf(f,m,g,e,t,r,n,u,d);const s=1<<g,l=(f+0)/s,c=(f+1)/s,h=(m+0)/s,y=(m+1)/s,b=Vf(l,h,this.dem)*o,_=Vf(c,h,this.dem)*o,v=Vf(c,y,this.dem)*o,x=Vf(l,y,this.dem)*o,w=Of(u[0],u[1],b,d[0],u[1],_,d[0],d[1],v,i,a),k=Of(d[0],d[1],v,u[0],d[1],x,u[0],u[1],b,i,a),S=Math.min(null!==w?w:Number.MAX_VALUE,null!==k?k:Number.MAX_VALUE);if(S!==Number.MAX_VALUE)return S;{const e=zs([],i,a,p);if(jf(b,_,x,v,Ff(e[0],u[0],d[0]),Ff(e[1],u[1],d[1]))>=e[2])return p}continue}let y=0;for(let h=0;h<this._siblingOffset.length;h++){Uf((f<<1)+this._siblingOffset[h][0],(m<<1)+this._siblingOffset[h][1],g+1,e,t,r,n,u,d),u[2]=-100,d[2]=this.maximums[this.childOffsets[s]+h]*o;const p=Bf(u,d,i,a);if(null!=p){const e=p;l[h]=e;let t=!1;for(let r=0;r<y&&!t;r++)e>=l[c[r]]&&(c.splice(r,0,h),t=!0);t||(c[y]=h),y++}}for(let e=0;e<y;e++){const t=c[e];h.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(f<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,r){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,r,n,i){if(1===e[n].isLeaf(t,r))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const a=n-1,o=e[a];let s=0,l=0;for(let c=0;c<this._siblingOffset.length;c++){const e=2*t+this._siblingOffset[c][0],n=2*r+this._siblingOffset[c][1],i=o.getElevation(e,n),a=o.isLeaf(e,n),u=this._addNode(i.min,i.max,a);a&&(s|=1<<c),l||(l=u)}for(let c=0;c<this._siblingOffset.length;c++)s&1<<c||this._construct(e,2*t+this._siblingOffset[c][0],2*r+this._siblingOffset[c][1],a,l+c)}}function jf(e,t,r,n,i,a){return Mr(Mr(e,r,a),Mr(t,n,a),i)}function Vf(e,t,r){const n=r.dim,i=C(e*n-.5,0,n-1),a=C(t*n-.5,0,n-1),o=Math.floor(i),s=Math.floor(a),l=Math.min(o+1,n-1),c=Math.min(s+1,n-1);return jf(r.get(o,s),r.get(l,s),r.get(o,c),r.get(l,c),i-o,a-s)}const Wf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function qf(e,t,r){return(256*e*256+256*t+r)/10-1e4}function Gf(e,t,r){return 256*e+t+r/256-32768}class $f{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,r,n=!1,i=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return q(`"${r}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const a=this.dim=t.height-2,o=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=r||"mapbox",this.borderReady=n,!n){for(let e=0;e<a;e++)o[this._idx(-1,e)]=o[this._idx(0,e)],o[this._idx(a,e)]=o[this._idx(a-1,e)],o[this._idx(e,-1)]=o[this._idx(e,0)],o[this._idx(e,a)]=o[this._idx(e,a-1)];o[this._idx(-1,-1)]=o[this._idx(0,0)],o[this._idx(a,-1)]=o[this._idx(a-1,0)],o[this._idx(-1,a)]=o[this._idx(0,a-1)],o[this._idx(a,a)]=o[this._idx(a-1,a-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Nf(this)}get(e,t,r=!1){r&&(e=C(e,-1,this.dim),t=C(t,-1,this.dim));const n=4*this._idx(e,t);return("terrarium"===this.encoding?Gf:qf)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(e){return Wf[e]}get unpackVector(){return Wf[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}static pack(e,t){const r=[0,0,0,0],n=$f.getUnpackVector(t);let i=Math.floor((e+n[3])/n[2]);return r[2]=i%256,i=Math.floor(i/256),r[1]=i%256,i=Math.floor(i/256),r[0]=i,r}getPixels(){return new Uc({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let n=t*this.dim,i=t*this.dim+this.dim,a=r*this.dim,o=r*this.dim+this.dim;switch(t){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:a=o-1;break;case 1:o=a+1}const s=-t*this.dim,l=-r*this.dim;for(let c=a;c<o;c++)for(let t=n;t<i;t++){const r=4*this._idx(t,c),n=4*this._idx(t+s,c+l);this.pixels[r+0]=e.pixels[n+0],this.pixels[r+1]=e.pixels[n+1],this.pixels[r+2]=e.pixels[n+2],this.pixels[r+3]=e.pixels[n+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Xi($f,"DEMData"),Xi(Nf,"DemMinMaxQuadTree",{omit:["dem"]});class Hf{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,r){const n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const i={value:t,timeout:void 0};if(void 0!==r&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),r)),this.data[n].push(i),this.order.push(n),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const r=e.wrapped().key,n=void 0===t?0:this.data[r].indexOf(t),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const r in this.data)for(const n of this.data[r])e(n.value)||t.push(n);for(const r of t)this.remove(r.value.tileID,r)}}class Zf{constructor(e,t,r){this.func=e,this.mask=t,this.range=r}}Zf.ReadOnly=!1,Zf.ReadWrite=!0,Zf.disabled=new Zf(519,Zf.ReadOnly,[0,1]);const Xf=7680;class Yf{constructor(e,t,r,n,i,a){this.test=e,this.ref=t,this.mask=r,this.fail=n,this.depthFail=i,this.pass=a}}Yf.disabled=new Yf({func:519,mask:0},0,0,Xf,Xf,Xf);class Kf{constructor(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r}}Kf.Replace=[1,0],Kf.disabled=new Kf(Kf.Replace,Mt.transparent,[!1,!1,!1,!1]),Kf.unblended=new Kf(Kf.Replace,Mt.transparent,[!0,!0,!0,!0]),Kf.alphaBlended=new Kf([1,771],Mt.transparent,[!0,!0,!0,!0]);const Jf=1029,Qf=2305;class em{constructor(e,t,r){this.enable=e,this.mode=t,this.frontFace=r}}em.disabled=new em(!1,Jf,Qf),em.backCCW=new em(!0,Jf,Qf),em.backCW=new em(!0,Jf,2304),em.frontCW=new em(!0,1028,2304),em.frontCCW=new em(!0,1028,Qf);class tm extends Qe{constructor(e,t,r){super(),this.id=e,this._onlySymbols=r,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new Hf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Lf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}getIds(){return M(this._tiles).map((e=>e.tileID)).sort(rm).map((e=>e.key))}getRenderableIds(e){const t=[];for(const r in this._tiles)this._isIdRenderable(+r,e)&&t.push(this._tiles[r]);return e?t.sort(((e,t)=>{const r=e.tileID,n=t.tileID,i=new b(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),a=new b(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||a.y-i.y||a.x-i.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(rm).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const r=this._tiles[e];r&&("loading"!==r.state&&(r.state=t),this._loadTile(r,this._tileLoaded.bind(this,r,e,t)))}_tileLoaded(e,t,r,n){if(n)if(e.state="errored",404!==n.status)this._source.fire(new Je(n,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Ze.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Ke("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let n=0;n<t.length;n++){const i=t[n];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);r(e,t),r(t,e)}}function r(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let r=t.tileID.canonical.x-e.tileID.canonical.x;const n=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,n),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,r,n){for(const i in this._tiles){let a=this._tiles[i];if(n[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>r)continue;let o=a.tileID;for(;a&&a.tileID.overscaledZ>t+1;){const e=a.tileID.scaledTo(a.tileID.overscaledZ-1);a=this._tiles[e.key],a&&a.hasData()&&(o=e)}let s=o;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){n[o.key]=o;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(let r=e.overscaledZ-1;r>=t;r--){const t=e.scaledTo(r),n=this._getLoadedTile(t);if(n)return n}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const r=Math.ceil(e.width/t)+1,n=Math.ceil(e.height/t)+1,i=Math.floor(r*n*5),a="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const r in this._tiles){const n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),e[n.tileID.key]=n}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(e,t,r){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!r)return;let n;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new fd(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(n=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(n=n.filter((e=>this._source.hasTile(e))))):n=[];const i=this._updateRetainedTiles(n);if(nm(this._source.type)&&0!==n.length){const e={},t={},r=Object.keys(i);for(const n of r){const r=i[n],a=this._tiles[n];if(!a||a.fadeEndTime&&a.fadeEndTime<=Ze.now())continue;const o=this.findLoadedParent(r,Math.max(r.overscaledZ-tm.maxOverzooming,this._source.minzoom));o&&(this._addTile(o.tileID),e[o.tileID.key]=o.tileID),t[n]=r}const a=n[n.length-1].overscaledZ;for(const n in this._tiles){const e=this._tiles[n];if(i[n]||!e.hasData())continue;let r=e.tileID;for(;r.overscaledZ>a;){r=r.scaledTo(r.overscaledZ-1);const a=this._tiles[r.key];if(a&&a.hasData()&&t[r.key]){i[n]=e.tileID;break}}}for(const n in e)i[n]||(this._coveredTiles[n]=!0,i[n]=e[n])}for(const o in i)this._tiles[o].clearFadeHold();const a=function(e,t){const r=[];for(const n in e)n in t||r.push(n);return r}(this._tiles,i);for(const o of a){const e=this._tiles[o];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+o)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const r={},n=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),i=e[0].overscaledZ,a=Math.max(i-tm.maxOverzooming,this._source.minzoom),o=Math.max(i+tm.maxUnderzooming,this._source.minzoom),s={};for(const l of e){const e=this._addTile(l);t[l.key]=l,e.hasData()||n<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,n,o,t);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],r=this.getTile(e);if(r&&r.hasData()){t[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let n=e.wasRequested();for(let i=l.overscaledZ-1;i>=a;--i){const a=l.scaledTo(i);if(r[a.key])break;if(r[a.key]=!0,e=this.getTile(a),!e&&n&&(e=this._addTile(a)),e&&(t[a.key]=a,n=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let r,n=this._tiles[e].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}t.push(n.key);const e=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(e),r)break;n=e}for(const e of t)this._loadedParentTiles[e]=r}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const r=Boolean(t);if(!r){const r=this.map?this.map.painter:null;t=new zf(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,r||this._source.fire(new Ke("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),r))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,r){const n=[],i=this.transform;if(!i)return n;const a="globe"===i.projection.name,o=ql(i.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(r&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(a){const e=l.tileID.canonical;if(0===e.z){const t=[Math.abs(C(o,...im(e,-1))-o),Math.abs(C(o,...im(e,1))-o)];c=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(C(o,...im(e,-1))-o),Math.abs(C(o,...im(e,0))-o),Math.abs(C(o,...im(e,1))-o)];c=[t.indexOf(Math.min(...t))-1]}}else c=[0];for(const r of c){const a=e.containsTile(l,i,t,r);a&&n.push(a)}}return n}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const r of t)r.projMatrix=this.transform.calculateProjMatrix(r.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(nm(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Ze.now())return!0}return!1}setFeatureState(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}removeFeatureState(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,r){const n=this._tiles[e];n&&n.setDependencies(t,r)}reloadTilesForDependencies(e,t){for(const r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(+r,"reloading");this._cache.filter((r=>!r.hasDependency(e,t)))}_preloadTiles(e,t){if(!this._sourceLoaded){const r=()=>{this._sourceLoaded&&(this._source.off("data",r),this._preloadTiles(e,t))};return void this._source.on("data",r)}const r=new Map,n=Array.isArray(e)?e:[e],i=this.map.painter.terrain,a=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const o of n){const e=o.coveringTiles({tileSize:a,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const t of e)r.set(t.key,t);this.usedForTerrain&&o.updateElevation(!1)}P(Array.from(r.values()),((e,t)=>{const r=new zf(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(r,(e=>{"raster-dem"===this._source.type&&r.dem&&this._backfillDEM(r),t(e,r)}))}),t)}}function rm(e,t){const r=Math.abs(2*e.wrap)-+(e.wrap<0),n=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function nm(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function im(e,t){const r=1<<e.z;return[e.x/r+t,(e.x+1)/r+t]}tm.maxOverzooming=10,tm.maxUnderzooming=3;class am{constructor(e,t,r){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=r}static create(e,t,r){const n=r||e.findDEMTileFor(t);if(!n||!n.dem)return;const i=n.dem,a=n.tileID,o=1<<t.canonical.z-a.canonical.z;return new am(n,n.tileSize/ss/o,[(t.canonical.x/o-a.canonical.x)*i.dim,(t.canonical.y/o-a.canonical.y)*i.dim])}tileCoordToPixel(e,t){const r=t*this._scale+this._offset[1],n=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(r);return new b(n,i)}getElevationAt(e,t,r,n){const i=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(i),s=Math.floor(a),l=this._dem;return n=!!n,r?Mr(Mr(l.get(o,s,n),l.get(o,s+1,n),a-s),Mr(l.get(o+1,s,n),l.get(o+1,s+1,n),a-s),i-o):l.get(o,s,n)}getElevationAtPixel(e,t,r){return this._dem.get(e,t,!!r)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*$l(1,e)*this._dem.stride}}class om{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Hi(ss,16,0),this.featureIndexArray=new xo,this.promoteId=t}insert(e,t,r,n,i,a=0){const o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i,a);const s=this.grid;for(let l=0;l<t.length;l++){const e=t[l],r=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const n=e[t];r[0]=Math.min(r[0],n.x),r[1]=Math.min(r[1],n.y),r[2]=Math.max(r[2],n.x),r[3]=Math.max(r[3],n.y)}r[0]<ss&&r[1]<ss&&r[2]>=0&&r[3]>=0&&s.insert(o,r[0],r[1],r[2],r[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new $u(new gh(this.rawTileData)).layers,this.sourceLayerCoder=new xf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,r,n){this.loadVTLayers();const i=e.params||{},a=di(i.filter),o=e.tileResult,s=e.transform,l=o.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((e,t,r,n)=>xc(o.bufferedTilespaceGeometry,e,t,r,n)));c.sort(lm);let u=null;s.elevation&&c.length>0&&(u=am.create(s.elevation,this.tileID));const d={};let h;for(let p=0;p<c.length;p++){const s=c[p];if(s===h)continue;h=s;const l=this.featureIndexArray.get(s);let f=null;this.loadMatchingFeature(d,l,a,i.layers,i.availableImages,t,r,n,((t,r,n,i=0)=>(f||(f=oc(t,this.tileID.canonical,e.tileTransform)),r.queryIntersectsFeature(o,t,n,f,this.z,e.transform,e.pixelPosMatrix,u,i))))}return d}loadMatchingFeature(e,t,r,n,i,a,o,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:d,layoutVertexArrayOffset:h}=t,p=this.bucketLayerIDs[u];if(n&&!function(e,t){for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(n,p))return;const f=this.sourceLayerCoder.decode(d),m=this.vtLayers[f].feature(c);if(r.needGeometry){const e=sc(m,!0);if(!r.filter(new xa(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!r.filter(new xa(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let y=0;y<p.length;y++){const t=p[y];if(n&&n.indexOf(t)<0)continue;const r=a[t];if(!r)continue;let u={};void 0!==g&&s&&(u=s.getState(r.sourceLayer||"_geojsonTileLayer",g));const d=D({},o[t]);d.paint=sm(d.paint,r.paint,m,u,i),d.layout=sm(d.layout,r.layout,m,u,i);const f=!l||l(m,r,u,h);if(!f)continue;const b=new kf(m,this.z,this.x,this.y,g);b.layer=d;let _=e[t];void 0===_&&(_=e[t]=[]),_.push({featureIndex:c,feature:b,intersectionZ:f})}}lookupSymbolFeatures(e,t,r,n,i,a,o,s){const l={};this.loadVTLayers();const c=di(i);for(const u of e)this.loadMatchingFeature(l,{bucketIndex:r,sourceLayerIndex:n,featureIndex:u,layoutVertexArrayOffset:0},c,a,o,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:r}=e;this.loadVTLayers();const n=this.sourceLayerCoder.decode(r),i=this.vtFeatures[n];if(i[t])return i[t];const a=this.vtLayers[n].feature(t);return i[t]=a,a}hasLayer(e){for(const t of this.bucketLayerIDs)for(const r of t)if(e===r)return!0;return!1}getId(e,t){let r=e.id;if(this.promoteId){const n="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=n&&(r=e.properties[n]),"boolean"==typeof r&&(r=Number(r))}return r}}function sm(e,t,r,n,i){return N(e,((e,a)=>{const o=t instanceof Ia?t.get(a):null;return o&&o.evaluate?o.evaluate(r,n,i):o}))}function lm(e,t){return t-e}Xi(om,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class cm{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new Fc({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const r=this.getKey(e,t);return this.positions[r]}trim(){const e=this.width,t=this.height=B(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,r){const n=[];let i=e.length%2==1?-e[e.length-1]*r:0,a=e[0]*r,o=!0;n.push({left:i,right:a,isDash:o,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){o=!o;const t=e[l];i=s*r,s+=t,a=s*r,n.push({left:i,right:a,isDash:o,zeroLength:0===t})}return n}addRoundDash(e,t,r){const n=t/2;for(let i=-r;i<=r;i++){const t=this.width*(this.nextRow+r+i);let a=0,o=e[a];for(let s=0;s<this.width;s++){s/o.right>1&&(o=e[++a]);const l=Math.abs(s-o.left),c=Math.abs(s-o.right),u=Math.min(l,c);let d;const h=i/r*(n+1);if(o.isDash){const e=n-Math.abs(h);d=Math.sqrt(u*u+e*e)}else d=n-Math.sqrt(u*u+h*h);this.image.data[t+s]=Math.max(0,Math.min(255,d+128))}}}addRegularDash(e,t){for(let s=e.length-1;s>=0;--s){const t=e[s],r=e[s+1];t.zeroLength?e.splice(s,1):r&&r.isDash===t.isDash&&(r.left=t.left,e.splice(s,1))}const r=e[0],n=e[e.length-1];r.isDash===n.isDash&&(r.left=n.left-this.width,n.right=r.right+this.width);const i=this.width*this.nextRow;let a=0,o=e[a];for(let s=0;s<this.width;s++){s/o.right>1&&(o=e[++a]);const r=Math.abs(s-o.left),n=Math.abs(s-o.right),l=Math.min(r,n);this.image.data[i+s]=Math.max(0,Math.min(255,(o.isDash?l:-l)+t+128))}}addDash(e,t){const r=this.getKey(e,t);if(this.positions[r])return this.positions[r];const n="round"===t,i=n?7:0,a=2*i+1;if(this.nextRow+a>this.height)return q("LineAtlas out of space"),null;0===e.length&&e.push(1);let o=0;for(let c=0;c<e.length;c++)e[c]<0&&(q("Negative value is found in line dasharray, replacing values with 0"),e[c]=0),o+=e[c];if(0!==o){const r=this.width/o,a=this.getDashRanges(e,this.width,r);n?this.addRoundDash(a,r,i):this.addRegularDash(a,"square"===t?.5*r:0)}const s=this.nextRow+i;this.nextRow+=a;const l={tl:[s,i],br:[o,0]};return this.positions[r]=l,l}}Xi(cm,"LineAtlas");const um=1*ep;class dm{constructor(e){const t={},r=[];for(const o in e){const n=e[o],i=t[o]={};for(const e in n.glyphs){const t=n.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const a=t.metrics.localGlyph?um:1,o={x:0,y:0,w:t.bitmap.width+2*a,h:t.bitmap.height+2*a};r.push(o),i[e]=o}}const{w:n,h:i}=wh(r),a=new Fc({width:n||1,height:i||1});for(const o in e){const r=e[o];for(const e in r.glyphs){const n=r.glyphs[+e];if(!n||0===n.bitmap.width||0===n.bitmap.height)continue;const i=t[o][e],s=n.metrics.localGlyph?um:1;Fc.copy(n.bitmap,a,{x:0,y:0},{x:i.x+s,y:i.y+s},n.bitmap)}}this.image=a,this.positions=t}}Xi(dm,"GlyphAtlas");class hm{constructor(e){this.tileID=new fd(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Pp(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,r,n,i){this.status="parsing",this.data=e,this.collisionBoxArray=new po;const a=new xf(Object.keys(e.layers).sort()),o=new om(this.tileID,this.promoteId);o.bucketLayerIDs=[];const s={},l=new cm(256,256),c={featureIndex:o,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:r},u=t.familiesBySource[this.source];for(const v in u){const t=e.layers[v];if(!t)continue;let n=!1,i=!1;for(const e of u[v])"symbol"===e[0].type?n=!0:i=!0;if(!0===this.isSymbolTile&&!n)continue;if(!1===this.isSymbolTile&&!i)continue;1===t.version&&q(`Vector tile source "${this.source}" layer "${v}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const l=a.encode(v),d=[];for(let e=0;e<t.length;e++){const r=t.feature(e),n=o.getId(r,v);d.push({feature:r,id:n,index:e,sourceLayerIndex:l})}for(const e of u[v]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(pm(e,this.zoom,r),(s[t.id]=t.createBucket({index:o.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:r})).populate(d,c,this.tileID.canonical,this.tileTransform),o.bucketLayerIDs.push(e.map((e=>e.id))))}}let d,h,p,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=()=>{if(d)return i(d);if(h&&p&&f){const e=new dm(h),t=new Th(p,f);for(const n in s){const i=s[n];i instanceof sf?(pm(i.layers,this.zoom,r),_p(i,h,e.positions,p,t.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Ad||i instanceof Cu||i instanceof ed)&&(pm(i.layers,this.zoom,r),i.addFeatures(c,this.tileID.canonical,t.patternPositions,r,this.tileTransform))}this.status="done",i(null,{buckets:M(s).filter((e=>!e.isEmpty())),featureIndex:o,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}},y=N(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(y).length?n.send("getGlyphs",{uid:this.uid,stacks:y},((e,t)=>{d||(d=e,h=t,g())}),void 0,!1,m):h={};const b=Object.keys(c.iconDependencies);b.length?n.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{d||(d=e,p=t,g())}),void 0,!1,m):p={};const _=Object.keys(c.patternDependencies);_.length?n.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{d||(d=e,f=t,g())}),void 0,!1,m):f={},g()}}function pm(e,t,r){const n=new xa(t);for(const i of e)i.recalculate(n,r)}class fm{constructor(e){this.entries={},this.scheduler=e}request(e,t,r,n){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,r]=i.result;return this.scheduler?this.scheduler.add((()=>{n(e,r)}),t):n(e,r),()=>{}}return i.callbacks.push(n),i.cancel||(i.cancel=r(((r,n)=>{i.result=[r,n];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(r,n)}),t):e(r,n);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==n)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function mm(e,t,r){const n=JSON.stringify(e.request);return e.data&&(this.deduped.entries[n]={result:[null,e.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const n=he(e.request,((e,n,i,a)=>{e?t(e):n&&t(null,{vectorTile:r?void 0:new $u(new gh(n)),rawData:n,cacheControl:i,expires:a})}));return()=>{n.cancel(),t()}}),t)}const gm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ym{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const n=r>>4;if(1!==n)throw new Error(`Got v${n} data when expected v1.`);const i=gm[15&r];if(!i)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new ym(o,a,i,e)}constructor(e,t=64,r=Float64Array,n){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=gm.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-o%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${r}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+o+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return bm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:a,nodeSize:o}=this,s=[0,i.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,d=s.pop()||0;if(u-d<=o){for(let o=d;o<=u;o++){const s=a[2*o],c=a[2*o+1];s>=e&&s<=r&&c>=t&&c<=n&&l.push(i[o])}continue}const h=d+u>>1,p=a[2*h],f=a[2*h+1];p>=e&&p<=r&&f>=t&&f<=n&&l.push(i[h]),(0===c?e<=p:t<=f)&&(s.push(d),s.push(h-1),s.push(1-c)),(0===c?r>=p:n>=f)&&(s.push(h+1),s.push(u),s.push(1-c))}return l}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:i,nodeSize:a}=this,o=[0,n.length-1,0],s=[],l=r*r;for(;o.length;){const c=o.pop()||0,u=o.pop()||0,d=o.pop()||0;if(u-d<=a){for(let r=d;r<=u;r++)wm(i[2*r],i[2*r+1],e,t)<=l&&s.push(n[r]);continue}const h=d+u>>1,p=i[2*h],f=i[2*h+1];wm(p,f,e,t)<=l&&s.push(n[h]),(0===c?e-r<=p:t-r<=f)&&(o.push(d),o.push(h-1),o.push(1-c)),(0===c?e+r>=p:t+r>=f)&&(o.push(h+1),o.push(u),o.push(1-c))}return s}}function bm(e,t,r,n,i,a){if(i-n<=r)return;const o=n+i>>1;_m(e,t,o,n,i,a),bm(e,t,r,n,o-1,1-a),bm(e,t,r,o+1,i,1-a)}function _m(e,t,r,n,i,a){for(;i>n;){if(i-n>600){const o=i-n+1,s=r-n+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(s-o/2<0?-1:1);_m(e,t,r,Math.max(n,Math.floor(r-s*c/o+u)),Math.min(i,Math.floor(r+(o-s)*c/o+u)),a)}const o=t[2*r+a];let s=n,l=i;for(vm(e,t,n,r),t[2*i+a]>o&&vm(e,t,n,i);s<l;){for(vm(e,t,s,l),s++,l--;t[2*s+a]<o;)s++;for(;t[2*l+a]>o;)l--}t[2*n+a]===o?vm(e,t,n,l):(l++,vm(e,t,l,i)),l<=r&&(n=l+1),r<=l&&(i=l-1)}}function vm(e,t,r,n){xm(e,r,n),xm(t,2*r,2*n),xm(t,2*r+1,2*n+1)}function xm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function wm(e,t,r,n){const i=e-r,a=t-n;return i*i+a*a}e.ARRAY_TYPE=us,e.AUTH_ERR_MSG=be,e.Aabb=il,e.Actor=class{constructor(e,r,n){this.target=e,this.parent=r,this.mapId=n,this.callbacks={},this.cancelCallbacks={},F(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=H()?e:t,this.scheduler=new vf}send(e,t,r,n,i=!1,a){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=a,this.callbacks[o]=r);const s=Y(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!r,targetMapId:n,mustQueue:i,sourceMapId:this.mapId,data:Ji(t,s)},s),{cancel:()=>{r&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(e){const t=e.data,r=t.id;if(r&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[r];delete this.cancelCallbacks[r],e&&e.cancel()}else if(t.mustQueue||H()){const e=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((()=>this.processTask(r,t)),e&&e.metadata||{type:"message"})}else this.processTask(r,t)}processTask(e,t){if("<response>"===t.type){const r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(Qi(t.error)):r(null,Qi(t.data)))}else{const r=Y(this.globalScope)?void 0:[],n=t.hasCallback?(t,n)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Ji(t):null,data:Ji(n,r)},r)}:e=>{},i=Qi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,n);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,n)}else n(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=hd,e.Color=Mt,e.ColorMode=Kf,e.CullFaceMode=em,e.DEMData=$f,e.DataConstantProperty=Pa,e.DedupedRequest=fm,e.DepthMode=Zf,e.EXTENT=ss,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const r=t.getSource().maxzoom,n=1<<r,i=Math.floor(e.x),a=Math.floor((e.x-i)*n),o=Math.floor(e.y*n),s=this.findDEMTileFor(new fd(r,i,r,a,o));return!(!s||!s.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,r=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;const i=n.getSource().maxzoom,a=1<<i,o=Math.floor(e.x),s=e.x-o,l=new fd(i,o,i,Math.floor(s*a),Math.floor(e.y*a)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,d=1<<c.tileID.canonical.z,h=(s*d-c.tileID.canonical.x)*u.dim,p=(e.y*d-c.tileID.canonical.y)*u.dim,f=Math.floor(h),m=Math.floor(p);return(r?this.exaggeration():1)*Mr(Mr(u.get(f,m),u.get(f,m+1),p-m),Mr(u.get(f+1,m),u.get(f+1,m+1),p-m),h-f)}getAtTileOffset(e,t,r){const n=1<<e.canonical.z;return this.getAtPointOrZero(new Jl(e.wrap+(e.canonical.x+t/ss)/n,(e.canonical.y+r/ss)/n))}getAtTileOffsetFunc(e,t,r,n){return i=>{const a=this.getAtTileOffset(e,i.x,i.y),o=n.upVector(e.canonical,i.x,i.y);return Ds(o,o,a*n.upVectorScale(e.canonical,t,r).metersToTile),o}}getForTilePoints(e,t,r,n){if(this.isUsingMockSource())return!1;const i=am.create(this,e,n);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],r)})),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const r=t.dem.tree,n=t.tileID,i=1<<e.canonical.z-n.canonical.z;let a=e.canonical.x/i-n.canonical.x,o=e.canonical.y/i-n.canonical.y,s=0;for(let l=0;l<e.canonical.z-n.canonical.z&&!r.leaves[s];l++){a*=2,o*=2;const e=2*Math.floor(o)+Math.floor(a);s=r.childOffsets[s]+e,a%=1,o%=1}return{min:this.exaggeration()*r.minimums[s],max:this.exaggeration()*r.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,r){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Je,e.EvaluationParameters=xa,e.Event=Ke,e.Evented=Qe,e.FillExtrusionBucket=ed,e.Frustum=nl,e.FrustumCorners=rl,e.GLOBE_RADIUS=sl,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=ol,e.GLOBE_ZOOM_THRESHOLD_MIN=al,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_fillGridMeshWithLods(e,t){const r=new Na,n=new ro,i=[],a=e+1+2,o=t[0]+1,s=t[0]+1+(1+t.length),l=(e,t,r)=>{let n=e===a-1?e-2:0===e?e:e-1;return n+=r?24575:0,[n,t]};for(let c=0;c<a;++c)r.emplaceBack(...l(c,0,!0));for(let c=0;c<o;++c)for(let e=0;e<a;++e)r.emplaceBack(...l(e,c,(0===e||e===a-1)&&!0));for(let c=0;c<t.length;++c){const e=t[c];for(let t=0;t<a;++t)r.emplaceBack(...l(t,e,!0))}for(let c=0;c<t.length;++c){const e=n.length,o=t[c]+1+2,l=new ro;for(let r=0;r<o-1;r++){const e=r===o-2,i=e?a*(s-t.length+c-r):a;for(let t=0;t<a-1;t++){const o=r*a+t;0===r||e||0===t||t===a-2?(l.emplaceBack(o+1,o,o+i),l.emplaceBack(o+i,o+i+1,o+1)):(n.emplaceBack(o+1,o,o+i),n.emplaceBack(o+i,o+i+1,o+1))}}const u=os.simpleSegment(0,e,r.length,n.length-e);for(let t=0;t<l.uint16.length;t+=3)n.emplaceBack(l.uint16[t],l.uint16[t+1],l.uint16[t+2]);const d=os.simpleSegment(0,e,r.length,n.length-e);i.push({withoutSkirts:u,withSkirts:d})}return{vertices:r,indices:n,segments:i}}_createGrid(e){const t=this._fillGridMeshWithLods(cl,ul);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,el.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new ro;for(let i=0;i<=cl;i++)t.emplaceBack(0,i+1,i+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const r=new oo,n=new oo;this._poleSegments=[];for(let i=0,a=0;i<al;i++){const e=360/(1<<i);r.emplaceBack(0,-sl,0,.5,0),n.emplaceBack(0,-sl,0,.5,1);for(let t=0;t<=cl;t++){const i=t/cl,a=Mr(0,e,i),[o,s,l]=Tl(Ol,Fl,a,sl);r.emplaceBack(o,s,l,i,0),n.emplaceBack(o,s,l,i,1)}this._poleSegments.push(os.simpleSegment(a,0,66,64)),a+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(r,Js,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(n,Js,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new lo,r=cl,n=r+1+2,i=1;this._wireframeSegments=[];for(let e=0,a=0;e<ul.length;e++){const o=ul[e];for(let e=i;e<o+i;e++)for(let a=i;a<r+i;a++){const r=e*n+a;t.emplaceBack(r,r+1),t.emplaceBack(r,r+n),t.emplaceBack(r,r+n+1)}const s=o*r*3;this._wireframeSegments.push(os.simpleSegment(0,a,(o+1)*n,s)),a+=s}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=rp,e.ImagePosition=Sh,e.KDBush=ym,e.LivePerformanceUtils=Ne,e.LngLat=Vl,e.LngLatBounds=ls,e.LocalGlyphMode=tp,e.MAX_MERCATOR_LATITUDE=Yl,e.MercatorCoordinate=Jl,e.ONE_EM=Fd,e.OverscaledTileID=fd,e.PerformanceMarkers=Ue,e.Point=b,e.Properties=za,e.RGBAImage=Uc,e.Ray=tl,e.RequestManager=class{constructor(e,t,r){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",d,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!_e(e))return e;const r=Te(e);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!_e(e))return e;const r=Te(e);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||t)}normalizeSourceURL(e,t,r,n){if(!_e(e))return e;const i=Te(e);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),r&&i.params.push(`language=${r}`),n&&i.params.push(`worldview=${n}`),this._makeAPIURL(i,this._customAccessToken||t)}normalizeSpriteURL(e,t,r,n){const i=Te(e);return _e(e)?(i.path=`/styles/v1${i.path}/sprite${t}${r}`,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=`${t}${r}`,Ae(i))}normalizeTileURL(e,t,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!_e(e))return e;const n=Te(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||r&&"raster"!==n.authority&&512===r?"@2x":""}${a.supported?".webp":"$1"}`),"raster"===n.authority?n.path=`/${i.RASTER_URL_PREFIX}${n.path}`:(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path=`/${i.TILE_URL_VERSION}${n.path}`);const o=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(n.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&o&&this._skuToken&&n.params.push(`sku=${this._skuToken}`),this._makeAPIURL(n,o)}canonicalizeTileURL(e,t){const r=Te(e);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return e;let n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+=`raster/${r.path.replace(`/${i.RASTER_URL_PREFIX}/`,"")}`:n+=`tiles/${r.path.replace(`/${i.TILE_URL_VERSION}/`,"")}`;let a=r.params;return t&&(a=a.filter((e=>!e.match(/^access_token=/)))),a.length&&(n+=`?${a.join("&")}`),n}canonicalizeTileset(e,t){const r=!!t&&_e(t),n=[];for(const i of e.tiles||[])ve(i)?n.push(this.canonicalizeTileURL(i,r)):n.push(i);return n}_makeAPIURL(e,t){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",n=Te(i.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==n.path&&(e.path=`${n.path}${e.path}`),!i.REQUIRE_ACCESS_TOKEN)return Ae(e);if(t=t||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t||""}`),Ae(e)}},e.ResourceType=le,e.SegmentVector=os,e.SourceCache=tm,e.StencilMode=Yf,e.StructArrayLayout1ui2=co,e.StructArrayLayout2f1f2i16=Qa,e.StructArrayLayout2i4=Na,e.StructArrayLayout2ui4=lo,e.StructArrayLayout3f12=to,e.StructArrayLayout3ui6=ro,e.StructArrayLayout4i8=Va,e.StructArrayLayout5f20=oo,e.Texture=bf,e.Tile=zf,e.Transitionable=Sa,e.Uniform1f=Oo,e.Uniform1i=class extends Bo{constructor(e){super(e),this.current=0}set(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},e.Uniform2f=class extends Bo{constructor(e){super(e),this.current=[0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},e.Uniform3f=class extends Bo{constructor(e){super(e),this.current=[0,0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},e.Uniform4f=Fo,e.UniformColor=Uo,e.UniformMatrix2f=class extends Bo{constructor(e){super(e),this.current=Vo}set(e,t,r){if(this.fetchUniformLocation(e,t))for(let n=0;n<4;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},e.UniformMatrix3f=class extends Bo{constructor(e){super(e),this.current=jo}set(e,t,r){if(this.fetchUniformLocation(e,t))for(let n=0;n<9;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},e.UniformMatrix4f=class extends Bo{constructor(e){super(e),this.current=No}set(e,t,r){if(this.fetchUniformLocation(e,t)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},e.UnwrappedTileID=pd,e.ValidationError=ri,e.VectorTileFeature=Hu,e.VectorTileWorkerSource=class extends Qe{constructor(e,t,r,n,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=r,this.loadVectorData=i||mm,this.loading={},this.loaded={},this.deduped=new fm(e.scheduler),this.isSpriteLoaded=n,this.scheduler=e.scheduler}loadTile(e,t){const r=e.uid,n=e&&e.request,i=n&&n.collectResourceTiming,a=this.loading[r]=new hm(e);a.abort=this.loadVectorData(e,((o,s)=>{const l=!this.loading[r];if(delete this.loading[r],l||o||!s)return a.status="done",l||(this.loaded[r]=a),t(o);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),a.vectorTile=s.vectorTile||new $u(new gh(c));const d=()=>{a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,r)=>{if(e||!r)return t(e);const a={};if(i){const e=We(n);e.length>0&&(a.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,D({rawTileData:c.slice(0)},r,u,a))}))};this.isSpriteLoaded?d():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()})),this.loaded=this.loaded||{},this.loaded[r]=a}))}reloadTile(e,t){const r=this.loaded,n=e.uid,i=this;if(r&&r[n]){const a=r[n];a.showCollisionBoxes=e.showCollisionBoxes,a.enableTerrain=!!e.enableTerrain,a.projection=e.projection,a.tileTransform=Pp(e.tileID.canonical,e.projection);const o=(e,r)=>{const n=a.reloadCallback;n&&(delete a.reloadCallback,a.parse(a.vectorTile,i.layerIndex,this.availableImages,i.actor,n)),t(e,r)};"parsing"===a.status?a.reloadCallback=o:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}}abortTile(e,t){const r=e.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),t()}removeTile(e,t){const r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],t()}},e.WritingMode=Ah,e.ZoomDependentExpression=Jn,e.add=Cs,e.addDynamicAttributes=rf,e.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=o*u-s*c,e[1]=i*c-n*u,e[2]=n*s-i*o,e[3]=s*l-a*u,e[4]=r*u-i*l,e[5]=i*a-r*s,e[6]=a*c-o*l,e[7]=n*l-r*c,e[8]=r*o-n*a,e},e.asyncAll=P,e.bezier=T,e.bindAll=F,e.boundsAttributes=Mf,e.bufferConvexPolygon=function(e,t){const r=[];for(let n=0;n<e.length;n++){const i=I(n-1,-1,e.length-1),a=I(n+1,-1,e.length-1),o=e[n],s=e[a],l=e[i].sub(o).unit(),c=s.sub(o).unit(),u=c.angleWithSep(l.x,l.y),d=l.add(c).unit().mult(-1*t/Math.sin(u/2));r.push(o.add(d))}return r},e.cacheEntryPossiblyAdded=function(e){se++,se>ne&&(e.getActor().send("enforceCacheSizeLimit",re),se=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:r,y:n}=e.point,i=Dl(r,n,e.worldSize/e._pixelsPerMercatorPixel,0,0);return ms(i,i,Ml(bl(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:r}=e.point,{lng:n,lat:i}=e._center;return Dl(t,r,e.worldSize,n,i)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,r=t/$l(1,e.center.lat),n=ps(new Float64Array(16));return gs(n,n,[e.point.x,e.point.y,0]),ys(n,n,[r,r,t]),Float32Array.from(n)},e.circumferenceAtLatitude=Wl,e.clamp=C,e.clearTileCache=function(e){if(!ie())return;const r=t.caches.delete(Q);e&&r.catch(e).then((()=>e()))},e.clipLine=Yh,e.clone=function(e){var t=new us(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=V,e.collisionCircleLayout=Od,e.config=i,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new us(16);return us!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=ds,e.createExpression=Yn,e.createLayout=Fa,e.createStyleLayer=function(e){return"custom"===e.type?new ff(e):new yf[e.type](e)},e.cross=Bs,e.degToRad=x,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},e.dot=Rs,e.earthRadius=Ul,e.ease=A,e.easeCubicInOut=S,e.ecefToLatLng=function([e,t,r]){const n=Math.hypot(e,t,r),i=Math.atan2(e,r),a=.5*Math.PI-Math.acos(-t/n);return new Vl(w(i),w(a))},e.emitValidationErrors=Wi,e.endsWith=U,e.enforceCacheSizeLimit=function(e){ae(),ee&&ee.then((t=>{t.keys().then((r=>{for(let n=0;n<r.length-e;n++)t.delete(r[n])}))}))},e.evaluateSizeForFeature=jd,e.evaluateSizeForZoom=Vd,e.evaluateVariableOffset=bp,e.evented=ya,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Ze,e.exported$1=a,e.extend=D,e.extend$1=tt,e.fillExtrusionHeightLift=sd,e.filterObject=j,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,l=i+i,c=r*o,u=n*o,d=n*s,h=i*o,p=i*s,f=i*l,m=a*o,g=a*s,y=a*l;return e[0]=1-d-f,e[1]=u+y,e[2]=h-g,e[3]=0,e[4]=u-y,e[5]=1-c-f,e[6]=p+m,e[7]=0,e[8]=h+g,e[9]=p-m,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=vs,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return k[t]},e.getAABBPointSquareDist=function(e,t,r){let n=0;for(let i=0;i<2;++i){const a=r?r[i]:0;e[i]>a&&(n+=(e[i]-a)*(e[i]-a)),t[i]<a&&(n+=(a-t[i])*(a-t[i]))}return n},e.getAnchorAlignment=Fh,e.getAnchorJustification=vp,e.getBounds=function(e){let t=1/0,r=1/0,n=-1/0,i=-1/0;for(const a of e)t=Math.min(t,a.x),r=Math.min(r,a.y),n=Math.max(n,a.x),i=Math.max(i,a.y);return{min:new b(t,r),max:new b(n,i)}},e.getColumn=J,e.getDefaultExportFromCjs=h,e.getGridMatrix=function(e,t,r,n){const i=t.getNorth(),a=t.getSouth(),o=t.getWest(),s=t.getEast(),l=1<<e.z,c=s-o,u=i-a,d=c/cl,h=-u/ul[r],p=[0,d,0,h,0,0,i,o,0];if(e.z>0){const e=180/n;hs(p,p,[e/c+1,0,0,0,e/u+1,0,-.5*e/d,.5*e/h,1])}return p[2]=l,p[5]=e.x,p[8]=e.y,p},e.getImage=ye,e.getJSON=function(e,t){return de(D(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=Yl-5;e=C(e,-t,t)/t*90;const r=Math.pow(Math.abs(Math.sin(x(e))),3);return Math.round(r*(ul.length-1))},e.getMapSessionAPI=Oe,e.getPerformanceMeasurement=We,e.getProjection=Kp,e.getRTLTextPluginStatus=ba,e.getReferrer=ue,e.getTilePoint=function(e,{x:t,y:r},n=0){return new b(((t-n)*e.scale-e.x)*ss,(r*e.scale-e.y)*ss)},e.getTileVec3=function(e,t,r=0){return As(((t.x-r)*e.scale-e.x)*ss,(t.y*e.scale-e.y)*ss,Xl(t.z,t.y))},e.getVideo=function(e,r){const n=t.document.createElement("video");n.muted=!0,n.onloadstart=function(){r(null,n)};for(let i=0;i<e.length;i++){const r=t.document.createElement("source");pe(e[i])||(n.crossOrigin="Anonymous"),r.src=e[i],n.appendChild(r)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],r=ps(new Float64Array(16));return ms(r,e.pixelMatrix,e.globeMatrix),Os(t,t,r),new b(t[0],t[1])},e.globeDenormalizeECEF=Ml,e.globeECEFOrigin=function(e,t){const r=[0,0,0];return Os(r,r,Pl(bl(t.canonical))),Os(r,r,e),r},e.globeMetersToEcef=fl,e.globeNormalizeECEF=Pl,e.globePixelsToTileUnits=function(e,t){return ss/(512*Math.pow(2,e))*El(bl(t))},e.globePoleMatrixForTile=function(e,t,r){const n=ps(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return _s(n,r.globeMatrix,i),Float32Array.from(n)},e.globeTileBounds=bl,e.globeTiltAtLngLat=Ll,e.globeToMercatorTransition=zl,e.globeUseCustomAntiAliasing=function(e,t,r){const n=zl(r.zoom),i=e.style.map._antialias,a=!!t.extStandardDerivatives,o=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===n&&!i&&!o&&a},e.identity=ps,e.identity$1=Hs,e.invert=fs,e.isFullscreen=function(){return!!t.document.fullscreenElement||!!t.document.webkitFullscreenElement},e.isLngLatBehindGlobe=Rl,e.isMapAuthenticated=function(e){return Fe.has(e)},e.isMapboxURL=_e,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!Y(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=Zl,e.latLngToECEF=Al,e.len=Vs,e.length=Ts,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=Hl,e.loadVectorTile=mm,e.makeRequest=de,e.mapValue=function(e,t,r,n,i){return C((e-t)/(r-t)*(i-n)+n,n,i)},e.mercatorScale=Kl,e.mercatorXfromLng=ql,e.mercatorYfromLat=Gl,e.mercatorZfromAltitude=$l,e.mul=ws,e.mul$1=js,e.multiply=ms,e.multiply$1=hs,e.multiply$2=Is,e.nextPowerOfTwo=B,e.normalize=Ls,e.normalize$1=Ys,e.normalize$2=qs,e.number=Mr,e.ortho=function(e,t,r,n,i,a,o){var s=1/(t-r),l=1/(n-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(o+a)*c,e[15]=1,e},e.pbf=Zd,e.perspective=function(e,t,r,n,i){var a,o=1/Math.tan(t/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+n)*(a=1/(n-i)),e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e},e.pick=function(e,t){const r={};for(let n=0;n<t.length;n++){const i=t[n];i in e&&(r[i]=e[i])}return r},e.plugin=va,e.pointGeometry=g,e.polesInViewport=function(e){const t=ps(new Float64Array(16));ms(t,e.pixelMatrix,e.globeMatrix);const r=[0,dl,0],n=[0,hl,0];return Os(r,r,t),Os(n,n,t),[r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!Rl(e,new Vl(e.center.lat,90)),n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!Rl(e,new Vl(e.center.lat,-90))]},e.polygonContainsPoint=vc,e.polygonIntersectsBox=xc,e.polygonIntersectsPolygon=dc,e.polygonizeBounds=function(e,t,r=0,n=!0){const i=new b(r,r),a=e.sub(i),o=t.add(i),s=[a,new b(o.x,a.y),o,new b(a.x,o.y)];return n&&s.push(a.clone()),s},e.posAttributes=el,e.postMapLoadEvent=ze,e.postPerformanceEvent=Re,e.postTurnstileEvent=Me,e.potpack=wh,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=w,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:pa,pluginURL:fa}),ya.on("pluginStateChange",e),e},e.removeAuthState=function(e){Fe.delete(e)},e.renderColorRamp=jc,e.resample=ec,e.rotateX=bs,e.rotateX$1=Zs,e.rotateY=_s,e.rotateY$1=Xs,e.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*n,e[1]=o*i+u*n,e[2]=s*i+d*n,e[3]=l*i+h*n,e[4]=c*i-a*n,e[5]=u*i-o*n,e[6]=d*i-s*n,e[7]=h*i-l*n,e},e.rotateZ$1=function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},e.scale=ys,e.scale$1=Ws,e.scale$2=Ds,e.scaleAndAdd=zs,e.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},e.setCacheLimits=function(e,t){re=e,ne=t},e.setColumn=function(e,t,r){e[4*t+0]=r[0],e[4*t+1]=r[1],e[4*t+2]=r[2],e[4*t+3]=r[3]},e.setRTLTextPlugin=function(e,t,r=!1){if(pa===ca||pa===ua||pa===da)throw new Error("setRTLTextPlugin cannot be called multiple times.");fa=Ze.resolveURL(e),pa=ca,ha=t,ga(),r||_a()},e.smoothstep=E,e.spec=et,e.squaredLength=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},e.storeAuthState=function(e,t){t?Fe.add(e):Fe.delete(e)},e.sub=Ns,e.subtract=Es,e.symbolSize=Wd,e.tileAABB=function(e,t,r,n,i,a,o,s,l){if("globe"===l.name)return wl(e,t,new hd(r,n,i));const c=Pp({z:r,x:n,y:i},l);return new il([(a+c.x/c.scale)*t,t*(c.y/c.scale),o],[(a+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileCornersToBounds=kl,e.tileTransform=Pp,e.transformMat3=function(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e},e.transformMat4=Os,e.transformMat4$1=Gs,e.transformQuat=Fs,e.transitionTileAABBinECEF=vl,e.translate=gs,e.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=ma,e.uniqueId=L,e.updateGlobeVertexNormal=function(e,t,r,n,i){const a=5*t+2;e.float32[a+0]=r,e.float32[a+1]=n,e.float32[a+2]=i},e.validateCustomStyleLayer=function(e){const t=[],r=e.id;return void 0===r&&t.push({message:`layers.${r}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${r}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=e=>Vi(ki(e)),e.validateFog=e=>Vi(Ri(e)),e.validateLayer=e=>Vi(Ei(e)),e.validateLight=e=>Vi(zi(e)),e.validateSource=e=>Vi(Mi(e)),e.validateStyle=Ui,e.validateTerrain=e=>Vi(Li(e)),e.values=M,e.vectorTile=Lu,e.version=r,e.warnOnce=q,e.window=t,e.wrap=I})),n(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let r="[";for(const n of e)r+=`${t(n)},`;return`${r}]`}let r="{";for(const n of Object.keys(e).sort())r+=`${n}:${t(e[n])},`;return`${r}}`}function r(r){let n="";for(const i of e.refProperties)n+=`/${t(r[i])}`;return n}class n{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,n){for(const r of t)this._layerConfigs[r.id]=r,(this._layers[r.id]=e.createStyleLayer(r)).compileFilter(),this.keyCache[r.id]&&delete this.keyCache[r.id];for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const n={};for(let a=0;a<e.length;a++){const i=t&&t[e[a].id]||r(e[a]);t&&(t[e[a].id]=i);let o=n[i];o||(o=n[i]=[]),o.push(e[a])}const i=[];for(const r in n)i.push(n[r]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),r=t[0];if("none"===r.visibility)continue;const n=r.source||"";let i=this.familiesBySource[n];i||(i=this.familiesBySource[n]={});const a=r.sourceLayer||"_geojsonTileLayer";let o=i[a];o||(o=i[a]=[]),o.push(t)}}}class i{loadTile(t,r){const{uid:n,encoding:i,rawImageData:a,padding:o,buildQuadTree:s}=t,l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap?this.getImageData(a,o):a;r(null,new e.DEMData(n,l,i,o<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const r=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),r}}function a(e,t){if(0!==e.length){o(e[0],t);for(var r=1;r<e.length;r++)o(e[r],!t)}}function o(e,t){for(var r=0,n=0,i=0,a=e.length,o=a-1;i<a;o=i++){var s=(e[i][0]-e[o][0])*(e[o][1]+e[i][1]),l=r+s;n+=Math.abs(r)>=Math.abs(s)?r-l+s:s-l+r,r=l}r+n>=0!=!!t&&e.reverse()}var s=e.getDefaultExportFromCjs((function e(t,r){var n,i=t&&t.type;if("FeatureCollection"===i)for(n=0;n<t.features.length;n++)e(t.features[n],r);else if("GeometryCollection"===i)for(n=0;n<t.geometries.length;n++)e(t.geometries[n],r);else if("Feature"===i)e(t.geometry,r);else if("Polygon"===i)a(t.coordinates,r);else if("MultiPolygon"===i)for(n=0;n<t.coordinates.length;n++)a(t.coordinates[n],r);return t}));const l=e.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},u=e.pointGeometry,d=e.vectorTile.VectorTileFeature,h=p;function p(e,t){this.options=t||{},this.features=e,this.length=e.length}function f(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}p.prototype.feature=function(e){return new f(this.features[e],this.options.extent)},f.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],n=[],i=0;i<r.length;i++)n.push(new u(r[i][0],r[i][1]));this.geometry.push(n)}return this.geometry},f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,i=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[t,n,r,i]},f.prototype.toGeoJSON=d.prototype.toGeoJSON;var m=e.pbf,g=h;function y(e){var t=new m;return function(e,t){for(var r in e.layers)t.writeMessage(3,b,e.layers[r])}(e,t),t.finish()}function b(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,_,n);var i=n.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var a=n.values;for(r=0;r<a.length;r++)t.writeMessage(4,S,a[r])}function _(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,v,e),t.writeVarintField(3,r.type),t.writeMessage(4,k,r)}function v(e,t){var r=e.feature,n=e.keys,i=e.values,a=e.keycache,o=e.valuecache;for(var s in r.properties){var l=r.properties[s],c=a[s];if(null!==l){void 0===c&&(n.push(s),a[s]=c=n.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var d=u+":"+l,h=o[d];void 0===h&&(i.push(l),o[d]=h=i.length-1),t.writeVarint(h)}}}function x(e,t){return(t<<3)+(7&e)}function w(e){return e<<1^e>>31}function k(e,t){for(var r=e.loadGeometry(),n=e.type,i=0,a=0,o=r.length,s=0;s<o;s++){var l=r[s],c=1;1===n&&(c=l.length),t.writeVarint(x(1,c));for(var u=3===n?l.length-1:l.length,d=0;d<u;d++){1===d&&1!==n&&t.writeVarint(x(2,u-1));var h=l[d].x-i,p=l[d].y-a;t.writeVarint(w(h)),t.writeVarint(w(p)),i+=h,a+=p}3===n&&t.writeVarint(x(7,1))}}function S(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}c.exports=y,c.exports.fromVectorTileJs=y,c.exports.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new g(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return y({layers:r})},c.exports.GeoJSONWrapper=g;var T=e.getDefaultExportFromCjs(c.exports);const A={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},C=Math.fround||(E=new Float32Array(1),e=>(E[0]=+e,E[0]));var E;const I=3,P=5,M=6;class D{constructor(e){this.options=Object.assign(Object.create(A),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:r,maxZoom:n}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const a=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[r,n]=t.geometry.coordinates,i=C(R(r)),o=C(B(n));a.push(i,o,1/0,s,-1,1),this.options.reduce&&a.push(0)}let o=this.trees[n+1]=this._createTree(a);t&&console.timeEnd(i);for(let s=n;s>=r;s--){const e=+Date.now();o=this.trees[s]=this._createTree(this._cluster(o,s)),t&&console.log("z%d: %d clusters in %dms",s,o.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const e=this.getClusters([r,n,180,a],t),o=this.getClusters([-180,n,i,a],t);return e.concat(o)}const o=this.trees[this._limitZoom(t)],s=o.range(R(r),B(a),R(i),B(n)),l=o.data,c=[];for(const u of s){const e=this.stride*u;c.push(l[e+P]>1?z(l,e,this.clusterProps):this.points[l[e+I]])}return c}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);const a=i.data;if(t*this.stride>=a.length)throw new Error(n);const o=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=i.within(a[t*this.stride],a[t*this.stride+1],o),l=[];for(const c of s){const t=c*this.stride;a[t+4]===e&&l.push(a[t+P]>1?z(a,t,this.clusterProps):this.points[a[t+I]])}if(0===l.length)throw new Error(n);return l}getLeaves(e,t,r){const n=[];return this._appendLeaves(n,e,t=t||10,r=r||0,0),n}getTile(e,t,r){const n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:a,radius:o}=this.options,s=o/a,l=(r-s)/i,c=(r+1+s)/i,u={features:[]};return this._addTileFeatures(n.range((t-s)/i,l,(t+1+s)/i,c),n.data,t,r,i,u),0===t&&this._addTileFeatures(n.range(1-s/i,l,1,c),n.data,i,r,i,u),t===i-1&&this._addTileFeatures(n.range(0,l,s/i,c),n.data,-1,r,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,n,i){const a=this.getChildren(t);for(const o of a){const t=o.properties;if(t&&t.cluster?i+t.point_count<=n?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,r,n,i):i<n?i++:e.push(o),e.length===r)break}return i}_createTree(t){const r=new e.KDBush(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)r.add(t[e],t[e+1]);return r.finish(),r.data=t,r}_addTileFeatures(e,t,r,n,i,a){for(const o of e){const e=o*this.stride,s=t[e+P]>1;let l,c,u;if(s)l=L(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const r=this.points[t[e+I]];l=r.properties;const[n,i]=r.geometry.coordinates;c=R(n),u=B(i)}const d={type:1,geometry:[[Math.round(this.options.extent*(c*i-r)),Math.round(this.options.extent*(u*i-n))]],tags:l};let h;h=s||this.options.generateId?t[e+I]:this.points[t[e+I]].id,void 0!==h&&(d.id=h),a.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:r,extent:n,reduce:i,minPoints:a}=this.options,o=r/(n*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=t)continue;s[u+2]=t;const r=s[u],n=s[u+1],d=e.within(s[u],s[u+1],o),h=s[u+P];let p=h;for(const e of d){const r=e*c;s[r+2]>t&&(p+=s[r+P])}if(p>h&&p>=a){let e,a=r*h,o=n*h,f=-1;const m=((u/c|0)<<5)+(t+1)+this.points.length;for(const r of d){const n=r*c;if(s[n+2]<=t)continue;s[n+2]=t;const l=s[n+P];a+=s[n]*l,o+=s[n+1]*l,s[n+4]=m,i&&(e||(e=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(s,n)))}s[u+4]=m,l.push(a/p,o/p,1/0,m,-1,p),i&&l.push(f)}else{for(let e=0;e<c;e++)l.push(s[u+e]);if(p>1)for(const e of d){const r=e*c;if(!(s[r+2]<=t)){s[r+2]=t;for(let e=0;e<c;e++)l.push(s[r+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+P]>1){const n=this.clusterProps[e[t+M]];return r?Object.assign({},n):n}const n=this.points[e[t+I]].properties,i=this.options.map(n);return r&&i===n?Object.assign({},i):i}}function z(e,t,r){return{type:"Feature",id:e[t+I],properties:L(e,t,r),geometry:{type:"Point",coordinates:[(n=e[t],360*(n-.5)),O(e[t+1])]}};var n}function L(e,t,r){const n=e[t+P],i=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?Math.round(n/100)/10+"k":n,a=e[t+M],o=-1===a?{}:Object.assign({},r[a]);return Object.assign(o,{cluster:!0,cluster_id:e[t+I],point_count:n,point_count_abbreviated:i})}function R(e){return e/360+.5}function B(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function O(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function F(e,t,r,n){for(var i,a=n,o=r-t>>1,s=r-t,l=e[t],c=e[t+1],u=e[r],d=e[r+1],h=t+3;h<r;h+=3){var p=U(e[h],e[h+1],l,c,u,d);if(p>a)i=h,a=p;else if(p===a){var f=Math.abs(h-o);f<s&&(i=h,s=f)}}a>n&&(i-t>3&&F(e,t,i,n),e[i+2]=a,r-i>3&&F(e,i,r,n))}function U(e,t,r,n,i,a){var o=i-r,s=a-n;if(0!==o||0!==s){var l=((e-r)*o+(t-n)*s)/(o*o+s*s);l>1?(r=i,n=a):l>0&&(r+=o*l,n+=s*l)}return(o=e-r)*o+(s=t-n)*s}function N(e,t,r,n){var i={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)j(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)j(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)j(e,t[n][i])}(i),i}function j(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function V(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===a)W(i,s);else if("MultiPoint"===a)for(var c=0;c<i.length;c++)W(i[c],s);else if("LineString"===a)q(i,s,o,!1);else if("MultiLineString"===a){if(r.lineMetrics){for(c=0;c<i.length;c++)q(i[c],s=[],o,!1),e.push(N(l,"LineString",s,t.properties));return}G(i,s,o,!1)}else if("Polygon"===a)G(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(c=0;c<t.geometry.geometries.length;c++)V(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];G(i[c],u,o,!0),s.push(u)}}e.push(N(l,a,s,t.properties))}}function W(e,t){t.push($(e[0])),t.push(H(e[1])),t.push(0)}function q(e,t,r,n){for(var i,a,o=0,s=0;s<e.length;s++){var l=$(e[s][0]),c=H(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(o+=n?(i*c-l*a)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-a,2))),i=l,a=c}var u=t.length-3;t[2]=1,F(t,0,u,r),t[u+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function G(e,t,r,n){for(var i=0;i<e.length;i++){var a=[];q(e[i],a,r,n),t.push(a)}}function $(e){return e/360+.5}function H(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Z(e,t,r,n,i,a,o,s){if(n/=t,a>=(r/=t)&&o<n)return e;if(o<r||a>=n)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=u.geometry,h=u.type,p=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(p>=r&&f<n)l.push(u);else if(!(f<r||p>=n)){var m=[];if("Point"===h||"MultiPoint"===h)X(d,m,r,n,i);else if("LineString"===h)Y(d,m,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===h)J(d,m,r,n,i,!1);else if("Polygon"===h)J(d,m,r,n,i,!0);else if("MultiPolygon"===h)for(var g=0;g<d.length;g++){var y=[];J(d[g],y,r,n,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(g=0;g<m.length;g++)l.push(N(u.id,h,m[g],u.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(N(u.id,h,m,u.tags))}}}return l.length?l:null}function X(e,t,r,n,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=r&&o<=n&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function Y(e,t,r,n,i,a,o){for(var s,l,c=K(e),u=0===i?ee:te,d=e.start,h=0;h<e.length-3;h+=3){var p=e[h],f=e[h+1],m=e[h+2],g=e[h+3],y=e[h+4],b=0===i?p:f,_=0===i?g:y,v=!1;o&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),b<r?_>r&&(l=u(c,p,f,g,y,r),o&&(c.start=d+s*l)):b>n?_<n&&(l=u(c,p,f,g,y,n),o&&(c.start=d+s*l)):Q(c,p,f,m),_<r&&b>=r&&(l=u(c,p,f,g,y,r),v=!0),_>n&&b<=n&&(l=u(c,p,f,g,y,n),v=!0),!a&&v&&(o&&(c.end=d+s*l),t.push(c),c=K(e)),o&&(d+=s)}var x=e.length-3;p=e[x],f=e[x+1],m=e[x+2],(b=0===i?p:f)>=r&&b<=n&&Q(c,p,f,m),x=c.length-3,a&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&Q(c,c[0],c[1],c[2]),c.length&&t.push(c)}function K(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function J(e,t,r,n,i,a){for(var o=0;o<e.length;o++)Y(e[o],t,r,n,i,a,!1)}function Q(e,t,r,n){e.push(t),e.push(r),e.push(n)}function ee(e,t,r,n,i,a){var o=(a-t)/(n-t);return e.push(a),e.push(r+(i-r)*o),e.push(1),o}function te(e,t,r,n,i,a){var o=(a-r)/(i-r);return e.push(t+(n-t)*o),e.push(a),e.push(1),o}function re(e,t){for(var r=[],n=0;n<e.length;n++){var i,a=e[n],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=ne(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(ne(a.geometry[s],t))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var l=[],c=0;c<a.geometry[s].length;c++)l.push(ne(a.geometry[s][c],t));i.push(l)}r.push(N(a.id,o,i,a.tags))}return r}function ne(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function ie(e,t){if(e.transformed)return e;var r,n,i,a=1<<e.z,o=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<c.length;n+=2)l.geometry.push(ae(c[n],c[n+1],t,a,o,s));else for(n=0;n<c.length;n++){var d=[];for(i=0;i<c[n].length;i+=2)d.push(ae(c[n][i],c[n][i+1],t,a,o,s));l.geometry.push(d)}}return e.transformed=!0,e}function ae(e,t,r,n,i,a){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-a))]}function oe(e,t,r,n,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,se(o,e[s],a,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,d=e[s].maxY;l<o.minX&&(o.minX=l),c<o.minY&&(o.minY=c),u>o.maxX&&(o.maxX=u),d>o.maxY&&(o.maxY=d)}return o}function se(e,t,r,n){var i=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)le(o,i,e,r,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)le(o,i[s],e,r,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)le(o,c[s],e,r,!0,0===s)}if(o.length){var u=t.tags||null;if("LineString"===a&&n.lineMetrics){for(var d in u={},t.tags)u[d]=t.tags[d];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var h={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:u};null!==t.id&&(h.id=t.id),e.features.push(h)}}function le(e,t,r,n,i,a){var o=n*n;if(n>0&&t.size<(i?o:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>o)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;i&&function(e,t){for(var r=0,n=0,i=e.length,a=i-2;n<i;a=n,n+=2)r+=(e[n]-e[a])*(e[n+1]+e[a+1]);if(r>0===t)for(n=0,i=e.length;n<i/2;n+=2){var o=e[n],s=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=o,e[i-1-n]=s}}(s,a),e.push(s)}}function ce(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)V(r,e.features[n],t,n);else V(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=function(e,t){var r=t.buffer/t.extent,n=e,i=Z(e,1,-1-r,r,0,-1,2,t),a=Z(e,1,1-r,2+r,0,-1,2,t);return(i||a)&&(n=Z(e,1,-r,1+r,0,-1,2,t)||[],i&&(n=re(i,1).concat(n)),a&&(n=n.concat(re(a,-1)))),n}(n,t),n.length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ue(e,t,r){return 32*((1<<e)*r+t)+e}function de(t,r){const n=t.tileID.canonical;if(!this._geoJSONIndex)return r(null,null);const i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return r(null,null);const a=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.Point(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const n=[];for(const t of r)n.push(new e.Point(t[0],t[1]));t.push(n)}return t}}toGeoJSON(e,t,r){return l.call(this,e,t,r)}}(this._features[t])}}(i.features);let o=T(a);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),r(null,{vectorTile:a,rawData:o.buffer})}ce.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ce.prototype.splitTile=function(e,t,r,n,i,a,o){for(var s=[e,t,r,n],l=this.options,c=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,d=ue(t,r,n),h=this.tiles[d];if(!h&&(c>1&&console.time("creation"),h=this.tiles[d]=oe(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(h.source=e,i){if(t===l.maxZoom||t===i)continue;var f=1<<i-t;if(r!==Math.floor(a/f)||n!==Math.floor(o/f))continue}else if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,b,_,v,x=.5*l.buffer/l.extent,w=.5-x,k=.5+x,S=1+x;m=g=y=b=null,_=Z(e,u,r-x,r+k,0,h.minX,h.maxX,l),v=Z(e,u,r+w,r+S,0,h.minX,h.maxX,l),e=null,_&&(m=Z(_,u,n-x,n+k,1,h.minY,h.maxY,l),g=Z(_,u,n+w,n+S,1,h.minY,h.maxY,l),_=null),v&&(y=Z(v,u,n-x,n+k,1,h.minY,h.maxY,l),b=Z(v,u,n+w,n+S,1,h.minY,h.maxY,l),v=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*r,2*n),s.push(g||[],t+1,2*r,2*n+1),s.push(y||[],t+1,2*r+1,2*n),s.push(b||[],t+1,2*r+1,2*n+1)}}},ce.prototype.getTile=function(e,t,r){var n=this.options,i=n.extent,a=n.debug;if(e<0||e>24)return null;var o=1<<e,s=ue(e,t=(t%o+o)%o,r);if(this.tiles[s])return ie(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,c=e,u=t,d=r;!l&&c>0;)c--,u=Math.floor(u/2),d=Math.floor(d/2),l=this.tiles[ue(c,u,d)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",c,u,d),a>1&&console.time("drilling down"),this.splitTile(l.source,c,u,d,e,t,r),a>1&&console.timeEnd("drilling down"),this.tiles[s]?ie(this.tiles[s],i):null):null};class he extends e.VectorTileWorkerSource{constructor(e,t,r,n,i){super(e,t,r,n,de),i&&(this.loadGeoJSON=i)}loadData(t,r){const n=t&&t.request,i=n&&n.collectResourceTiming;this.loadGeoJSON(t,((a,o)=>{if(a||!o)return r(a);if("object"!=typeof o)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{s(o,!0);try{if(t.filter){const r=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const n=o.features.filter((e=>r.value.evaluate({zoom:0},e)));o={type:"FeatureCollection",features:n}}this._geoJSONIndex=t.cluster?new D(function({superclusterOptions:t,clusterProperties:r}){if(!r||!t)return t;const n={},i={},a={accumulated:null,zoom:0},o={properties:null},s=Object.keys(r);for(const l of s){const[t,a]=r[l],o=e.createExpression(a),s=e.createExpression("string"==typeof t?[t,["accumulated"],["get",l]]:t);n[l]=o.value,i[l]=s.value}return t.map=e=>{o.properties=e;const t={};for(const r of s)t[r]=n[r].evaluate(a,o);return t},t.reduce=(e,t)=>{o.properties=t;for(const r of s)a.accumulated=e[r],e[r]=i[r].evaluate(a,o)},t}(t)).load(o.features):function(e,t){return new ce(e,t)}(o,t.geojsonVtOptions)}catch(a){return r(a)}this.loaded={};const l={};if(i){const r=e.getPerformanceMeasurement(n);r&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(r)))}r(null,l)}}))}reloadTile(e,t){const r=this.loaded;return r&&r[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class pe{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:he},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,r){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],r()}checkIfReady(e,t,r){r()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,r){this.isSpriteLoaded[t]=r;for(const n in this.workerSources[t]){const i=this.workerSources[t][n];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=r,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,r){this.availableImages[e]=t;for(const n in this.workerSources[e]){const r=this.workerSources[e][n];for(const e in r)r[e].availableImages=t}r()}enableTerrain(e,t,r){this.terrain=t,r()}setProjection(t,r){this.projections[t]=e.getProjection(r)}setLayers(e,t,r){this.getLayerIndex(e).replace(t),r()}updateLayers(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()}loadTile(t,r,n){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).loadTile(i,n)}loadDEMTile(t,r,n){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},r):r;this.getDEMWorkerSource(t,r.source).loadTile(i,n)}reloadTile(t,r,n){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).reloadTile(i,n)}abortTile(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)}removeTile(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)}removeSource(e,t,r){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,r):r()}loadWorkerSource(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}}syncRTLPluginState(t,r,n){try{e.plugin.setState(r);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const r=e.plugin.isParsed();n(r?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),r)}}catch(e){n(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new n),t}getWorkerSource(e,t,r){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){const n={send:(t,r,n,i,a,o)=>{this.actor.send(t,r,n,e,a,o)},scheduler:this.actor.scheduler};this.workerSources[e][t][r]=new this.workerSourceTypes[t](n,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][r]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,r){e.enforceCacheSizeLimit(r)}getWorkerPerformanceMetrics(e,t,r){r(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new pe(self)),pe})),n(["./shared"],(function(e){function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!t(e[n],r[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(!t(e[n],r[n]))return!1;return!0}return e===r}var r=n;function n(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{t=new Worker(n),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var r=t.getImageData(0,0,1,1);return r&&r.width===e.width}()?(void 0===i[t=e&&e.failIfMajorPerformanceCaveat]&&(i[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),i[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var i={};function a(t,r,n){const i=e.window.document.createElement(t);return void 0!==r&&(i.className=r),n&&n.appendChild(i),i}function o(t,r,n){const i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(r))i.setAttributeNS(null,e,r[e]);return n&&n.appendChild(i),i}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function d(){s&&l&&(s[l]=c)}function h(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",h,!0)}function p(){e.window.addEventListener("click",h,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",h,!0)}),0)}function f(e,t){const r=e.getBoundingClientRect();return y(e,r,t)}function m(e,t){const r=e.getBoundingClientRect(),n=[];for(let i=0;i<t.length;i++)n.push(y(e,r,t[i]));return n}function g(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function y(t,r,n){const i=t.offsetWidth===r.width?1:t.offsetWidth/r.width;return new e.Point((n.clientX-r.left)*i,(n.clientY-r.top)*i)}function b(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*a-i*n;return o?(e[0]=a*(o=1/o),e[1]=-n*o,e[2]=-i*o,e[3]=r*o,e):null}function _(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class v extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,r){let n=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),n=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),n=!1),this._validateContent(r.content,r)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),n=!1),n}_validateStretch(e,t){if(!e)return!0;let r=0;for(const n of e){if(n[0]<r||n[1]<n[0]||t<n[1])return!1;r=n[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let r=!0;if(!this.isLoaded())for(const n of e)this.images[n]||(r=!1);this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,r){const n={};for(const i of t){this.images[i]||this.fire(new e.Event("styleimagemissing",{id:i}));const t=this.images[i];t?n[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}r(null,n)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const r=this.patterns[t],n=this.getImage(t);if(!n)return null;if(r&&r.position.version===n.version)return r.position;if(r)r.position.version=n.version;else{const r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},i=new e.ImagePosition(r,n);this.patterns[t]={bin:r,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const r=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,r.RGBA),this.atlasTexture&&this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:r,h:n}=e.potpack(t),i=this.atlasImage;i.resize({width:r||1,height:n||1});for(const a in this.patterns){const{bin:t}=this.patterns[a],r=t.x+1,n=t.y+1,o=this.images[a].data,s=o.width,l=o.height;e.RGBAImage.copy(o,i,{x:0,y:0},{x:r,y:n},{width:s,height:l}),e.RGBAImage.copy(o,i,{x:0,y:l-1},{x:r,y:n-1},{width:s,height:1}),e.RGBAImage.copy(o,i,{x:0,y:0},{x:r,y:n+l},{width:s,height:1}),e.RGBAImage.copy(o,i,{x:s-1,y:0},{x:r-1,y:n},{width:1,height:l}),e.RGBAImage.copy(o,i,{x:0,y:0},{x:r+s,y:n},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];_(e)&&this.updateImage(t,e)}}}const x=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,r){return function([t,r,n]){const i=e.degToRad(r+90),a=e.degToRad(n);return{x:t*Math.cos(i)*Math.sin(a),y:t*Math.sin(i)*Math.sin(a),z:t*Math.cos(a),azimuthal:r,polar:n}}(t.expression.evaluate(r))}interpolate(t,r,n){return{x:e.number(t.x,r.x,n),y:e.number(t.y,r.y,n),z:e.number(t.z,r.z,n),azimuthal:e.number(t.azimuthal,r.azimuthal,n),polar:e.number(t.polar,r.polar,n)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)});class w extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(x),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,r={}){if(!this._validate(e.validateLight,t,r))for(const n in t){const r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const k=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)});let S=class extends e.Evented{constructor(t,r){super(),this._transitionable=new e.Transitionable(k),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=r}get(){return this._transitionable.serialize()}set(t){for(const r in t){const n=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}};function T(t,r,n,i){const a=e.smoothstep(45,65,n),[o,s]=A(t,i),l=e.length(r);let c=1-Math.min(1,Math.exp((l-o)/(s-o)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*a*t.alpha}function A(e,t){const r=.5/Math.tan(.5*t);return[e.range[0]+r,e.range[1]+r]}const C=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])});class E extends e.Evented{constructor(t,r){super(),this._transitionable=new e.Transitionable(C),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=r}get state(){const t=this._transform,r="globe"===t.projection.name,n=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),a=[.5,3];return{range:r?[e.number(a[0],i[0],n),e.number(a[1],i[1],n)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,r={}){if(!this._validate(e.validateFog,t,r)){for(const r of Object.keys(e.spec.fog))t&&void 0===t[r]&&(t[r]=e.spec.fog[r].default);for(const r in t){const n=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),n):this._transitionable.setValue(r,n)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const r=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*r.a}getOpacityAtLatLng(t,r){return this._transform.projection.supportsFog?function(t,r,n){const i=e.MercatorCoordinate.fromLngLat(r),a=n.elevation?n.elevation.getAtPointOrZero(i):0,o=[i.x,i.y,a];return e.transformMat4(o,o,n.mercatorFogMatrix),T(t,o,n.pitch,n._fov)}(this.state,t,r):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?A(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class I{constructor(t,r){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const n=this.workerPool.acquire(this.id);for(let e=0;e<n.length;e++){const t=new I.Actor(n[e],r,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,r,n){e.asyncAll(this.actors,((e,n)=>{e.send(t,r,n)}),n=n||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function P(t,r,n){return r*(e.EXTENT/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}I.Actor=e.Actor;class M{constructor(e,t,r,n){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,n)}static createFromScreenPoints(t,r){let n,i;if(t instanceof e.Point||"number"==typeof t[0]){const a=e.Point.convert(t);n=[a],i=r.isPointAboveHorizon(a)}else{const a=e.Point.convert(t[0]),o=e.Point.convert(t[1]);n=[a,o],i=e.polygonizeBounds(a,o).every((e=>r.isPointAboveHorizon(e)))}return new M(n,r.getCameraPoint(),i,r)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(r,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>r.x&&this.cameraPoint.x<n.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?i[2]=this.cameraPoint:this.cameraPoint.x<=r.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}bufferedCameraGeometryGlobe(t){const r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(r,n,t),a=this.cameraPoint.clone();switch(3*((a.y>r.y)+(a.y>n.y))+((a.x>r.x)+(a.x>n.x))){case 0:i[0]=a,i[4]=a.clone();break;case 1:i.splice(1,0,a);break;case 2:i[1]=a;break;case 3:i.splice(4,0,a);break;case 5:i.splice(2,0,a);break;case 6:i[3]=a;break;case 7:i.splice(3,0,a);break;case 8:i[2]=a}return i}containsTile(t,r,n,i=0){const a=t.queryPadding/r._pixelsPerMercatorPixel+1,o=n?this._bufferedCameraMercator(a,r):this._bufferedScreenMercator(a,r);let s=t.tileID.wrap+(o.unwrapped?i:0);const l=o.polygon.map((r=>e.getTilePoint(t.tileTransform,r,s)));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const c=this.screenGeometryMercator.polygon.map((r=>e.getTileVec3(t.tileTransform,r,s))),u=c.map((t=>new e.Point(t[0],t[1]))),d=r.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),h=e.getTileVec3(t.tileTransform,d,s),p=c.map((t=>{const r=e.sub(t,t,h);return e.normalize(r,r),new e.Ray(h,r)})),f=P(t,1,r.zoom)*r._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:p,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=e.getBounds(l),m.min.x=e.clamp(m.min.x,0,e.EXTENT),m.min.y=e.clamp(m.min.y,0,e.EXTENT),m.max.x=e.clamp(m.max.x,0,e.EXTENT),m.max.y=e.clamp(m.max.y,0,e.EXTENT),m),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:f};var m}_bufferedScreenMercator(e,t){const r=L(e);if(this._screenRaycastCache[r])return this._screenRaycastCache[r];{let n;return n="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[r]=n,n}}_bufferedCameraMercator(e,t){const r=L(e);if(this._cameraRaycastCache[r])return this._cameraRaycastCache[r];{let n;return n="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[r]=n,n}}_projectAndResample(t,r){const n=function(t,r){const n=e.multiply([],r.pixelMatrix,r.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],a=[0,e.GLOBE_RADIUS,0,1],o=[0,0,0,1];e.transformMat4$1(i,i,n),e.transformMat4$1(a,a,n),e.transformMat4$1(o,o,n);const s=new e.Point(i[0]/i[3],i[1]/i[3]),l=new e.Point(a[0]/a[3],a[1]/a[3]),c=e.polygonContainsPoint(t,s)&&i[3]<o[3],u=e.polygonContainsPoint(t,l)&&a[3]<o[3];if(!c&&!u)return null;const d=function(e,t,r){for(let n=1;n<e.length;n++){const i=z(t.pointCoordinate3D(e[n-1]).x),a=z(t.pointCoordinate3D(e[n]).x);if(r<0){if(i<a)return{idx:n,t:-i/(a-1-i)}}else if(a<i)return{idx:n,t:(1-i)/(a+1-i)}}return null}(t,r,c?-1:1);if(!d)return null;const{idx:h,t:p}=d;let f=h>1?D(t.slice(0,h),r):[],m=h<t.length?D(t.slice(h),r):[];f=f.map((t=>new e.Point(z(t.x),t.y))),m=m.map((t=>new e.Point(z(t.x),t.y)));const g=[...f];0===g.length&&g.push(m[m.length-1]);const y=e.number(g[g.length-1].y,(0===m.length?f[0]:m[0]).y,p);let b;return b=c?[new e.Point(0,y),new e.Point(0,0),new e.Point(1,0),new e.Point(1,y)]:[new e.Point(1,y),new e.Point(1,1),new e.Point(0,1),new e.Point(0,y)],g.push(...b),0===m.length?g.push(f[0]):g.push(...m),{polygon:g.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,r);if(n)return n;const i=function(t,r){let n=!1,i=-1/0,a=0;for(let e=0;e<t.length-1;e++)t[e].x>i&&(i=t[e].x,a=e);for(let e=0;e<t.length-1;e++){const r=(a+e)%(t.length-1),i=t[r],o=t[r+1];Math.abs(i.x-o.x)>.5&&(i.x<o.x?(i.x+=1,0===r&&(t[t.length-1].x+=1)):(o.x+=1,r+1===t.length-1&&(t[0].x+=1)),n=!0)}const o=e.mercatorXfromLng(r.center.lng);return n&&o<Math.abs(o-1)&&t.forEach((e=>{e.x-=1})),{polygon:t,unwrapped:n}}(D(t,r).map((t=>new e.Point(z(t.x),t.y))),r);return{polygon:i.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:i.unwrapped}}}function D(t,r){return e.resample(t,(e=>{const t=r.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function z(e){return e<0?1+e%1:e%1}function L(e){return 100*e|0}function R(t,r,n,i,a){const o=function(n,i){if(n)return a(n);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;const n=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(n.vectorLayers=i.vector_layers,n.vectorLayerIds=n.vectorLayers.map((e=>e.id))),n.tiles=r.canonicalizeTileset(n,t.url),a(null,n)}};return t.url?e.getJSON(r.transformRequest(r.normalizeSourceURL(t.url,null,n,i),e.ResourceType.Source),o):e.exported.frame((()=>o(null,t)))}class B{constructor(t,r,n){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=r||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const r=Math.pow(2,t.z),n=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*r),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*r),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*r),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*r);return t.x>=n&&t.x<a&&t.y>=i&&t.y<o}}class O{constructor(e,t,r){this.context=e;const n=e.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const F={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class U{constructor(e,t,r,n){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let r=0;r<this.attributes.length;r++){const n=t.attributes[this.attributes[r].name];void 0!==n&&e.enableVertexAttribArray(n)}}setVertexAttribPointers(e,t,r){for(let n=0;n<this.attributes.length;n++){const i=this.attributes[n],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[F[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class N{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class j extends N{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class V extends N{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class W extends N{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class q extends N{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class G extends N{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class $ extends N{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class H extends N{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Z extends N{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class X extends N{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class Y extends N{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class K extends N{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class J extends N{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Q extends N{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ee extends N{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class te extends N{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class re extends N{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ne extends N{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class ie extends N{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class ae extends N{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let oe,se=class extends N{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}};class le extends N{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ce extends N{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ue extends N{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class de extends N{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class he extends N{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class pe extends N{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class fe extends N{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class me extends N{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ge extends N{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ye extends N{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class be extends N{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class _e extends N{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class ve extends _e{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class xe extends _e{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class we extends xe{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ke{constructor(e,t,r,n){this.context=e,this.width=t,this.height=r;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new ve(e,i),n&&(this.depthAttachment=new xe(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Se{constructor(e,t=!1){if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)}}this.clearColor=new j(this),this.clearDepth=new V(this),this.clearStencil=new W(this),this.colorMask=new q(this),this.depthMask=new G(this),this.stencilMask=new $(this),this.stencilFunc=new H(this),this.stencilOp=new Z(this),this.stencilTest=new X(this),this.depthRange=new Y(this),this.depthTest=new K(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new ee(this),this.blendColor=new te(this),this.blendEquation=new re(this),this.cullFace=new ne(this),this.cullFaceSide=new ie(this),this.frontFace=new ae(this),this.program=new se(this),this.activeTexture=new le(this),this.viewport=new ce(this),this.bindFramebuffer=new ue(this),this.bindRenderbuffer=new de(this),this.bindTexture=new he(this),this.bindVertexBuffer=new pe(this),this.bindElementBuffer=new fe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new me(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new be(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new O(this,e,t)}createVertexBuffer(e,t,r){return new U(this,e,t,r)}createRenderbuffer(e,t,r){const n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,r){return new ke(this,e,t,r)}clear({color:e,depth:t,stencil:r}){const n=this.gl;let i=0;e&&(i|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==r&&(i|=n.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),n.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(r){t(r.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Te extends e.Evented{constructor(t,r,n,i){if(super(),this.id=t,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(r,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,n=this.map._worldview;this._tileJSONRequest=R(this._options,this.map._requestManager,r,n,((i,a)=>{this._tileJSONRequest=null,this._loaded=!0,i?(r&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${r}`),n&&2!==n.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${n}`),this.fire(new e.ErrorEvent(i))):a&&(e.extend(this,a),a.bounds&&(this.tileBounds=new B(a.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(a.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(i)}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,r){const n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(n,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=r:t.request=t.actor.send("reloadTile",i,a.bind(this));else if(t.actor=this._tileWorkers[n]=this._tileWorkers[n]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,a.bind(this),void 0,!0);else{const r=e.loadVectorTile.call({deduped:this._deduped},i,((e,r)=>{e||!r?a.call(this,e):(i.data={cacheControl:r.cacheControl,expires:r.expires,rawData:r.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,a.bind(this),void 0,!0))}),!0);t.request={cancel:r}}function a(n,i){return delete t.request,t.aborted?r(null):n&&404!==n.status?r(n):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ae extends e.Evented{constructor(t,r,n,i){super(),this.id=t,this.dispatcher=n,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=R(this._options,this.map._requestManager,null,null,((r,n)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new e.ErrorEvent(r)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new B(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(r)}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,r){const n=e.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),n,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((n,i,a,o)=>(delete t.request,t.aborted?(t.state="unloaded",r(null)):n?(t.state="errored",r(n)):i?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:o}),t.setTexture(i,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void r(null)):r(null))))}static loadTileData(e,t,r){e.setTexture(t,r)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Ce(t,r,n,i,a,o,s,l){const c=[t,n,a,r,i,o,1,1,1],u=[s,l,1],d=e.adjoint([],c),[h,p,f]=e.transformMat3(u,u,e.transpose(d,d));return e.multiply$1(c,[h,0,0,0,p,0,0,0,f],c)}class Ee extends e.Evented{constructor(e,t,r,n){super(),this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=t,this._dirty=!1}load(t,r){this._loaded=r||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((r,n)=>{if(this._imageRequest=null,this._loaded=!0,r)this.fire(new e.ErrorEvent(r));else if(n){const{HTMLImageElement:r}=e.window;this.image=n instanceof r?e.exported.getImageData(n):n,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const r=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let r=1/0,n=1/0,i=-1/0,a=-1/0;for(const e of t)r=Math.min(r,e.x),n=Math.min(n,e.y),i=Math.max(i,e.x),a=Math.max(a,e.y);const o=Math.max(i-r,a-n),s=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((r+i)/2*l),Math.floor((n+a)/2*l))}(r),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const r=e.tileTransform(this.tileID,this.map.transform.projection),[n,i,a,o]=this.coordinates.map((t=>{const n=r.projection.project(t[0],t[1]);return e.getTilePoint(r,n)._round()}));this.perspectiveTransform=function(t,r,n,i,a,o,s,l,c,u){const d=Ce(0,0,t,0,0,r,t,r),h=Ce(n,i,a,o,s,l,c,u);return e.multiply$1(h,e.adjoint(d,d),h),[h[6]/h[8]*t/e.EXTENT,h[7]/h[8]*r/e.EXTENT]}(this.width,this.height,n.x,n.y,i.x,i.y,o.x,o.y,a.x,a.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(n.x,n.y,0,0),s.emplaceBack(i.x,i.y,e.EXTENT,0),s.emplaceBack(o.x,o.y,0,e.EXTENT),s.emplaceBack(a.x,a.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,r=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ie={vector:Te,raster:Ae,"raster-dem":class extends Ae{constructor(t,r,n,i){super(t,r,n,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}loadTile(t,r){const n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,n){e&&(t.state="errored",r(e)),n&&(t.dem=n,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",r(null))}t.request=e.getImage(this.map._requestManager.transformRequest(n,e.ResourceType.Tile),function(n,a,o,s){if(delete t.request,t.aborted)t.state="unloaded",r(null);else if(n)t.state="errored",r(n);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});const r=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&(null==oe&&(oe=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),oe),n=1-(a.width-e.prevPowerOfTwo(a.width))/2;n<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=r?a:e.exported.getImageData(a,n),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:n};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const r=t.canonical,n=Math.pow(2,r.z),i=(r.x-1+n)%n,a=0===r.x?t.wrap-1:t.wrap,o=(r.x+1+n)%n,s=r.x+1===n?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,a,r.z,i,r.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,o,r.y).key]={backfilled:!1},r.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,a,r.z,i,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,o,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new e.OverscaledTileID(t.overscaledZ,a,r.z,i,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,o,r.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,r,n,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(i),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const a=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*a,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,r,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:r},n),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(r),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,r)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[this.id]&&(t.resourceTiming=r.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,r){const n=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(n,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?r(null):e?r(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===n),r(null)))),void 0,"loadTile"===n)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ee{constructor(e,t,r,n){super(e,t,r,n),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const r of t.urls)this.urls.push(this.map._requestManager.transformRequest(r,e.ResourceType.Source).url);e.getVideo(this.urls,((t,r)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):r&&(this.video=r,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const r=this.video.seekable;t<r.start(0)||t>r.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,r=t.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ee,canvas:class extends Ee{constructor(t,r,n,i){super(t,r,n,i),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const r=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(r,this.canvas,r.gl.RGBA,{premultiply:!0}),this._prepareData(r)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,r,n,i){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=n,this._implementation=r,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new B(this._implementation.bounds,this.minzoom,this.maxzoom)),r.update=this._update.bind(this),r.clearTiles=this._clearTiles.bind(this),r.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(r,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:r,z:n}=e.canonical;return this._implementation.hasTile({x:t,y:r,z:n})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,r){const{x:n,y:i,z:a}=t.tileID.canonical,o=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:n,y:i,z:a},{signal:o.signal})).then(function(n){return delete t.request,t.aborted?(t.state="unloaded",r(null)):void 0===n?(t.state="errored",r(null)):null===n?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",r(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(n)?(this.loadTileData(t,n),t.state="loaded",void r(null)):(t.state="errored",r(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",r(e))})),t.request.cancel=()=>o.abort()}loadTileData(e,t){Ae.loadTileData(e,t,this._map.painter)}unloadTileData(e){Ae.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:r,z:n}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:r,z:n})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Pe=function(t,r,n,i){const a=new Ie[r.type](t,r,n,i);if(a.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${a.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function Me(t,r){const n=e.identity([]);return e.scale(n,n,[.5*t.width,.5*-t.height,1]),e.translate(n,n,[1,-1,0]),e.multiply(n,n,t.calculateProjMatrix(r.toUnwrapped())),Float32Array.from(n)}function De(e,t,r,n,i,a,o,s=!1){const l=e.tilesIn(n,o,s);l.sort(Le);const c=[];for(const d of l)c.push({wrappedTileID:d.tile.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,r,e._state,d,i,a,Me(e.transform,d.tile.tileID),s)});const u=function(e){const t={},r={};for(const n of e){const e=n.queryResults,i=n.wrappedTileID,a=r[i]=r[i]||{};for(const r in e){const n=e[r],i=a[r]=a[r]||{},o=t[r]=t[r]||[];for(const e of n)i[e.featureIndex]||(i[e.featureIndex]=!0,o.push(e))}}return t}(c);for(const d in u)u[d].forEach((t=>{const r=t.feature,n=r.layer;n&&"background"!==n.type&&"sky"!==n.type&&(r.source=n.source,n["source-layer"]&&(r.sourceLayer=n["source-layer"]),r.state=void 0!==r.id?e.getFeatureState(n["source-layer"],r.id):{})}));return u}function ze(e,t){const r=e.getRenderableIds().map((t=>e.getTileByID(t))),n=[],i={};for(let a=0;a<r.length;a++){const e=r[a],o=e.tileID.canonical.key;i[o]||(i[o]=!0,e.querySourceFeatures(n,t))}return n}function Le(e,t){const r=e.tileID,n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function Re(){return null!=ha.workerClass?new ha.workerClass:new e.window.Worker(ha.workerUrl)}const Be="mapboxgl_preloaded_worker_pool";class Oe{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Oe.workerCount;)this.workers.push(new Re);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Be]}numActive(){return Object.keys(this.active).length}}let Fe;function Ue(){return Fe||(Fe=new Oe),Fe}function Ne(t,r){const n={};for(const e in t)"ref"!==e&&(n[e]=t[e]);return e.refProperties.forEach((e=>{e in r&&(n[e]=r[e])})),n}function je(e){e=e.slice();const t=Object.create(null);for(let r=0;r<e.length;r++)t[e[r].id]=e[r];for(let r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Ne(e[r],t[e[r].ref]));return e}Oe.workerCount=2;const Ve={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function We(e,t,r){r.push({command:Ve.addSource,args:[e,t[e]]})}function qe(e,t,r){t.push({command:Ve.removeSource,args:[e]}),r[e]=!0}function Ge(e,t,r,n){qe(e,r,n),We(e,t,r)}function $e(e,r,n){let i;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!t(e[n][i],r[n][i]))return!1;for(i in r[n])if(r[n].hasOwnProperty(i)&&"data"!==i&&!t(e[n][i],r[n][i]))return!1;return!0}function He(e,r,n,i,a,o){let s;for(s in r=r||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],r[s])||n.push({command:o,args:[i,s,r[s],a]}));for(s in r)r.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],r[s])||n.push({command:o,args:[i,s,r[s],a]}))}function Ze(e){return e.id}function Xe(e,t){return e[t.id]=t,e}class Ye{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let r=1,n=this._distances[r];const i=t*this.paddedLength+this.padding;for(;n<i&&r<this._distances.length;)n=this._distances[++r];const a=r-1,o=this._distances[a],s=n-o,l=s>0?(i-o)/s:0;return this.points[a].mult(1-l).add(this.points[r].mult(l))}}class Ke{constructor(e,t,r){const n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(let a=0;a<this.xCellCount*this.yCellCount;a++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}insertCircle(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)}_insertBoxCell(e,t,r,n,i,a){this.boxCells[i].push(a)}_insertCircleCell(e,t,r,n,i,a){this.circleCells[i].push(a)}_query(e,t,r,n,i,a){if(r<0||e>this.width||n<0||t>this.height)return!i&&[];const o=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)o.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],r=this.circles[3*e+1],n=this.circles[3*e+2];o.push({key:this.circleKeys[e],x1:t-n,y1:r-n,x2:t+n,y2:r+n})}return a?o.filter(a):o}return this._forEachCell(e,t,r,n,this._queryCell,o,{hitTest:i,seenUids:{box:{},circle:{}}},a),i?o.length>0:o}_queryCircle(e,t,r,n,i){const a=e-r,o=e+r,s=t-r,l=t+r;if(o<0||a>this.width||l<0||s>this.height)return!n&&[];const c=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,c,{hitTest:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},i),n?c.length>0:c}query(e,t,r,n,i){return this._query(e,t,r,n,!1,i)}hitTest(e,t,r,n,i){return this._query(e,t,r,n,!0,i)}hitTestCircle(e,t,r,n){return this._queryCircle(e,t,r,!0,n)}_queryCell(e,t,r,n,i,a,o,s){const l=o.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=i[c+2]&&t<=i[c+3]&&r>=i[c+0]&&n>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],e,t,r,n)&&(!s||s(this.circleKeys[c]))){if(o.hitTest)return a.push(!0),!0;{const e=i[u],t=i[u+1],r=i[u+2];a.push({key:this.circleKeys[c],x1:e-r,y1:t-r,x2:e+r,y2:t+r})}}}}}_queryCellCircle(e,t,r,n,i,a,o,s){const l=o.circle,c=o.seenUids,u=this.boxCells[i];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const r=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!s||s(this.boxKeys[t])))return a.push(!0),!0}}const d=this.circleCells[i];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const r=3*t;if(this._circlesCollide(e[r],e[r+1],e[r+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return a.push(!0),!0}}}_forEachCell(e,t,r,n,i,a,o,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(r),d=this._convertToYCellCoord(n);for(let h=l;h<=u;h++)for(let l=c;l<=d;l++)if(i.call(this,e,t,r,n,this.xCellCount*l+h,a,o,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,r,n,i,a){const o=n-e,s=i-t,l=r+a;return l*l>o*o+s*s}_circleAndRectCollide(e,t,r,n,i,a,o){const s=(a-n)/2,l=Math.abs(e-(n+s));if(l>s+r)return!1;const c=(o-i)/2,u=Math.abs(t-(i+c));if(u>c+r)return!1;if(l<=s||u<=c)return!0;const d=l-s,h=u-c;return d*d+h*h<=r*r}}const Je={unknown:0,flipRequired:1,flipNotRequired:2},Qe=Math.tan(85*Math.PI/180);function et(t,r,n,i,a,o,s){const l=e.create();if(n)if("globe"===o.name){const t=e.calculateGlobeLabelMatrix(a,r);e.multiply(l,l,t)}else{const t=b([],s);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],i||e.rotateZ(l,l,a.angle)}else e.multiply(l,a.labelPlaneMatrix,t);return l}function tt(e,t,r,n,i,a,o){const s=et(e,t,r,n,i,a,o);return"globe"===a.name&&r||(s[2]=s[6]=s[10]=s[14]=0),s}function rt(t,r,n,i,a,o,s){if(n){if("globe"===o.name){const l=et(t,r,n,i,a,o,s);return e.invert(l,l),e.multiply(l,t,l),l}{const r=e.clone(t),n=e.identity([]);return n[0]=s[0],n[1]=s[1],n[4]=s[2],n[5]=s[3],e.multiply(r,r,n),i||e.rotateZ(r,r,-a.angle),r}}return a.glCoordMatrix}function nt(t,r,n,i){const a=[t,r,n,1];n?e.transformMat4$1(a,a,i):ft(a,a,i);const o=a[3];return a[0]/=o,a[1]/=o,a[2]/=o,a}function it(e,t){return Math.min(.5+e/t*.5,1.5)}function at(e,t){const r=e[0]/e[3],n=e[1]/e[3];return r>=-t[0]&&r<=t[0]&&n>=-t[1]&&n<=t[1]}function ot(t,r,n,i,a,o,s,l,c,u){const d=n.transform,h=i?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(h,n.transform.zoom),f="globe"===d.projection.name,m=[256/n.width*2+1,256/n.height*2+1],g=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();let y=null;f&&(y=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const b=t.lineVertexArray,_=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,v=n.transform.width/n.transform.height;let x,w=!1;for(let k=0;k<_.length;k++){const i=_.get(k),{numGlyphs:f,writingMode:S}=i;if(S!==e.WritingMode.vertical||w||x===e.WritingMode.horizontal||(w=!0),x=S,(i.hidden||S===e.WritingMode.vertical)&&!w){pt(f,g);continue}w=!1;const T=new e.Point(i.tileAnchorX,i.tileAnchorY);let{x:A,y:C,z:E}=d.projection.projectTilePoint(T.x,T.y,u.canonical);if(c){const[e,t,r]=c(T);A+=e,C+=t,E+=r}const I=[A,C,E,1];if(e.transformMat4$1(I,I,r),!at(I,m)){pt(f,g);continue}const P=it(n.transform.cameraToCenterDistance,I[3]),M=e.evaluateSizeForFeature(h,p,i),D=s?M/P:M*P,z=nt(A,C,E,a);if(z[3]<=0){pt(f,g);continue}let L={};const R=s?null:c,B=ct(i,D,!1,l,r,a,o,t.glyphOffsetArray,b,g,y,z,T,L,v,R,d.projection,u,s);w=B.useVertical,R&&B.needsFlipping&&(L={}),(B.notEnoughRoom||w||B.needsFlipping&&ct(i,D,!0,l,r,a,o,t.glyphOffsetArray,b,g,y,z,T,L,v,R,d.projection,u,s).notEnoughRoom)&&pt(f,g)}i?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer.updateData(y))}function st(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m){const{lineStartIndex:g,glyphStartIndex:y,segment:b}=s,_=y+s.numGlyphs,v=g+s.lineLength,x=t.getoffsetX(y),w=t.getoffsetX(_-1),k=ht(e*x,r,n,i,a,o,b,g,v,l,c,u,d,h,!0,p,f,m);if(!k)return null;const S=ht(e*w,r,n,i,a,o,b,g,v,l,c,u,d,h,!0,p,f,m);return S?{first:k,last:S}:null}function lt(t,r,n,i){return t===e.WritingMode.horizontal&&Math.abs(i)>Math.abs(n)?{useVertical:!0}:t===e.WritingMode.vertical?i>0?{needsFlipping:!0}:null:r!==Je.unknown&&function(e,t){return 0===e||Math.abs(t/e)>Qe}(n,i)?r===Je.flipRequired?{needsFlipping:!0}:null:n<0?{needsFlipping:!0}:null}function ct(t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y,b,_){const v=r/24,x=t.lineOffsetX*v,w=t.lineOffsetY*v,{lineStartIndex:k,glyphStartIndex:S,numGlyphs:T,segment:A,writingMode:C,flipState:E}=t,I=k+t.lineLength,P=t=>{if(d){const[r,n,i]=t.up,a=u.length;e.updateGlobeVertexNormal(d,a+0,r,n,i),e.updateGlobeVertexNormal(d,a+1,r,n,i),e.updateGlobeVertexNormal(d,a+2,r,n,i),e.updateGlobeVertexNormal(d,a+3,r,n,i)}const[r,n,i]=t.point;e.addDynamicAttributes(u,r,n,i,t.angle)};if(T>1){const e=st(v,l,x,w,n,h,p,t,c,o,f,g,!1,y,b,_);if(!e)return{notEnoughRoom:!0};if(i&&!n){let[r,n,i]=e.first.point,[a,o,l]=e.last.point;[r,n]=nt(r,n,i,s),[a,o]=nt(a,o,l,s);const c=lt(C,E,(a-r)*m,o-n);if(t.flipState=c&&c.needsFlipping?Je.flipRequired:Je.flipNotRequired,c)return c}P(e.first);for(let t=S+1;t<S+T-1;t++){const e=ht(v*l.getoffsetX(t),x,w,n,h,p,A,k,I,c,o,f,g,!1,!1,y,b,_);if(!e)return u.length-=4*(t-S),{notEnoughRoom:!0};P(e)}P(e.last)}else{if(i&&!n){const r=nt(p.x,p.y,0,a),n=k+A+1,i=new e.Point(c.getx(n),c.gety(n)),o=nt(i.x,i.y,0,a),s=o[3]>0?o:dt(p,i,r,1,a,void 0,y,b.canonical),l=lt(C,E,(s[0]-r[0])*m,s[1]-r[1]);if(t.flipState=l&&l.needsFlipping?Je.flipRequired:Je.flipNotRequired,l)return l}const r=ht(v*l.getoffsetX(S),x,w,n,h,p,A,k,I,c,o,f,g,!1,!1,y,b,_);if(!r)return{notEnoughRoom:!0};P(r)}return{}}function ut(e,t,r,n,i){const{x:a,y:o,z:s}=n.projectTilePoint(e.x,e.y,t);if(!i)return nt(a,o,s,r);const[l,c,u]=i(e);return nt(a+l,o+c,s+u,r)}function dt(t,r,n,i,a,o,s,l){const c=ut(t.sub(r)._unit()._add(t),l,a,s,o);return e.sub(c,n,c),e.normalize(c,c),e.scaleAndAdd(c,n,c,i)}function ht(t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y,b){const _=i?t-r:t+r;let v=_>0?1:-1,x=0;i&&(v*=-1,x=Math.PI),v<0&&(x+=Math.PI);let w=l+s+(v>0?0:1)|0,k=a,S=a,T=0,A=0;const C=Math.abs(_),E=[],I=[];let P=o,M=P;const D=()=>dt(M,P,S,C-T+1,d,p,g,y.canonical);for(;T+A<=C;){if(w+=v,w<l||w>=c)return null;if(S=k,M=P,E.push(S),f&&I.push(M),P=new e.Point(u.getx(w),u.gety(w)),k=h[w],!k){const e=ut(P,y.canonical,d,g,p);k=e[3]>0?h[w]=e:D()}T+=A,A=e.distance(S,k)}m&&p&&(h[w]&&(k=D(),A=e.distance(S,k)),h[w]=k);const z=(C-T)/A,L=P.sub(M)._mult(z)._add(M),R=e.sub([],k,S),B=e.scaleAndAdd([],S,R,z);let O=[0,0,1],F=R[0],U=R[1];if(b&&(O=g.upVector(y.canonical,L.x,L.y),0!==O[0]||0!==O[1]||1!==O[2])){const t=[O[2],0,-O[0]],r=e.cross([],O,t);e.normalize(t,t),e.normalize(r,r),F=e.dot(R,t),U=e.dot(R,r)}if(n){const t=e.cross([],O,R);e.normalize(t,t),e.scaleAndAdd(B,B,t,n*v)}const N=x+Math.atan2(U,F);return E.push(B),f&&I.push(L),{point:B,angle:N,path:E,tilePath:I,up:O}}function pt(e,t){const r=t.length,n=r+4*e;t.resize(n),t.float32.fill(-1/0,4*r,4*n)}function ft(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e[3]=r[3]*n+r[7]*i+r[15],e}const mt=100;class gt{constructor(e,t,r=new Ke(e.width+200,e.height+200,25),n=new Ke(e.width+200,e.height+200,25)){this.transform=e,this.grid=r,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+mt,this.screenBottomBoundary=e.height+mt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,r,n,i,a,o,s){let l=r.projectedAnchorX,c=r.projectedAnchorY,u=r.projectedAnchorZ;const d=r.elevation,h=r.tileID,p=e.getProjection();if(d&&h){const[e,t,n]=p.upVector(h.canonical,r.tileAnchorX,r.tileAnchorY),i=p.upVectorScale(h.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*d*i,c+=t*d*i,u+=n*d*i}const f=this.projectAndGetPerspectiveRatio(o,l,c,u,r.tileID,"globe"===p.name||!!d||this.transform.pitch>0,p),m=a*f.perspectiveRatio,g=(r.x1*t+n.x-r.padding)*m+f.point.x,y=(r.y1*t+n.y-r.padding)*m+f.point.y,b=(r.x2*t+n.x+r.padding)*m+f.point.x,_=(r.y2*t+n.y+r.padding)*m+f.point.y,v=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(g,y,b,_)||!i&&this.grid.hitTest(g,y,b,_,s)||v?{box:[],offscreen:!1,occluded:f.occluded}:{box:[g,y,b,_],offscreen:this.isOffscreen(g,y,b,_),occluded:!1}}placeCollisionCircles(t,r,n,i,a,o,s,l,c,u,d,h,p,f,m){const g=[],y=this.transform.elevation,b=t.getProjection(),_=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,b):null,v=new e.Point(n.tileAnchorX,n.tileAnchorY);let{x:x,y:w,z:k}=b.projectTilePoint(v.x,v.y,m.canonical);if(_){const[e,t,r]=_(v);x+=e,w+=t,k+=r}const S="globe"===b.name,T=this.projectAndGetPerspectiveRatio(s,x,w,k,m,S||!!y||this.transform.pitch>0,b),{perspectiveRatio:A}=T,C=(d?o/A:o*A)/e.ONE_EM,E=nt(x,w,k,l),I=T.signedDistanceFromCamera>0?st(C,a,n.lineOffsetX*C,n.lineOffsetY*C,!1,E,v,n,i,l,{},y&&!d?_:null,d&&!!y,b,m,d):null;let P=!1,M=!1,D=!0;if(I&&!T.occluded){const t=.5*p*A+f,n=new e.Point(-100,-100),i=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),a=new Ye,{first:o,last:s}=I,l=o.path.length;let d=[];for(let e=l-1;e>=1;e--)d.push(o.path[e]);for(let e=1;e<s.path.length;e++)d.push(s.path[e]);const m=2.5*t;c&&(d=d.map((([e,t,r],n)=>(_&&!S&&(r=_(n<l-1?o.tilePath[l-1-n]:s.tilePath[n-l+2])[2]),nt(e,t,r,c)))),d.some((e=>e[3]<=0))&&(d=[]));let y=[];if(d.length>0){let t=1/0,r=-1/0,a=1/0,o=-1/0;for(const e of d)t=Math.min(t,e[0]),a=Math.min(a,e[1]),r=Math.max(r,e[0]),o=Math.max(o,e[1]);r>=n.x&&t<=i.x&&o>=n.y&&a<=i.y&&(y=[d.map((t=>new e.Point(t[0],t[1])))],(t<n.x||r>i.x||a<n.y||o>i.y)&&(y=e.clipLine(y,n.x,n.y,i.x,i.y)))}for(const e of y){a.reset(e,.25*t);let n=0;n=a.length<=.5*t?1:Math.ceil(a.paddedLength/m)+1;for(let e=0;e<n;e++){const i=e/Math.max(n-1,1),o=a.lerp(i),s=o.x+mt,l=o.y+mt;g.push(s,l,t,0);const c=s-t,d=l-t,p=s+t,f=l+t;if(D=D&&this.isOffscreen(c,d,p,f),M=M||this.isInsideGrid(c,d,p,f),!r&&this.grid.hitTestCircle(s,l,t,h)&&(P=!0,!u))return{circles:[],offscreen:!1,collisionDetected:P,occluded:!1}}}}return{circles:!u&&P||!M?[]:g,offscreen:D,collisionDetected:P,occluded:T.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const r=[];let n=1/0,i=1/0,a=-1/0,o=-1/0;for(const u of t){const t=new e.Point(u.x+mt,u.y+mt);n=Math.min(n,t.x),i=Math.min(i,t.y),a=Math.max(a,t.x),o=Math.max(o,t.y),r.push(t)}const s=this.grid.query(n,i,a,o).concat(this.ignoredGrid.query(n,i,a,o)),l={},c={};for(const u of s){const t=u.key;if(void 0===l[t.bucketInstanceId]&&(l[t.bucketInstanceId]={}),l[t.bucketInstanceId][t.featureIndex])continue;const n=[new e.Point(u.x1,u.y1),new e.Point(u.x2,u.y1),new e.Point(u.x2,u.y2),new e.Point(u.x1,u.y2)];e.polygonIntersectsPolygon(r,n)&&(l[t.bucketInstanceId][t.featureIndex]=!0,void 0===c[t.bucketInstanceId]&&(c[t.bucketInstanceId]=[]),c[t.bucketInstanceId].push(t.featureIndex))}return c}insertCollisionBox(e,t,r,n,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,r,n,i){const a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:r,featureIndex:n,collisionGroupID:i};for(let s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])}projectAndGetPerspectiveRatio(t,r,n,i,a,o,s){const l=[r,n,i,1];let c=!1;if(i||this.transform.pitch>0){if(e.transformMat4$1(l,l,t),this.fogState&&a&&"globe"!==s.name){const t=function(t,r,n,i,a,o){const s=o.calculateFogTileMatrix(a),l=[r,n,i];return e.transformMat4(l,l,s),T(t,l,o.pitch,o._fov)}(this.fogState,r,n,i,a.toUnwrapped(),this.transform);c=t>.9}}else ft(l,l,t);const u=l[3];return{point:new e.Point((l[0]/u+1)/2*this.transform.width+mt,(-l[1]/u+1)/2*this.transform.height+mt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/u*.5,1.5),signedDistanceFromCamera:u,occluded:o&&l[2]>u||c}}isOffscreen(e,t,r,n){return r<mt||e>=this.screenRightBoundary||n<mt||t>this.screenBottomBoundary}isInsideGrid(e,t,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function yt(t,r,n){const i=r.createTileMatrix(t,t.worldSize,n.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function bt(e,t,r){if(t.projection.name===r.projection.name)return e.projMatrix;const n=r.clone();return n.setProjection(t.projection),yt(n,t.getProjection(),e)}function _t(e,t,r){return t.name===r.projection.name?e.projMatrix:yt(r,t,e)}class vt{constructor(e,t,r,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):n&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class xt{constructor(e,t,r,n,i,a=!1){this.text=new vt(e?e.text:null,t,r,i),this.icon=new vt(e?e.icon:null,t,n,i),this.clipped=a}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wt{constructor(e,t,r,n=!1){this.text=e,this.icon=t,this.skipFade=r,this.clipped=n}}class kt{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class St{constructor(e,t,r,n,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i}}class Tt{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function At(t,r,n,i,a){const{horizontalAlign:o,verticalAlign:s}=e.getAnchorAlignment(t),l=-(o-.5)*r,c=-(s-.5)*n,u=e.evaluateVariableOffset(t,i);return new e.Point(l+u[0]*a,c+u[1]*a)}function Ct(t,r,n,i,a){const o=new e.Point(t,r);return n&&o._rotate(i?a:-a),o}class Et{constructor(e,t,r,n,i){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new gt(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Tt(r),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,r,n,i){const a=n.getBucket(r),o=n.latestFeatureIndex;if(!a||!o||r.id!==a.layerIds[0])return;const s=a.layers[0].layout,l=n.collisionBoxArray,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/e.EXTENT,d=n.tileID.toUnwrapped();this.transform.setProjection(a.projection);const h=(p=n.tileID,f=a.getProjection(),m=this.transform,f.name===this.projection?m.calculateProjMatrix(p.toUnwrapped()):yt(m,f,p));var p,f,m;const g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");r.compileFilter();const b=r.dynamicFilter(),_=r.dynamicFilterNeedsFeature(),v=this.transform.calculatePixelsToTileUnitsMatrix(n),x=tt(h,n.tileID.canonical,g,y,this.transform,a.getProjection(),v);let w=null;if(g){const t=rt(h,n.tileID.canonical,g,y,this.transform,a.getProjection(),v);w=e.multiply([],this.transform.labelPlaneMatrix,t)}let k=null;b&&n.latestFeatureIndex&&(k={unwrappedTileID:d,dynamicFilter:b,dynamicFilterNeedsFeature:_,featureIndex:n.latestFeatureIndex}),this.retainedQueryData[a.bucketInstanceId]=new St(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,n.tileID);const S={bucket:a,layout:s,posMatrix:h,textLabelPlaneMatrix:x,labelToScreenMatrix:w,clippingData:k,scale:c,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i)for(const e of a.sortKeyRanges){const{sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i}=e;t.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i,parameters:S})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:S})}attemptAnchorPlacement(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y){const{textOffset0:b,textOffset1:_,crossTileID:v}=d,x=[b,_],w=At(e,r,n,x,i),k=this.collisionIndex.placeCollisionBox(p,i,t,Ct(w.x,w.y,a,o,this.transform.angle),u,s,l,c.predicate);if(m){const e=p.getSymbolInstanceIconSize(y,this.transform.zoom,d.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(p,e,m,Ct(w.x,w.y,a,o,this.transform.angle),u,s,l,c.predicate).box.length)return}if(k.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[v]&&this.prevPlacement.placements[v]&&this.prevPlacement.placements[v].text&&(t=this.prevPlacement.variableOffsets[v].anchor),this.variableOffsets[v]={textOffset:x,width:r,height:n,anchor:e,textScale:i,prevAnchor:t},this.markUsedJustification(p,e,d,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,d),this.placedOrientations[v]=f),{shift:w,placedGlyphBoxes:k}}}placeLayerBucketPart(t,r,n,i){const{bucket:a,layout:o,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:d,holdingForFade:h,collisionBoxArray:p,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:m,collisionGroup:g}=t.parameters,y=o.get("text-optional"),b=o.get("icon-optional"),_=o.get("text-allow-overlap"),v=o.get("icon-allow-overlap"),x="map"===o.get("text-rotation-alignment"),w="map"===o.get("text-pitch-alignment"),k="none"!==o.get("icon-text-fit"),S="viewport-y"===o.get("symbol-z-order");this.transform.setProjection(a.projection);let T=_&&(v||!a.hasIconData()||b),A=v&&(_||!a.hasTextData()||y);!a.collisionArrays&&p&&a.deserializeCollisionBoxes(p),n&&i&&a.updateCollisionDebugBuffers(this.transform.zoom,p);const C=(t,i,p)=>{const{crossTileID:S,numVerticalGlyphVertices:C}=t;if(u){const n={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[a.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(n,i,this.retainedQueryData[a.bucketInstanceId].tileID.canonical,new e.Point(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[S]=new wt(!1,!1,!1,!0),void r.add(S)}if(r.has(S))return;if(h)return void(this.placements[S]=new wt(!1,!1,!1));let E=!1,I=!1,P=!0,M=!1,D=!1,z=null,L={box:null,offscreen:null,occluded:null},R={box:null,offscreen:null,occluded:null},B=null,O=null,F=null,U=0,N=0,j=0;p.textFeatureIndex?U=p.textFeatureIndex:t.useRuntimeCollisionCircles&&(U=t.featureIndex),p.verticalTextFeatureIndex&&(N=p.verticalTextFeatureIndex);const V=e=>{e.tileID=this.retainedQueryData[a.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},W=p.textBox;if(W){V(W);const r=r=>{let n=e.WritingMode.horizontal;if(a.allowVerticalPlacement&&!r&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[S];e&&(this.placedOrientations[S]=e,n=e,this.markUsedOrientation(a,n,t))}return n},n=(t,r)=>{if(a.allowVerticalPlacement&&C>0&&p.verticalTextBox){for(const n of a.writingModes)if(n===e.WritingMode.vertical?(L=r(),R=L):L=t(),L&&L.box&&L.box.length)break}else L=t()};if(o.get("text-variable-anchor")){let l=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[S]){const e=this.prevPlacement.variableOffsets[S];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor))}const c=(e,r,n)=>{const o=a.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),c=(e.x2-e.x1)*o+2*e.padding,u=(e.y2-e.y1)*o+2*e.padding,h=k&&!v?r:null;h&&V(h);let p={box:[],offscreen:!1,occluded:!1};const y=_?2*l.length:l.length;for(let b=0;b<y;++b){const r=this.attemptAnchorPlacement(l[b%l.length],e,c,u,o,x,w,d,s,g,b>=l.length,t,i,a,n,h,f,m);if(r&&(p=r.placedGlyphBoxes,p&&p.box&&p.box.length)){E=!0,z=r.shift;break}}return p};n((()=>c(W,p.iconBox,e.WritingMode.horizontal)),(()=>{const t=p.verticalTextBox;return t&&V(t),a.allowVerticalPlacement&&!(L&&L.box&&L.box.length)&&C>0&&t?c(t,p.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),L&&(E=L.box,P=L.offscreen,M=L.occluded);const u=r(!(!L||!L.box));if(!E&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[S];e&&(this.variableOffsets[S]=e,this.markUsedJustification(a,e.anchor,t,u))}}else{const o=(r,n)=>{const o=a.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(a,o,r,new e.Point(0,0),_,d,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(a,n,t),this.placedOrientations[S]=n),l};n((()=>o(W,e.WritingMode.horizontal)),(()=>{const t=p.verticalTextBox;return a.allowVerticalPlacement&&C>0&&t?(V(t),o(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),r(!!(L&&L.box&&L.box.length))}}if(B=L,E=B&&B.box&&B.box.length>0,P=B&&B.offscreen,M=B&&B.occluded,t.useRuntimeCollisionCircles){const r=a.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),i=e.evaluateSizeForFeature(a.textSizeData,f,r),u=o.get("text-padding");O=this.collisionIndex.placeCollisionCircles(a,_,r,a.lineVertexArray,a.glyphOffsetArray,i,s,l,c,n,w,g.predicate,t.collisionCircleDiameter*i/e.ONE_EM,u,this.retainedQueryData[a.bucketInstanceId].tileID),E=_||O.circles.length>0&&!O.collisionDetected,P=P&&O.offscreen,M=O.occluded}if(p.iconFeatureIndex&&(j=p.iconFeatureIndex),p.iconBox){const r=r=>{V(r);const n=k&&z?Ct(z.x,z.y,x,w,this.transform.angle):new e.Point(0,0),i=a.getSymbolInstanceIconSize(m,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(a,i,r,n,v,d,s,g.predicate)};R&&R.box&&R.box.length&&p.verticalIconBox?(F=r(p.verticalIconBox),I=F.box.length>0):(F=r(p.iconBox),I=F.box.length>0),P=P&&F.offscreen,D=F.occluded}const q=y||0===t.numHorizontalGlyphVertices&&0===C,G=b||0===t.numIconVertices;if(q||G?G?q||(I=I&&E):E=I&&E:I=E=I&&E,E&&B&&B.box&&this.collisionIndex.insertCollisionBox(B.box,o.get("text-ignore-placement"),a.bucketInstanceId,R&&R.box&&N?N:U,g.ID),I&&F&&this.collisionIndex.insertCollisionBox(F.box,o.get("icon-ignore-placement"),a.bucketInstanceId,j,g.ID),O&&(E&&this.collisionIndex.insertCollisionCircles(O.circles,o.get("text-ignore-placement"),a.bucketInstanceId,U,g.ID),n)){const e=a.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new kt);for(let r=0;r<O.circles.length;r+=4)t.circles.push(O.circles[r+0]),t.circles.push(O.circles[r+1]),t.circles.push(O.circles[r+2]),t.circles.push(O.collisionDetected?1:0)}const $="globe"!==a.projection.name;T=T&&($||!M),A=A&&($||!D),this.placements[S]=new wt(E||T,I||A,P||a.justReloaded),r.add(S)};if(S){const e=a.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const r=e[t];C(a.symbolInstances.get(r),r,a.collisionArrays[r])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)C(a.symbolInstances.get(e),e,a.collisionArrays[e]);if(n&&a.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[a.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}markUsedJustification(t,r,n,i){const{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:c}=n,u=e.getAnchorJustification(r),d=i===e.WritingMode.vertical?l:"left"===u?a:"center"===u?o:"right"===u?s:-1;a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=d>=0&&a!==d?0:c),o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=d>=0&&o!==d?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=d>=0&&s!==d?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=d>=0&&l!==d?0:c)}markUsedOrientation(t,r,n){const i=r===e.WritingMode.horizontal||r===e.WritingMode.horizontalOnly?r:0,a=r===e.WritingMode.vertical?r:0,{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=n,u=t.text.placedSymbolArray;o>=0&&(u.get(o).placedOrientation=i),s>=0&&(u.get(s).placedOrientation=i),l>=0&&(u.get(l).placedOrientation=i),c>=0&&(u.get(c).placedOrientation=a)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const n=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=i[s];t?(this.opacities[s]=new xt(t,n,e.text,e.icon,null,e.clipped),r=r||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new xt(null,n,e.text,e.icon,e.skipFade,e.clipped),r=r||e.text||e.icon)}for(const s in i){const e=i[s];if(!this.opacities[s]){const t=new xt(e,n,!1,!1);t.isHidden()||(this.opacities[s]=t,r=r||e.text.placed||e.icon.placed)}}for(const s in a)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=a[s]);for(const s in o)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=o[s]);r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const r=new Set;for(const n of t){const t=n.getBucket(e);t&&n.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,r,n.collisionBoxArray)}}updateBucketOpacities(t,r,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,a=!!t.layers[0].dynamicFilter(),o=new xt(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),d="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),p=new xt(null,0,s&&(l||!t.hasIconData()||i.get("icon-optional")),l&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(n);const f=(e,t,r)=>{for(let n=0;n<t/4;n++)e.opacityVertexArray.emplaceBack(r)};let m=0;for(let g=0;g<t.symbolInstances.length;g++){const n=t.symbolInstances.get(g),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:s,crossTileID:l,numIconVertices:y}=n,b=r.has(l);let _=this.opacities[l];b?_=o:_||(_=p,this.opacities[l]=_),r.add(l);const v=i>0||s>0,x=y>0,w=this.placedOrientations[l],k=w===e.WritingMode.vertical,S=w===e.WritingMode.horizontal||w===e.WritingMode.horizontalOnly;if(!v&&!x||_.isHidden()||m++,v){const e=Ot(_.text);f(t.text,i,k?Ft:e),f(t.text,s,S?Ft:e);const r=_.text.isHidden(),{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:c,verticalPlacedTextSymbolIndex:u}=n,d=t.text.placedSymbolArray,h=r||k?1:0;a>=0&&(d.get(a).hidden=h),o>=0&&(d.get(o).hidden=h),c>=0&&(d.get(c).hidden=h),u>=0&&(d.get(u).hidden=r||S?1:0);const p=this.variableOffsets[l];p&&this.markUsedJustification(t,p.anchor,n,w);const m=this.placedOrientations[l];m&&(this.markUsedJustification(t,"left",n,m),this.markUsedOrientation(t,m,n))}if(x){const e=Ot(_.icon),{placedIconSymbolIndex:r,verticalPlacedIconSymbolIndex:i}=n,a=t.icon.placedSymbolArray,o=_.icon.isHidden()?1:0;r>=0&&(f(t.icon,y,k?Ft:e),a.get(r).hidden=o),i>=0&&(f(t.icon,n.numVerticalIconVertices,S?Ft:e),a.get(i).hidden=o)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const r=t.collisionArrays[g];if(r){let n=new e.Point(0,0),i=!0;if(r.textBox||r.verticalTextBox){if(c){const e=this.variableOffsets[l];e?(n=At(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&n._rotate(d?this.transform.angle:-this.transform.angle)):i=!1}a&&(i=!_.clipped),r.textBox&&It(t.textCollisionBox.collisionVertexArray,_.text.placed,!i||k,n.x,n.y),r.verticalTextBox&&It(t.textCollisionBox.collisionVertexArray,_.text.placed,!i||S,n.x,n.y)}const o=i&&Boolean(!S&&r.verticalIconBox);r.iconBox&&It(t.iconCollisionBox.collisionVertexArray,_.icon.placed,o,h?n.x:0,h?n.y:0),r.verticalIconBox&&It(t.iconCollisionBox.collisionVertexArray,_.icon.placed,!o,h?n.x:0,h?n.y:0)}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function It(e,t,r,n,i){e.emplaceBack(t?1:0,r?1:0,n||0,i||0),e.emplaceBack(t?1:0,r?1:0,n||0,i||0),e.emplaceBack(t?1:0,r?1:0,n||0,i||0),e.emplaceBack(t?1:0,r?1:0,n||0,i||0)}const Pt=Math.pow(2,25),Mt=Math.pow(2,24),Dt=Math.pow(2,17),zt=Math.pow(2,16),Lt=Math.pow(2,9),Rt=Math.pow(2,8),Bt=Math.pow(2,1);function Ot(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*Pt+t*Mt+r*Dt+t*zt+r*Lt+t*Rt+r*Bt+t}const Ft=0;class Ut{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,t,r,n,i){const a=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(a,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<a.length;){const e=a[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,r,0===e.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Nt{constructor(e,t,r,n,i,a,o,s){this.placement=new Et(e,i,a,o,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(t,r,n){const i=e.exported.now(),a=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=r[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(e)),this._inProgressLayer.continuePlacement(n[e.source],this.placement,this._showCollisionBoxes,e,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const jt=512/e.EXTENT/2;class Vt{constructor(t,r,n){this.tileID=t,this.bucketInstanceId=n,this.index=new e.KDBush(r.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const i=t.canonical.x*e.EXTENT,a=t.canonical.y*e.EXTENT;for(let e=0;e<r.length;e++){const{key:t,crossTileID:n,tileAnchorX:o,tileAnchorY:s}=r.get(e),l=Math.floor((i+o)*jt),c=Math.floor((a+s)*jt);this.index.add(l,c),this.keys.push(t),this.crossTileIDs.push(n)}this.index.finish()}findMatches(t,r,n){const i=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z),a=jt/Math.pow(2,r.canonical.z-this.tileID.canonical.z),o=r.canonical.x*e.EXTENT,s=r.canonical.y*e.EXTENT;for(let e=0;e<t.length;e++){const r=t.get(e);if(r.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:u}=r,d=Math.floor((o+c)*a),h=Math.floor((s+u)*a),p=this.index.range(d-i,h-i,d+i,h+i);for(const e of p){const t=this.crossTileIDs[e];if(this.keys[e]===l&&!n.has(t)){n.add(t),r.crossTileID=t;break}}}}}class Wt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const r in this.indexes){const e=this.indexes[r],n={};for(const r in e){const i=e[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}this.indexes[r]=n}this.lng=e}addBucket(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const n=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const r=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in r){const a=r[i];a.tileID.isChildOf(e)&&a.findMatches(t.symbolInstances,e,n)}else{const a=r[e.scaledTo(Number(i)).key];a&&a.findMatches(t.symbolInstances,e,n)}}for(let i=0;i<t.symbolInstances.length;i++){const e=t.symbolInstances.get(i);e.crossTileID||(e.crossTileID=r.generate(),n.add(e.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Vt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const r of t.crossTileIDs)this.usedCrossTileIDs[e].delete(r)}removeStaleBuckets(e){let t=!1;for(const r in this.indexes){const n=this.indexes[r];for(const i in n)e[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],t=!0)}return t}}class Gt{constructor(){this.layerIndexes={},this.crossTileIDs=new Wt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,r,n){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new qt);let a=!1;const o={};"globe"!==n.name&&i.handleWrapJump(r);for(const s of t){const t=s.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,t,this.crossTileIDs)&&(a=!0),o[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(a=!0),a}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const r in this.layerIndexes)t[r]||delete this.layerIndexes[r]}}const $t=(t,r)=>e.emitValidationErrors(t,r&&r.filter((e=>"source.canvas"!==e.identifier))),Ht=e.pick(Ve,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Zt=e.pick(Ve,["setCenter","setZoom","setBearing","setPitch"]),Xt={version:8,layers:[],sources:{}},Yt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Kt extends e.Evented{constructor(t,r={}){super(),this.map=t,this.dispatcher=new I(Ue(),this),this.imageManager=new v,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,r.localFontFamily?e.LocalGlyphMode.all:r.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,r.localFontFamily||r.localIdeographFontFamily),this.crossTileSymbolIndex=new Gt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const n=this;this._rtlTextPluginCallback=Kt.registerForPluginStateChange((t=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,r)=>{if(e.triggerPluginCompletionEvent(t),r&&r.every((e=>e)))for(const e in n._sourceCaches){const t=n._sourceCaches[e],r=t.getSource().type;"vector"!==r&&"geojson"!==r||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const r in this._layers){const e=this._layers[r];e.source===t.id&&this._validateLayer(e)}}))}loadURL(t,r={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const n="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,r)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):r&&this._load(r,n)}))}loadJSON(t,r={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==r.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Xt,!1)}_updateLayerCount(e,t){const r=t?1:-1;e.is3D()&&(this._num3DLayers+=r),"circle"===e.type&&(this._numCircleLayers+=r),"symbol"===e.type&&(this._numSymbolLayers+=r)}_load(t,r){if(r&&$t(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const n=je(this.stylesheet.layers);this._order=n.map((e=>e.id)),this._layers={},this._serializedLayers={};for(const i of n){const t=e.createStyleLayer(i);t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,r,n){let i,a,o;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(r.transformRequest(r.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,o||(o=e,i=t,u())})),c=e.getImage(r.transformRequest(r.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,o||(o=e,a=t,u())}));function u(){if(o)n(o);else if(i&&a){const t=e.exported.getImageData(a),r={};for(const n in i){const{width:a,height:o,x:s,y:l,sdf:c,pixelRatio:u,stretchX:d,stretchY:h,content:p}=i[n],f=new e.RGBAImage({width:a,height:o});e.RGBAImage.copy(t,f,{x:s,y:l},{x:0,y:0},{width:a,height:o}),r[n]={data:f,pixelRatio:u,sdf:c,stretchX:d,stretchY:h,content:p}}n(null,r)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,r)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(r)for(const e in r)this.imageManager.addImage(e,r[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const r=this.getSource(t.source);if(!r)return;const n=t.sourceLayer;n&&("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${n}" does not exist on source "${r.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const r of e){const e=this._layers[r];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():Yt[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const r=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(e.length||r.length)&&this._updateWorkerLayers(e,r);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const n in this._updatedPaintProps)this._layers[n].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const n={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];n[e]=t.used,t.used=!1}for(const e of this._order){const r=this._layers[e];if(r.recalculate(t,this._availableImages),!r.isHidden(t.zoom)){const e=this._getLayerSourceCache(r);e&&(e.used=!0)}const n=this.map.painter;if(n){const e=r.getProgramIds();if(!e)continue;const i=r.getProgramConfiguration(t.zoom);for(const t of e)n.useProgram(t,i)}}for(const i in n){const t=this._sourceCaches[i];n[i]!==t.used&&t.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:t.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),r&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(r){if(this._checkLoaded(),$t(this,e.validateStyle(r)))return!1;(r=e.clone$1(r)).layers=je(r.layers);const n=function(e,r){if(!e)return[{command:Ve.setStyle,args:[r]}];let n=[];try{if(!t(e.version,r.version))return[{command:Ve.setStyle,args:[r]}];t(e.center,r.center)||n.push({command:Ve.setCenter,args:[r.center]}),t(e.zoom,r.zoom)||n.push({command:Ve.setZoom,args:[r.zoom]}),t(e.bearing,r.bearing)||n.push({command:Ve.setBearing,args:[r.bearing]}),t(e.pitch,r.pitch)||n.push({command:Ve.setPitch,args:[r.pitch]}),t(e.sprite,r.sprite)||n.push({command:Ve.setSprite,args:[r.sprite]}),t(e.glyphs,r.glyphs)||n.push({command:Ve.setGlyphs,args:[r.glyphs]}),t(e.transition,r.transition)||n.push({command:Ve.setTransition,args:[r.transition]}),t(e.light,r.light)||n.push({command:Ve.setLight,args:[r.light]}),t(e.fog,r.fog)||n.push({command:Ve.setFog,args:[r.fog]}),t(e.projection,r.projection)||n.push({command:Ve.setProjection,args:[r.projection]});const i={},a=[];!function(e,r,n,i){let a;for(a in r=r||{},e=e||{})e.hasOwnProperty(a)&&(r.hasOwnProperty(a)||qe(a,n,i));for(a in r){if(!r.hasOwnProperty(a))continue;const o=r[a];e.hasOwnProperty(a)?t(e[a],o)||("geojson"===e[a].type&&"geojson"===o.type&&$e(e,r,a)?n.push({command:Ve.setGeoJSONSourceData,args:[a,o.data]}):Ge(a,r,n,i)):We(a,r,n)}}(e.sources,r.sources,a,i);const o=[];e.layers&&e.layers.forEach((e=>{e.source&&i[e.source]?n.push({command:Ve.removeLayer,args:[e.id]}):o.push(e)}));let s=e.terrain;s&&i[s.source]&&(n.push({command:Ve.setTerrain,args:[void 0]}),s=void 0),n=n.concat(a),t(s,r.terrain)||n.push({command:Ve.setTerrain,args:[r.terrain]}),function(e,r,n){r=r||[];const i=(e=e||[]).map(Ze),a=r.map(Ze),o=e.reduce(Xe,{}),s=r.reduce(Xe,{}),l=i.slice(),c=Object.create(null);let u,d,h,p,f,m,g;for(u=0,d=0;u<i.length;u++)h=i[u],s.hasOwnProperty(h)?d++:(n.push({command:Ve.removeLayer,args:[h]}),l.splice(l.indexOf(h,d),1));for(u=0,d=0;u<a.length;u++)h=a[a.length-1-u],l[l.length-1-u]!==h&&(o.hasOwnProperty(h)?(n.push({command:Ve.removeLayer,args:[h]}),l.splice(l.lastIndexOf(h,l.length-d),1)):d++,m=l[l.length-u],n.push({command:Ve.addLayer,args:[s[h],m]}),l.splice(l.length-u,0,h),c[h]=!0);for(u=0;u<a.length;u++)if(h=a[u],p=o[h],f=s[h],!c[h]&&!t(p,f))if(t(p.source,f.source)&&t(p["source-layer"],f["source-layer"])&&t(p.type,f.type)){for(g in He(p.layout,f.layout,n,h,null,Ve.setLayoutProperty),He(p.paint,f.paint,n,h,null,Ve.setPaintProperty),t(p.filter,f.filter)||n.push({command:Ve.setFilter,args:[h,f.filter]}),t(p.minzoom,f.minzoom)&&t(p.maxzoom,f.maxzoom)||n.push({command:Ve.setLayerZoomRange,args:[h,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?He(p[g],f[g],n,h,g.slice(6),Ve.setPaintProperty):t(p[g],f[g])||n.push({command:Ve.setLayerProperty,args:[h,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?He(p[g],f[g],n,h,g.slice(6),Ve.setPaintProperty):t(p[g],f[g])||n.push({command:Ve.setLayerProperty,args:[h,g,f[g]]}))}else n.push({command:Ve.removeLayer,args:[h]}),m=l[l.lastIndexOf(h)+1],n.push({command:Ve.addLayer,args:[f,m]})}(o,r.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:Ve.setStyle,args:[r]}]}return n}(this.serialize(),r).filter((e=>!(e.command in Zt)));if(0===n.length)return!1;const i=n.filter((e=>!(e.command in Ht)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((e=>e.command)).join(", ")}.`);return n.forEach((e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=r,this._updateMapProjection(),!0}addImage(t,r){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,r),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,r,n={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(e.validateSource,`sources.${t}`,r,null,n))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const i=Pe(t,r,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:i.serialize(),sourceId:t})));const a=r=>{const n=(r?"symbol:":"other:")+t,a=this._sourceCaches[n]=new e.SourceCache(n,i,r);(r?this._symbolSourceCaches:this._otherSourceCaches)[t]=a,a.style=this,a.onAdd(this.map)};a(!1),"vector"!==r.type&&"geojson"!==r.type||a(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const r=this.getSource(t);if(!r)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const n=this._getSourceCaches(t);for(const i of n)delete this._sourceCaches[i.id],delete this._updatedSources[i.id],i.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i.getSource().id})),i.setEventedParent(null),i.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],r.setEventedParent(null),r.onRemove&&r.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const r=this._getSourceCache(t);r&&e.push(r.getSource())}return e}addLayer(t,r,n={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let a;if("custom"===t.type){if($t(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,`layers.${i}`,t,{arrayIndex:-1},n))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}const o=r?this._order.indexOf(r):this._order.length;if(r&&-1===o)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`)));this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=a;const s=this._getLayerSourceCache(a);if(this._removedLayers[i]&&a.source&&s&&"custom"!==a.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",s.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,r){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===r)return;const n=this._order.indexOf(t);this._order.splice(n,1);const i=r?this._order.indexOf(r):this._order.length;r&&-1===i?this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const r=this._layers[t];if(!r)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));r.setEventedParent(null),this._updateLayerCount(r,!1);const n=this._order.indexOf(t);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=r,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],r.onRemove&&r.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,r,n){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===r&&i.maxzoom===n||(null!=r&&(i.minzoom=r),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(r,n,i={}){this._checkLoaded();const a=this.getLayer(r);if(a){if(!t(a.filter,n))return null==n?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(e.validateFilter,`layers.${a.id}.filter`,n,{layerType:a.type},i)||(a.filter=e.clone$1(n),this._updateLayer(a)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const r=this.getLayer(t);return r&&e.clone$1(r.filter)}setLayoutProperty(r,n,i,a={}){this._checkLoaded();const o=this.getLayer(r);o?t(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,a),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,r){const n=this.getLayer(t);if(n)return n.getLayoutProperty(r);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(r,n,i,a={}){this._checkLoaded();const o=this.getLayer(r);o?t(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,a)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){const r=this.getLayer(e);return r&&r.getPaintProperty(t)}setFeatureState(t,r){this._checkLoaded();const n=t.source,i=t.sourceLayer,a=this.getSource(n);if(!a)return void this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const o=a.type;if("geojson"===o&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===o&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(n);for(const e of s)e.setFeatureState(i,t.id,r)}removeFeatureState(t,r){this._checkLoaded();const n=t.source,i=this.getSource(n);if(!i)return void this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const a=i.type,o="vector"===a?t.sourceLayer:void 0;if("vector"===a&&!o)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(r&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(n);for(const e of s)e.removeFeatureState(o,t.id,r)}getFeatureState(t){this._checkLoaded();const r=t.source,n=t.sourceLayer,i=this.getSource(r);if(i){if("vector"!==i.type||n)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(r)[0].getFeatureState(n,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const r=this._sourceCaches[e].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,r={},n=[];for(let a=this._order.length-1;a>=0;a--){const i=this._order[a];if(t(i)){r[i]=a;for(const t of e){const e=t[i];if(e)for(const t of e)n.push(t)}}}n.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let a=this._order.length-1;a>=0;a--){const o=this._order[a];if(t(o))for(let e=n.length-1;e>=0;e--){const t=n[e].feature;if(r[t.layer.id]<a)break;i.push(t),n.pop()}else for(const t of e){const e=t[o];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,r,n){r&&r.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",r.filter,null,r);const i={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of r.layers){const r=this._layers[t];if(!r)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[r.source]=!0}}const a=[];r.availableImages=this._availableImages;const o=r&&r.layers?r.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=M.createFromScreenPoints(t,n);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;r.layers&&!i[t]||a.push(De(this._sourceCaches[e],this._layers,this._serializedLayers,s,r,n,o,!!this.map._showQueryGeometry))}return this.placement&&a.push(function(e,t,r,n,i,a,o){const s={},l=a.queryRenderedSymbols(n),c=[];for(const u of Object.keys(l).map(Number))c.push(o[u]);c.sort(Le);for(const u of c){const r=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in r){const t=s[e]=s[e]||[],n=r[e];n.sort(((e,t)=>{const r=u.featureSortOrder;if(r){const n=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));for(const e of n)t.push(e)}}for(const u in s)s[u].forEach((t=>{const n=t.feature,i=r(e[u]);if(!i)return;const a=i.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=a}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(a)}querySourceFeatures(t,r){r&&r.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",r.filter,null,r);const n=this._getSourceCaches(t);let i=[];for(const e of n)i=i.concat(ze(e,r));return i}addSourceType(e,t,r){return Kt.getSourceType(e)?r(new Error(`A source type called "${e}" already exists.`)):(Kt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))}getLight(){return this.light.getLight()}setLight(e,r={}){this._checkLoaded();const n=this.light.getLight();let i=!1;for(const o in e)if(!t(e[o],n[o])){i=!0;break}if(!i)return;const a=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,r),this.light.updateTransitions(a)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(r,n=1){if(this._checkLoaded(),!r)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let i=r;if(1===n){if("object"==typeof i.source){const t="terrain-dem-src";this.addSource(t,i.source),i=e.clone$1(i),i=e.extend(i,{source:t})}if(this._validate(e.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&n!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,n)}else{const r=this.terrain,n=r.get();for(const t of Object.keys(e.spec.terrain))!i.hasOwnProperty(t)&&e.spec.terrain[t].default&&(i[t]=e.spec.terrain[t].default);for(const e in i)if(!t(i[e],n[e])){r.set(i),this.stylesheet.terrain=i;const e=this._setTransitionParameters({duration:0});r.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new E(e,this.map.transform);this.stylesheet.fog=e;const r=this._setTransitionParameters({duration:0});t.updateTransitions(r)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const r=this.fog,n=r.get();0===Object.keys(e).length&&r.set(e);for(const i in e)if(!t(e[i],n[i])){r.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});r.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const r=this.terrain=new S(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const n=this._setTransitionParameters({duration:0});r.updateTransitions(n)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,r,n,i,a={}){return(!a||!1!==a.validate)&&$t(this,t.call(e.validateStyle,e.extend({key:r,style:this.serialize(),value:n,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const r of t)r.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const r of t)r.resume(),r.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,r,n,i,a=!1){let o=!1,s=!1;const l={};for(const e of this._order){const r=this._layers[e];if("symbol"!==r.type)continue;if(!l[r.source]){const e=this._getLayerSourceCache(r);if(!e)continue;l[r.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(r,l[r.source],t.center.lng,t.projection);o=o||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),a=a||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(a||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Nt(t,this._order,a,r,n,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,r){this.imageManager.getImages(t.icons,r),this._updateTilesForChangedImages();const n=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};n(this._otherSourceCaches[t.source]),n(this._symbolSourceCaches[t.source])}getGlyphs(e,t,r){this.glyphManager.getGlyphs(t.stacks,r)}getResource(t,r,n){return e.makeRequest(r,n)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const r=this._getSourceCaches(t);return 0===r.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):r.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Kt.getSourceType=function(e){return Ie[e]},Kt.setSourceType=function(e,t){Ie[e]=t},Kt.registerForPluginStateChange=e.registerForPluginStateChange;var Jt="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Qt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",er="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",tr="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",rr="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let nr={},ir={};const ar=[];ur(Jt,ar),ur(er,ar),ur(tr,ar),ur(rr,ar),nr=dr("",er),ir=dr(rr,tr);const or=dr("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),sr=Jt,lr="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var cr={background:dr("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:dr("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:dr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:dr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:dr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:dr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:dr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:dr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:dr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:dr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:dr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:dr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:dr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:dr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:dr("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:dr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:dr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:dr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:dr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:dr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:dr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:dr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:dr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:dr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:dr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxGradient:dr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxCapture:dr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:dr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:dr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function ur(e,t){const r=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let n of r)if(n=n.trim(),"#"===n[0]&&n.includes("if")&&!n.includes("endif")){n=n.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const e=n.split(" ");for(const r of e)t.includes(r)||t.push(r)}}function dr(e,t){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},a=[...ar];return ur(e,a),ur(t,a),{fragmentSource:e=e.replace(r,((e,t,r,n,a)=>(i[a]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${a}\nvarying ${r} ${n} ${a};\n#else\nuniform ${r} ${n} u_${a};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${a}\n    ${r} ${n} ${a} = u_${a};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,r,n,a)=>{const o="float"===n?"vec2":"vec4",s=a.match(/color/)?"color":o;return i[a]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${a}\nuniform lowp float u_${a}_t;\nattribute ${r} ${o} a_${a};\nvarying ${r} ${n} ${a};\n#else\nuniform ${r} ${n} u_${a};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${a}\n    ${a} = a_${a};\n#else\n    ${r} ${n} ${a} = u_${a};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${a}\n    ${a} = unpack_mix_${s}(a_${a}, u_${a}_t);\n#else\n    ${r} ${n} ${a} = u_${a};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${a}\nuniform lowp float u_${a}_t;\nattribute ${r} ${o} a_${a};\n#else\nuniform ${r} ${n} u_${a};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${a}\n    ${r} ${n} ${a} = a_${a};\n#else\n    ${r} ${n} ${a} = u_${a};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${a}\n    ${r} ${n} ${a} = unpack_mix_${s}(a_${a}, u_${a}_t);\n#else\n    ${r} ${n} ${a} = u_${a};\n#endif\n`})),staticAttributes:n,usedDefines:a}}class hr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,r,n,i,a,o){this.context=e;let s=this.boundPaintVertexBuffers.length!==n.length;for(let c=0;!s&&c<n.length;c++)this.boundPaintVertexBuffers[c]!==n[c]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==o.length;for(let c=0;!l&&c<o.length;c++)this.boundDynamicVertexBuffers[c]!==o[c]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||s||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==a)this.freshBind(t,r,n,i,a,o);else{e.bindVertexArrayOES.set(this.vao);for(const e of o)e&&e.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(e,t,r,n,i,a){let o;const s=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),o=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=a;else{o=l.currentNumAttributes||0;for(let e=s;e<o;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(const u of r)u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,i);for(const u of a)u&&(u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,i));n&&n.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function pr(t,r){const n=Math.pow(2,r.canonical.z),i=r.canonical.y;return[new e.MercatorCoordinate(0,i/n).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/n).toLngLat().lat]}function fr(t,r,n,i,a,o,s){const l=t.context,c=l.gl,u=n.fbo;if(!u)return;t.prepareDrawTile();const d=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const h=((e,t,r,n)=>{const i=r.paint.get("hillshade-shadow-color"),a=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color");let s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:n||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:pr(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:a,u_accent:o}})(t,n,i,t.terrain?r.projMatrix:null);t.prepareDrawProgram(l,d,r.toUnwrapped());const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=t.getTileBoundsBuffers(n);d.draw(l,c.TRIANGLES,a,o,s,e.CullFaceMode.disabled,h,i.id,p,f,m)}function mr(t,r,n){if(!r.needsDEMTextureUpload)return;const i=t.context,a=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||t.getTileTexture(n.stride);const o=n.getPixels();r.demTexture?r.demTexture.update(o,{premultiply:!1}):r.demTexture=new e.Texture(i,o,a.RGBA,{premultiply:!1}),r.needsDEMTextureUpload=!1}function gr(t,r,n,i,a,o){const s=t.context,l=s.gl;if(!r.dem)return;const c=r.dem;if(s.activeTexture.set(l.TEXTURE1),mr(t,r,c),!r.demTexture)return;r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let d=r.fbo;if(!d){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),d=r.fbo=s.createFramebuffer(u,u,!0),d.colorAttachment.set(t.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:h,tileBoundsIndexBuffer:p,tileBoundsSegments:f}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,a,o,e.CullFaceMode.disabled,((t,r)=>{const n=r.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[n,n],u_zoom:t.overscaledZ,u_unpack:r.unpackVector}})(r.tileID,c),n.id,h,p,f),r.needsHillshadePrepare=!1}const yr=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),br=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),_r=(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(n),u_merc_matrix:r,u_zoom_transition:i,u_merc_center:a,u_image0:0,u_frustum_tl:o,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:d,u_viewport:h,u_grid_matrix:f?Float32Array.from(f):new Float32Array(9),u_skirt_height:p});function vr(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const xr=new class{constructor(){this.operations={}}newMorphing(e,t,r,n,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==r.tileID.key&&(t.queued=r)}else this.operations[e]={startTime:n,phase:0,duration:i,from:t,to:r,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const r=this.operations[t];for(r.phase=(e-r.startTime)/r.duration;r.phase>=1||!this._validOp(r);)if(!this._nextOp(r,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},wr={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function kr(e){return 6*Math.pow(1.5,22-e)}function Sr(e,t){const r=1<<e.z;return!t&&(0===e.x||e.x===r-1)||0===e.y||e.y===r-1}const Tr=e=>({u_matrix:e});function Ar(t,r,n,i,a){if(a>0){const o=e.exported.now(),s=(o-t.timeAdded)/a,l=r?(o-r.timeAdded)/a:-1,c=n.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),d=!r||Math.abs(r.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),h=d&&t.refreshedUponExpiration?1:e.clamp(d?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),r?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}class Cr extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},r=new I(Ue(),null),n=Pe("mock-dem",t,r,e.style);super("mock-dem",n,!1),n.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class Er extends e.SourceCache{constructor(e){const t=Pe("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new I(Ue(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,r,n){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((r,n)=>{if(r[n.key]="",!this._tiles[n.key]){const r=new e.Tile(n,this._source.tileSize*n.overscaleFactor(),t.tileZoom);r.state="loaded",this._tiles[n.key]=r}return r}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const r=Object.values(t);this.renderCachePool.push(...r),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ir extends e.OverscaledTileID{constructor(e,t,r){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=r}}class Pr extends e.Elevation{constructor(t,r){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[n,i,a]=function(t){const r=new e.StructArrayLayout2i4,n=new e.StructArrayLayout3ui6,i=131;r.reserve(17161),n.reserve(33800);const a=e.EXTENT/128,o=e.EXTENT+a/2,s=o+a;for(let c=-a;c<s;c+=a)for(let t=-a;t<s;t+=a){const n=t<0||t>o||c<0||c>o?24575:0,i=e.clamp(Math.round(t),0,e.EXTENT),a=e.clamp(Math.round(c),0,e.EXTENT);r.emplaceBack(i+n,a)}const l=(e,t)=>{const r=t*i+e;n.emplaceBack(r+1,r,r+i),n.emplaceBack(r+i,r+i+1,r+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)})),[r,n,32768]}(),o=t.context;this.gridBuffer=o.createVertexBuffer(n,e.posAttributes.members),this.gridIndexBuffer=o.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,n.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,n.length,a),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Er(r.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const s=o.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=r,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Cr(r.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(t,r,n){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const a=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(r,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,a(),this._initializing=!0),a(),r.updateElevation(!0,n),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(r),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const r=this.proxySourceCache,n=this.painter.transform;this._initializing&&(this._initializing=0===n._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(n.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=r.getIds().map((e=>{const t=r.getTileByID(e).tileID;return t.projMatrix=n.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,r){const n=r.transform.pointCoordinate(r.transform.getCameraPoint()),i=new e.Point(n.x,n.y);t.sort(((t,r)=>{if(r.overscaledZ-t.overscaledZ)return r.overscaledZ-t.overscaledZ;const n=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.Point(r.canonical.x+(1<<r.canonical.z)*r.wrap,r.canonical.y),o=i.mult(1<<t.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(n)-o.distSqr(a)}))}(i,this.painter),this._previousZoom=n.zoom;const a=this.proxyToSource||{};this.proxyToSource={},i.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const o=this._style._sourceCaches;for(const e in o){const r=o[e];if(!r.used)continue;if(r!==this.sourceCache&&this.resetTileLookupCache(r.id),this._setupProxiedCoordsForOrtho(r,t[e],a),r.usedForTerrain)continue;const n=t[e];r.getSource().reparseOverscaled&&this._assignTerrainTiles(n)}this.proxiedCoords[r.id]=i.map((e=>new Ir(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(a),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const r=t.tileID.key;r in s||(this._visibleDemTiles.push(t),s[r]=r)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const r in this.terrainTileForTile){const n=this.terrainTileForTile[r],i=n.dem;!i||n.demTexture&&!n.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),mr(this.painter,n,i))}}_prepareDemTileUniforms(e,t,r,n){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-i.z),o=n||"";return r[`u_dem_tl${o}`]=[i.x*a%1,i.y*a%1],r[`u_dem_scale${o}`]=a,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,r=t.gl;if(!this._emptyDepthBufferTexture){const n=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,n,r.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,r)=>{if(!r.dem)return t;const n=r.dem.tree.minimums[0];return n>0&&e++,t+n}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,r=t.gl;t.activeTexture.set(r.TEXTURE2);const n=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(n,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let a=this._emptyDEMTexture;return a?a.update(i,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,i,r.RGBA,{premultiply:!1}),a}setupElevationDraw(t,r,n){const i=this.painter.context,a=i.gl,o=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;o.u_dem_size=this.sourceCache.getSource().tileSize,o.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(n&&n.morphing&&this._useVertexMorphing){const e=n.morphing.srcDemTile,r=n.morphing.dstDemTile;u=n.morphing.phase,e&&r&&(this._prepareDemTileUniforms(t,e,o,"_prev")&&(c=e),this._prepareDemTileUniforms(t,r,o)&&(l=r))}if(c&&l?(i.activeTexture.set(a.TEXTURE2),l.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),i.activeTexture.set(a.TEXTURE4),c.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),o.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(a.TEXTURE2),(this._prepareDemTileUniforms(t,l,o)?l.demTexture:this.emptyDEMTexture).bind(a.NEAREST,a.CLAMP_TO_EDGE)),i.activeTexture.set(a.TEXTURE3),n&&n.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE),this._depthFBO&&(o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE),o.u_depth_size_inv=[1,1]),n&&n.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=t}if(n&&n.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),r.setTerrainUniformValues(i,o),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,n&&n.useDenormalizedUpVectorScale);r.setGlobeUniformValues(i,e)}}globeUniformValues(t,r,n){const i=t.projection;return{u_tile_tl_up:i.upVector(r,0,0),u_tile_tr_up:i.upVector(r,e.EXTENT,0),u_tile_br_up:i.upVector(r,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(r,0,e.EXTENT),u_tile_up_scale:n?e.globeMetersToEcef(1):i.upVectorScale(r,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const r=this.painter,n=this.painter.context;0!==t.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),r.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,r,n,i,a){if("globe"===t.transform.projection.name)!function(t,r,n,i,a){const o=t.context,s=o.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=t.transform,h=e.globeUseCustomAntiAliasing(t,o,d),p=(e,r)=>{if(c===e)return;const n=[wr[e],"PROJECTION_GLOBE_VIEW"];h&&n.push("CUSTOM_ANTIALIASING"),r&&n.push(wr[u]),l=t.useProgram("globeRaster",null,n),c=e},f=t.colorModeForRenderPass(),m=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);xr.update(a);const g=e.calculateGlobeMercatorMatrix(d),y=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],b=u?[!1,!0]:[!1],_=t.globeSharedBuffers,v=[d.width*e.exported.devicePixelRatio,d.height*e.exported.devicePixelRatio],x=Float32Array.from(d.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(b.forEach((u=>{const d=t.transform,h=kr(d.zoom)*r.exaggeration();c=-1;const b=u?s.LINES:s.TRIANGLES;for(const c of i){const i=n.getTile(c),k=e.StencilMode.disabled,S=r.prevTerrainTileForTile[c.key],T=r.terrainTileForTile[c.key];vr(S,T)&&xr.newMorphing(c.key,S,T,a,250),o.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const A=xr.getMorphValuesForProxy(c.key),C=A?1:0;A&&e.extend$1(w,{morphing:{srcDemTile:A.from,dstDemTile:A.to,phase:e.easeCubicInOut(A.phase)}});const E=e.tileCornersToBounds(c.canonical),I=e.getLatitudinalLod(E.getCenter().lat),P=e.getGridMatrix(c.canonical,E,I,d.worldSize/d._pixelsPerMercatorPixel),M=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),D=_r(d.projMatrix,x,g,M,e.globeToMercatorTransition(d.zoom),y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,v,h,P);if(p(C,u),r.setupElevationDraw(i,l,w),t.prepareDrawProgram(o,l,c.toUnwrapped()),_){const[r,n,i]=u?_.getWirefameBuffers(t.context,I):_.getGridBuffers(I,0!==h);l.draw(o,b,m,k,f,e.CullFaceMode.backCCW,D,"globe_raster",r,n,i)}}})),_){const a=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];h&&a.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,a);for(const c of i){const{x:i,y:a,z:u}=c.canonical,h=0===a,p=a===(1<<u)-1,[g,b,x,k]=_.getPoleBuffers(u);if(k&&(h||p)){const a=n.getTile(c);o.activeTexture.set(s.TEXTURE0),a.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let _=e.globePoleMatrixForTile(u,i,d);const S=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),T=(t,r)=>t.draw(o,s.TRIANGLES,m,e.StencilMode.disabled,f,e.CullFaceMode.disabled,_r(d.projMatrix,_,_,S,0,y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,v,0),"globe_pole_raster",r,x,k);r.setupElevationDraw(a,l,w),t.prepareDrawProgram(o,l,c.toUnwrapped()),h&&T(l,g),p&&(_=e.scale(e.create(),_,[1,-1,1]),T(l,b))}}}}(t,r,n,i,a);else{const o=t.context,s=o.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=(e,r)=>{if(c===e)return;const n=[wr[e]];r&&n.push(wr[u]),l=t.useProgram("terrainRaster",null,n),c=e},h=t.colorModeForRenderPass(),p=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);xr.update(a);const f=t.transform,m=kr(f.zoom)*r.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,b]=u?r.getWirefameBuffer():[r.gridIndexBuffer,r.gridSegments];for(const c of i){const i=n.getTile(c),_=e.StencilMode.disabled,v=r.prevTerrainTileForTile[c.key],x=r.terrainTileForTile[c.key];vr(v,x)&&xr.newMorphing(c.key,v,x,a,250),o.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const w=xr.getMorphValuesForProxy(c.key),k=w?1:0;let S;w&&(S={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:e.easeCubicInOut(w.phase)}});const T=br(c.projMatrix,Sr(c.canonical,f.renderWorldCopies)?m/10:m);d(k,u),r.setupElevationDraw(i,l,S),t.prepareDrawProgram(o,l,c.toUnwrapped()),l.draw(o,g,p,_,h,e.CullFaceMode.backCCW,T,"terrain_raster",r.gridBuffer,y,b)}}))}}(r,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,r.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const r=this.painter,n=this.painter.context,i=this.proxySourceCache,a=this.proxiedCoords[i.id],o=this._drapedRenderBatches.shift(),s=[],l=r.style.order;let c=0;for(const u of a){const a=i.getTileByID(u.proxyTileKey),d=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][t]:void 0,h=void 0!==d?i.renderCache[d]:this.pool[c++],p=void 0!==d;if(a.texture=h.tex,p&&!h.dirty){s.push(a.tileID);continue}let f;n.bindFramebuffer.set(h.fb.framebuffer),this.renderedToTile=!1,h.dirty&&(n.clear({color:e.Color.transparent,stencil:0}),h.dirty=!1);for(let e=o.start;e<=o.end;++e){const t=r.style._layers[l[e]];if(t.isHidden(r.transform.zoom))continue;const i=r.style._getLayerSourceCache(t),a=i?this.proxyToSource[u.key][i.id]:[u];if(!a)continue;const o=a;n.viewport.set([0,0,h.fb.width,h.fb.height]),f!==(i?i.id:null)&&(this._setupStencil(h,a,t,i),f=i?i.id:null),r.renderLayer(r,i,t,o)}this.renderedToTile?(h.dirty=!0,s.push(a.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),o.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let r,n=0,i=0,a=!1;for(let o=0;o<t;++o){const t=e._layers[e.order[o]];this._style.isLayerDraped(t)?(a&&++n,++i):a||(a=!0,r=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-n/i),firstUndrapedLayer:r}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,r){if(!this._visibleDemTiles)return null;const n=this._visibleDemTiles.filter((e=>e.dem)).map((n=>{const i=n.tileID,a=1<<i.overscaledZ,{x:o,y:s}=i.canonical,l=o/a,c=(o+1)/a,u=s/a,d=(s+1)/a;return{minx:l,miny:u,maxx:c,maxy:d,t:n.dem.tree.raycastRoot(l,u,c,d,e,t,r),tile:n}}));n.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of n){if(null==i.t)return null;const n=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,r);if(null!=n)return n}return null}_createFBO(){const t=this.painter.context,r=t.gl,n=this.drapeBufferSize;t.activeTexture.set(r.TEXTURE0);const i=new e.Texture(t,{width:n[0],height:n[1],data:null},r.RGBA);i.bind(r.LINEAR,r.CLAMP_TO_EDGE);const a=t.createFramebuffer(n[0],n[1],!1);return a.colorAttachment.set(i.texture),a.depthAttachment=new we(t,a.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,n[0],n[1]),this._stencilRef=0,a.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):a.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&r.texParameterf(r.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],r=t.isHidden(this.painter.transform.zoom);return"custom"===t.type?!r&&t.shouldRedrape():!r&&t.hasTransition()}))}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Te){t=!0;break}if(!t)return;const r={};for(let n=0;n<this._style.order.length;++n){const t=this._style._layers[this._style.order[n]],i=this._style._getLayerSourceCache(t);if(i&&!r[i.id]&&!t.isHidden(this.painter.transform.zoom)&&"line"===t.type&&t.widthExpression()instanceof e.ZoomDependentExpression){r[i.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t)this._clearRenderCacheForTile(i.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const r in this._style._sourceCaches)if(this._style._sourceCaches[r]._source instanceof Ae){e=!0;break}if(!e)return;const t={};for(let r=0;r<this._style.order.length;++r){const e=this._style._layers[this._style.order[r]],n=this._style._getLayerSourceCache(e);if(!n||t[n.id])continue;if(e.isHidden(this.painter.transform.zoom)||"raster"!==e.type)continue;const i=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][n.id];if(e)for(const t of e){const e=Ar(n.getTile(t),n.findLoadedParent(t,0),n,this.painter.transform,i);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(n.id,t)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const r=[];let n,i=0,a=this._style._layers[e[i]];for(;!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++i<t;)a=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===n&&(n=i):void 0!==n&&(r.push({start:n,end:i-1}),n=void 0))}void 0!==n&&r.push({start:n,end:i-1}),this._drapedRenderBatches=r}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let r=0;r<e.length;++r){const n=Object.values(e[r]);t.renderCachePool.push(...n)}}return}this._clearRasterLayersFromRenderCache();const r=this.proxyCoords,n=this._tilesDirty;for(let a=r.length-1;a>=0;a--){const i=r[a];if(t.getTileByID(i.key),void 0!==t.proxyCachedFBO[i.key]){const r=e[i.key],a=this.proxyToSource[i.key];let o=0;for(const e in a){const t=a[e],i=r[e];if(!i||i.length!==t.length||t.some(((t,r)=>t!==i[r]||n[e]&&n[e].hasOwnProperty(t.key)))){o=-1;break}++o}for(const e in t.proxyCachedFBO[i.key])t.renderCache[t.proxyCachedFBO[i.key][e]].dirty=o<0||o!==Object.values(r).length}}const i=[...this._drapedRenderBatches];i.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const a of i)for(const e of r){if(t.proxyCachedFBO[e.key])continue;let r=t.renderCachePool.pop();void 0===r&&t.renderCache.length<50&&(r=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==r&&(t.proxyCachedFBO[e.key]={},t.proxyCachedFBO[e.key][a.start]=r,t.renderCache[r].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,r,n){if(!n||!this._sourceTilesOverlap[n.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,a=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let o;if(r.isTileClipped())o=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,r.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,r){const n=this.painter,i=this.painter.context,a=i.gl;n._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const o=n.useProgram("clippingMask");for(const s of t){const t=n._tileClippingMaskIDs[s.key]=--r;o.draw(i,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},t,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Tr(s.projMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}pointCoordinate(t){const r=this.painter.transform;if(t.x<0||t.x>r.width||t.y<0||t.y>r.height)return null;const n=[t.x,t.y,1,1];e.transformMat4$1(n,n,r.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),n[0]/=r.worldSize,n[1]/=r.worldSize;const i=r._camera.position,a=e.mercatorZfromAltitude(1,r.center.lat),o=[i[0],i[1],i[2]/a,0],s=e.subtract([],n.slice(0,3),o);e.normalize(s,s);const l=this.raycast(o,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(o,o,s,l),o[3]=o[2],o[2]*=a,o):null}drawDepth(){const t=this.painter,r=t.context,n=this.proxySourceCache,i=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===a||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=r.gl,n=r.createFramebuffer(i,a,!0);r.activeTexture.set(t.TEXTURE0);const o=new e.Texture(r,{width:i,height:a,data:null},t.RGBA);o.bind(t.NEAREST,t.CLAMP_TO_EDGE),n.colorAttachment.set(o.texture);const s=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,i,a);n.depthAttachment.set(s),this._depthFBO=n,this._depthTexture=o}r.bindFramebuffer.set(this._depthFBO.framebuffer),r.viewport.set([0,0,i,a]),function(t,r,n,i){if("globe"===t.transform.projection.name)return;const a=t.context,o=a.gl;a.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(o.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const c of i){const t=n.getTile(c),i=br(c.projMatrix,0);r.setupElevationDraw(t,s),s.draw(a,o.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,i,"terrain_depth",r.gridBuffer,r.gridIndexBuffer,r.gridNoSkirtSegments)}}(t,this,n,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,r){if(e.getSource()instanceof Ee)return this._setupProxiedCoordsForImageSource(e,t,r);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const n=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let o=0;o<i.length;o++){const t=i[o],a=this._findTileCoveringTileID(t,e);if(a){const i=this._createProxiedId(t,a,r[t.key]&&r[t.key][e.id]);n.push(i),this.proxyToSource[t.key][e.id]=[i]}}let a=!1;for(let o=0;o<t.length;o++){const i=e.getTile(t[o]);if(!i||!i.hasData())continue;const s=this._findTileCoveringTileID(i.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==i.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],o=this._createProxiedId(s.tileID,i,r[s.tileID.key]&&r[s.tileID.key][e.id]);t?t.splice(t.length-1,0,o):this.proxyToSource[s.tileID.key][e.id]=[o],n.push(o),a=!0}}this._sourceTilesOverlap[e.id]=a}_setupProxiedCoordsForImageSource(t,r,n){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],a=this.proxyCoords,o=t.getSource(),s=new e.Point(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,r)=>{const n=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),o=r.wrap+r.canonical.x/(1<<r.canonical.z),s=r.canonical.y/(1<<r.canonical.z);return n+a<o+l.min.x||n>o+l.max.x||i+a<s+l.min.y||i>s+l.max.y};for(let e=0;e<a.length;e++){const o=a[e];for(let e=0;e<r.length;e++){const a=t.getTile(r[e]);if(!a||!a.hasData())continue;if(c(o,a.tileID))continue;const s=this._createProxiedId(o,a,n[o.key]&&n[o.key][t.id]),l=this.proxyToSource[o.key][t.id];l?l.push(s):this.proxyToSource[o.key][t.id]=[s],i.push(s)}}}_createProxiedId(t,r,n){let i=this.orthoMatrix;if(n){const e=n.find((e=>e.key===r.tileID.key));if(e)return e}if(r.tileID.key!==t.key){const n=t.canonical.z-r.tileID.canonical.z;let a,o,s;i=e.create();const l=r.tileID.wrap-t.wrap<<t.overscaledZ;n>0?(a=e.EXTENT>>n,o=a*((r.tileID.canonical.x<<n)-t.canonical.x+l),s=a*((r.tileID.canonical.y<<n)-t.canonical.y)):(a=e.EXTENT<<-n,o=e.EXTENT*(r.tileID.canonical.x-(t.canonical.x+l<<-n)),s=e.EXTENT*(r.tileID.canonical.y-(t.canonical.y<<-n))),e.ortho(i,0,a,0,a,0,1),e.translate(i,i,[o,s,0])}return new Ir(r.tileID,t.key,i)}_findTileCoveringTileID(t,r){let n=r.getTile(t);if(n&&n.hasData())return n;const i=this._findCoveringTileCache[r.id],a=i[t.key];if(n=a?r.getTileByID(a):null,n&&n.hasData()||null===a)return n;let o=n?n.tileID:t,s=o.overscaledZ;const l=r.getSource().minzoom,c=[];if(!a){const i=r.getSource().maxzoom;if(t.canonical.z>=i){const n=t.canonical.z-i;r.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,r.transform.tileZoom),o=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>n,t.canonical.y>>n)):0!==n&&(s=i,o=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>n,t.canonical.y>>n))}o.key!==t.key&&(c.push(o.key),n=r.getTile(o))}const u=e=>{c.forEach((t=>{i[t]=e})),c.length=0};for(s-=1;s>=l&&(!n||!n.hasData());s--){n&&u(n.tileID.key);const e=o.calculateScaledKey(s);if(n=r.getTileByID(e),n&&n.hasData())break;const t=i[e];if(null===t)break;void 0===t?c.push(e):n=r.getTileByID(t)}return u(n?n.tileID.key:null),n&&n.hasData()?n:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let r=this._tilesDirty[e];r||(r=this._tilesDirty[e]={}),r[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let r=0;const n=new e.StructArrayLayout2ui4,i=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)r=e*i+t,n.emplaceBack(r,r+1),n.emplaceBack(r,r+i),n.emplaceBack(r+1,r+i),128===e&&n.emplaceBack(r+i,r+i+1);n.emplaceBack(r+1,r+1+i)}return n}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Mr{static cacheKey(e,t,r,n){let i=`${t}${n?n.cacheKey:""}`;for(const a of r)e.usedDefines.includes(a)&&(i+=`/${a}`);return i}constructor(t,r,n,i,a,o){const s=t.gl;this.program=s.createProgram();const l=function(e){const t=[];for(let r=0;r<e.length;r++){if(null===e[r])continue;const n=e[r].split(" ");t.push(n.pop())}return t}(n.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c);let d=i?i.defines():[];d=d.concat(o.map((e=>`#define ${e}`)));const h=t.isWebGL2?"#version 300 es\n":"",p=h+d.concat(t.extStandardDerivatives&&0===h.length?"#extension GL_OES_standard_derivatives : enable\n".concat(lr):lr,lr,sr,or.fragmentSource,ir.fragmentSource,n.fragmentSource).join("\n"),f=h+d.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",sr,or.vertexSource,ir.vertexSource,nr.vertexSource,n.vertexSource).join("\n"),m=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(m,p),s.compileShader(m),s.attachShader(this.program,m);const g=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(g,f),s.compileShader(g),s.attachShader(this.program,g),this.attributes={},this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(g),s.deleteShader(m),this.fixedUniforms=a(t),this.binderUniforms=i?i.getUniforms(t):[],o.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),o.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),o.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const r=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e]&&r[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const r=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e]&&r[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const r=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e].set(this.program,e,t[e])}}draw(e,t,r,n,i,a,o,s,l,c,u,d,h,p,f){const m=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(n),e.setColorMode(i),e.setCullFace(a);for(const y of Object.keys(this.fixedUniforms))this.fixedUniforms[y].set(this.program,y,o[y]);p&&p.setUniforms(this.program,e,this.binderUniforms,d,{zoom:h});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[t];for(const y of u.get()){const r=y.vaos||(y.vaos={});(r[s]||(r[s]=new hr)).bind(e,this,l,p?p.getPaintVertexBuffers():[],c,y.vertexOffset,f||[]),m.drawElements(t,y.primitiveLength*g,m.UNSIGNED_SHORT,y.primitiveOffset*g*2)}}}function Dr(e,t){const r=Math.pow(2,t.tileID.overscaledZ),n=t.tileSize*Math.pow(2,e.transform.tileZoom)/r,i=n*(t.tileID.canonical.x+t.tileID.wrap*r),a=n*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/P(t,1,e.transform.tileZoom),u_pixel_coord_upper:[i>>16,a>>16],u_pixel_coord_lower:[65535&i,65535&a]}}const zr=e.create(),Lr=(t,r,n,i,a,o,s,l,c,u,d)=>{const h=r.style.light,p=h.properties.get("position"),f=[p.x,p.y,p.z],m=e.create$1();"viewport"===h.properties.get("anchor")&&(e.fromRotation(m,-r.transform.angle),e.transformMat3(f,f,m));const g=h.properties.get("color"),y=r.transform,b={u_matrix:t,u_lightpos:f,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+n,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:zr,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:a,u_edge_radius:o};return"globe"===y.projection.name&&(b.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],b.u_zoom_transition=c,b.u_inv_rot_matrix=d,b.u_merc_center=u,b.u_up_dir=y.projection.upVector(new e.CanonicalTileID(0,0,0),u[0]*e.EXTENT,u[1]*e.EXTENT),b.u_height_lift=l),b},Rr=(t,r,n,i,a,o,s,l,c,u,d,h)=>{const p=Lr(t,r,n,i,a,o,s,c,u,d,h),f={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return e.extend(p,Dr(r,l),f)},Br=e=>({u_matrix:e}),Or=(t,r,n)=>e.extend(Br(t),Dr(r,n)),Fr=(e,t)=>({u_matrix:e,u_world:t}),Ur=(t,r,n,i)=>e.extend(Or(t,r,n),{u_world:i}),Nr=e.create(),jr=(t,r,n,i,a,o)=>{const s=t.transform,l="globe"===s.projection.name;let c;if("map"===o.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(s.zoom,r.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t])}else c=s.calculatePixelsToTileUnitsMatrix(n);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(r.projMatrix,n,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Nr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=i,u.u_merc_center=a,u.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(s.zoom);const t=a[0]*e.EXTENT,n=a[1]*e.EXTENT;u.u_up_dir=s.projection.upVector(new e.CanonicalTileID(0,0,0),t,n)}return u},Vr=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Wr=(t,r,n,i)=>{const a=e.EXTENT/n.tileSize;return{u_matrix:t,u_camera_to_center_distance:r.getCameraToCenterDistance(i),u_extrude_scale:[r.pixelsToGLUnits[0]/a,r.pixelsToGLUnits[1]/a]}},qr=(e,t,r=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:r}),Gr=e.create(),$r=(t,r,n,i,a,o,s)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,r.canonical)*l._pixelsPerMercatorPixel:P(n,1,o),d={u_matrix:r.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Gr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){d.u_inv_rot_matrix=i,d.u_merc_center=a,d.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],d.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=a[0]*e.EXTENT,n=a[1]*e.EXTENT;d.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,n)}return d},Hr=(e,t,r,n,i,a,o)=>{const s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:Yr(e,t,r,n),u_pixels_to_tile_units:l,u_device_pixel_ratio:a,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:Kr(r)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Xr(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:o}},Zr=(e,t,r,n,i)=>{const a=e.transform;return{u_matrix:Yr(e,t,r,n),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:a.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:Xr(t,a),u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Xr(e,t){return 1/P(e,1,t.tileZoom)}function Yr(e,t,r,n){return e.translatePosMatrix(n||t.tileID.projMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}function Kr(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const Jr=(e,t,r,n,i,a)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Qr(i.paint.get("raster-hue-rotate")),u_perspective_transform:a};var o,s};function Qr(e){e*=Math.PI/180;const t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const en=e.create(),tn=(t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g)=>{const y=a.transform,b={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+n,u_aspect_ratio:y.width/y.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:en,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:en,u_up_vector:[0,-1,0]};return"globe"===g.name&&(b.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],b.u_zoom_transition=h,b.u_inv_rot_matrix=f,b.u_merc_center=p,b.u_camera_forward=y._camera.forward(),b.u_ecef_origin=e.globeECEFOrigin(y.globeMatrix,d.toUnwrapped()),b.u_tile_matrix=Float32Array.from(y.globeMatrix),b.u_up_vector=m),b},rn=(t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g,y)=>e.extend(tn(t,r,n,i,a,o,s,l,c,u,h,p,f,m,g,y),{u_gamma_scale:i?a.transform.cameraToCenterDistance*Math.cos(a.terrain?0:a.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+d}),nn=(t,r,n,i,a,o,s,l,c,u,d,h,p,f,m,g)=>e.extend(rn(t,r,n,i,a,o,s,l,!0,c,!0,d,h,p,f,m,g),{u_texsize_icon:u,u_texture_icon:1}),an=(e,t,r)=>({u_matrix:e,u_opacity:t,u_color:r}),on=(t,r,n,i,a)=>e.extend(function(e,t,r){const n=t.imageManager.getPattern(e.toString()),{width:i,height:a}=t.imageManager.getPixelSize(),o=Math.pow(2,r.tileID.overscaledZ),s=r.tileSize*Math.pow(2,t.transform.tileZoom)/o,l=s*(r.tileID.canonical.x+r.tileID.wrap*o),c=s*r.tileID.canonical.y;return{u_image:0,u_pattern_tl:n.tl,u_pattern_br:n.br,u_texsize:[i,a],u_pattern_size:n.displaySize,u_tile_units_to_pixels:1/P(r,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(i,n,a),{u_matrix:t,u_opacity:r}),sn={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:yr,terrainDepth:yr,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let ln;function cn(t,r,n,i,a,o,s){const l=t.context,c=l.gl,u=t.transform,d=t.useProgram("collisionBox"),h=[];let p=0,f=0;for(let x=0;x<i.length;x++){const m=i[x],g=r.getTile(m),y=g.getBucket(n);if(!y)continue;const b=bt(m,y,u);let _=b;0===a[0]&&0===a[1]||(_=t.translatePosMatrix(b,g,a,o));const v=s?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){const t=e.create(),r=_;e.mul(t,y.placementInvProjMatrix,u.glCoordMatrix),e.mul(t,t,y.placementViewportMatrix),h.push({circleArray:w,circleOffset:f,transform:r,invTransform:t,projection:y.getProjection()}),p+=w.length/4,f=p}v&&(t.terrain&&t.terrain.setupElevationDraw(g,d),d.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Wr(_,u,g,y.getProjection()),n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,u.zoom,null,[v.collisionVertexBuffer,v.collisionVertexBufferExt]))}if(!s||!h.length)return;const m=t.useProgram("collisionCircle"),g=new e.StructArrayLayout2f1f2i16;g.resize(4*p),g._trim();let y=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const r=4*t,n=e.circleArray[r+0],i=e.circleArray[r+1],a=e.circleArray[r+2],o=e.circleArray[r+3];g.emplace(y++,n,i,a,o,0),g.emplace(y++,n,i,a,o,1),g.emplace(y++,n,i,a,o,2),g.emplace(y++,n,i,a,o,3)}(!ln||ln.length<2*p)&&(ln=function(t){const r=2*t,n=new e.StructArrayLayout3ui6;n.resize(r),n._trim();for(let e=0;e<r;e++){const t=6*e;n.uint16[t+0]=4*e+0,n.uint16[t+1]=4*e+1,n.uint16[t+2]=4*e+2,n.uint16[t+3]=4*e+2,n.uint16[t+4]=4*e+3,n.uint16[t+5]=4*e+0}return n}(p));const b=l.createIndexBuffer(ln,!0),_=l.createVertexBuffer(g,e.collisionCircleLayout.members,!0);for(const x of h){const r={u_matrix:x.transform,u_inv_matrix:x.invTransform,u_camera_to_center_distance:(v=u).getCameraToCenterDistance(x.projection),u_viewport_size:[v.width,v.height]};m.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,r,n.id,_,b,e.SegmentVector.simpleSegment(0,2*x.circleOffset,x.circleArray.length,x.circleArray.length/2),null,u.zoom)}var v;_.destroy(),b.destroy()}const un=e.create();function dn({width:t,height:r,anchor:n,textOffset:i,textScale:a},o){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(n),c=-(s-.5)*t,u=-(l-.5)*r,d=e.evaluateVariableOffset(n,i);return new e.Point((c/a+d[0])*o,(u/a+d[1])*o)}function hn(t,r,n,i,a,o,s,l,c,u,d){const h=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,m={},g=t.getProjection(),y=_t(l,g,o),b=o.elevation,_=g.upVectorScale(l.canonical,o.center.lat,o.worldSize).metersToTile;p.clear();for(let v=0;v<h.length;v++){const f=h.get(v),{tileAnchorX:x,tileAnchorY:w,numGlyphs:k}=f,S=f.hidden||!f.crossTileID||t.allowVerticalPlacement&&!f.placedOrientation?null:i[f.crossTileID];if(S){let i=0,h=0,v=0;if(b){const e=b?b.getAtTileOffset(l,x,w):0,[t,r,n]=g.upVector(l.canonical,x,w);i=e*t*_,h=e*r*_,v=e*n*_}let[T,A,C,E]=nt(f.projectedAnchorX+i,f.projectedAnchorY+h,f.projectedAnchorZ+v,n?y:s);const I=it(o.getCameraToCenterDistance(g),E);let P=a.evaluateSizeForFeature(t.textSizeData,u,f)*I/e.ONE_EM;n&&(P*=t.tilePixelRatio/c);const M=dn(S,P);n?(({x:T,y:A,z:C}=g.projectTilePoint(x+M.x,w+M.y,l.canonical)),[T,A,C]=nt(T+i,A+h,C+v,s)):(r&&M._rotate(-o.angle),T+=M.x,A+=M.y,C=0);const D=t.allowVerticalPlacement&&f.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<k;t++)e.addDynamicAttributes(p,T,A,C,D);d&&f.associatedIconIndex>=0&&(m[f.associatedIconIndex]={x:T,y:A,z:C,angle:D})}else pt(k,p)}if(d){f.clear();const r=t.icon.placedSymbolArray;for(let t=0;t<r.length;t++){const n=r.get(t),{numGlyphs:i}=n,a=m[t];if(n.hidden||!a)pt(i,f);else{const{x:t,y:r,z:n,angle:o}=a;for(let a=0;a<i;a++)e.addDynamicAttributes(f,t,r,n,o)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function pn(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function fn(t,r,n,i,a,o,s,l,c,u,d,h){const p=t.context,f=p.gl,m=t.transform,g="map"===l,y="map"===c,b=g&&"point"!==n.layout.get("symbol-placement"),_=g&&!y&&!b,v=void 0!==n.layout.get("symbol-sort-key").constantOr(1);let x=!1;const w=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),k=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],S=n.layout.get("text-variable-anchor"),T="globe"===m.projection.name,A=[],C=[0,-1,0];let E=C;!T&&!m.mercatorFromTransition||g||(E=function(t){const r=t._camera.getWorldToCamera(t.worldSize,1),n=e.multiply([],r,t.globeMatrix);e.invert(n,n);const i=[0,0,0],a=[0,1,0,0];return e.transformMat4$1(a,a,n),i[0]=a[0],i[1]=a[1],i[2]=a[2],e.normalize(i,i),i}(m));for(const I of i){const i=r.getTile(I),l=i.getBucket(n);if(!l)continue;if("mercator"===l.projection.name&&T)continue;const c=a?l.text:l.icon;if(!c||l.fullyClipped||!c.segments.get().length)continue;const d=c.programConfigurations.get(n.id),h=a||l.sdfIcons,p=a?l.textSizeData:l.iconSizeData,w=y||0!==m.pitch,P=e.evaluateSizeForZoom(p,m.zoom);let M,D,z,L,R=[0,0],B=null;if(a)D=i.glyphAtlasTexture,z=f.LINEAR,M=i.glyphAtlasTexture.size,l.iconsInText&&(R=i.imageAtlasTexture.size,B=i.imageAtlasTexture,L=w||t.options.rotating||t.options.zooming||"composite"===p.kind||"camera"===p.kind?f.LINEAR:f.NEAREST);else{const e=1!==n.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;D=i.imageAtlasTexture,z=h||t.options.rotating||t.options.zooming||e||w?f.LINEAR:f.NEAREST,M=i.imageAtlasTexture.size}const O="globe"===l.projection.name,F=O?E:C,U=O?e.globeToMercatorTransition(m.zoom):0,N=_t(I,l.getProjection(),m),j=m.calculatePixelsToTileUnitsMatrix(i),V=et(N,i.tileID.canonical,y,g,m,l.getProjection(),j),W=t.terrain&&y&&b?e.invert(e.create(),V):un,q=rt(N,i.tileID.canonical,y,g,m,l.getProjection(),j),G=S&&l.hasTextData(),$="none"!==n.layout.get("icon-text-fit")&&G&&l.hasIconData();if(b){const e=m.elevation,r=e?e.getAtTileOffsetFunc(I,m.center.lat,m.worldSize,l.getProjection()):null,n=tt(N,i.tileID.canonical,y,g,m,l.getProjection(),j);ot(l,N,t,a,n,q,y,u,r,I)}const H=b||a&&S||$,Z=t.translatePosMatrix(N,i,o,s),X=H?un:V,Y=t.translatePosMatrix(q,i,o,s,!0),K=l.getProjection().createInversionMatrix(m,I.canonical),J=[];t.terrainRenderModeElevated()&&y&&J.push("PITCH_WITH_MAP_TERRAIN"),O&&J.push("PROJECTION_GLOBE_VIEW"),H&&J.push("PROJECTED_POS_ON_VIEWPORT");const Q=h&&0!==n.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=h?l.iconsInText?nn(p.kind,P,_,y,t,Z,X,Y,M,R,I,U,k,K,F,l.getProjection()):rn(p.kind,P,_,y,t,Z,X,Y,a,M,!0,I,U,k,K,F,l.getProjection()):tn(p.kind,P,_,y,t,Z,X,Y,a,M,I,U,k,K,F,l.getProjection());const te={program:t.useProgram(pn(h,a,l),d,J),buffers:c,uniformValues:ee,atlasTexture:D,atlasTextureIcon:B,atlasInterpolation:z,atlasInterpolationIcon:L,isSDF:h,hasHalo:Q,tile:i,labelPlaneMatrixInv:W};if(v&&l.canOverlap){x=!0;const t=c.segments.get();for(const r of t)A.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:te})}else A.push({segments:c.segments,sortKey:0,state:te})}x&&A.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of A){const r=e.state;if(t.terrain&&t.terrain.setupElevationDraw(r.tile,r.program,{useDepthForOcclusion:!T,labelPlaneMatrixInv:r.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),r.atlasTexture.bind(r.atlasInterpolation,f.CLAMP_TO_EDGE),r.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),r.isSDF){const i=r.uniformValues;r.hasHalo&&(i.u_is_halo=1,mn(r.buffers,e.segments,n,t,r.program,w,d,h,i)),i.u_is_halo=0}mn(r.buffers,e.segments,n,t,r.program,w,d,h,r.uniformValues)}}function mn(t,r,n,i,a,o,s,l,c){const u=i.context,d=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];a.draw(u,u.gl.TRIANGLES,o,s,l,e.CullFaceMode.disabled,c,n.id,t.layoutVertexBuffer,t.indexBuffer,r,n.paint,i.transform.zoom,t.programConfigurations.get(n.id),d)}function gn(t,r,n,i,a,o,s){const l=t.context.gl,c=n.paint.get("fill-pattern"),u=c&&c.constantOr(1);let d,h,p,f,m;s?(h=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(h=u?"fillPattern":"fill",d=l.TRIANGLES);for(const g of i){const i=r.getTile(g);if(u&&!i.patternsLoaded())continue;const y=i.getBucket(n);if(!y)continue;t.prepareDrawTile();const b=y.programConfigurations.get(n.id),_=t.useProgram(h,b);u&&(t.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),b.updatePaintBuffers());const v=c.constantOr(null);if(v&&i.imageAtlas){const e=i.imageAtlas.patternPositions[v.toString()];e&&b.setConstantPatternPositions(e)}const x=t.translatePosMatrix(g.projMatrix,i,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){f=y.indexBuffer2,m=y.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];p="fillOutlinePattern"===h&&u?Ur(x,t,i,e):Fr(x,e)}else f=y.indexBuffer,m=y.segments,p=u?Or(x,t,i):Br(x);t.prepareDrawProgram(t.context,_,g.toUnwrapped()),_.draw(t.context,d,a,t.stencilModeForClipping(g),o,e.CullFaceMode.disabled,p,n.id,y.layoutVertexBuffer,f,m,n.paint,t.transform.zoom,b)}}function yn(t,r,n,i,a,o,s){const l=t.context,c=l.gl,u=t.transform,d=n.paint.get("fill-extrusion-pattern"),h=d.constantOr(1),p=n.paint.get("fill-extrusion-opacity"),f=[n.paint.get("fill-extrusion-ambient-occlusion-intensity"),n.paint.get("fill-extrusion-ambient-occlusion-radius")],m=n.layout.get("fill-extrusion-edge-radius"),g=m>0&&!n.paint.get("fill-extrusion-rounded-roof"),y=g?0:m,b="globe"===u.projection.name?e.fillExtrusionHeightLift():0,_="globe"===u.projection.name,v=_?e.globeToMercatorTransition(u.zoom):0,x=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],w=[];_&&w.push("PROJECTION_GLOBE_VIEW"),f[0]>0&&w.push("FAUX_AO"),g&&w.push("ZERO_ROOF_RADIUS");for(const k of i){const i=r.getTile(k),m=i.getBucket(n);if(!m||m.projection.name!==u.projection.name)continue;const g=m.programConfigurations.get(n.id),S=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",g,w);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(i,S,{useMeterToDem:!0});else{if(!m.enableTerrain)continue;if(e.setupElevationDraw(i,S,{useMeterToDem:!0}),bn(l,r,k,m,n,e),!m.centroidVertexBuffer){const e=S.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}h&&(t.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers());const T=d.constantOr(null);if(T&&i.imageAtlas){const e=i.imageAtlas.patternPositions[T.toString()];e&&g.setConstantPatternPositions(e)}const A=t.translatePosMatrix(k.projMatrix,i,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),C=u.projection.createInversionMatrix(u,k.canonical),E=n.paint.get("fill-extrusion-vertical-gradient"),I=h?Rr(A,t,E,p,f,y,k,i,b,v,x,C):Lr(A,t,E,p,f,y,k,b,v,x,C);t.prepareDrawProgram(l,S,k.toUnwrapped());const P=[];t.terrain&&P.push(m.centroidVertexBuffer),_&&P.push(m.layoutVertexExtBuffer),S.draw(l,l.gl.TRIANGLES,a,o,s,e.CullFaceMode.backCCW,I,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,t.transform.zoom,g,P)}}function bn(t,r,n,i,a,o){const s=[t=>{let r=t.canonical.x-1,n=t.wrap;return r<0&&(r=(1<<t.canonical.z)-1,n--),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},t=>{let r=t.canonical.x+1,n=t.wrap;return r===1<<t.canonical.z&&(r=0,n++),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=r.getSource().minzoom,n=e=>{const t=r.getTileByID(e);if(t&&t.hasData())return t.getBucket(a)},i=[0,-1,1];for(const r of i){if(e.overscaledZ+r<t)continue;const i=n(e.calculateScaledKey(e.overscaledZ+r));if(i)return i}},c=[0,0,0],u=(t,r)=>(c[0]=Math.min(t.min.y,r.min.y),c[1]=Math.max(t.max.y,r.max.y),c[2]=e.EXTENT-r.min.x>t.max.x?r.min.x-e.EXTENT:t.max.x,c),d=(t,r)=>(c[0]=Math.min(t.min.x,r.min.x),c[1]=Math.max(t.max.x,r.max.x),c[2]=e.EXTENT-r.min.y>t.max.y?r.min.y-e.EXTENT:t.max.y,c),h=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>d(e,t),(e,t)=>d(t,e)],p=new e.Point(0,0);let f,m,g;const y=(t,r,i,a,s)=>{const l=[[a?i:t,a?t:i,0],[a?i:r,a?r:i,0]],c=s<0?e.EXTENT+s:s,u=[a?c:(t+r)/2,a?(t+r)/2:c,0];return 0===i&&s<0||0!==i&&s>0?o.getForTilePoints(g,[u],!0,m):l.push(u),o.getForTilePoints(n,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/o.exaggeration()};for(let b=0;b<4;b++){const t=(b<2?1:5)-b,r=i.borders[b];if(0===r.length)continue;const a=g=s[b](n),c=l(a);if(!(c&&c instanceof e.FillExtrusionBucket&&c.enableTerrain))continue;if(i.borderDoneWithNeighborZ[b]===c.canonical.z&&c.borderDoneWithNeighborZ[t]===i.canonical.z)continue;if(m=o.findDEMTileFor(a),!m||!m.dem)continue;if(!f){const e=o.findDEMTileFor(n);if(!e||!e.dem)return;f=e}const u=c.borders[t];let d=0;const _=c.borderDoneWithNeighborZ[t]!==i.canonical.z;if(i.canonical.z===c.canonical.z){for(let n=0;n<r.length;n++){const a=i.featuresOnBorder[r[n]],o=a.borders[b];let s;for(;d<u.length&&(s=c.featuresOnBorder[u[d]],!(s.borders[t][1]>o[0]+3));)_&&c.encodeCentroid(void 0,s,!1),d++;if(s&&d<u.length){const r=d;let n=0;for(;!(s.borders[t][0]>o[1]-3)&&(n++,++d!==u.length);)s=c.featuresOnBorder[u[d]];if(s=c.featuresOnBorder[u[r]],a.intersectsCount()>1||s.intersectsCount()>1||1!==n){1!==n&&(d=r),i.encodeCentroid(void 0,a,!1),_&&c.encodeCentroid(void 0,s,!1);continue}const l=h[b](a,s),f=b%2?e.EXTENT-1:0;p.x=y(l[0],Math.min(e.EXTENT-1,l[1]),f,b<2,l[2]),p.y=0,i.encodeCentroid(p,a,!1),_&&c.encodeCentroid(p,s,!1)}else i.encodeCentroid(void 0,a,!1)}i.borderDoneWithNeighborZ[b]=c.canonical.z,i.needsCentroidUpdate=!0,_&&(c.borderDoneWithNeighborZ[t]=i.canonical.z,c.needsCentroidUpdate=!0)}else{for(const e of r)i.encodeCentroid(void 0,i.featuresOnBorder[e],!1);if(_){for(const e of u)c.encodeCentroid(void 0,c.featuresOnBorder[e],!1);c.borderDoneWithNeighborZ[t]=i.canonical.z,c.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[b]=c.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const _n=new e.Color(1,0,0,1),vn=new e.Color(0,1,0,1),xn=new e.Color(0,0,1,1),wn=new e.Color(1,0,1,1),kn=new e.Color(0,1,1,1);function Sn(t,r,n){const i=t.context,a=t.transform,o=i.gl,s="globe"===a.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let c=n.projMatrix;if(s&&e.globeToMercatorTransition(a.zoom)>0){const t=e.transitionTileAABBinECEF(n.canonical,a),r=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),a.globeMatrix,r),e.multiply(c,a.projMatrix,c)}const u=t.useProgram("debug",null,l),d=r.getTileByID(n.key);t.terrain&&t.terrain.setupElevationDraw(d,u);const h=e.DepthMode.disabled,p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="$debug";i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s?d._makeGlobeTileDebugBuffers(t.context,a):d._makeDebugTileBoundsBuffers(t.context,a.projection);const g=d._tileDebugBuffer||t.debugBuffer,y=d._tileDebugIndexBuffer||t.debugIndexBuffer,b=d._tileDebugSegments||t.debugSegments;u.draw(i,o.LINE_STRIP,h,p,f,e.CullFaceMode.disabled,qr(c,e.Color.red),m,g,y,b,null,null,null,[d._globeTileDebugBorderBuffer]);const _=d.latestRawTileData,v=Math.floor((_&&_.byteLength||0)/1024),x=r.getTile(n).tileSize,w=512/Math.min(x,512)*(n.overscaledZ/a.zoom)*.5;let k=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(k+=` => ${n.overscaledZ}`),k+=` ${v}kb`,function(e,t){e.initDebugOverlayCanvas();const r=e.debugOverlayCanvas,n=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,r.width,r.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(t,k);const S=d._tileDebugTextBuffer||t.debugBuffer,T=d._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,A=d._tileDebugTextSegments||t.debugSegments;u.draw(i,o.TRIANGLES,h,p,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,qr(c,e.Color.transparent,w),m,S,T,A,null,null,null,[d._globeTileDebugTextBuffer])}function Tn(e,t,r,n){Cn(e,0,t+r/2,e.transform.width,r,n)}function An(e,t,r,n){Cn(e,t-r/2,0,r,e.transform.height,n)}function Cn(t,r,n,i,a,o){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(r*e.exported.devicePixelRatio,n*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}const En=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:In}=En;function Pn(e,t,r,n){e.emplaceBack(t,r,n)}class Mn{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Pn(this.vertexArray,-1,-1,1),Pn(this.vertexArray,1,-1,1),Pn(this.vertexArray,-1,1,1),Pn(this.vertexArray,1,1,1),Pn(this.vertexArray,-1,-1,-1),Pn(this.vertexArray,1,-1,-1),Pn(this.vertexArray,-1,1,-1),Pn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,In),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Dn(t,r,n,i,a,o){const s=t.gl,l=r.paint.get("sky-atmosphere-color"),c=r.paint.get("sky-atmosphere-halo-color"),u=r.paint.get("sky-atmosphere-sun-intensity"),d=((e,t,r,n,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:r,u_color_tint_r:[n.r,n.g,n.b,n.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),i),a,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,r.skyboxTexture,0),n.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,d,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}const zn=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ln{constructor(t){const r=new e.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);const n=new e.StructArrayLayout3ui6;n.emplaceBack(0,1,2),n.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(r,zn.members),this.indexBuffer=t.createIndexBuffer(n),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Rn={symbol:function(t,r,n,i,a){if("translucent"!==t.renderPass)return;const o=e.StencilMode.disabled,s=t.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(t,r,n,i,a,o,s){const l=r.transform,c="map"===a,u="map"===o;for(const d of t){const t=i.getTile(d),r=t.getBucket(n);if(!r||!r.text||!r.text.segments.get().length)continue;const a=e.evaluateSizeForZoom(r.textSizeData,l.zoom),o=_t(d,r.getProjection(),l),h=l.calculatePixelsToTileUnitsMatrix(t),p=et(o,t.tileID.canonical,u,c,l,r.getProjection(),h),f="none"!==n.layout.get("icon-text-fit")&&r.hasIconData();if(a){const n=Math.pow(2,l.zoom-t.tileID.overscaledZ);hn(r,c,u,s,e.symbolSize,l,p,d,n,a,f)}}}(i,t,n,r,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),a),0!==n.paint.get("icon-opacity").constantOr(1)&&fn(t,r,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),o,s),0!==n.paint.get("text-opacity").constantOr(1)&&fn(t,r,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),o,s),r.map.showCollisionBoxes&&(cn(t,r,n,i,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),cn(t,r,n,i,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(t,r,n,i){if("translucent"!==t.renderPass)return;const a=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0===a.constantOr(1)&&(0===o.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,d=t.transform,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="globe"===d.projection.name,g=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],y=[];for(let _=0;_<i.length;_++){const a=i[_],o=r.getTile(a),s=o.getBucket(n);if(!s||s.projection.name!==d.projection.name)continue;const c=s.programConfigurations.get(n.id),u=Vr(n);m&&u.push("PROJECTION_GLOBE_VIEW");const h=t.useProgram("circle",c,u),p=s.layoutVertexBuffer,f=s.globeExtVertexBuffer,b=s.indexBuffer,v=d.projection.createInversionMatrix(d,a.canonical),x={programConfiguration:c,program:h,layoutVertexBuffer:p,globeExtVertexBuffer:f,indexBuffer:b,uniformValues:jr(t,a,o,v,g,n),tile:o};if(l){const t=s.segments.get();for(const r of t)y.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:x})}else y.push({segments:s.segments,sortKey:0,state:x})}l&&y.sort(((e,t)=>e.sortKey-t.sortKey));const b={useDepthForOcclusion:!m};for(const _ of y){const{programConfiguration:r,program:i,layoutVertexBuffer:a,globeExtVertexBuffer:o,indexBuffer:s,uniformValues:l,tile:m}=_.state,g=_.segments;t.terrain&&t.terrain.setupElevationDraw(m,i,b),t.prepareDrawProgram(c,i,m.tileID.toUnwrapped()),i.draw(c,u.TRIANGLES,h,p,f,e.CullFaceMode.disabled,l,n.id,a,s,g,n.paint,d.zoom,r,[o])}},heatmap:function(t,r,n,i){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const a=t.context,o=a.gl,s=e.StencilMode.disabled,l=new e.ColorMode([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,r,n){const i=e.gl,a=t.width*n,o=t.height*n;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,a,o]);let s=r.heatmapFbo;if(!s||s&&(s.width!==a||s.height!==o)){s&&s.destroy();const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=r.heatmapFbo=e.createFramebuffer(a,o,!1),function(e,t,r,n,i,a){const o=e.gl;o.texImage2D(o.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?o.RGBA16F:o.RGBA,i,a,0,o.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?o.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),n.colorAttachment.set(r)}(e,0,t,s,a,o)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(a,t,n,"globe"===t.transform.projection.name?.5:.25),a.clear({color:e.Color.transparent});const c=t.transform,u="globe"===c.projection.name,d=u?["PROJECTION_GLOBE_VIEW"]:null,h=u?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,p=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let f=0;f<i.length;f++){const m=i[f];if(r.hasRenderableParent(m))continue;const g=r.getTile(m),y=g.getBucket(n);if(!y||y.projection.name!==c.projection.name)continue;const b=y.programConfigurations.get(n.id),_=t.useProgram("heatmap",b,d),{zoom:v}=t.transform;t.terrain&&t.terrain.setupElevationDraw(g,_),t.prepareDrawProgram(a,_,m.toUnwrapped());const x=c.projection.createInversionMatrix(c,m.canonical);_.draw(a,o.TRIANGLES,e.DepthMode.disabled,s,l,h,$r(t,m,g,x,p,v,n.paint.get("heatmap-intensity")),n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,t.transform.zoom,b,u?[y.globeExtVertexBuffer]:null)}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,r){const n=t.context,i=n.gl,a=r.heatmapFbo;if(!a)return;n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),n.activeTexture.set(i.TEXTURE1);let o=r.colorRampTexture;o||(o=r.colorRampTexture=new e.Texture(n,r.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(n,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,r,n)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,r),r.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,r.paint,t.transform.zoom)}(t,n))},line:function(t,r,n,i){if("translucent"!==t.renderPass)return;const a=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0===a.constantOr(1)||0===o.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=n.paint.get("line-dasharray"),d=u.constantOr(1),h=n.layout.get("line-cap"),p=n.paint.get("line-pattern"),f=p.constantOr(1),m=n.paint.get("line-gradient"),g=f?"linePattern":"line",y=t.context,b=y.gl,_=(e=>{const t=[];Kr(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const r=e.paint.get("line-trim-offset");0===r[0]&&0===r[1]||t.push("RENDER_LINE_TRIM_OFFSET");const n=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!n&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(n);let v=_.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(v=!1);for(const x of i){const i=r.getTile(x);if(f&&!i.patternsLoaded())continue;const a=i.getBucket(n);if(!a)continue;t.prepareDrawTile();const o=a.programConfigurations.get(n.id),w=t.useProgram(g,o,_),k=p.constantOr(null);if(k&&i.imageAtlas){const e=i.imageAtlas.patternPositions[k.toString()];e&&o.setConstantPatternPositions(e)}const S=u.constantOr(null),T=h.constantOr(null);if(!f&&S&&T&&i.lineAtlas){const e=i.lineAtlas.getDash(S,T);e&&o.setConstantPatternPositions(e)}let[A,C]=n.paint.get("line-trim-offset");if("round"===T||"square"===T){const e=1;A!==C&&(0===A&&(A-=e),1===C&&(C+=e))}const E=t.terrain?x.projMatrix:null,I=f?Zr(t,i,n,E,c):Hr(t,i,n,E,a.lineClipsArray.length,c,[A,C]);if(m){const i=a.gradients[n.id];let o=i.texture;if(n.gradientVersion!==i.version){let s=256;if(n.stepInterpolant){const n=r.getSource().maxzoom,i=x.canonical.z===n?Math.ceil(1<<t.transform.maxZoom-x.canonical.z):1;s=e.clamp(e.nextPowerOfTwo(a.maxLineLength/e.EXTENT*1024*i),256,y.maxTextureSize)}i.gradient=e.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(y,i.gradient,b.RGBA),i.version=n.gradientVersion,o=i.texture}y.activeTexture.set(b.TEXTURE1),o.bind(n.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE)}d&&(y.activeTexture.set(b.TEXTURE0),i.lineAtlasTexture.bind(b.LINEAR,b.REPEAT),o.updatePaintBuffers()),f&&(y.activeTexture.set(b.TEXTURE0),i.imageAtlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),o.updatePaintBuffers()),t.prepareDrawProgram(y,w,x.toUnwrapped());const P=r=>{w.draw(y,b.TRIANGLES,s,r,l,e.CullFaceMode.disabled,I,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,n.paint,t.transform.zoom,o,[a.layoutVertexBuffer2])};if(v){const r=t.stencilModeForClipping(x).ref;0===r&&t.terrain&&y.clear({stencil:0});const n={func:b.EQUAL,mask:255};I.u_alpha_discard_threshold=.8,P(new e.StencilMode(n,r,255,b.KEEP,b.KEEP,b.INVERT)),I.u_alpha_discard_threshold=0,P(new e.StencilMode(n,r,255,b.KEEP,b.KEEP,b.KEEP))}else P(t.stencilModeForClipping(x))}v&&(t.resetStencilClippingMasks(),t.terrain&&y.clear({stencil:0}))},fill:function(t,r,n,i){const a=n.paint.get("fill-color"),o=n.paint.get("fill-opacity");if(0===o.constantOr(1))return;const s=t.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const a=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);gn(t,r,n,i,a,s,!1)}if("translucent"===t.renderPass&&n.paint.get("fill-antialias")){const a=t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);gn(t,r,n,i,a,s,!0)}},"fill-extrusion":function(t,r,n,i){const a=n.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){const o=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||n.paint.get("fill-extrusion-pattern").constantOr(1))yn(t,r,n,i,o,e.StencilMode.disabled,e.ColorMode.disabled),yn(t,r,n,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const a=t.colorModeForRenderPass();yn(t,r,n,i,o,e.StencilMode.disabled,a)}}},hillshade:function(t,r,n,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const a=t.context,o=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i);for(const d of u){const i=r.getTile(d);if(i.needsHillshadePrepare&&"offscreen"===t.renderPass)gr(t,i,n,o,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(d):c[d.overscaledZ];fr(t,d,i,n,o,e,s)}}a.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,r,n,i,a,o){if("translucent"!==t.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!i.length)return;const s=t.context,l=s.gl,c=r.getSource(),u=t.useProgram("raster"),d=t.colorModeForRenderPass(),h=t.terrain&&t.terrain.renderingToTexture,[p,f]=c instanceof Ee||h?[{},i]:t.stencilConfigForOverlap(i),m=f[f.length-1].overscaledZ,g=!t.options.moving;for(const y of f){const i=h?e.DepthMode.disabled:t.depthModeForSublayer(y.overscaledZ-m,1===n.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),a=y.toUnwrapped(),f=r.getTile(y);if(h&&(!f||!f.hasData()))continue;const b=h?y.projMatrix:t.transform.calculateProjMatrix(a,g),_=t.terrain&&h?t.terrain.stencilModeForRTTOverlap(y):p[y.overscaledZ],v=o?0:n.paint.get("raster-fade-duration");f.registerFadeDuration(v);const x=r.findLoadedParent(y,0),w=Ar(f,x,r,t.transform,v);let k,S;t.terrain&&t.terrain.prepareDrawTile();const T="nearest"===n.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),f.texture.bind(T,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(T,l.CLAMP_TO_EDGE),k=Math.pow(2,x.tileID.overscaledZ-f.tileID.overscaledZ),S=[f.tileID.canonical.x*k%1,f.tileID.canonical.y*k%1]):f.texture.bind(T,l.CLAMP_TO_EDGE),f.texture.useMipmap&&s.extTextureFilterAnisotropic&&t.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax);const A=Jr(b,S||[0,0],k||1,w,n,c instanceof Ee?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,u,a),c instanceof Ee)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,i,e.StencilMode.disabled,d,e.CullFaceMode.disabled,A,n.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:r,tileBoundsIndexBuffer:a,tileBoundsSegments:o}=t.getTileBoundsBuffers(f);u.draw(s,l.TRIANGLES,i,_,d,e.CullFaceMode.disabled,A,n.id,r,a,o)}}t.resetStencilClippingMasks()},background:function(t,r,n,i){const a=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0===o)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,d=n.paint.get("background-pattern");if(t.isPatternMissing(d))return;const h=!d&&1===a.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==h)return;const p=e.StencilMode.disabled,f=t.depthModeForSublayer(0,"opaque"===h?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(d?"backgroundPattern":"background");let y,b=i;b||(y=t.getBackgroundTiles(),b=Object.values(y).map((e=>e.tileID))),d&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const _ of b){const h=_.toUnwrapped(),b=i?_.projMatrix:t.transform.calculateProjMatrix(h);t.prepareDrawTile();const v=r?r.getTile(_):y?y[_.key]:new e.Tile(_,u,c.zoom,t),x=d?on(b,o,t,d,{tileID:_,tileSize:u}):an(b,o,a);t.prepareDrawProgram(s,g,h);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:k,tileBoundsSegments:S}=t.getTileBoundsBuffers(v);g.draw(s,l.TRIANGLES,f,p,m,e.CullFaceMode.disabled,x,n.id,w,k,S)}},sky:function(t,r,n){const i=t.transform,a="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),o=n.paint.get("sky-opacity")*a;if(0===o)return;const s=t.context,l=n.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?n.needsSkyboxCapture(t)&&(function(t,r,n,i){const a=t.context,o=a.gl;let s=r.skyboxFbo;if(!s){s=r.skyboxFbo=a.createFramebuffer(32,32,!1),r.skyboxGeometry=new Mn(a),r.skyboxTexture=a.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,r.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(let e=0;e<6;++e)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(s.framebuffer),a.viewport.set([0,0,32,32]);const l=r.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Dn(a,r,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Dn(a,r,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Dn(a,r,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Dn(a,r,c,u,l,3),e.identity(u),Dn(a,r,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Dn(a,r,c,u,l,5),a.viewport.set([0,0,t.width,t.height])}(t,n),n.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,r,n,i,a){const o=t.context,s=o.gl,l=t.transform,c=t.useProgram("skybox");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,r.skyboxTexture);const u=((e,t,r,n,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:n,u_temporal_offset:i}))(l.skyboxMatrix,r.getCenter(t,!1),0,i,a);t.prepareDrawProgram(o,c),c.draw(o,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,c,o,u):"gradient"===l&&"sky"===t.renderPass&&function(t,r,n,i,a){const o=t.context,s=o.gl,l=t.transform,c=t.useProgram("skyboxGradient");r.skyboxGeometry||(r.skyboxGeometry=new Mn(o)),o.activeTexture.set(s.TEXTURE0);let u=r.colorRampTexture;u||(u=r.colorRampTexture=new e.Texture(o,r.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const d=((t,r,n,i,a)=>({u_matrix:t,u_color_ramp:0,u_center_direction:r,u_radius:e.degToRad(n),u_opacity:i,u_temporal_offset:a}))(l.skyboxMatrix,r.getCenter(t,!1),r.paint.get("sky-gradient-radius"),i,a);t.prepareDrawProgram(o,c),c.draw(o,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,d,"skyboxGradient",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,c,o,u)},debug:function(e,t,r){for(let n=0;n<r.length;n++)Sn(e,t,r[n])},custom:function(t,r,n,i){const a=t.context,o=n.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&n.isLayerDraped()){if("offscreen"===t.renderPass){const r=o.prerender;if(r){if(t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const n=t.transform.pointMerc;r.call(o,a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[n.x,n.y],t.transform.pixelsPerMeterRatio)}else r.call(o,a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const r=o.renderToTile;if(r){const n=i[0].canonical,s=new e.MercatorCoordinate(n.x+i[0].wrap*(1<<n.z),n.y,n.z);a.setDepthMode(e.DepthMode.disabled),a.setStencilMode(e.StencilMode.disabled),a.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),r.call(o,a.gl,s),a.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),a.setStencilMode(e.StencilMode.disabled);const r="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(a.setDepthMode(r),"globe"===t.transform.projection.name){const r=t.transform.pointMerc;o.render(a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[r.x,r.y],t.transform.pixelsPerMeterRatio)}else o.render(a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState(),a.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Bn{constructor(t,r,n=!1){this.context=new Se(t,n),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const r=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(r||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Pr(this,e));const n=this._terrain;this.transform.elevation=r?n:null,n.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[r,n]=t.getFovAdjustedRange(this.transform._fov);if(r>n)return void(this.transform.fogCullDistSq=null);const i=r+.78*(n-r);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,r){if(this.width=t*e.exported.devicePixelRatio,this.height=r*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(o);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Ln(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,r=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,r.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Tr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,r,n){if(!r||this.currentStencilSource===r.id||!t.isTileClipped()||!n||0===n.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of n)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=r.id;const i=this.context,a=i.gl;this.nextStencilID+n.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const s of n){const t=r.getTile(s),n=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(t);o.draw(i,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},n,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Tr(s.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,r=this.context.gl;return new e.StencilMode({func:r.NOTEQUAL,mask:255},t,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const r=this.context.gl;return new e.StencilMode({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,r.KEEP,r.KEEP,r.REPLACE)}stencilConfigForOverlap(t){const r=this.context.gl,n=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=n[n.length-1].overscaledZ,a=n[0].overscaledZ-i+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();const t={};for(let n=0;n<a;n++)t[n+i]=new e.StencilMode({func:r.GEQUAL,mask:255},n+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=a,[t,n]}return[{[i]:e.StencilMode.disabled},n]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const r=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,r,n){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(n||this.context.gl.LEQUAL,r,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,r){this.style=t,this.options=r,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const n=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const a={},o={},s={};for(const e in i){const t=i[e];a[e]=t.getVisibleCoordinates(),o[e]=a[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<n.length;e++)if(this.style._layers[n[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of n){const r=this.style._layers[e],n=t._getLayerSourceCache(r);if(!r.hasOffscreenPass()||r.isHidden(this.transform.zoom))continue;const i=n?o[n.id]:void 0;("custom"===r.type||r.isSky()||i&&i.length)&&this.renderLayer(this,n,r,i)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:r.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky())continue;const i=r?o[r.id]:void 0;this._renderTileClippingMasks(e,r,i),this.renderLayer(this,r,e,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,r){const n=t.context,i=n.gl,a=t.transform,o=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===a.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(a.zoom),c=r.properties.get("color").toArray01(),u=r.properties.get("high-color").toArray01(),d=r.properties.get("space-color").toArray01PremultipliedAlpha(),h=e.identity$1([]);e.rotateY$1(h,h,-e.degToRad(a._center.lng)),e.rotateX$1(h,h,e.degToRad(a._center.lat)),e.rotateZ$1(h,h,a.angle),e.rotateX$1(h,h,-a._pitch);const p=e.fromQuat(new Float32Array(16),h),f=e.mapValue(r.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=e.mapValue(r.properties.get("horizon-blend"),0,1,m,.25),y=e.globeUseCustomAntiAliasing(t,n,a)&&g===m?a.worldSize/(2*Math.PI*1.025)-1:a.globeRadius,b=t.frameCounter/1e3%1,_=e.length(a.globeCenterInViewSpace),v=Math.sqrt(Math.pow(_,2)-Math.pow(y,2)),x=Math.acos(v/_),w=((t,r,n,i,a,o,s,l,c,u,d,h,p,f)=>({u_frustum_tl:t,u_frustum_tr:r,u_frustum_br:n,u_frustum_bl:i,u_horizon:a,u_transition:o,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:d,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:h,u_horizon_angle:p,u_rotation_matrix:f}))(a.frustumCorners.TL,a.frustumCorners.TR,a.frustumCorners.BR,a.frustumCorners.BL,a.frustumCorners.horizon,l,g,c,u,d,f,b,x,p);t.prepareDrawProgram(n,s);const k=t.atmosphereBuffer;k&&s.draw(n,i.TRIANGLES,o,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,r,e,r?o[r.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=r?("symbol"===e.type?s:o)[r.id]:void 0;this._renderTileClippingMasks(e,r,r?a[r.id]:void 0),this.renderLayer(this,r,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let r=null;e.values(this.style._layers).forEach((e=>{const n=t._getLayerSourceCache(e);n&&!e.isHidden(this.transform.zoom)&&(!r||r.getSource().maxzoom<n.getSource().maxzoom)&&(r=n)})),r&&this.options.showTileBoundaries&&Rn.debug(this,r,r.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Tn(e,e.transform.height-(t.top||0),3,_n),Tn(e,t.bottom||0,3,vn),An(e,t.left||0,3,xn),An(e,e.transform.width-(t.right||0),3,wn);const r=e.transform.centerPoint;!function(e,t,r,n){Cn(e,t-1,r-10,2,20,n),Cn(e,t-10,r-1,20,2,n)}(e,r.x,e.transform.height-r.y,kn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"sky"===r.type||"custom"===r.type||n&&n.length)&&(this.id=r.id,this.gpuTimingStart(r),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(r.type)||e.terrain&&"custom"===r.type)&&Rn[r.type](e,t,r,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let r=this.gpuTimers[e.id];r||(r=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),r.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,r.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const r in e){const n=e[r],i=this.context.extTimerQuery,a=i.getQueryObjectEXT(n.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n.query),t[r]=a}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let r=0;for(const n of e)r+=t.getQueryObjectEXT(n,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(n);return r}translatePosMatrix(t,r,n,i,a){if(!n[0]&&!n[1])return t;const o=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){const e=Math.sin(o),t=Math.cos(o);n=[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}const s=[a?n[0]:P(r,n[0],this.transform.zoom),a?n[1]:P(r,n[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),r=this.style&&this.style.fog,n=[];return this.terrainRenderModeElevated()&&n.push("TERRAIN"),"globe"===this.transform.projection.name&&n.push("GLOBE"),t&&n.push("ZERO_EXAGGERATION"),r&&!e&&0!==r.getOpacity(this.transform.pitch)&&n.push("FOG"),e&&n.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&n.push("OVERDRAW_INSPECTOR"),n}useProgram(e,t,r){this.cache=this.cache||{};const n=r||[],i=this.currentGlobalDefines().concat(n),a=Mr.cacheKey(cr[e],e,i,t);return this.cache[a]||(this.cache[a]=new Mr(this.context,e,cr[e],t,sn[e],i)),this.cache[a]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,r,n){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const a=i.getOpacity(this.transform.pitch),o=((t,r,n,i,a,o,s,l,c,u,d)=>{const h=t.transform,p=r.properties.get("color").toArray01();p[3]=i;const f=t.frameCounter/1e3%1;return{u_fog_matrix:n?h.calculateFogTileMatrix(n):t.identityMat,u_fog_range:r.getFovAdjustedRange(h._fov),u_fog_color:p,u_fog_horizon_blend:r.properties.get("horizon-blend"),u_fog_temporal_offset:f,u_frustum_tl:a,u_frustum_tr:o,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:d,u_globe_transition:e.globeToMercatorTransition(h.zoom),u_is_globe:+("globe"===h.projection.name)}})(this,i,n,a,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);r.setFogUniformValues(t,o)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,r=this._backgroundTiles={},n=this.transform.coveringTiles({tileSize:512});for(const i of n)r[i.key]=t[i.key]||new e.Tile(i,512,this.transform.tileZoom,this);return r}clearBackgroundTiles(){this._backgroundTiles={}}}class On{constructor(e=0,t=0,r=0,n=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(r)||r<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=r,this.right=n}interpolate(t,r,n){return null!=r.top&&null!=t.top&&(this.top=e.number(t.top,r.top,n)),null!=r.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,r.bottom,n)),null!=r.left&&null!=t.left&&(this.left=e.number(t.left,r.left,n)),null!=r.right&&null!=t.right&&(this.right=e.number(t.right,r.right,n)),this}getCenter(t,r){const n=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+r-this.bottom)/2,0,r);return new e.Point(n,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new On(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fn(t,r){const n=e.getColumn(t,3);e.fromQuat(t,r),e.setColumn(t,3,n)}function Un(t,r){const n=e.identity$1([]);return e.rotateZ$1(n,n,-r),e.rotateX$1(n,n,-t),n}function Nn(t,r){const n=[t[0],t[1],0],i=[r[0],r[1],0];if(e.length(n)>=1e-15){const t=e.normalize([],n);e.scale$2(i,t,e.dot(i,t)),r[0]=i[0],r[1]=i[1]}const a=e.cross([],r,t);if(e.len(a)<1e-15)return null;const o=Math.atan2(-a[1],a[0]);return Un(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),o)}class jn{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const r=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(r.x=e.wrap(r.x,0,1)),this._position=r}else this._position=null}lookAtPoint(t,r){if(this.orientation=null,!this.position)return;const n=this.position,i=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,a=e.MercatorCoordinate.fromLngLat(t,i),o=[a.x-n.x,a.y-n.y,a.z-n.z];r||(r=[0,0,1]),r[2]=Math.abs(r[2]),this.orientation=Nn(o,r)}setPitchBearing(t,r){this.orientation=Un(e.degToRad(t),e.degToRad(-r))}}class Vn{constructor(t,r){this._transform=e.identity([]),this.orientation=r,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var r;t&&e.setColumn(this._transform,3,[(r=t)[0],r[1],r[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&Fn(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Un(e,t),Fn(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,r){const n=new Float64Array(16);return e.invert(n,this.getWorldToCamera(t,r)),n}getWorldToCameraPosition(t,r,n){const i=this.position;e.scale$2(i,i,-t);const a=new Float64Array(16);return e.fromScaling(a,[n,n,n]),e.translate(a,a,i),a[10]*=r,a}getWorldToCamera(t,r){const n=new Float64Array(16),i=new Float64Array(4),a=this.position;return e.conjugate(i,this._orientation),e.scale$2(a,a,-t),e.fromQuat(n,i),e.translate(n,n,a),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=r,n[9]*=r,n[10]*=r,n[11]*=r,n}getCameraToClipPerspective(t,r,n,i){const a=new Float64Array(16);return e.perspective(a,t,r,n,i),a}getDistanceToElevation(t,r=!1){const n=0===t?0:e.mercatorZfromAltitude(t,r?e.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(n-this.position[2])/i[2]}clone(){return new Vn([...this.position],[...this.orientation])}}function Wn(t,r){const n=Gn(t.projection,t.zoom,t.width,t.height),i=function(t,r,n,i,a){const o=new e.LngLat(n.lng-180*$n,n.lat),s=new e.LngLat(n.lng+180*$n,n.lat),l=t.project(o.lng,o.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),d=e.MercatorCoordinate.fromLngLat(n);d.y=e.clamp(d.y,-1+$n,1-$n);const h=d.toLngLat(),p=t.project(h.lng,h.lat),f=e.MercatorCoordinate.fromLngLat(h);f.x+=$n;const m=f.toLngLat(),g=t.project(m.lng,m.lat),y=Zn(g.x-p.x,g.y-p.y,u),b=e.MercatorCoordinate.fromLngLat(h);b.y+=$n;const _=b.toLngLat(),v=t.project(_.lng,_.lat),x=Zn(v.x-p.x,v.y-p.y,u),w=Math.abs(y.x)/Math.abs(x.y),k=e.identity([]);e.rotateZ(k,k,-u*(1-(a?0:i)));const S=e.identity([]);return e.scale(S,S,[1,1-(1-w)*i,1]),S[4]=-x.x/x.y*i,e.rotateZ(S,S,u),e.multiply(S,k,S),S}(t.projection,0,t.center,n,r),a=qn(t);return e.scale(i,i,[a,a,1]),i}function qn(t){const r=t.projection,n=Gn(t.projection,t.zoom,t.width,t.height),i=Hn(r,t.center),a=Hn(r,e.LngLat.convert(r.center));return Math.pow(2,i*n+(1-n)*a)}function Gn(t,r,n,i,a=1/0){const o=t.range;if(!o)return 0;const s=Math.min(a,Math.max(n,i)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(o[0]+l,o[1]+l,r)}const $n=1/4e4;function Hn(t,r){const n=e.clamp(r.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(r.lng-180*$n,n),a=new e.LngLat(r.lng+180*$n,n),o=t.project(i.lng,n),s=t.project(a.lng,n),l=e.MercatorCoordinate.fromLngLat(i),c=e.MercatorCoordinate.fromLngLat(a),u=s.x-o.x,d=s.y-o.y,h=c.x-l.x,p=c.y-l.y,f=Math.sqrt((h*h+p*p)/(u*u+d*d));return Math.log(f)/Math.LN2}function Zn(e,t,r){const n=Math.cos(r),i=Math.sin(r);return{x:e*n-t*i,y:e*i+t*n}}class Xn{constructor(t,r,n,i,a,o,s){this.tileSize=512,this._renderWorldCopies=void 0===a||a,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=null==n?0:n,this._maxPitch=null==i?60:i,this.setProjection(o),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new On,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Vn,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Xn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e,t=!1){const r=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||r)&&this._updateCameraOnTerrain(),(e||r)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(r){this.projectionOptions=r||{name:"mercator"};const n=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const i=!t(n,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const r=t!==this.projection.name;return r&&this._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const r=-t*Math.PI/180;var n;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=n*-s+a*l,e[3]=i*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const r=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,r=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],n=this.horizonLineFromTop();let i=0,a=0;for(let o=0;o<r.length;o++){const s=new e.Point(r[o][0]*this.width,n+r[o][1]*(this.height-n)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,a+=c}return 0===a?NaN:i/a}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),r=this.pixelsPerMeter/this.worldSize*t,n=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),a=Math.max(n-r,i);this._setZoom(this._zoomFromMercatorZ(a))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let n;n=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let r=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(r=this._setCameraOrientation(t.orientation)),t.position){const n=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(n,this._camera.position)||(this._setCameraPosition(n),r=!0)}r&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,r=new jn;return r.position=new e.MercatorCoordinate(t[0],t[1],t[2]),r.orientation=this._camera.orientation,r._elevation=this.elevation,r._renderWorldCopies=this.renderWorldCopies,r}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const r=e.transformQuat([],[0,0,-1],t),n=e.transformQuat([],[0,-1,0],t);if(n[2]<0)return!1;const i=Nn(r,n);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const r=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/n,i/r),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const r=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const n=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),a=this.pointCoordinate(new e.Point(this.width,this.height)),o=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(n.x,i.x,a.x,o.x)),l=Math.floor(Math.max(n.x,i.x,a.x,o.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&r.push(new e.UnwrappedTileID(u,t))}return r}coveringTiles(t){let r=this.coveringZoomLevel(t);const n=r,i=this.elevation&&!t.isTerrainDEM,a="mercator"===this.projection.name;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);const o=this.locationCoordinate(this.center),s=this.center.lat,l=1<<r,c=[l*o.x,l*o.y,0],u="globe"===this.projection.name,d=!u,h=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,d),p=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),f=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*p.x,l*p.y,m*(d?1:f)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),b=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,_=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,v=t.isTerrainDEM?-_:this._elevation?this._elevation.getMinElevationBelowMSL():0,x=this.projection.isReprojectedInTileSpace?qn(this):1,w=t=>{const r=1/4e4,n=new e.MercatorCoordinate(t.x+r,t.y,t.z),i=new e.MercatorCoordinate(t.x,t.y+r,t.z),a=t.toLngLat(),o=n.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(a),c=this.locationCoordinate(o),u=this.locationCoordinate(s),d=Math.hypot(c.x-l.x,c.y-l.y),h=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(d*h)*x/r},k=t=>{const r=_,n=v;return{aabb:e.tileAABB(this,l,0,0,0,t,n,r,this.projection),zoom:0,x:0,y:0,minZ:n,maxZ:r,wrap:t,fullyVisible:!1}},S=[];let T=[];const A=r,C=t.reparseOverscaled?n:r,E=e=>e*e,I=E((m-this._centerAltitude)*f),P=e=>{if(!this._elevation||!e.tileID||!a)return;const t=this._elevation.getMinMaxForTile(e.tileID),r=e.aabb;t?(r.min[2]=t.min,r.max[2]=t.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=M(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=this._centerAltitude))},M=t=>{if(t.zoom<b)return!0;if(t.zoom===A)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const r=t.aabb.distanceX(g),a=t.aabb.distanceY(g);let o=I,l=1;if(u){o=E(t.aabb.distanceZ(g));const r=Math.pow(2,t.zoom),n=e.latFromMercatorY((t.y+1)/r),i=e.latFromMercatorY(t.y/r),a=Math.min(Math.max(s,n),i),c=e.circumferenceAtLatitude(a)/e.circumferenceAtLatitude(s);if(l=a===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===A-1&&c>=.9)return!0}else if(i&&(o=E(t.aabb.distanceZ(g)*f)),this.projection.isReprojectedInTileSpace&&n<=5){const r=Math.pow(2,t.zoom),n=w(new e.MercatorCoordinate((t.x+.5)/r,(t.y+.5)/r));l=n>.85?1:n}const c=r*r+a*a+o,d=E((1<<A-t.zoom)*y*l*((e,t)=>{if(t*E(.707)<e)return 1;const r=Math.sqrt(t/e);return r/(1.4144271570014144+(Math.pow(1.1,r-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(o,I),c));return c<d};if(this.renderWorldCopies)for(let e=1;e<=3;e++)S.push(k(-e)),S.push(k(e));for(S.push(k(0));S.length>0;){const n=S.pop(),o=n.x,s=n.y;let d=n.fullyVisible;if(!d){const e=n.aabb.intersects(h);if(0===e)continue;d=2===e}if(n.zoom!==A&&M(n))for(let t=0;t<4;t++){const r=(o<<1)+t%2,c=(s<<1)+(t>>1),h={aabb:a?n.aabb.quadrant(t):e.tileAABB(this,l,n.zoom+1,r,c,n.wrap,n.minZ,n.maxZ,this.projection),zoom:n.zoom+1,x:r,y:c,wrap:n.wrap,fullyVisible:d,tileID:void 0,shouldSplit:void 0,minZ:n.minZ,maxZ:n.maxZ};i&&!u&&(h.tileID=new e.OverscaledTileID(n.zoom+1===A?C:n.zoom+1,n.wrap,n.zoom+1,r,c),P(h)),S.push(h)}else{const i=n.zoom===A?C:n.zoom;if(t.minzoom&&t.minzoom>i)continue;const a=c[0]-(.5+o+(n.wrap<<n.zoom))*(1<<r-n.zoom),l=c[1]-.5-s,u=n.tileID?n.tileID:new e.OverscaledTileID(i,n.wrap,n.zoom,o,s);T.push({tileID:u,distanceSq:a*a+l*l})}}if(this.fogCullDistSq){const r=this.fogCullDistSq,n=this.horizonLineFromTop();T=T.filter((i=>{const a=[0,0,0,1],o=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(a,a,s),e.transformMat4$1(o,o,s);const l=e.getAABBPointSquareDist(a,o);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>r&&0!==n){const r=this.calculateProjMatrix(i.tileID.toUnwrapped());let a;t.isTerrainDEM||(a=u.getMinMaxForTile(i.tileID)),a||(a={min:v,max:_});const o=e.furthestTileCorner(this.rotation),s=[o[0]*e.EXTENT,o[1]*e.EXTENT,a.max];e.transformMat4(s,s,r),c=(1-s[1])*this.height*.5<n}return l<r||c}))}return T.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const r=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),n=this.projection.project(t.lng,r);return new e.Point(n.x*this.worldSize,n.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,r){let n,i;const a=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;n=(r.x-a.x)/e,i=(r.y-a.y)/e}else{const e=this.pointCoordinate(r),t=this.pointCoordinate(a);n=e.x-t.x,i=e.y-t.y}const o=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(o.x-n,o.y-i))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,r){const n=r?e.mercatorZfromAltitude(r,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,n)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,r){const n=null!=r?r:this._centerAltitude,i=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(a,a,this.pixelMatrixInverse);const o=a[3];e.scale$1(i,i,1/i[3]),e.scale$1(a,a,1/o);const s=i[2],l=a[2];return{p0:i,p1:a,t:s===l?0:(n-s)/(l-s)}}screenPointToMercatorRay(t){const r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];return e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(n,n,this.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),e.scale$1(n,n,1/n[3]),r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,e.scale$1(r,r,1/this.worldSize),e.scale$1(n,n,1/this.worldSize),new e.Ray([r[0],r[1],r[2]],e.normalize([],e.sub([],n,r)))}rayIntersectionCoordinate(t){const{p0:r,p1:n,t:i}=t,a=e.mercatorZfromAltitude(r[2],this._center.lat),o=e.mercatorZfromAltitude(n[2],this._center.lat);return new e.MercatorCoordinate(e.number(r[0],n[0],i)/this.worldSize,e.number(r[1],n[1],i)/this.worldSize,e.number(a,o,i))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let r=this.projection.pointCoordinate3D(this,t.x,t.y);if(r)return new e.MercatorCoordinate(r[0],r[1],r[2]);let n=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);const a=.02*i,o=t.clone();for(let s=0;s<10&&i-n>a;s++){o.y=e.number(n,i,.66);const t=this.projection.pointCoordinate3D(this,o.x,o.y);t?(i=o.y,r=t):n=o.y}return r?new e.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(t);const r=this.pointCoordinate(t);return r.y>=0&&r.y<=1}_coordinatePoint(t,r){const n=r&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,n+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.Point(i[0]/i[3],i[1]/i[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:r}=this._edgeInsets,n=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,a=this.pointLocation3D(new e.Point(r,t)),o=this.pointLocation3D(new e.Point(i,t)),s=this.pointLocation3D(new e.Point(i,n)),l=this.pointLocation3D(new e.Point(r,n));let c=Math.min(a.lng,o.lng,s.lng,l.lng),u=Math.max(a.lng,o.lng,s.lng,l.lng),d=Math.min(a.lat,o.lat,s.lat,l.lat),h=Math.max(a.lat,o.lat,s.lat,l.lat);const p=Math.pow(2,-this.zoom)/16*270,f="globe"===this.projection.name?1:4,m=(t,r,n,i,a)=>{const o=(t+n)/2,s=(r+i)/2,l=new e.Point(o,s),{lng:g,lat:y}=this.pointLocation3D(l),b=Math.max(0,c-g,d-y,g-u,y-h);c=Math.min(c,g),u=Math.max(u,g),d=Math.min(d,y),h=Math.max(h,y),(a<f||b>p)&&(m(t,r,o,s,a+1),m(o,s,n,i,a+1))};if(m(r,t,i,t,1),m(i,t,i,n,1),m(i,n,r,n,1),m(r,n,r,t,1),"globe"===this.projection.name){const[t,r]=e.polesInViewport(this);t?(h=90,u=180,c=-180):r&&(d=-90,u=180,c=-180)}return new e.LngLatBounds(new e.LngLat(c,d),new e.LngLat(u,h))}_getBoundsRectangular(t,r){const{top:n,left:i}=this._edgeInsets,a=this.height-this._edgeInsets.bottom,o=this.width-this._edgeInsets.right,s=new e.Point(i,n),l=new e.Point(o,n),c=new e.Point(o,a),u=new e.Point(i,a);let d=this.pointCoordinate(s,t),h=this.pointCoordinate(l,t);const p=this.pointCoordinate(c,r),f=this.pointCoordinate(u,r),m=(e,t)=>(t.y-e.y)/(t.x-e.x);return d.y>1&&h.y>=0?d=new e.MercatorCoordinate((1-f.y)/m(f,d)+f.x,1):d.y<0&&h.y<=1&&(d=new e.MercatorCoordinate(-f.y/m(f,d)+f.x,0)),h.y>1&&d.y>=0?h=new e.MercatorCoordinate((1-p.y)/m(p,h)+p.x,1):h.y<0&&d.y<=1&&(h=new e.MercatorCoordinate(-p.y/m(p,h)+p.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(p))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const r=t.dem.tree;e.min=Math.min(e.min,r.minimums[0]),e.max=Math.max(e.max,r.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,r=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,r):r}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const r=t.key,n=this._distanceTileDataCache;if(n[r])return n[r];const i=t.canonical,a=1/this.height,o=this.cameraWorldSize,s=o/this.zoomScale(i.z),l=(i.x+Math.pow(2,i.z)*t.wrap)*s,c=i.y*s,u=this.point;u.x*=o/this.worldSize,u.y*=o/this.worldSize;const d=this.angle,h=Math.sin(-d),p=-Math.cos(-d);return n[r]={bearing:[h,p],center:[(u.x-l)*a,(u.y-c)*a],scale:s/e.EXTENT*a},n[r]}calculateFogTileMatrix(t){const r=t.key,n=this._fogTileMatrixCache;if(n[r])return n[r];const i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(i,this.worldToFogMatrix,i),n[r]=new Float32Array(i),n[r]}calculateProjMatrix(t,r=!1){const n=t.key,i=r?this._alignedProjMatrixCache:this._projMatrixCache;if(i[n])return i[n];const a=this.calculatePosMatrix(t,this.worldSize);return e.multiply(a,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:r?this.alignedProjMatrix:this.projMatrix,a),i[n]=new Float32Array(a),i[n]}calculatePixelsToTileUnitsMatrix(t){const r=t.tileID.key,n=this._pixelsToTileUnitsCache;if(n[r])return n[r];const i=function(t,r){const{scale:n}=t.tileTransform,i=n*e.EXTENT/(t.tileSize*Math.pow(2,r.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return a=new Float32Array(4),l=(o=r.inverseAdjustmentMatrix)[1],c=o[2],u=o[3],h=(s=[i,i])[1],a[0]=o[0]*(d=s[0]),a[1]=l*d,a[2]=c*h,a[3]=u*h,a;var a,o,s,l,c,u,d,h}(t,this);return n[r]=i,n[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,r=e.fromScaling([],[t,t,t]);return e.multiply(r,r,this.globeMatrix),r}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),i=this._camera.forward(),a=e.mercatorZfromAltitude(1,this._center.lat);n[2]/=a,i[2]/=a,e.normalize(i,i);const o=t.raycast(n,i,t.exaggeration());if(o){const t=e.scaleAndAdd([],n,i,o),r=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(r.z+e.length([r.x-n[0],r.y-n[1],r.z-n[2]*a]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=r.toAltitude(),this._center=this.coordinateLocation(r),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(t=!1){if(!this._elevation)return;const r=this._elevation,n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(n),a=r.getAtPointOrZero(new e.MercatorCoordinate(...i)),o=this.pixelsPerMeter/this.worldSize*a,s=this._minimumHeightOverTerrain(),l=i[2]-o;if(l<=s)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),r=[i[0],i[1],t.z-i[2]],n=e.length(r);r[2]-=(s-l)/this._pixelsPerMercatorPixel;const a=e.length(r);if(0===a)return;e.scale$2(r,r,n/a*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],t.z*this._pixelsPerMercatorPixel-r[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const r=this.center;return r.lat=e.clamp(r.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(r.lng=e.clamp(r.lng,this.minLng,this.maxLng)),this.center=r,void(this._constraining=!1)}const r=this._unmodified,{x:n,y:i}=this.point;let a=0,o=n,s=i;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,d=this.worldMaxY*this.scale;if(i-c<u&&(s=u+c),i+c>d&&(s=d-c),d-u<this.height&&(a=Math.max(a,this.height/(d-u)),s=(d+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,r=this.worldSize/2-(e+t)/2;o=(n+r+this.worldSize)%this.worldSize-r,o-l<e&&(o=e+l),o+l>t&&(o=t-l),t-e<this.width&&(a=Math.max(a,this.width/(t-e)),o=(t+e)/2)}o===n&&s===i||(this.center=this.unproject(new e.Point(o,s))),a&&(this.zoom+=this.scaleZoom(a)),this._constrainCamera(),this._unmodified=r,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,r=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const n=Gn(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,n),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i="meters"===this.projection.zAxisUnit?r:1,a=this._camera.getWorldToCamera(this.worldSize,i),o=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);o[8]=2*-t.x/this.width,o[9]=2*t.y/this.height;let s=e.mul([],o,a);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),r=e.identity([]);e.translate(r,r,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(r,r,Wn(this)),e.translate(r,r,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(s,s,r),this.inverseAdjustmentMatrix=function(e){const t=Wn(e,!0);return b([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=e.invert([],o);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);const u=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),d=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-t.x/this.width,u[9]=2*(t.y+d)/this.height,this.skyboxMatrix=e.multiply(c,u,c);const h=this.point,p=h.x,f=h.y,m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),_=Math.sin(this.angle),v=p-Math.round(p)+y*m+_*g,x=f-Math.round(f)+y*g+_*m,w=new Float64Array(s);if(e.translate(w,w,[v>.5?v-1:v,x>.5?x-1:x,0]),this.alignedProjMatrix=w,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,a),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,r=this.cameraPixelsPerMeter,n=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,a=[t,t,r];e.scale$2(a,a,i),e.scale$2(n,n,-1),e.multiply$2(n,n,a);const o=e.create();e.translate(o,o,n),e.scale(o,o,a),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,r,i)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,r=this._camera.forward(),n=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[n.x/this.worldSize-r[0]*i,n.y/this.worldSize-r[1]*i,e/this.worldSize*this._centerAltitude-r[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const r=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=this._camera.position[2],i=t[2];let a=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(a=Math.min((r-n)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,a),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,r=this._camera.forward(),{pitch:n,bearing:i}=this._camera.getPitchBearing(),a=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-a)/Math.cos(n),o),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,r,s),this._pitch=e.clamp(n,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let r=0,n=e.GLOBE_ZOOM_THRESHOLD_MAX,i=0,a=1/0;for(;n-r>1e-6&&n>r;){const e=r+.5*(n-r),o=this.tileSize*Math.pow(2,e),s=this.getCameraToCenterDistance(this.projection,e,o),l=this.scaleZoom(s/(t*this.tileSize)),c=Math.abs(e-l);c<a&&(a=c,i=e),e<l?r=e:n=e}return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,r){const n=Math.min(t.x,r.x),i=Math.max(t.x,r.x),a=Math.min(t.y,r.y),o=Math.max(t.y,r.y);if(a<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.Point(n,a),new e.Point(i,o),new e.Point(n,o),new e.Point(i,a)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const r=this.rayIntersectionCoordinate(t);if(r.x<l||r.y<0||r.x>c||r.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,r){const n=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(n)+r;return n-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const t=function([t,r,n],i){const a=[t,r,n,1];e.transformMat4$1(a,a,i);const o=a[3]=Math.max(a[3],1e-6);return a[0]/=o,a[1]/=o,a[2]/=o,a}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}getCameraToCenterDistance(e,t=this.zoom,r=this.worldSize){const n=Gn(e,t,this.width,this.height,1024),i=e.pixelSpaceConversion(this.center.lat,r,n);return.5/Math.tan(.5*this._fov)*this.height*i}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function Yn(e,t){let r=!1,n=null;const i=()=>{n=null,r&&(e(),n=setTimeout(i,t),r=!1)};return()=>(r=!0,n||i(),n)}class Kn{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Yn(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const r=Jn(t);if(this._hashName){const t=this._hashName;let n=!1;const i=e.window.location.hash.slice(1).split("&").map((e=>{const i=e.split("=")[0];return i===t?(n=!0,`${i}=${r}`):e})).filter((e=>e));return n||i.push(`${t}=${r}`),`#${i.join("&")}`}return`#${r}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const r=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:r,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function Jn(e,t){const r=e.getCenter(),n=Math.round(100*e.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,i),o=Math.round(r.lng*a)/a,s=Math.round(r.lat*a)/a,l=e.getBearing(),c=e.getPitch();let u=t?`/${o}/${s}/${n}`:`${n}/${s}/${o}`;return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),u}const Qn={linearity:.3,easing:e.bezier(0,0,.3,1)},ei=e.extend({deceleration:2500,maxSpeed:1400},Qn),ti=e.extend({deceleration:20,maxSpeed:1400},Qn),ri=e.extend({deceleration:1e3,maxSpeed:360},Qn),ni=e.extend({deceleration:1e3,maxSpeed:90},Qn);class ii{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,r=e.exported.now();for(;t.length>0&&r-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)r.zoom+=e.zoomDelta||0,r.bearing+=e.bearingDelta||0,r.pitch+=e.pitchDelta||0,e.panDelta&&r.pan._add(e.panDelta),e.around&&(r.around=e.around),e.pinchAround&&(r.pinchAround=e.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(r.pan.mag()){const a=oi(r.pan.mag(),n,e.extend({},ei,t||{}));i.offset=r.pan.mult(a.amount/r.pan.mag()),i.center=this._map.transform.center,ai(i,a)}if(r.zoom){const e=oi(r.zoom,n,ti);i.zoom=this._map.transform.zoom+e.amount,ai(i,e)}if(r.bearing){const t=oi(r.bearing,n,ri);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),ai(i,t)}if(r.pitch){const e=oi(r.pitch,n,ni);i.pitch=this._map.transform.pitch+e.amount,ai(i,e)}if(i.zoom||i.bearing){const e=void 0===r.pinchAround?r.around:r.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function ai(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function oi(t,r,n){const{maxSpeed:i,linearity:a,deceleration:o}=n,s=e.clamp(t*a/(r/1e3),-i,i),l=Math.abs(s)/(o*a);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}class si extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,n,i={}){const a=f(r.getCanvasContainer(),n),o=r.unproject(a);super(t,e.extend({point:a,lngLat:o,originalEvent:n},i)),this._defaultPrevented=!1,this.target=r}}class li extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,n){const i="touchend"===t?n.changedTouches:n.touches,a=m(r.getCanvasContainer(),i),o=a.map((e=>r.unproject(e))),s=a.reduce(((e,t,r,n)=>e.add(t.div(n.length))),new e.Point(0,0));super(t,{points:a,point:s,lngLats:o,lngLat:r.unproject(s),originalEvent:n}),this._defaultPrevented=!1}}class ci extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class ui{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new ci(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new si(e.type,this._map,e))}mouseup(e){this._map.fire(new si(e.type,this._map,e))}preclick(t){const r=e.extend({},t);r.type="preclick",this._map.fire(new si(r.type,this._map,r))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new si(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new si(e.type,this._map,e))}mouseover(e){this._map.fire(new si(e.type,this._map,e))}mouseout(e){this._map.fire(new si(e.type,this._map,e))}touchstart(e){return this._firePreventable(new li(e.type,this._map,e))}touchmove(e){this._map.fire(new li(e.type,this._map,e))}touchend(e){this._map.fire(new li(e.type,this._map,e))}touchcancel(e){this._map.fire(new li(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class di{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new si(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new si(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hi{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const r=t,n=this._startPos,i=this._lastPos;if(!n||!i||i.equals(r)||!this._box&&r.dist(n)<this._clickTolerance)return;this._lastPos=r,this._box||(this._box=a("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const o=Math.min(n.x,r.x),s=Math.max(n.x,r.x),l=Math.min(n.y,r.y),c=Math.max(n.y,r.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${o}px,${l}px)`,this._box.style.width=s-o+"px",this._box.style.height=c-l+"px")}))}mouseupWindow(t,r){if(!this._active)return;const n=this._startPos,i=r;if(n&&0===t.button){if(this.reset(),p(),n.x!==i.x||n.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(n,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),d(),delete this._startPos,delete this._lastPos}_fireEvent(t,r){return this._map.fire(new e.Event(t,{originalEvent:r}))}}function pi(e,t){const r={};for(let n=0;n<e.length;n++)r[e[n].identifier]=t[n];return r}class fi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,r,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),n.length===this.numTouches&&(this.centroid=function(t){const r=new e.Point(0,0);for(const e of t)r._add(e);return r.div(t.length)}(r),this.touches=pi(n,r)))}touchmove(e,t,r){if(this.aborted||!this.centroid)return;const n=pi(r,t);for(const i in this.touches){const e=n[i];(!e||e.dist(this.touches[i])>30)&&(this.aborted=!0)}}touchend(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class mi{constructor(e){this.singleTap=new fi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,r){this.singleTap.touchstart(e,t,r)}touchmove(e,t,r){this.singleTap.touchmove(e,t,r)}touchend(e,t,r){const n=this.singleTap.touchend(e,t,r);if(n){const t=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(n)<30;if(t&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class gi{constructor(){this._zoomIn=new mi({numTouches:1,numTaps:2}),this._zoomOut=new mi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}touchmove(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}touchend(e,t,r){const n=this._zoomIn.touchend(e,t,r),i=this._zoomOut.touchend(e,t,r);return n?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(n)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yi={0:1,2:2};class bi{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const r=g(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}mousemoveWindow(e,t){const r=this._lastPoint;if(r)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const r=yi[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(r,t)}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&p(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _i extends bi{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class vi extends bi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=.8*(t.x-e.x);if(r)return this._active=!0,{bearingDelta:r}}contextmenu(e){e.preventDefault()}}class xi extends bi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=-.5*(t.y-e.y);if(r)return this._active=!0,{pitchDelta:r}}contextmenu(e){e.preventDefault()}}class wi{constructor(t,r){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,r){return this._calculateTransform(e,t,r)}touchmove(t,r,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,r,n)}}touchend(e,t,r){this._calculateTransform(e,t,r),this._active&&r.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,r,n){n.length>0&&(this._active=!0);const i=pi(n,r),a=new e.Point(0,0),o=new e.Point(0,0);let s=0;for(const e in i){const t=i[e],r=this._touches[e];r&&(a._add(t),o._add(t.sub(r)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!o.mag())return;const l=o.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=a("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class ki{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,r){return{}}touchstart(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,r){const n=this._firstTwoTouches;if(!n)return;e.preventDefault();const[i,a]=n,o=Si(r,t,i),s=Si(r,t,a);if(!o||!s)return;const l=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],l,e)}touchend(e,t,r){if(!this._firstTwoTouches)return;const[n,i]=this._firstTwoTouches,a=Si(r,t,n),o=Si(r,t,i);a&&o||(this._active&&p(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Si(e,t,r){for(let n=0;n<e.length;n++)if(e[n].identifier===r)return t[n]}function Ti(e,t){return Math.log(e/t)/Math.LN2}class Ai extends ki{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Ti(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ti(this._distance,r),pinchAround:t}}}function Ci(e,t){return 180*e.angleWith(t)/Math.PI}class Ei extends ki{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const r=this._vector;if(this._vector=e[0].sub(e[1]),r&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ci(this._vector,r),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,r=this._startVector;if(!r)return!1;const n=Ci(e,r);return Math.abs(n)<t}}function Ii(e){return Math.abs(e.y)>Math.abs(e.x)}class Pi extends ki{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Ii(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,r,n){const i=this._lastPoints;if(!i)return;const a=t[0].sub(i[0]),o=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&n.touches.length<3||(this._valid=this.gestureBeginsVertically(a,o,n.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(a.y+o.y)/2*-.5})}gestureBeginsVertically(e,t,r){if(void 0!==this._valid)return this._valid;const n=e.mag()>=2,i=t.mag()>=2;if(!n&&!i)return;if(!n||!i)return null==this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const a=e.y>0==t.y>0;return Ii(e)&&Ii(t)&&a}}const Mi={panStep:100,bearingStep:15,pitchStep:10};class Di{constructor(){const e=Mi;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,r=0,n=0,i=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?n=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,n=0),{cameraAnimation:o=>{const s=o.getZoom();o.easeTo({duration:300,easeId:"keyboardHandler",easing:zi,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:o.getBearing()+r*this._bearingStep,pitch:o.getPitch()+n*this._pitchStep,offset:[-i*this._panStep,-a*this._panStep],center:o.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function zi(e){return e*(2-e)}const Li=4.000244140625;class Ri{constructor(t,r){this._map=t,this._el=t.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let r=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const n=e.exported.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==r&&r%Li==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),t.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=t,this._delta-=r,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=f(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const r=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Li?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);const i=r(),a=Math.pow(2,i),o="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):a;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(o*n))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:r(),i=this._startZoom,a=this._easing;let o,s=!1;if("wheel"===this._type&&i&&a){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),r=a(t);o=e.number(i,n,r),t<1?this._frameId||(this._frameId=!0):s=!0}else o=n,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:o-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let r=e.ease;if(this._prevEase){const t=this._prevEase,n=(e.exported.now()-t.start)/t.duration,i=t.easing(n+.01)-t.easing(n),a=.27/Math.sqrt(i*i+1e-4)*.01,o=Math.sqrt(.0729-a*a);r=e.bezier(a,o,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:r},r}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=a("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Bi{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Oi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:r.getZoom()+(e.shiftKey?-1:1),around:r.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fi{constructor(){this._tap=new mi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,r){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=t[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(e,t,r))}touchmove(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const n=t[0],i=n.y-this._swipePoint.y;return this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,r)}touchend(e,t,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(e,t,r)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ui{constructor(e,t,r){this._el=e,this._mousePan=t,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ni{constructor(e,t,r){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ji{constructor(e,t,r,n){this._el=e,this._touchZoom=t,this._touchRotate=r,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Vi=e=>e.zoom||e.drag||e.pitch||e.rotate;class Wi extends e.Event{}class qi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,r){const n=e.sub([],r,t);this.radius=e.length(n[2]<0?e.div([],n,this.constants):[n[0],n[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const r=e.scale$2([],t,this.radius);if(r[2]>0){const t=e.scale$2([],[0,0,1],e.dot(r,[0,0,1])),n=e.scale$2([],e.normalize([],[r[0],r[1],0]),this.radius),i=e.add([],r,e.scale$2([],e.sub([],e.add([],n,t),r),2));r[0]=i[0],r[1]=i[1]}return r}}function Gi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class $i{constructor(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ii(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new qi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[i,a,o]of this._listeners)i.addEventListener(a,i===e.window.document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[t,r,n]of this._listeners)t.removeEventListener(r,t===e.window.document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const t=this._map,r=t.getCanvasContainer();this._add("mapEvent",new ui(t,e));const n=t.boxZoom=new hi(t,e);this._add("boxZoom",n);const i=new gi,a=new Oi;t.doubleClickZoom=new Bi(a,i),this._add("tapZoom",i),this._add("clickZoom",a);const o=new Fi;this._add("tapDragZoom",o);const s=t.touchPitch=new Pi(t);this._add("touchPitch",s);const l=new vi(e),c=new xi(e);t.dragRotate=new Ni(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new _i(e),d=new wi(t,e);t.dragPan=new Ui(r,u,d),this._add("mousePan",u),this._add("touchPan",d,["touchZoom","touchRotate"]);const h=new Ei,p=new Ai;t.touchZoomRotate=new ji(r,p,h,o),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new di(t));const f=t.scrollZoom=new Ri(t,this);this._add("scrollZoom",f,["mousePan"]);const m=t.keyboard=new Di;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[g]&&t[g].enable(e[g])}_add(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,r){for(const n in e)if(n!==r&&(!t||t.indexOf(n)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const r of e)this._el.contains(r.target)&&t.push(r);return t}handleEvent(e,t){this._updatingCamera=!0;const r="renderFrame"===e.type,n=r?void 0:e,i={needsRenderFrame:!1},a={},o={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?m(this._el,s):r?void 0:f(this._el,e);for(const{handlerName:d,handler:h,allowed:p}of this._handlers){if(!h.isEnabled())continue;let r;this._blockedByActive(o,p,d)?h.reset():h[t||e.type]&&(r=h[t||e.type](e,l,s),this.mergeHandlerResult(i,a,r,d,n),r&&r.needsRenderFrame&&this._triggerRenderFrame()),(r||h.isActive())&&(o[d]=h)}const c={};for(const d in this._previousActiveHandlers)o[d]||(c[d]=n);this._previousActiveHandlers=o,(Object.keys(c).length||Gi(i))&&(this._changes.push([i,a,c]),this._triggerRenderFrame()),(Object.keys(o).length||Gi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,r,n,i,a){if(!n)return;e.extend(t,n);const o={handlerName:i,originalEvent:n.originalEvent||a};void 0!==n.zoomDelta&&(r.zoom=o),void 0!==n.panDelta&&(r.drag=o),void 0!==n.pitchDelta&&(r.pitch=o),void 0!==n.bearingDelta&&(r.rotate=o)}_applyChanges(){const t={},r={},n={};for(const[i,a,o]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(r,a),e.extend(n,o);this._updateMapTransform(t,r,n),this._changes=[]}_updateMapTransform(t,r,n){const i=this._map,a=i.transform,o=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Gi(t)){const e=a.zoom;a.cameraElevationReference="sea",a.recenterOnTerrain(),a.cameraElevationReference="ground",e!==a.zoom&&this._map._update(!0)}if(a._isCameraConstrained&&i._stop(!0),!Gi(t))return void this._fireEvents(r,n,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:d,aroundCoord:h,pinchAround:p}=t;a._isCameraConstrained&&(l>0&&(l=0),a._isCameraConstrained=!1),void 0!==p&&(d=p),(l||(e=>r[e]&&!this._eventsInProgress[e])("drag"))&&d&&(this._dragOrigin=o(a.pointCoordinate3D(d)),this._trackingEllipsoid.setup(a._camera.position,this._dragOrigin)),a.cameraElevationReference="sea",i._stop(!0),d=d||i.transform.centerPoint,c&&(a.bearing+=c),u&&(a.pitch+=u),a._updateCameraState();const f=[0,0,0];if(s)if("mercator"===a.projection.name){const e=this._trackingEllipsoid.projectRay(a.screenPointToMercatorRay(d).dir),t=this._trackingEllipsoid.projectRay(a.screenPointToMercatorRay(d.sub(s)).dir);f[0]=t[0]-e[0],f[1]=t[1]-e[1]}else{const t=a.pointCoordinate(d);if("globe"===a.projection.name){s=s.rotate(-a.angle);const r=a._pixelsPerMercatorPixel/a.worldSize;f[0]=-s.x*e.mercatorScale(e.latFromMercatorY(t.y))*r,f[1]=-s.y*e.mercatorScale(a.center.lat)*r}else{const e=a.pointCoordinate(d.sub(s));t&&e&&(f[0]=e.x-t.x,f[1]=e.y-t.y)}}const m=a.zoom,g=[0,0,0];if(l){const t=o(h||a.pointCoordinate3D(d)),r={dir:e.normalize([],e.sub([],t,a._camera.position))};if(r.dir[2]<0){const n=a.zoomDeltaToMovement(t,l);e.scale$2(g,r.dir,n)}}const y=e.add(f,f,g);a._translateCameraConstrained(y),l&&Math.abs(a.zoom-m)>1e-4&&a.recenterOnTerrain(),a.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(r,n,!0)}_fireEvents(t,r,n){const i=Vi(this._eventsInProgress),a=Vi(t),o={};for(const e in t){const{originalEvent:r}=t[e];this._eventsInProgress[e]||(o[`${e}start`]=r),this._eventsInProgress[e]=t[e]}!i&&a&&this._fireEvent("movestart",a.originalEvent);for(const e in o)this._fireEvent(e,o[e]);a&&this._fireEvent("move",a.originalEvent);for(const e in t){const{originalEvent:r}=t[e];this._fireEvent(e,r)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:n}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=r[t]||n,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=Vi(this._eventsInProgress);if(n&&(i||a)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),r=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(r(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),r(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,r){this._map.fire(new e.Event(t,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new Wi("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Hi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Zi extends e.Evented{constructor(t,r){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=r.bearingSnap,this._respectPrefersReducedMotion=!1!==r.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,r,n){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},r),n)}panTo(t,r,n){return this.easeTo(e.extend({center:t},r),n)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,r,n){return this.easeTo(e.extend({zoom:t},r),n)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,r,n){return this.easeTo(e.extend({bearing:t},r),n)}resetNorth(t,r){return this.rotateTo(0,e.extend({duration:1e3},t),r),this}resetNorthPitch(t,r){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),r),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,r){t=e.LngLatBounds.convert(t);const n=r&&r.bearing||0,i=r&&r.pitch||0,a=t.getNorthWest(),o=t.getSouthEast();return this._cameraForBounds(this.transform,a,o,n,i,r)}_extendCameraOptions(t){const r={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(r,t.padding),t}_minimumAABBFrustumDistance(e,t){const r=t.max[0]-t.min[0],n=t.max[1]-t.min[1];return r/n>e.aspect?r/(2*Math.tan(.5*e.fovX)*e.aspect):n/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,r,n,i,a,o){const s=t.clone(),l=this._extendCameraOptions(o);s.bearing=i,s.pitch=a;const c=e.LngLat.convert(r),u=e.LngLat.convert(n),d=.5*(c.lat+u.lat),h=.5*(c.lng+u.lng),p=e.latLngToECEF(d,h),f=e.normalize([],p),m=e.normalize([],e.cross([],f,[0,1,0])),g=e.cross([],m,f),y=[m[0],m[1],m[2],0,g[0],g[1],g[2],0,f[0],f[1],f[2],0,0,0,0,1],b=[p,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(u.lat,c.lng),e.latLngToECEF(u.lat,u.lng),e.latLngToECEF(c.lat,u.lng),e.latLngToECEF(d,c.lng),e.latLngToECEF(d,u.lng),e.latLngToECEF(c.lat,h),e.latLngToECEF(u.lat,h)];let _=e.Aabb.fromPoints(b.map((t=>[e.dot(m,t),e.dot(g,t),e.dot(f,t)])));const v=e.transformMat4([],_.center,y);0===e.squaredLength(v)&&e.set(v,0,0,1),e.normalize(v,v),e.scale$2(v,v,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(v);const x=s.getWorldToCameraMatrix(),w=e.invert(new Float64Array(16),x);_=e.Aabb.applyTransform(_,e.multiply([],x,y)),e.transformMat4(v,v,x);const k=.5*(_.max[2]-_.min[2]),S=this._minimumAABBFrustumDistance(s,_),T=e.scale$2([],[0,0,1],k),A=e.add(T,v,T),C=S+(0===s.pitch?0:e.distance(v,A)),E=s.globeCenterInViewSpace,I=e.sub([],v,[E[0],E[1],E[2]]);e.normalize(I,I),e.scale$2(I,I,C);const P=e.add([],v,I);e.transformMat4(P,P,w);const M=e.earthRadius/e.GLOBE_RADIUS,D=e.length(P),z=e.mercatorZfromAltitude(Math.max(D*M-e.earthRadius,Number.EPSILON),0),L=Math.min(s.zoomFromMercatorZAdjusted(z),l.maxZoom);return L>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=L,this._cameraForBounds(s,r,n,i,a,o)):{center:s.center,zoom:L,bearing:i,pitch:a}}queryTerrainElevation(t,r){const n=this.transform.elevation;return n?(r=e.extend({},{exaggerated:!0},r),n.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,r.exaggerated)):null}_cameraForBounds(t,r,n,i,a,o){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,r,n,i,a,o);const s=t.clone(),l=this._extendCameraOptions(o),c=s.padding;s.bearing=i,s.pitch=a;const u=e.LngLat.convert(r),d=e.LngLat.convert(n),h=new e.LngLat(u.lng,d.lat),p=new e.LngLat(d.lng,u.lat),f=s.project(u),m=s.project(d),g=this.queryTerrainElevation(u),y=this.queryTerrainElevation(d),b=this.queryTerrainElevation(h),_=this.queryTerrainElevation(p),v=[[f.x,f.y,Math.min(g||0,y||0,b||0,_||0)],[m.x,m.y,Math.max(g||0,y||0,b||0,_||0)]];let x=e.Aabb.fromPoints(v);const w=s.getWorldToCameraMatrix(),k=e.invert(new Float64Array(16),w);x=e.Aabb.applyTransform(x,w);const S=e.sub([],x.max,x.min),T=c.left||0,A=c.right||0,C=c.bottom||0,E=c.top||0,{left:I,right:P,top:M,bottom:D}=l.padding,z=.5*(T+A),L=.5*(E+C),R=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(T+A+I+P))/S[0],(s.height-(C+E+D+M))/S[1])),l.maxZoom),B=s.scale/s.zoomScale(R);x=new e.Aabb([x.min[0]-(I+z)*B,x.min[1]-(D+L)*B,x.min[2]],[x.max[0]+(P+z)*B,x.max[1]+(M+L)*B,x.max[2]]);const O=.5*S[2],F=this._minimumAABBFrustumDistance(s,x),U=[0,0,1,0];e.transformMat4$1(U,U,w),e.normalize$2(U,U);const N=e.scale$2([],U,F+O),j=e.add([],x.center,N),V=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.Point(l.offset.x,l.offset.y):e.Point.convert(l.offset)).rotate(-e.degToRad(i));x.center[0]-=V.x*B,x.center[1]+=V.y*B,e.transformMat4(x.center,x.center,k),e.transformMat4(j,j,k);const W=[x.center[0],x.center[1],j[2]*s.pixelsPerMeter];e.scale$2(W,W,1/s.worldSize);const q=e.lngFromMercatorX(W[0]),G=e.latFromMercatorY(W[1]),$=Math.min(s._zoomFromMercatorZ(W[2]),l.maxZoom),H=new e.LngLat(q,G);return s.mercatorFromTransition&&$<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=$,this._cameraForBounds(s,r,n,i,a,o)):{center:H,zoom:$,bearing:i,pitch:a}}fitBounds(e,t,r){const n=this.cameraForBounds(e,t);return this._fitInternal(n,t,r)}fitScreenCoordinates(t,r,n,i,a){const o=e.Point.convert(t),s=e.Point.convert(r),l=new e.Point(Math.min(o.x,s.x),Math.min(o.y,s.y)),c=new e.Point(Math.max(o.x,s.x),Math.max(o.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(o,s))return this;const u=this.transform.pointLocation3D(l),d=this.transform.pointLocation3D(c),h=this.transform.pointLocation3D(new e.Point(l.x,c.y)),p=this.transform.pointLocation3D(new e.Point(c.x,l.y)),f=[Math.min(u.lng,d.lng,h.lng,p.lng),Math.min(u.lat,d.lat,h.lat,p.lat)],m=[Math.max(u.lng,d.lng,h.lng,p.lng),Math.max(u.lat,d.lat,h.lat,p.lat)],g=i&&i.pitch?i.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,f,m,n,g,i);return this._fitInternal(y,i,a)}_fitInternal(t,r,n){return t?(delete(r=e.extend(t,r)).padding,r.linear?this.easeTo(r,n):this.flyTo(r,n)):this}jumpTo(t,r){this.stop();const n=t.preloadOnly?this.transform.clone():this.transform;let i=!1,a=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(i=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=e.LngLat.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(a=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),null==t.padding||n.isPaddingEqual(t.padding)||(n.padding=t.padding),t.preloadOnly?(this._preloadTiles(n),this):(this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),i&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),a&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),o&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Hi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,r){const n=this.transform;if(!n.projection.supportsFreeCamera)return e.warnOnce(Hi),this;this.stop();const i=n.zoom,a=n.pitch,o=n.bearing;n.setFreeCameraOptions(t);const s=i!==n.zoom,l=a!==n.pitch,c=o!==n.bearing;return this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),s&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),c&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),l&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)),this}easeTo(t,r){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const n=this.transform,i=this.getZoom(),a=this.getBearing(),o=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,u="pitch"in t?+t.pitch:o,d="padding"in t?t.padding:n.padding,h=e.Point.convert(t.offset);let p,f,m;if("globe"===n.projection.name){const r=e.MercatorCoordinate.fromLngLat(n.center),i=h.rotate(-n.angle);r.x+=i.x/n.worldSize,r.y+=i.y/n.worldSize;const a=r.toLngLat(),o=e.LngLat.convert(t.center||a);this._normalizeCenter(o),p=n.centerPoint.add(i),f=new e.Point(r.x,r.y).mult(n.worldSize),m=new e.Point(e.mercatorXfromLng(o.lng),e.mercatorYfromLat(o.lat)).mult(n.worldSize).sub(f)}else{p=n.centerPoint.add(h);const r=n.pointLocation(p),i=e.LngLat.convert(t.center||r);this._normalizeCenter(i),f=n.project(r),m=n.project(i).sub(f)}const g=n.zoomScale(l-i);let y,b;t.around&&(y=e.LngLat.convert(t.around),b=n.locationPoint(y));const _=this._zooming||l!==i,v=this._rotating||a!==c,x=this._pitching||u!==o,w=!n.isPaddingEqual(d),k=n=>k=>{if(_&&(n.zoom=e.number(i,l,k)),v&&(n.bearing=e.number(a,c,k)),x&&(n.pitch=e.number(o,u,k)),w&&(n.interpolatePadding(s,d,k),p=n.centerPoint.add(h)),y)n.setLocationAtPoint(y,b);else{const e=n.zoomScale(n.zoom-i),t=l>i?Math.min(2,g):Math.max(.5,g),r=Math.pow(t,1-k),a=n.unproject(f.add(m.mult(k*r)).mult(e));n.setLocationAtPoint(n.renderWorldCopies?a.wrap():a,p)}return t.preloadOnly||this._fireMoveEvents(r),n};if(t.preloadOnly){const e=this._emulate(k,t.duration,n);return this._preloadTiles(e),this}const S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=_,this._rotating=v,this._pitching=x,this._padding=w,this._easeId=t.easeId,this._prepareEase(r,t.noMoveStart,S),this._ease(k(n),(e=>{n.recenterOnTerrain(),this._afterEase(r,e)}),t),this}_prepareEase(t,r,n={}){this._moving=!0,this.transform.cameraElevationReference="sea",r||n.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!n.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!n.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!n.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,r){if(this._easeId&&r&&this._easeId===r)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const n=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,r){if(this._prefersReducedMotion(t)){const n=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const n=this.transform,i=this.getZoom(),a=this.getBearing(),o=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,n.minZoom,n.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,u="pitch"in t?+t.pitch:o,d="padding"in t?t.padding:n.padding,h=n.zoomScale(l-i),p=e.Point.convert(t.offset);let f=n.centerPoint.add(p);const m=n.pointLocation(f),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=n.project(m),b=n.project(g).sub(y);let _=t.curve;const v=Math.max(n.width,n.height),x=v/h,w=b.mag();if("minZoom"in t){const r=e.clamp(Math.min(t.minZoom,i,l),n.minZoom,n.maxZoom),a=v/n.zoomScale(r-i);_=Math.sqrt(a/w*2)}const k=_*_;function S(e){const t=(x*x-v*v+(e?-1:1)*k*k*w*w)/(2*(e?x:v)*k*w);return Math.log(Math.sqrt(t*t+1)-t)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function A(e){return(Math.exp(e)+Math.exp(-e))/2}const C=S(0);let E=function(e){return A(C)/A(C+_*e)},I=function(e){return v*((A(C)*(T(t=C+_*e)/A(t))-T(C))/k)/w;var t},P=(S(1)-C)/_;if(Math.abs(w)<1e-6||!isFinite(P)){if(Math.abs(v-x)<1e-6)return this.easeTo(t,r);const e=x<v?-1:1;P=Math.abs(Math.log(x/v))/_,I=function(){return 0},E=function(t){return Math.exp(e*_*t)}}t.duration="duration"in t?+t.duration:1e3*P/("screenSpeed"in t?+t.screenSpeed/_:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const M=a!==c,D=u!==o,z=!n.isPaddingEqual(d),L=n=>h=>{const m=h*P,_=1/E(m);n.zoom=1===h?l:i+n.scaleZoom(_),M&&(n.bearing=e.number(a,c,h)),D&&(n.pitch=e.number(o,u,h)),z&&(n.interpolatePadding(s,d,h),f=n.centerPoint.add(p));const v=1===h?g:n.unproject(y.add(b.mult(I(m))).mult(_));return n.setLocationAtPoint(n.renderWorldCopies?v.wrap():v,f),n._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(r),n};if(t.preloadOnly){const e=this._emulate(L,t.duration,n);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=M,this._pitching=D,this._padding=z,this._prepareEase(r,!1),this._ease(L(n),(()=>this._afterEase(r)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,r,n){!1===n.animate||0===n.duration?(t(1),r()):(this._easeStart=e.exported.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),r=this._onEaseFrame;r&&r(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,r){t=e.wrap(t,-180,180);const n=Math.abs(t-r);return Math.abs(t-360-r)<n&&(t-=360),Math.abs(t+360-r)<n&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(t&&t.essential)}_emulate(e,t,r){const n=Math.ceil(15*t/1e3),i=[],a=e(r.clone());for(let o=0;o<=n;o++){const e=a(o/n);i.push(e.clone())}return i}}class Xi{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=a("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=a("button","mapboxgl-ctrl-attrib-button",this._container),a("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const r=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute("aria-label",r),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const n=r.reduce(((e,t,n)=>(t.value&&(e+=`${t.key}=${t.value}${n<r.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${n}#${Jn(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const n in t){const r=t[n];if(r.used){const t=r.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,r)=>{for(let n=r+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Yi{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=a("div","mapboxgl-ctrl");const t=a("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const r=e[t].getSource();if(r.hasOwnProperty("mapbox_logo")&&!r.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Ki{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,r=t?this._queue.concat(t):this._queue;for(const n of r)if(n.id===e)return void(n.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const r of t)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ji(t,r,n){if(t=new e.LngLat(t.lng,t.lat),r){const i=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=360*Math.ceil(Math.abs(t.lng-n.center.lng)/360),s=n.locationPoint(t).distSqr(r),l=r.x<0||r.y<0||r.x>n.width||r.y>n.height;n.locationPoint(i).distSqr(r)<s&&(l||Math.abs(i.lng-n.center.lng)<o)?t=i:n.locationPoint(a).distSqr(r)<s&&(l||Math.abs(a.lng-n.center.lng)<o)&&(t=a)}for(;Math.abs(t.lng-n.center.lng)>180;){const e=n.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=n.width&&e.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}const Qi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ea extends e.Evented{constructor(t,r){if(super(),(t instanceof e.window.HTMLElement||r)&&(t=e.extend({element:t},r)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=a("div");const r=41,n=27,i=o("svg",{display:"block",height:r*this._scale+"px",width:n*this._scale+"px",viewBox:`0 0 ${n} ${r}`},this._element),s=o("radialGradient",{id:"shadowGradient"},o("defs",{},i));o("stop",{offset:"10%","stop-opacity":.4},s),o("stop",{offset:"100%","stop-opacity":.05},s),o("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),o("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),o("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),o("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const n=this._element.classList;for(const e in Qi)n.remove(`mapboxgl-marker-anchor-${e}`);n.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,r=13.5,n=Math.sqrt(Math.pow(r,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[n,-1*(t-r+n)],"bottom-right":[-n,-1*(t-r+n)],left:[r,-1*(t-r)],right:[-r,-1*(t-r)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const r=e.unproject(t),n=e.getFreeCameraOptions();if(!n.position)return!1;const i=n.position.toLngLat();return i.distanceTo(r)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const r=this._pos;if(!r||r.x<0||r.x>t.transform.width||r.y<0||r.y>t.transform.height)return void this._clearFadeTimer();const n=t.unproject(r);let i;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?i=0:(i=1-t._queryFogOpacity(n),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${e.x}px,${e.y}px)\n            ${Qi[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${t.x}px,${t.y}px)\n        `}_calculateXYTransform(){const t=this._pos,r=this._map,n=this.getPitchAlignment();if(!r||!t||"map"!==n)return"";if(!r._showingGlobe()){const e=r.getPitch();return e?`rotateX(${e}deg)`:""}const i=e.radToDeg(e.globeTiltAtLngLat(r.transform,this._lngLat)),a=t.sub(e.globeCenterToScreenPoint(r.transform)),o=Math.abs(a.x)+Math.abs(a.y);if(0===o)return"";const s=i/o;return`rotateX(${-a.y*s}deg) rotateY(${a.x*s}deg)`}_calculateZTransform(){const t=this._pos,r=this._map;if(!r||!t)return"";let n=0;const i=this.getRotationAlignment();if("map"===i)if(r._showingGlobe()){const t=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);n=e.radToDeg(Math.atan2(i.y,i.x))-90}else n=-r.getBearing();else if("horizon"===i){const i=e.smoothstep(4,6,r.getZoom()),a=e.globeCenterToScreenPoint(r.transform);a.y+=i*r.transform.height;const o=t.sub(a),s=e.radToDeg(Math.atan2(o.y,o.x));n=(s>90?s-270:s+90)*(1-i)}return n+=this._rotation,n?`rotateZ(${n}deg)`:""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=Ji(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){const r=this._map;if(!r)return;const n=this._pointerdownPos,i=this._positionDelta;if(n&&i){if(!this._isDragging){const e=this._clickTolerance||r._clickTolerance;if(t.point.dist(n)<e)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=r.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,r=this._pos;t&&r&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(r),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ta={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ra=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function na(t=new e.Point(0,0),r="bottom"){if("number"==typeof t){const n=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(r){case"top":return new e.Point(0,t);case"top-left":return new e.Point(n,n);case"top-right":return new e.Point(-n,n);case"bottom":return new e.Point(0,-t);case"bottom-left":return new e.Point(n,-n);case"bottom-right":return new e.Point(-n,-n);case"left":return new e.Point(t,0);case"right":return new e.Point(-t,0)}return new e.Point(0,0)}return t instanceof e.Point||Array.isArray(t)?e.Point.convert(t):e.Point.convert(t[r]||[0,0])}class ia{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const r=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-r)+this._end*r}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,r){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+r}}const aa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},oa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},sa={showCompass:!0,showZoom:!0,visualizePitch:!1};class la{constructor(t,r,n=!1){this._clickTolerance=10,this.element=r,this.mouseRotate=new vi({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,n&&(this.mousePitch=new xi({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u()}move(e,t){const r=this.map,n=this.mouseRotate.mousemoveWindow(e,t),i=n&&n.bearingDelta;if(i&&r.setBearing(r.getBearing()+i),this.mousePitch){const n=this.mousePitch.mousemoveWindow(e,t),i=n&&n.pitchDelta;i&&r.setPitch(r.getPitch()+i)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){d(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),f(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,f(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=m(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const ca={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},ua={maxWidth:100,unit:"metric"},da={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},ha={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Zi{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},oa,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Xn(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new Ki,this._domRenderTaskQueue=new Ki,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},aa,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ia(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new $i(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Kn("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Xi({customAttribution:t.customAttribution})),this._logoControl=new Yi,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,r){if(void 0===r&&(r=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[r];return-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(t);return r>-1&&this._controls.splice(r,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const r=!this._moving;return r&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),r&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>"auto"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const r of this._controls)r._setLanguage&&r._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,r=t.projection.name;let n;"globe"===r&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),n=!0):"mercator"===r&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),n=!0),n&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let r;if(r="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),r){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,r){if("mouseenter"===e||"mouseover"===e){let n=!1;const i=i=>{const a=t.filter((e=>this.getLayer(e))),o=a.length?this.queryRenderedFeatures(i.point,{layers:a}):[];o.length?n||(n=!0,r.call(this,new si(e,this,i.originalEvent,{features:o}))):n=!1},a=()=>{n=!1};return{layers:new Set(t),listener:r,delegates:{mousemove:i,mouseout:a}}}if("mouseleave"===e||"mouseout"===e){let n=!1;const i=i=>{const a=t.filter((e=>this.getLayer(e)));(a.length?this.queryRenderedFeatures(i.point,{layers:a}):[]).length?n=!0:n&&(n=!1,r.call(this,new si(e,this,i.originalEvent)))},a=t=>{n&&(n=!1,r.call(this,new si(e,this,t.originalEvent)))};return{layers:new Set(t),listener:r,delegates:{mousemove:i,mouseout:a}}}{const n=e=>{const n=t.filter((e=>this.getLayer(e))),i=n.length?this.queryRenderedFeatures(e.point,{layers:n}):[];i.length&&(e.features=i,r.call(this,e),delete e.features)};return{layers:new Set(t),listener:r,delegates:{[e]:n}}}}on(e,t,r){if(void 0===r)return super.on(e,t);Array.isArray(t)||(t=[t]);const n=this._createDelegatedListener(e,t,r);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n);for(const i in n.delegates)this.on(i,n.delegates[i]);return this}once(e,t,r){if(void 0===r)return super.once(e,t);Array.isArray(t)||(t=[t]);const n=this._createDelegatedListener(e,t,r);for(const i in n.delegates)this.once(i,n.delegates[i]);return this}off(e,t,r){if(void 0===r)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const n=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[e]:void 0;return i&&(e=>{for(let i=0;i<e.length;i++){const a=e[i];if(a.listener===r&&n(a.layers,t)){for(const e in a.delegates)this.off(e,a.delegates[e]);return e.splice(i,1),this}}})(i),this}queryRenderedFeatures(t,r){return this.style?(void 0!==r||void 0===t||t instanceof e.Point||Array.isArray(t)||(r=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],r=r||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}isPointOnSurface(t){const{name:r}=this.transform.projection;return"globe"!==r&&"mercator"!==r&&e.warnOnce(`${r} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(e.Point.convert(t))}setStyle(t,r){return!1!==(r=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&r.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(t,r))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Kt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Kt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,r){if("string"==typeof t){const n=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(n,e.ResourceType.Style);e.getJSON(i,((t,n)=>{t?this.fire(new e.ErrorEvent(t)):n&&this._updateDiff(n,r)}))}else"object"==typeof t&&this._updateDiff(t,r)}_updateDiff(t,r){try{this.style.setState(t)&&this._update(!0)}catch(n){e.warnOnce(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(t,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const r=e[t]._tiles;for(const e in r){const t=r[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,r){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,r)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,r,{pixelRatio:n=1,sdf:i=!1,stretchX:a,stretchY:o,content:s}={}){if(this._lazyInitEmptyStyle(),r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap){const{width:l,height:c,data:u}=e.exported.getImageData(r);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:n,stretchX:a,stretchY:o,content:s,sdf:i,version:0})}else if(void 0===r.width||void 0===r.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=r,u=r;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:n,stretchX:a,stretchY:o,content:s,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}}updateImage(t,r){const n=this.style.getImage(t);if(!n)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap?e.exported.getImageData(r):r,{width:a,height:o}=i;void 0!==a&&void 0!==o?a===n.data.width&&o===n.data.height?(n.data.replace(i.data,!(r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap)),this.style.updateImage(t,n)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${a}, ${o})\n                must be that same as the previous version of the image\n                (${n.data.width}, ${n.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,r){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,n)=>{r(t,n instanceof e.window.HTMLImageElement?e.exported.getImageData(n):n)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}setFilter(e,t,r={}){return this.style.setFilter(e,t,r),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,r,n={}){return this.style.setPaintProperty(e,t,r,n),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,r,n={}){return this.style.setLayoutProperty(e,t,r,n),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,r=this._container.getBoundingClientRect().height||300;let n,i,a,o=this._container;for(;o&&(!i||!a);){const t=e.window.getComputedStyle(o).transform;t&&"none"!==t&&(n=t.match(/matrix.*\((.+)\)/)[1].split(", "),n[0]&&"0"!==n[0]&&"1"!==n[0]&&(i=n[0]),n[3]&&"0"!==n[3]&&"1"!==n[3]&&(a=n[3])),o=o.parentElement}this._containerWidth=i?Math.abs(t/i):t,this._containerHeight=a?Math.abs(r/a):r}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=a("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=a("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=a("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const r=this._controlContainer=a("div","mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{n[e]=a("div",`mapboxgl-ctrl-${e}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,r){const n=e.exported.devicePixelRatio||1;this._canvas.width=n*Math.ceil(t),this._canvas.height=n*Math.ceil(r),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${r}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._useWebGL2&&this._canvas.getContext("webgl2",t),i=n||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);i?(this._useWebGL2&&!n&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(i,!0),this.painter=new Bn(i,this.transform,!!n),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(i)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let r;const n=this.painter.context.extTimerQuery,i=e.exported.now();if(this.listens("gpu-timing-frame")&&(r=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const a=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,r=this.transform.pitch,n=e.exported.now(),i=new e.EvaluationParameters(t,{now:n,fadeDuration:a,pitch:r,transition:this.style.getTransition()});this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let o=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),o=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):o=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){const t=e.exported.now()-i;n.endQueryEXT(n.TIME_ELAPSED_EXT,r),setTimeout((()=>{const a=n.getQueryObjectEXT(r,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:a})),e.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:a}})}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const r=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:r}))}),50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const r=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:r}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||o;if(s||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(o=this._updateAverageElevation(i,!0)),o)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e,t=!1){const r=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let n=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(n)?n=0:this._averageElevationLastSampledAt=e;const a=Math.abs(t-n);if(a>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(n),r(n);this._averageElevation.easeTo(n,e,300)}else if(a>1e-4)return this._averageElevation.jumpTo(n),r(n)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Yi&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const r=this.painter.context.gl,n=r.createFramebuffer();function i(e){r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);const t=new Uint8Array(r.drawingBufferWidth*r.drawingBufferHeight*4);return r.readPixels(0,0,r.drawingBufferWidth,r.drawingBufferHeight,r.RGBA,r.UNSIGNED_BYTE,t),t}return r.bindFramebuffer(r.FRAMEBUFFER,n),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,r){let n=r[1]-r[0];const i=e.length/4;for(let a=0;a<t.length;a++){const o=t[a];let s=0;for(let t=0;t<o.length;t+=4)o[t]===e[t]&&o[t+1]===e[t+1]&&o[t+2]===e[t+2]&&o[t+3]===e[t+3]&&(s+=1);n+=(r[a+2]-r[a+1])*(1-s/i)}return n}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const r=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(r,((e,r)=>e._preloadTiles(t,r)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,r){e.setCacheLimits(t,r)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},sa,t),this._container=a("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e})})),a("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e})})),a("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=a("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),r=t===e.getMaxZoom(),n=t===e.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new la(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const r=a("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}_setButtonTitle(e,t){if(!this._map)return;const r=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute("aria-label",r),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},ca,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Yn(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=a("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){const r=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>r("denied"!==e.state))).catch((()=>r())):r()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),r=e.coords;return!!t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,i=this._map.getBearing(),a=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(n),a,{geolocateSource:!0})}_updateMarker(t){if(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,r=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,n=Math.ceil(2*this._accuracy*r);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=a("button","mapboxgl-ctrl-geolocate",this._container),a("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a("div","mapboxgl-user-location"),this._dotElement.appendChild(a("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(a("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ea({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=a("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ea({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Xi,ScaleControl:class{constructor(t){this.options=e.extend({},ua,t),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,r=t._containerHeight/2,n=t._containerWidth/2-e/2,i=t.unproject([n,r]),a=t.unproject([n+e,r]),o=i.distanceTo(a);if("imperial"===this.options.unit){const t=3.2808*o;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,o/1852,"nautical-mile"):o>=1e3?this._setScale(e,o/1e3,"kilometer"):this._setScale(e,o,"meter")}_setScale(e,t,r){this._map._requestDomTask((()=>{const n=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}(t),i=n/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==r?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:r}).format(n):`${n}&nbsp;${da[r]}`,this._container.style.width=e*i+"px"}))}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=a("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=a("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=a("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(ta),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const r=this._map;return r&&(r.on("move",this._update),r.off("mousemove",this._onMouseEvent),r._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const r=e.window.document.createDocumentFragment(),n=e.window.document.createElement("body");let i;for(n.innerHTML=t;i=n.firstChild,i;)r.appendChild(i);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=a("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=a("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,r=this._container,n=this._pos;if(!t||!r||!n)return"bottom";const i=r.offsetWidth,a=r.offsetHeight,o=n.x<i/2,s=n.x>t.transform.width-i/2;if(n.y+e<a)return o?"top-left":s?"top-right":"top";if(n.y>t.transform.height-a){if(o)return"bottom-left";if(s)return"bottom-right"}return o?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const r=this._map,n=this._content;if(!r||!this._lngLat&&!this._trackPointer||!n)return;let i=this._container;if(i||(i=this._container=a("div","mapboxgl-popup",r.getContainer()),this._tip=a("div","mapboxgl-popup-tip",i),i.appendChild(n)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ji(this._lngLat,this._pos,r.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:r.project(this._lngLat),n=na(this.options.offset),i=this._anchor=this._getAnchor(n.y),a=na(this.options.offset,i),o=e.add(a).round();r._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${Qi[i]} translate(${o.x}px,${o.y}px)`)}))}if(!this._marker&&r._showingGlobe()){const t=e.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(ra);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity=`${e}`),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:ea,Style:Kt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:jn,Evented:e.Evented,config:e.config,prewarm:function(){Ue().acquire(Be)},clearPrewarmedResources:function(){const e=Fe;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Be),Fe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Oe.workerCount},set workerCount(e){Oe.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return ha})),r}()}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return n[e]}}));return o.default=function(){return n},r.d(a,o),a}}(),r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="/marine-crime-map/",function(){"use strict";var e=r(791),t=r.t(e,2),n=r(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return i(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||o(e,t)||s()}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){return function(e){if(Array.isArray(e))return a(e)}(e)||c(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=r(373),h=r.n(d);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(n){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),x=Math.abs,w=String.fromCharCode,k=Object.assign;function S(e){return e.trim()}function T(e,t,r){return e.replace(t,r)}function A(e,t){return e.indexOf(t)}function C(e,t){return 0|e.charCodeAt(t)}function E(e,t,r){return e.slice(t,r)}function I(e){return e.length}function P(e){return e.length}function M(e,t){return t.push(e),e}var D=1,z=1,L=0,R=0,B=0,O="";function F(e,t,r,n,i,a,o){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:D,column:z,length:o,return:""}}function U(e,t){return k(F("",null,null,"",null,null,0),e,{length:-e.length},t)}function N(){return B=R>0?C(O,--R):0,z--,10===B&&(z=1,D--),B}function j(){return B=R<L?C(O,R++):0,z++,10===B&&(z=1,D++),B}function V(){return C(O,R)}function W(){return R}function q(e,t){return E(O,e,t)}function G(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $(e){return D=z=1,L=I(O=e),R=0,[]}function H(e){return O="",e}function Z(e){return S(q(R-1,K(91===e?e+2:40===e?e+1:e)))}function X(e){for(;(B=V())&&B<33;)j();return G(e)>2||G(B)>3?"":" "}function Y(e,t){for(;--t&&j()&&!(B<48||B>102||B>57&&B<65||B>70&&B<97););return q(e,W()+(t<6&&32==V()&&32==j()))}function K(e){for(;j();)switch(B){case e:return R;case 34:case 39:34!==e&&39!==e&&K(B);break;case 40:41===e&&K(e);break;case 92:j()}return R}function J(e,t){for(;j()&&e+B!==57&&(e+B!==84||47!==V()););return"/*"+q(t,R-1)+"*"+w(47===e?e:j())}function Q(e){for(;!G(V());)j();return q(e,R)}var ee="-ms-",te="-moz-",re="-webkit-",ne="comm",ie="rule",ae="decl",oe="@keyframes";function se(e,t){for(var r="",n=P(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function le(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ae:return e.return=e.return||e.value;case ne:return"";case oe:return e.return=e.value+"{"+se(e.children,n)+"}";case ie:e.value=e.props.join(",")}return I(r=se(e.children,n))?e.return=e.value+"{"+r+"}":""}function ce(e){return H(ue("",null,null,null,[""],e=$(e),0,[0],e))}function ue(e,t,r,n,i,a,o,s,l){for(var c=0,u=0,d=o,h=0,p=0,f=0,m=1,g=1,y=1,b=0,_="",v=i,x=a,k=n,S=_;g;)switch(f=b,b=j()){case 40:if(108!=f&&58==C(S,d-1)){-1!=A(S+=T(Z(b),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=Z(b);break;case 9:case 10:case 13:case 32:S+=X(f);break;case 92:S+=Y(W()-1,7);continue;case 47:switch(V()){case 42:case 47:M(he(J(j(),W()),t,r),l);break;default:S+="/"}break;case 123*m:s[c++]=I(S)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+u:-1==y&&(S=T(S,/\f/g,"")),p>0&&I(S)-d&&M(p>32?pe(S+";",n,r,d-1):pe(T(S," ","")+";",n,r,d-2),l);break;case 59:S+=";";default:if(M(k=de(S,t,r,c,u,i,s,_,v=[],x=[],d),a),123===b)if(0===u)ue(S,t,k,k,v,a,d,s,x);else switch(99===h&&110===C(S,3)?100:h){case 100:case 108:case 109:case 115:ue(e,k,k,n&&M(de(e,k,k,0,0,i,s,_,i,v=[],d),x),i,x,d,s,n?v:x);break;default:ue(S,k,k,k,[""],x,0,s,x)}}c=u=p=0,m=y=1,_=S="",d=o;break;case 58:d=1+I(S),p=f;default:if(m<1)if(123==b)--m;else if(125==b&&0==m++&&125==N())continue;switch(S+=w(b),b*m){case 38:y=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(I(S)-1)*y,y=1;break;case 64:45===V()&&(S+=Z(j())),h=V(),u=d=I(_=S+=Q(W())),b++;break;case 45:45===f&&2==I(S)&&(m=0)}}return a}function de(e,t,r,n,i,a,o,s,l,c,u){for(var d=i-1,h=0===i?a:[""],p=P(h),f=0,m=0,g=0;f<n;++f)for(var y=0,b=E(e,d+1,d=x(m=o[f])),_=e;y<p;++y)(_=S(m>0?h[y]+" "+b:T(b,/&\f/g,h[y])))&&(l[g++]=_);return F(e,t,r,0===i?ie:s,l,c,u)}function he(e,t,r){return F(e,t,r,ne,w(B),E(e,2,-2),0)}function pe(e,t,r,n){return F(e,t,r,ae,E(e,0,n),E(e,n+1,-1),n)}var fe=function(e,t,r){for(var n=0,i=0;n=i,i=V(),38===n&&12===i&&(t[r]=1),!G(i);)j();return q(e,R)},me=function(e,t){return H(function(e,t){var r=-1,n=44;do{switch(G(n)){case 0:38===n&&12===V()&&(t[r]=1),e[r]+=fe(R-1,t,r);break;case 2:e[r]+=Z(n);break;case 4:if(44===n){e[++r]=58===V()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=w(n)}}while(n=j());return e}($(e),t))},ge=new WeakMap,ye=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ge.get(r))&&!n){ge.set(e,!0);for(var i=[],a=me(t,i),o=r.props,s=0,l=0;s<a.length;s++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},be=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function _e(e,t){switch(function(e,t){return 45^C(e,0)?(((t<<2^C(e,0))<<2^C(e,1))<<2^C(e,2))<<2^C(e,3):0}(e,t)){case 5103:return re+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return re+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return re+e+te+e+ee+e+e;case 6828:case 4268:return re+e+ee+e+e;case 6165:return re+e+ee+"flex-"+e+e;case 5187:return re+e+T(e,/(\w+).+(:[^]+)/,re+"box-$1$2"+ee+"flex-$1$2")+e;case 5443:return re+e+ee+"flex-item-"+T(e,/flex-|-self/,"")+e;case 4675:return re+e+ee+"flex-line-pack"+T(e,/align-content|flex-|-self/,"")+e;case 5548:return re+e+ee+T(e,"shrink","negative")+e;case 5292:return re+e+ee+T(e,"basis","preferred-size")+e;case 6060:return re+"box-"+T(e,"-grow","")+re+e+ee+T(e,"grow","positive")+e;case 4554:return re+T(e,/([^-])(transform)/g,"$1"+re+"$2")+e;case 6187:return T(T(T(e,/(zoom-|grab)/,re+"$1"),/(image-set)/,re+"$1"),e,"")+e;case 5495:case 3959:return T(e,/(image-set\([^]*)/,re+"$1$`$1");case 4968:return T(T(e,/(.+:)(flex-)?(.*)/,re+"box-pack:$3"+ee+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+re+e+e;case 4095:case 3583:case 4068:case 2532:return T(e,/(.+)-inline(.+)/,re+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(I(e)-1-t>6)switch(C(e,t+1)){case 109:if(45!==C(e,t+4))break;case 102:return T(e,/(.+:)(.+)-([^]+)/,"$1"+re+"$2-$3$1"+te+(108==C(e,t+3)?"$3":"$2-$3"))+e;case 115:return~A(e,"stretch")?_e(T(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==C(e,t+1))break;case 6444:switch(C(e,I(e)-3-(~A(e,"!important")&&10))){case 107:return T(e,":",":"+re)+e;case 101:return T(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+re+(45===C(e,14)?"inline-":"")+"box$3$1"+re+"$2$3$1"+ee+"$2box$3")+e}break;case 5936:switch(C(e,t+11)){case 114:return re+e+ee+T(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return re+e+ee+T(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return re+e+ee+T(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return re+e+ee+e+e}return e}var ve=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case ae:e.return=_e(e.value,e.length);break;case oe:return se([U(e,{value:T(e.value,"@","@"+re)})],n);case ie:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return se([U(e,{props:[T(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return se([U(e,{props:[T(t,/:(plac\w+)/,":"+re+"input-$1")]}),U(e,{props:[T(t,/:(plac\w+)/,":-moz-$1")]}),U(e,{props:[T(t,/:(plac\w+)/,ee+"input-$1")]})],n)}return""}))}}],xe=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n=e.stylisPlugins||ve;var i,a,o={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)o[t[r]]=!0;s.push(e)}));var l,c,u=[le,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=P(e);return function(r,n,i,a){for(var o="",s=0;s<t;s++)o+=e[s](r,n,i,a)||"";return o}}([ye,be].concat(n,u));a=function(e,t,r,n){l=r,function(e){se(ce(e),d)}(e?e+"{"+t.styles+"}":t.styles),n&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new v({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return h.sheet.hydrate(s),h};function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},we.apply(this,arguments)}var ke=function(e){var t=new WeakMap;return function(r){if(t.has(r))return t.get(r);var n=e(r);return t.set(r,n),n}};var Se={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Te(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var Ae=/[A-Z]|^ms/g,Ce=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ee=function(e){return 45===e.charCodeAt(1)},Ie=function(e){return null!=e&&"boolean"!==typeof e},Pe=Te((function(e){return Ee(e)?e:e.replace(Ae,"-$&").toLowerCase()})),Me=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Ce,(function(e,t,r){return ze={name:t,styles:r,next:ze},t}))}return 1===Se[e]||Ee(e)||"number"!==typeof t||0===t?t:t+"px"};function De(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return ze={name:r.name,styles:r.styles,next:ze},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)ze={name:n.name,styles:n.styles,next:ze},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=De(e,t,r[i])+";";else for(var a in r){var o=r[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?n+=a+"{"+t[o]+"}":Ie(o)&&(n+=Pe(a)+":"+Me(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=De(e,t,o);switch(a){case"animation":case"animationName":n+=Pe(a)+":"+s+";";break;default:n+=a+"{"+s+"}"}}else for(var l=0;l<o.length;l++)Ie(o[l])&&(n+=Pe(a)+":"+Me(a,o[l])+";")}return n}(e,t,r);case"function":if(void 0!==e){var i=ze,a=r(e);return ze=i,De(e,t,a)}}if(null==t)return r;var o=t[r];return void 0!==o?o:r}var ze,Le=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Re=function(e,t,r){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,i="";ze=void 0;var a=e[0];null==a||void 0===a.raw?(n=!1,i+=De(r,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=De(r,t,e[o]),n&&(i+=a[o]);Le.lastIndex=0;for(var s,l="";null!==(s=Le.exec(i));)l+="-"+s[1];var c=function(e){for(var t,r=0,n=0,i=e.length;i>=4;++n,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(i){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:ze}},Be=!!t.useInsertionEffect&&t.useInsertionEffect,Oe=Be||function(e){return e()},Fe=Be||e.useLayoutEffect,Ue=e.createContext("undefined"!==typeof HTMLElement?xe({key:"css"}):null);Ue.Provider;var Ne=function(t){return(0,e.forwardRef)((function(r,n){var i=(0,e.useContext)(Ue);return t(r,i,n)}))};var je=e.createContext({});var Ve=ke((function(e){return ke((function(t){return function(e,t){return"function"===typeof t?t(e):we({},e,t)}(e,t)}))})),We=function(t){var r=e.useContext(je);return t.theme!==r&&(r=Ve(r)(t.theme)),e.createElement(je.Provider,{value:r},t.children)};var qe=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},Ge=function(e,t,r){qe(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+n:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}},$e=(r(110),Ne((function(t,r){var n=t.styles,i=Re([n],void 0,e.useContext(je)),a=e.useRef();return Fe((function(){var e=r.key+"-global",t=new r.sheet.constructor({key:e,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),n=!1,o=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return r.sheet.tags.length&&(t.before=r.sheet.tags[0]),null!==o&&(n=!0,o.setAttribute("data-emotion",e),t.hydrate([o])),a.current=[t,n],function(){t.flush()}}),[r]),Fe((function(){var e=a.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&Ge(r,i.next,!0),t.tags.length){var n=t.tags[t.tags.length-1].nextElementSibling;t.before=n,t.flush()}r.insert("",i,t,!1)}}),[r,i.name]),null})));function He(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Re(t)}var Ze,Xe,Ye=r(184),Ke=String.raw,Je=Ke(Ze||(Ze=_(["\n  :root,\n  :host {\n    --chakra-vh: 100vh;\n  }\n\n  @supports (height: -webkit-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -webkit-fill-available;\n    }\n  }\n\n  @supports (height: -moz-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -moz-fill-available;\n    }\n  }\n\n  @supports (height: 100dvh) {\n    :root,\n    :host {\n      --chakra-vh: 100dvh;\n    }\n  }\n"]))),Qe=function(){return(0,Ye.jsx)($e,{styles:Je})},et=function(e){var t=e.scope,r=void 0===t?"":t;return(0,Ye.jsx)($e,{styles:Ke(Xe||(Xe=_(['\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        margin: 0;\n        font-feature-settings: "kern";\n      }\n\n      '," :where(*, *::before, *::after) {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n        word-wrap: break-word;\n      }\n\n      main {\n        display: block;\n      }\n\n      "," hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      "," :where(pre, code, kbd,samp) {\n        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      "," a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      "," abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      "," :where(b, strong) {\n        font-weight: bold;\n      }\n\n      "," small {\n        font-size: 80%;\n      }\n\n      "," :where(sub,sup) {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      "," sub {\n        bottom: -0.25em;\n      }\n\n      "," sup {\n        top: -0.5em;\n      }\n\n      "," img {\n        border-style: none;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      "," :where(button, input) {\n        overflow: visible;\n      }\n\n      "," :where(button, select) {\n        text-transform: none;\n      }\n\n      ",' :where(\n          button::-moz-focus-inner,\n          [type="button"]::-moz-focus-inner,\n          [type="reset"]::-moz-focus-inner,\n          [type="submit"]::-moz-focus-inner\n        ) {\n        border-style: none;\n        padding: 0;\n      }\n\n      '," fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      "," legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      "," progress {\n        vertical-align: baseline;\n      }\n\n      "," textarea {\n        overflow: auto;\n      }\n\n      ",' :where([type="checkbox"], [type="radio"]) {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      ',' input[type="number"]::-webkit-inner-spin-button,\n      ',' input[type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      ',' input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      ',' input[type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      ',' input[type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      '," ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      "," details {\n        display: block;\n      }\n\n      "," summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      "," :where(\n          blockquote,\n          dl,\n          dd,\n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6,\n          hr,\n          figure,\n          p,\n          pre\n        ) {\n        margin: 0;\n      }\n\n      "," button {\n        background: transparent;\n        padding: 0;\n      }\n\n      "," fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," :where(ol, ul) {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," textarea {\n        resize: vertical;\n      }\n\n      ",' :where(button, [role="button"]) {\n        cursor: pointer;\n      }\n\n      '," button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      "," table {\n        border-collapse: collapse;\n      }\n\n      "," :where(h1, h2, h3, h4, h5, h6) {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      "," :where(img, svg, video, canvas, audio, iframe, embed, object) {\n        display: block;\n      }\n\n      "," :where(img, video) {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible]\n        :focus:not([data-focus-visible-added]):not(\n          [data-focus-visible-disabled]\n        ) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      "," select::-ms-expand {\n        display: none;\n      }\n\n      ","\n    "])),r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,Je)})};function tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,n=t.strict,i=void 0===n||n,a=t.hookName,o=void 0===a?"useContext":a,s=t.providerName,l=void 0===s?"Provider":s,c=t.errorMessage,u=t.defaultValue,d=(0,e.createContext)(u);return d.displayName=r,[d.Provider,function t(){var r,n,a=(0,e.useContext)(d);if(!a&&i){var s=new Error(null!=c?c:(n=l,"".concat(o," returned `undefined`. Seems you forgot to wrap component within ").concat(n)));throw s.name="ContextError",null==(r=Error.captureStackTrace)||r.call(Error,s,t),s}return a},d]}var rt=l(tt({strict:!1,name:"PortalManagerContext"}),2),nt=rt[0],it=rt[1];function at(e){var t=e.children,r=e.zIndex;return(0,Ye.jsx)(nt,{value:{zIndex:r},children:t})}at.displayName="PortalManager";var ot=(0,e.createContext)({});function st(){var t=(0,e.useContext)(ot);if(void 0===t)throw new Error("useColorMode must be used within a ColorModeProvider");return t}function lt(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function ct(e){return i(e)||c(e)||o(e)||s()}ot.displayName="ColorModeContext";var ut=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")};function dt(e){var t=typeof e;return null!=e&&("object"===t||"function"===t)&&!Array.isArray(e)}function ht(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return pt(e)?e.apply(void 0,r):e}var pt=function(e){return"function"===typeof e},ft=function(e){return e?"":void 0},mt=function(e){return!!e||void 0};function gt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){t.some((function(t){return null==t||t(e),null==e?void 0:e.defaultPrevented}))}}var yt=r(198),bt=["__cssMap","__cssVars","__breakpoints"],_t=function(e){return"string"===typeof e?e.replace(/!(important)?$/,"").trim():e},vt=function(e,t){return function(r){var n=String(t),i=function(e){return/!(important)?$/.test(e)}(n),a=_t(n),o=e?"".concat(e,".").concat(a):a,s=dt(r.__cssMap)&&o in r.__cssMap?r.__cssMap[o].varRef:t;return s=_t(s),i?"".concat(s," !important"):s}};function xt(e){var t=e.scale,r=e.transform,n=e.compose;return function(e,i){var a,o=vt(t,e)(i),s=null!=(a=null==r?void 0:r(o,i))?a:o;return n&&(s=n(s,i)),s}}var wt=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce((function(e,t){return t(e)}),e)}};function kt(e,t){return function(r){var n={property:r,scale:e};return n.transform=xt({scale:e,transform:t}),n}}var St=function(e){var t=e.rtl,r=e.ltr;return function(e){return"rtl"===e.direction?t:r}};var Tt=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];var At={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},Ct={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};var Et={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},It={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},Pt=new Set(Object.values(It)),Mt=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),Dt=function(e){return e.trim()};var zt=function(e){return"string"===typeof e&&e.includes("(")&&e.includes(")")};var Lt=function(e){return function(t){return"".concat(e,"(").concat(t,")")}},Rt={filter:function(e){return"auto"!==e?e:At},backdropFilter:function(e){return"auto"!==e?e:Ct},ring:function(e){return function(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(Rt.px(e))},bgClip:function(e){return"text"===e?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform:function(e){return"auto"===e?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))"].concat(Tt).join(" "):"auto-gpu"===e?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)"].concat(Tt).join(" "):e},vh:function(e){return"$100vh"===e?"var(--chakra-vh)":e},px:function(e){if(null==e)return e;var t=function(e){var t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}}(e);return t.unitless||"number"===typeof e?"".concat(e,"px"):e},fraction:function(e){return"number"!==typeof e||e>1?e:"".concat(100*e,"%")},float:function(e,t){return"rtl"===t.direction?{left:"right",right:"left"}[e]:e},degree:function(e){if(function(e){return/^var\(--.+\)$/.test(e)}(e)||null==e)return e;var t="string"===typeof e&&!e.endsWith("deg");return"number"===typeof e||t?"".concat(e,"deg"):e},gradient:function(e,t){return function(e,t){if(null==e||Mt.has(e))return e;if(!zt(e)&&!Mt.has(e))return"url('".concat(e,"')");var r=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),n=null==r?void 0:r[1],i=null==r?void 0:r[2];if(!n||!i)return e;var a=n.includes("-gradient")?n:"".concat(n,"-gradient"),o=ct(i.split(",").map(Dt).filter(Boolean)),s=o[0],c=o.slice(1);if(0===(null==c?void 0:c.length))return e;var d=s in It?It[s]:s;c.unshift(d);var h=c.map((function(e){if(Pt.has(e))return e;var r=e.indexOf(" "),n=l(-1!==r?[e.substr(0,r),e.substr(r+1)]:[e],2),i=n[0],a=n[1],o=zt(a)?a:a&&a.split(" "),s="colors.".concat(i),c=s in t.__cssMap?t.__cssMap[s].varRef:i;return o?[c].concat(u(Array.isArray(o)?o:[o])).join(" "):c}));return"".concat(a,"(").concat(h.join(", "),")")}(e,null!=t?t:{})},blur:Lt("blur"),opacity:Lt("opacity"),brightness:Lt("brightness"),contrast:Lt("contrast"),dropShadow:Lt("drop-shadow"),grayscale:Lt("grayscale"),hueRotate:Lt("hue-rotate"),invert:Lt("invert"),saturate:Lt("saturate"),sepia:Lt("sepia"),bgImage:function(e){return null==e||zt(e)||Mt.has(e)?e:"url(".concat(e,")")},outline:function(e){var t="0"===String(e)||"none"===String(e);return null!==e&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection:function(e){var t,r=null!=(t=Et[e])?t:{},n=r.space,i=r.divide,a={flexDirection:e};return n&&(a[n]=1),i&&(a[i]=1),a}},Bt={borderWidths:kt("borderWidths"),borderStyles:kt("borderStyles"),colors:kt("colors"),borders:kt("borders"),gradients:kt("gradients",Rt.gradient),radii:kt("radii",Rt.px),space:kt("space",wt(Rt.vh,Rt.px)),spaceT:kt("space",wt(Rt.vh,Rt.px)),degreeT:function(e){return{property:e,transform:Rt.degree}},prop:function(e,t,r){return y({property:e,scale:t},t&&{transform:xt({scale:t,transform:r})})},propT:function(e,t){return{property:e,transform:t}},sizes:kt("sizes",wt(Rt.vh,Rt.px)),sizesT:kt("sizes",wt(Rt.vh,Rt.fraction)),shadows:kt("shadows"),logical:function(e){var t=e.property,r=e.scale,n=e.transform;return{scale:r,property:St(t),transform:r?xt({scale:r,compose:n}):n}},blur:kt("blur",Rt.blur)},Ot={background:Bt.colors("background"),backgroundColor:Bt.colors("backgroundColor"),backgroundImage:Bt.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Rt.bgClip},bgSize:Bt.prop("backgroundSize"),bgPosition:Bt.prop("backgroundPosition"),bg:Bt.colors("background"),bgColor:Bt.colors("backgroundColor"),bgPos:Bt.prop("backgroundPosition"),bgRepeat:Bt.prop("backgroundRepeat"),bgAttachment:Bt.prop("backgroundAttachment"),bgGradient:Bt.gradients("backgroundImage"),bgClip:{transform:Rt.bgClip}};Object.assign(Ot,{bgImage:Ot.backgroundImage,bgImg:Ot.backgroundImage});var Ft={border:Bt.borders("border"),borderWidth:Bt.borderWidths("borderWidth"),borderStyle:Bt.borderStyles("borderStyle"),borderColor:Bt.colors("borderColor"),borderRadius:Bt.radii("borderRadius"),borderTop:Bt.borders("borderTop"),borderBlockStart:Bt.borders("borderBlockStart"),borderTopLeftRadius:Bt.radii("borderTopLeftRadius"),borderStartStartRadius:Bt.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Bt.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Bt.radii("borderTopRightRadius"),borderStartEndRadius:Bt.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Bt.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Bt.borders("borderRight"),borderInlineEnd:Bt.borders("borderInlineEnd"),borderBottom:Bt.borders("borderBottom"),borderBlockEnd:Bt.borders("borderBlockEnd"),borderBottomLeftRadius:Bt.radii("borderBottomLeftRadius"),borderBottomRightRadius:Bt.radii("borderBottomRightRadius"),borderLeft:Bt.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Bt.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Bt.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Bt.borders(["borderLeft","borderRight"]),borderInline:Bt.borders("borderInline"),borderY:Bt.borders(["borderTop","borderBottom"]),borderBlock:Bt.borders("borderBlock"),borderTopWidth:Bt.borderWidths("borderTopWidth"),borderBlockStartWidth:Bt.borderWidths("borderBlockStartWidth"),borderTopColor:Bt.colors("borderTopColor"),borderBlockStartColor:Bt.colors("borderBlockStartColor"),borderTopStyle:Bt.borderStyles("borderTopStyle"),borderBlockStartStyle:Bt.borderStyles("borderBlockStartStyle"),borderBottomWidth:Bt.borderWidths("borderBottomWidth"),borderBlockEndWidth:Bt.borderWidths("borderBlockEndWidth"),borderBottomColor:Bt.colors("borderBottomColor"),borderBlockEndColor:Bt.colors("borderBlockEndColor"),borderBottomStyle:Bt.borderStyles("borderBottomStyle"),borderBlockEndStyle:Bt.borderStyles("borderBlockEndStyle"),borderLeftWidth:Bt.borderWidths("borderLeftWidth"),borderInlineStartWidth:Bt.borderWidths("borderInlineStartWidth"),borderLeftColor:Bt.colors("borderLeftColor"),borderInlineStartColor:Bt.colors("borderInlineStartColor"),borderLeftStyle:Bt.borderStyles("borderLeftStyle"),borderInlineStartStyle:Bt.borderStyles("borderInlineStartStyle"),borderRightWidth:Bt.borderWidths("borderRightWidth"),borderInlineEndWidth:Bt.borderWidths("borderInlineEndWidth"),borderRightColor:Bt.colors("borderRightColor"),borderInlineEndColor:Bt.colors("borderInlineEndColor"),borderRightStyle:Bt.borderStyles("borderRightStyle"),borderInlineEndStyle:Bt.borderStyles("borderInlineEndStyle"),borderTopRadius:Bt.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Bt.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Bt.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Bt.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Ft,{rounded:Ft.borderRadius,roundedTop:Ft.borderTopRadius,roundedTopLeft:Ft.borderTopLeftRadius,roundedTopRight:Ft.borderTopRightRadius,roundedTopStart:Ft.borderStartStartRadius,roundedTopEnd:Ft.borderStartEndRadius,roundedBottom:Ft.borderBottomRadius,roundedBottomLeft:Ft.borderBottomLeftRadius,roundedBottomRight:Ft.borderBottomRightRadius,roundedBottomStart:Ft.borderEndStartRadius,roundedBottomEnd:Ft.borderEndEndRadius,roundedLeft:Ft.borderLeftRadius,roundedRight:Ft.borderRightRadius,roundedStart:Ft.borderInlineStartRadius,roundedEnd:Ft.borderInlineEndRadius,borderStart:Ft.borderInlineStart,borderEnd:Ft.borderInlineEnd,borderTopStartRadius:Ft.borderStartStartRadius,borderTopEndRadius:Ft.borderStartEndRadius,borderBottomStartRadius:Ft.borderEndStartRadius,borderBottomEndRadius:Ft.borderEndEndRadius,borderStartRadius:Ft.borderInlineStartRadius,borderEndRadius:Ft.borderInlineEndRadius,borderStartWidth:Ft.borderInlineStartWidth,borderEndWidth:Ft.borderInlineEndWidth,borderStartColor:Ft.borderInlineStartColor,borderEndColor:Ft.borderInlineEndColor,borderStartStyle:Ft.borderInlineStartStyle,borderEndStyle:Ft.borderInlineEndStyle});var Ut={color:Bt.colors("color"),textColor:Bt.colors("color"),fill:Bt.colors("fill"),stroke:Bt.colors("stroke")},Nt={boxShadow:Bt.shadows("boxShadow"),mixBlendMode:!0,blendMode:Bt.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Bt.prop("backgroundBlendMode"),opacity:!0};Object.assign(Nt,{shadow:Nt.boxShadow});var jt={filter:{transform:Rt.filter},blur:Bt.blur("--chakra-blur"),brightness:Bt.propT("--chakra-brightness",Rt.brightness),contrast:Bt.propT("--chakra-contrast",Rt.contrast),hueRotate:Bt.degreeT("--chakra-hue-rotate"),invert:Bt.propT("--chakra-invert",Rt.invert),saturate:Bt.propT("--chakra-saturate",Rt.saturate),dropShadow:Bt.propT("--chakra-drop-shadow",Rt.dropShadow),backdropFilter:{transform:Rt.backdropFilter},backdropBlur:Bt.blur("--chakra-backdrop-blur"),backdropBrightness:Bt.propT("--chakra-backdrop-brightness",Rt.brightness),backdropContrast:Bt.propT("--chakra-backdrop-contrast",Rt.contrast),backdropHueRotate:Bt.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:Bt.propT("--chakra-backdrop-invert",Rt.invert),backdropSaturate:Bt.propT("--chakra-backdrop-saturate",Rt.saturate)},Vt={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Rt.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Bt.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Bt.space("gap"),rowGap:Bt.space("rowGap"),columnGap:Bt.space("columnGap")};Object.assign(Vt,{flexDir:Vt.flexDirection});var Wt={gridGap:Bt.space("gridGap"),gridColumnGap:Bt.space("gridColumnGap"),gridRowGap:Bt.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},qt={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Rt.outline},outlineOffset:!0,outlineColor:Bt.colors("outlineColor")},Gt={width:Bt.sizesT("width"),inlineSize:Bt.sizesT("inlineSize"),height:Bt.sizes("height"),blockSize:Bt.sizes("blockSize"),boxSize:Bt.sizes(["width","height"]),minWidth:Bt.sizes("minWidth"),minInlineSize:Bt.sizes("minInlineSize"),minHeight:Bt.sizes("minHeight"),minBlockSize:Bt.sizes("minBlockSize"),maxWidth:Bt.sizes("maxWidth"),maxInlineSize:Bt.sizes("maxInlineSize"),maxHeight:Bt.sizes("maxHeight"),maxBlockSize:Bt.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:function(e,t){var r,n,i,a=null!=(i=null==(n=null==(r=t.__breakpoints)?void 0:r.get(e))?void 0:n.minW)?i:e;return m({},"@media screen and (min-width: ".concat(a,")"),{display:"none"})}},hideBelow:{scale:"breakpoints",transform:function(e,t){var r,n,i,a=null!=(i=null==(n=null==(r=t.__breakpoints)?void 0:r.get(e))?void 0:n._minW)?i:e;return m({},"@media screen and (max-width: ".concat(a,")"),{display:"none"})}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Bt.propT("float",Rt.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Gt,{w:Gt.width,h:Gt.height,minW:Gt.minWidth,maxW:Gt.maxWidth,minH:Gt.minHeight,maxH:Gt.maxHeight,overscroll:Gt.overscrollBehavior,overscrollX:Gt.overscrollBehaviorX,overscrollY:Gt.overscrollBehaviorY});var $t={listStyleType:!0,listStylePosition:!0,listStylePos:Bt.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Bt.prop("listStyleImage")};var Ht=function(e){var t=new WeakMap;return function(r,n,i,a){if("undefined"===typeof r)return e(r,n,i);t.has(r)||t.set(r,new Map);var o=t.get(r);if(o.has(n))return o.get(n);var s=e(r,n,i,a);return o.set(n,s),s}}((function(e,t,r,n){var i="string"===typeof t?t.split("."):[t];for(n=0;n<i.length&&e;n+=1)e=e[i[n]];return void 0===e?r:e})),Zt={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Xt={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},Yt=function(e,t,r){var n={},i=Ht(e,t,{});for(var a in i){a in r&&null!=r[a]||(n[a]=i[a])}return n},Kt={srOnly:{transform:function(e){return!0===e?Zt:"focusable"===e?Xt:{}}},layerStyle:{processResult:!0,transform:function(e,t,r){return Yt(t,"layerStyles.".concat(e),r)}},textStyle:{processResult:!0,transform:function(e,t,r){return Yt(t,"textStyles.".concat(e),r)}},apply:{processResult:!0,transform:function(e,t,r){return Yt(t,e,r)}}},Jt={position:!0,pos:Bt.prop("position"),zIndex:Bt.prop("zIndex","zIndices"),inset:Bt.spaceT("inset"),insetX:Bt.spaceT(["left","right"]),insetInline:Bt.spaceT("insetInline"),insetY:Bt.spaceT(["top","bottom"]),insetBlock:Bt.spaceT("insetBlock"),top:Bt.spaceT("top"),insetBlockStart:Bt.spaceT("insetBlockStart"),bottom:Bt.spaceT("bottom"),insetBlockEnd:Bt.spaceT("insetBlockEnd"),left:Bt.spaceT("left"),insetInlineStart:Bt.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Bt.spaceT("right"),insetInlineEnd:Bt.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Jt,{insetStart:Jt.insetInlineStart,insetEnd:Jt.insetInlineEnd});var Qt={ring:{transform:Rt.ring},ringColor:Bt.colors("--chakra-ring-color"),ringOffset:Bt.prop("--chakra-ring-offset-width"),ringOffsetColor:Bt.colors("--chakra-ring-offset-color"),ringInset:Bt.prop("--chakra-ring-inset")},er={margin:Bt.spaceT("margin"),marginTop:Bt.spaceT("marginTop"),marginBlockStart:Bt.spaceT("marginBlockStart"),marginRight:Bt.spaceT("marginRight"),marginInlineEnd:Bt.spaceT("marginInlineEnd"),marginBottom:Bt.spaceT("marginBottom"),marginBlockEnd:Bt.spaceT("marginBlockEnd"),marginLeft:Bt.spaceT("marginLeft"),marginInlineStart:Bt.spaceT("marginInlineStart"),marginX:Bt.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Bt.spaceT("marginInline"),marginY:Bt.spaceT(["marginTop","marginBottom"]),marginBlock:Bt.spaceT("marginBlock"),padding:Bt.space("padding"),paddingTop:Bt.space("paddingTop"),paddingBlockStart:Bt.space("paddingBlockStart"),paddingRight:Bt.space("paddingRight"),paddingBottom:Bt.space("paddingBottom"),paddingBlockEnd:Bt.space("paddingBlockEnd"),paddingLeft:Bt.space("paddingLeft"),paddingInlineStart:Bt.space("paddingInlineStart"),paddingInlineEnd:Bt.space("paddingInlineEnd"),paddingX:Bt.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Bt.space("paddingInline"),paddingY:Bt.space(["paddingTop","paddingBottom"]),paddingBlock:Bt.space("paddingBlock")};Object.assign(er,{m:er.margin,mt:er.marginTop,mr:er.marginRight,me:er.marginInlineEnd,marginEnd:er.marginInlineEnd,mb:er.marginBottom,ml:er.marginLeft,ms:er.marginInlineStart,marginStart:er.marginInlineStart,mx:er.marginX,my:er.marginY,p:er.padding,pt:er.paddingTop,py:er.paddingY,px:er.paddingX,pb:er.paddingBottom,pl:er.paddingLeft,ps:er.paddingInlineStart,paddingStart:er.paddingInlineStart,pr:er.paddingRight,pe:er.paddingInlineEnd,paddingEnd:er.paddingInlineEnd});var tr={textDecorationColor:Bt.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Bt.shadows("textShadow")},rr={clipPath:!0,transform:Bt.propT("transform",Rt.transform),transformOrigin:!0,translateX:Bt.spaceT("--chakra-translate-x"),translateY:Bt.spaceT("--chakra-translate-y"),skewX:Bt.degreeT("--chakra-skew-x"),skewY:Bt.degreeT("--chakra-skew-y"),scaleX:Bt.prop("--chakra-scale-x"),scaleY:Bt.prop("--chakra-scale-y"),scale:Bt.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Bt.degreeT("--chakra-rotate")},nr={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Bt.prop("transitionDuration","transition.duration"),transitionProperty:Bt.prop("transitionProperty","transition.property"),transitionTimingFunction:Bt.prop("transitionTimingFunction","transition.easing")},ir={fontFamily:Bt.prop("fontFamily","fonts"),fontSize:Bt.prop("fontSize","fontSizes",Rt.px),fontWeight:Bt.prop("fontWeight","fontWeights"),lineHeight:Bt.prop("lineHeight","lineHeights"),letterSpacing:Bt.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform:function(e){if(!0===e)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},ar={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Bt.spaceT("scrollMargin"),scrollMarginTop:Bt.spaceT("scrollMarginTop"),scrollMarginBottom:Bt.spaceT("scrollMarginBottom"),scrollMarginLeft:Bt.spaceT("scrollMarginLeft"),scrollMarginRight:Bt.spaceT("scrollMarginRight"),scrollMarginX:Bt.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Bt.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Bt.spaceT("scrollPadding"),scrollPaddingTop:Bt.spaceT("scrollPaddingTop"),scrollPaddingBottom:Bt.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Bt.spaceT("scrollPaddingLeft"),scrollPaddingRight:Bt.spaceT("scrollPaddingRight"),scrollPaddingX:Bt.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Bt.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function or(e){return dt(e)&&e.reference?e.reference:String(e)}var sr=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.map(or).join(" ".concat(e," ")).replace(/calc/g,"")},lr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc(".concat(sr.apply(void 0,["+"].concat(t)),")")},cr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc(".concat(sr.apply(void 0,["-"].concat(t)),")")},ur=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc(".concat(sr.apply(void 0,["*"].concat(t)),")")},dr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc(".concat(sr.apply(void 0,["/"].concat(t)),")")},hr=function(e){var t=or(e);return null==t||Number.isNaN(parseFloat(t))?ur(t,-1):String(t).startsWith("-")?String(t).slice(1):"-".concat(t)},pr=Object.assign((function(e){return{add:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pr(lr.apply(void 0,[e].concat(r)))},subtract:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pr(cr.apply(void 0,[e].concat(r)))},multiply:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pr(ur.apply(void 0,[e].concat(r)))},divide:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pr(dr.apply(void 0,[e].concat(r)))},negate:function(){return pr(hr(e))},toString:function(){return e.toString()}}}),{add:lr,subtract:cr,multiply:ur,divide:dr,negate:hr});function fr(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/\s+/g,t)}(e.toString());return function(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}(function(e){if(e.includes("\\."))return e;var t=!Number.isInteger(parseFloat(e.toString()));return t?e.replace(".","\\."):e}(t))}function mr(e,t){return"var(".concat(e).concat(t?", ".concat(t):"",")")}function gr(e){return fr("--".concat(function(e){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e].filter(Boolean).join("-")}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")))}function yr(e,t,r){var n=gr(e,r);return{variable:n,reference:mr(n,t)}}function br(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function _r(e){if(null==e)return e;var t=function(e){var t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}}(e);return t.unitless||"number"===typeof e?"".concat(e,"px"):e}var vr=function(e,t){return parseInt(e[1],10)>parseInt(t[1],10)?1:-1},xr=function(e){return Object.fromEntries(Object.entries(e).sort(vr))};function wr(e){var t=xr(e);return Object.assign(Object.values(t),t)}function kr(e){var t;if(!e)return e;e=null!=(t=_r(e))?t:e;return"number"===typeof e?"".concat(e+-.02):e.replace(/([0-9]+\.?[0-9]*)/,(function(e){return"".concat(parseFloat(e)+-.02)}))}function Sr(e,t){var r=["@media screen"];return e&&r.push("and","(min-width: ".concat(_r(e),")")),t&&r.push("and","(max-width: ".concat(_r(t),")")),r.join(" ")}function Tr(e){var t;if(!e)return null;e.base=null!=(t=e.base)?t:"0px";var r=wr(e),n=Object.entries(e).sort(vr).map((function(e,t,r){var n,i=l(e,2),a=i[0],o=i[1],s=l(null!=(n=r[t+1])?n:[],2)[1];return s=parseFloat(s)>0?kr(s):void 0,{_minW:kr(o),breakpoint:a,minW:o,maxW:s,maxWQuery:Sr(null,s),minWQuery:Sr(o),minMaxQuery:Sr(o,s)}})),i=function(e){var t=Object.keys(xr(e));return new Set(t)}(e),a=Array.from(i.values());return{keys:i,normalized:r,isResponsive:function(e){var t=Object.keys(e);return t.length>0&&t.every((function(e){return i.has(e)}))},asObject:xr(e),asArray:wr(e),details:n,get:function(e){return n.find((function(t){return t.breakpoint===e}))},media:[null].concat(u(r.map((function(e){return Sr(e)})).slice(1))),toArrayValue:function(e){if(!dt(e))throw new Error("toArrayValue: value must be an object");for(var t=a.map((function(t){var r;return null!=(r=e[t])?r:null}));null===br(t);)t.pop();return t},toObjectValue:function(e){if(!Array.isArray(e))throw new Error("toObjectValue: value must be an array");return e.reduce((function(e,t,r){var n=a[r];return null!=n&&null!=t&&(e[n]=t),e}),{})}}}var Ar=function(e,t){return"".concat(e,":hover ").concat(t,", ").concat(e,"[data-hover] ").concat(t)},Cr=function(e,t){return"".concat(e,":focus ").concat(t,", ").concat(e,"[data-focus] ").concat(t)},Er=function(e,t){return"".concat(e,":focus-visible ").concat(t)},Ir=function(e,t){return"".concat(e,":focus-within ").concat(t)},Pr=function(e,t){return"".concat(e,":active ").concat(t,", ").concat(e,"[data-active] ").concat(t)},Mr=function(e,t){return"".concat(e,":disabled ").concat(t,", ").concat(e,"[data-disabled] ").concat(t)},Dr=function(e,t){return"".concat(e,":invalid ").concat(t,", ").concat(e,"[data-invalid] ").concat(t)},zr=function(e,t){return"".concat(e,":checked ").concat(t,", ").concat(e,"[data-checked] ").concat(t)},Lr=function(e,t){return"".concat(e,":placeholder-shown ").concat(t)},Rr=function(e){return Or((function(t){return e(t,"&")}),"[role=group]","[data-group]",".group")},Br=function(e){return Or((function(t){return e(t,"~ &")}),"[data-peer]",".peer")},Or=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.map(e).join(", ")},Fr={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Rr(Ar),_peerHover:Br(Ar),_groupFocus:Rr(Cr),_peerFocus:Br(Cr),_groupFocusVisible:Rr(Er),_peerFocusVisible:Br(Er),_groupActive:Rr(Pr),_peerActive:Br(Pr),_groupDisabled:Rr(Mr),_peerDisabled:Br(Mr),_groupInvalid:Rr(Dr),_peerInvalid:Br(Dr),_groupChecked:Rr(zr),_peerChecked:Br(zr),_groupFocusWithin:Rr(Ir),_peerFocusWithin:Br(Ir),_peerPlaceholderShown:Br(Lr),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},Ur=Object.keys(Fr);function Nr(e,t){return yr(String(e).replace(/\./g,"-"),void 0,t)}function jr(e,t){for(var r={},n={},i=function(){var i=l(o[a],2),s=i[0],c=i[1],u=c.isSemantic,d=c.value,h=Nr(s,null==t?void 0:t.cssVarPrefix),p=h.variable,f=h.reference;if(!u){if(s.startsWith("space")){var g=ct(s.split(".")),y=g[0],b=g.slice(1),_="".concat(y,".-").concat(b.join(".")),v=pr.negate(d),x=pr.negate(f);n[_]={value:v,var:p,varRef:x}}return r[p]=d,n[s]={value:d,var:p,varRef:f},"continue"}var w=dt(d)?d:{default:d};r=yt(r,Object.entries(w).reduce((function(r,n){var i,a,o=l(n,2),c=o[0],u=o[1];if(!u)return r;var d=function(r){var n=[String(s).split(".")[0],r].join(".");return e[n]?Nr(n,null==t?void 0:t.cssVarPrefix).reference:r}("".concat(u));return"default"===c?(r[p]=d,r):(r[null!=(a=null==(i=Fr)?void 0:i[c])?a:c]=m({},p,d),r)}),{})),n[s]={value:f,var:p,varRef:f}},a=0,o=Object.entries(e);a<o.length;a++)i();return{cssVars:r,cssMap:n}}function Vr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.stop,i=r.getKey;return function e(r){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(function(e){return"object"===typeof e&&null!=e&&!Array.isArray(e)}(r)||Array.isArray(r)){for(var s={},c=0,d=Object.entries(r);c<d.length;c++){var h=l(d[c],2),p=h[0],f=h[1],m=null!=(a=null==i?void 0:i(p))?a:p,g=[].concat(u(o),[m]);if(null==n?void 0:n(r,g))return t(r,o);s[m]=e(f,g)}return s}return t(r,o)}(e)}var Wr=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function qr(e){return function(e,t){var r,n={},i=lt(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;a in e&&(n[a]=e[a])}}catch(o){i.e(o)}finally{i.f()}return n}(e,Wr)}var Gr=function(e){return Ur.includes(e)||"default"===e};function $r(e){var t,r=function(e){return e.__cssMap,e.__cssVars,e.__breakpoints,b(e,bt)}(e),n=qr(r),i=function(e){return e.semanticTokens}(r),a=function(e){var t=e.tokens,r=e.semanticTokens,n={};return Vr(t,(function(e,t){null!=e&&(n[t.join(".")]={isSemantic:!1,value:e})})),Vr(r,(function(e,t){null!=e&&(n[t.join(".")]={isSemantic:!0,value:e})}),{stop:function(e){return Object.keys(e).every(Gr)}}),n}({tokens:n,semanticTokens:i}),o=jr(a,{cssVarPrefix:null==(t=r.config)?void 0:t.cssVarPrefix}),s=o.cssMap,l=o.cssVars;return Object.assign(r,{__cssVars:y(y({},{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"}),l),__cssMap:s,__breakpoints:Tr(r.breakpoints)}),r}var Hr=yt({},Ot,Ft,Ut,Vt,Gt,jt,Qt,qt,Wt,Kt,Jt,Nt,er,ar,ir,tr,rr,$t,nr),Zr=Object.assign({},er,Gt,Vt,Wt,Jt),Xr=(Object.keys(Zr),[].concat(u(Object.keys(Hr)),Ur)),Yr=y(y({},Hr),Fr),Kr=function(e){return e in Yr};var Jr=function(e,t){return e.startsWith("--")&&"string"===typeof t&&!function(e){return/^var\(--.+\)$/.test(e)}(t)},Qr=function(e,t){var r,n;if(null==t)return t;var i=function(t){var r,n;return null==(n=null==(r=e.__cssMap)?void 0:r[t])?void 0:n.varRef},a=function(e){var t;return null!=(t=i(e))?t:e},o=function(e){for(var t=[],r="",n=!1,i=0;i<e.length;i++){var a=e[i];"("===a?(n=!0,r+=a):")"===a?(n=!1,r+=a):","!==a||n?r+=a:(t.push(r),r="")}return(r=r.trim())&&t.push(r),t}(t),s=l(o,2),c=s[0],u=s[1];return t=null!=(n=null!=(r=i(c))?r:a(u))?n:a(t)};function en(e){var t=e.configs,r=void 0===t?{}:t,n=e.pseudos,i=void 0===n?{}:n,a=e.theme;return function e(t){var n,o,s,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=ht(t,a),u=function(e){return function(t){if(!t.__breakpoints)return e;var r=t.__breakpoints,n=r.isResponsive,i=r.toArrayValue,a=r.media,o={};for(var s in e){var l=ht(e[s],t);if(null!=l)if(l=dt(l)&&n(l)?i(l):l,Array.isArray(l))for(var c=l.slice(0,a.length).length,u=0;u<c;u+=1){var d=null==a?void 0:a[u];d?(o[d]=o[d]||{},null!=l[u]&&(o[d][s]=l[u])):o[s]=l[u]}else o[s]=l}return o}}(c)(a),d={};for(var h in u){var p=ht(u[h],a);h in i&&(h=i[h]),Jr(h,p)&&(p=Qr(a,p));var f=r[h];if(!0===f&&(f={property:h}),dt(p))d[h]=null!=(n=d[h])?n:{},d[h]=yt({},d[h],e(p,!0));else{var m=null!=(s=null==(o=null==f?void 0:f.transform)?void 0:o.call(f,p,a,c))?s:p;m=(null==f?void 0:f.processResult)?e(m,!0):m;var g=ht(null==f?void 0:f.property,a);if(!l&&(null==f?void 0:f.static)){var y=ht(f.static,a);d=yt({},d,y)}if(g&&Array.isArray(g)){var b,_=lt(g);try{for(_.s();!(b=_.n()).done;){d[b.value]=m}}catch(v){_.e(v)}finally{_.f()}}else g?"&"===g&&dt(m)?d=yt({},d,m):d[g]=m:dt(m)?d=yt({},d,m):d[h]=m}}return d}}var tn=function(e){return function(t){return en({theme:t,pseudos:Fr,configs:Hr})(e)}};function rn(e){return{definePartsStyle:function(e){return e},defineMultiStyleConfig:function(t){return y({parts:e},t)}}}function nn(e){var t=e.__breakpoints;return function(e,r,n,i){var a,o;if(t){var s={},l=function(e,t){return Array.isArray(e)?e:dt(e)?t(e):null!=e?[e]:void 0}(n,t.toArrayValue);if(!l)return s;for(var c=l.length,u=1===c,d=!!e.parts,h=function(){var n=t.details[p],c=t.details[function(e,t){for(var r=t+1;r<e.length;r++)if(null!=e[r])return r;return-1}(l,p)],h=Sr(n.minW,null==c?void 0:c._minW),f=ht(null==(a=e[r])?void 0:a[l[p]],i);return f?d?(null==(o=e.parts)||o.forEach((function(e){yt(s,m({},e,u?f[e]:m({},h,f[e])))})),"continue"):d?void(s[h]=f):(u?yt(s,f):s[h]=f,"continue"):"continue"},p=0;p<c;p++)h();return s}}}function an(e){return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e),i=lt(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;a in n&&delete n[a]}}catch(o){i.e(o)}finally{i.f()}return n}(e,["styleConfig","size","variant","colorScheme"])}var on=function(e){var t=new WeakMap;return function(r,n,i,a){if("undefined"===typeof r)return e(r,n,i);t.has(r)||t.set(r,new Map);var o=t.get(r);if(o.has(n))return o.get(n);var s=e(r,n,i,a);return o.set(n,s),s}}((function(e,t,r,n){var i="string"===typeof t?t.split("."):[t];for(n=0;n<i.length&&e;n+=1)e=e[i[n]];return void 0===e?r:e}));function sn(e,t){var r={};return Object.keys(e).forEach((function(n){var i=e[n];t(i,n,e)&&(r[n]=i)})),r}var ln=function(e){return sn(e,(function(e){return null!==e&&void 0!==e}))};function cn(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return"function"===typeof e?e.apply(void 0,r):e}function un(t){var r=t.cssVarsRoot,n=t.theme,i=t.children,a=(0,e.useMemo)((function(){return $r(n)}),[n]);return(0,Ye.jsxs)(We,{theme:a,children:[(0,Ye.jsx)(dn,{root:r}),i]})}function dn(e){var t=e.root,r=[void 0===t?":host, :root":t,"[data-theme]"].join(",");return(0,Ye.jsx)($e,{styles:function(e){return m({},r,e.__cssVars)}})}var hn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.strict,n=void 0===r||r,i=t.errorMessage,a=void 0===i?"useContext: `context` is undefined. Seems you forgot to wrap component within the Provider":i,o=t.name,s=(0,e.createContext)(void 0);return s.displayName=o,[s.Provider,function t(){var r,i=(0,e.useContext)(s);if(!i&&n){var o=new Error(a);throw o.name="ContextError",null==(r=Error.captureStackTrace)||r.call(Error,o,t),o}return i},s]}({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "}),pn=l(hn,2);pn[0],pn[1];function fn(){var e=st().colorMode;return(0,Ye.jsx)($e,{styles:function(t){var r=cn(on(t,"styles.global"),{theme:t,colorMode:e});if(r){var n=tn(r)(t);return n}}})}var mn={light:"chakra-ui-light",dark:"chakra-ui-dark"};var gn="chakra-ui-color-mode";var yn=function(e){return{ssr:!1,type:"localStorage",get:function(t){if(!(null==globalThis?void 0:globalThis.document))return t;var r;try{r=localStorage.getItem(e)||t}catch(n){}return r||t},set:function(t){try{localStorage.setItem(e,t)}catch(r){}}}}(gn);function bn(e,t){var r=e.match(new RegExp("(^| )".concat(t,"=([^;]+)")));return null==r?void 0:r[2]}function _n(e,t){return{ssr:!!t,type:"cookie",get:function(r){return t?bn(t,e):(null==globalThis?void 0:globalThis.document)&&bn(document.cookie,e)||r},set:function(t){document.cookie="".concat(e,"=").concat(t,"; max-age=31536000; path=/")}}}_n(gn);var vn=Boolean(null==globalThis?void 0:globalThis.document)?e.useLayoutEffect:e.useEffect,xn=function(){};function wn(e,t){return"cookie"===e.type&&e.ssr?e.get(t):t}function kn(t){var r=t.value,n=t.children,i=t.options,a=void 0===i?{}:i,o=a.useSystemColorMode,s=a.initialColorMode,c=a.disableTransitionOnChange,u=t.colorModeManager,d=void 0===u?yn:u,h="dark"===s?"dark":"light",p=l((0,e.useState)((function(){return wn(d,h)})),2),f=p[0],m=p[1],g=l((0,e.useState)((function(){return wn(d)})),2),y=g[0],b=g[1],_=(0,e.useMemo)((function(){return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preventTransition,t=void 0===e||e,r={setDataset:function(e){var n=t?r.preventTransition():void 0;document.documentElement.dataset.theme=e,document.documentElement.style.colorScheme=e,null==n||n()},setClassName:function(e){document.body.classList.add(e?mn.dark:mn.light),document.body.classList.remove(e?mn.light:mn.dark)},query:function(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme:function(e){var t;return(null!=(t=r.query().matches)?t:"dark"===e)?"dark":"light"},addListener:function(e){var t=r.query(),n=function(t){e(t.matches?"dark":"light")};return"function"===typeof t.addListener?t.addListener(n):t.addEventListener("change",n),function(){"function"===typeof t.removeListener?t.removeListener(n):t.removeEventListener("change",n)}},preventTransition:function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),function(){window.getComputedStyle(document.body),requestAnimationFrame((function(){requestAnimationFrame((function(){document.head.removeChild(e)}))}))}}};return r}({preventTransition:c})}),[c]),v=_.getSystemTheme,x=_.setClassName,w=_.setDataset,k=_.addListener,S="system"!==s||f?f:y,T=(0,e.useCallback)((function(e){var t="system"===e?v():e;m(t),x("dark"===t),w(t),d.set(t)}),[d,v,x,w]);vn((function(){"system"===s&&b(v())}),[]),(0,e.useEffect)((function(){var e=d.get();T(e||("system"!==s?h:"system"))}),[d,h,s,T]);var A=(0,e.useCallback)((function(){T("dark"===S?"light":"dark")}),[S,T]);(0,e.useEffect)((function(){if(o)return k(T)}),[o,k,T]);var C=(0,e.useMemo)((function(){return{colorMode:null!=r?r:S,toggleColorMode:r?xn:A,setColorMode:r?xn:T,forced:void 0!==r}}),[S,A,T,r]);return(0,Ye.jsx)(ot.Provider,{value:C,children:n})}kn.displayName="ColorModeProvider";var Sn=(0,e.createContext)({getDocument:function(){return document},getWindow:function(){return window}});function Tn(t){var r=t.children,n=t.environment,i=t.disabled,a=(0,e.useRef)(null),o=(0,e.useMemo)((function(){return n||{getDocument:function(){var e,t;return null!=(t=null==(e=a.current)?void 0:e.ownerDocument)?t:document},getWindow:function(){var e,t;return null!=(t=null==(e=a.current)?void 0:e.ownerDocument.defaultView)?t:window}}}),[n]),s=!i||!n;return(0,Ye.jsxs)(Sn.Provider,{value:o,children:[r,s&&(0,Ye.jsx)("span",{id:"__chakra_env",hidden:!0,ref:a})]})}Sn.displayName="EnvironmentContext",Tn.displayName="EnvironmentProvider";var An,Cn,En,In,Pn=function(e){var t=e.children,r=e.colorModeManager,n=e.portalZIndex,i=e.resetScope,a=e.resetCSS,o=void 0===a||a,s=e.theme,l=void 0===s?{}:s,c=e.environment,u=e.cssVarsRoot,d=e.disableEnvironment,h=e.disableGlobalStyle,p=(0,Ye.jsx)(Tn,{environment:c,disabled:d,children:t});return(0,Ye.jsx)(un,{theme:l,cssVarsRoot:u,children:(0,Ye.jsxs)(kn,{colorModeManager:r,options:l.config,children:[o?(0,Ye.jsx)(et,{scope:i}):(0,Ye.jsx)(Qe,{}),!h&&(0,Ye.jsx)(fn,{}),n?(0,Ye.jsx)(at,{zIndex:n,children:p}):p]})})},Mn={property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}},Dn={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},zn={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},Ln={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},Rn={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},Bn={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},On={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},Fn={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},Un={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},Nn={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},jn=y(y(y({},Nn),{max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"}),{},{container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}}),Vn=y(y({breakpoints:Ln,zIndices:Dn,radii:Bn,blur:Fn,colors:Rn},Un),{},{sizes:jn,shadows:On,space:Nn,borders:zn,transition:Mn}),Wn=rn(["stepper","step","title","description","indicator","separator","icon","number"]),qn=Wn.defineMultiStyleConfig,Gn=Wn.definePartsStyle,$n=yr("stepper-indicator-size"),Hn=yr("stepper-icon-size"),Zn=yr("stepper-title-font-size"),Xn=yr("stepper-description-font-size"),Yn=yr("stepper-accent-color"),Kn=qn({baseStyle:Gn((function(e){var t,r=e.colorScheme;return{stepper:(t={display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"}},m(t,Yn.variable,"colors.".concat(r,".500")),m(t,"_dark",m({},Yn.variable,"colors.".concat(r,".200"))),t),title:{fontSize:Zn.reference,fontWeight:"medium"},description:{fontSize:Xn.reference,color:"chakra-subtle-text"},number:{fontSize:Zn.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Hn.reference,height:Hn.reference},indicator:{flexShrink:0,borderRadius:"full",width:$n.reference,height:$n.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:Yn.reference},"&[data-status=complete]":{bg:Yn.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:Yn.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:"calc(100% - ".concat($n.reference," - 8px)"),top:"calc(".concat($n.reference," + 4px)"),insetStart:"calc(".concat($n.reference," / 2 - 1px)")}}}})),sizes:{xs:Gn({stepper:(An={},m(An,$n.variable,"sizes.4"),m(An,Hn.variable,"sizes.3"),m(An,Zn.variable,"fontSizes.xs"),m(An,Xn.variable,"fontSizes.xs"),An)}),sm:Gn({stepper:(Cn={},m(Cn,$n.variable,"sizes.6"),m(Cn,Hn.variable,"sizes.4"),m(Cn,Zn.variable,"fontSizes.sm"),m(Cn,Xn.variable,"fontSizes.xs"),Cn)}),md:Gn({stepper:(En={},m(En,$n.variable,"sizes.8"),m(En,Hn.variable,"sizes.5"),m(En,Zn.variable,"fontSizes.md"),m(En,Xn.variable,"fontSizes.sm"),En)}),lg:Gn({stepper:(In={},m(In,$n.variable,"sizes.10"),m(In,Hn.variable,"sizes.6"),m(In,Zn.variable,"fontSizes.lg"),m(In,Xn.variable,"fontSizes.md"),In)})},defaultProps:{size:"md",colorScheme:"blue"}});function Jn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!1;function n(t){var r=(["container","root"].includes(null!=t?t:"")?[e]:[e,t]).filter(Boolean).join("__"),n="chakra-".concat(r);return{className:n,selector:".".concat(n),toString:function(){return t}}}return{parts:function(){!function(){if(r)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");r=!0}();for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];for(var s=0,l=a;s<l.length;s++){var c=l[s];t[c]=n(c)}return Jn(e,t)},toPart:n,extend:function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];for(var o=0,s=i;o<s.length;o++){var l=s[o];l in t||(t[l]=n(l))}return Jn(e,t)},selectors:function(){return Object.fromEntries(Object.entries(t).map((function(e){var t=l(e,2);return[t[0],t[1].selector]})))},classnames:function(){return Object.fromEntries(Object.entries(t).map((function(e){var t=l(e,2);return[t[0],t[1].className]})))},get keys(){return Object.keys(t)},__type:{}}}var Qn=Jn("accordion").parts("root","container","button","panel").extend("icon"),ei=Jn("alert").parts("title","description","container").extend("icon","spinner"),ti=Jn("avatar").parts("label","badge","container").extend("excessLabel","group"),ri=Jn("breadcrumb").parts("link","item","container").extend("separator"),ni=(Jn("button").parts(),Jn("checkbox").parts("control","icon","container").extend("label")),ii=(Jn("progress").parts("track","filledTrack").extend("label"),Jn("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),ai=Jn("editable").parts("preview","input","textarea"),oi=Jn("form").parts("container","requiredIndicator","helperText"),si=Jn("formError").parts("text","icon"),li=Jn("input").parts("addon","field","element","group"),ci=Jn("list").parts("container","item","icon"),ui=Jn("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),di=Jn("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),hi=Jn("numberinput").parts("root","field","stepperGroup","stepper"),pi=(Jn("pininput").parts("field"),Jn("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),fi=Jn("progress").parts("label","filledTrack","track"),mi=Jn("radio").parts("container","control","label"),gi=Jn("select").parts("field","icon"),yi=Jn("slider").parts("container","track","thumb","filledTrack","mark"),bi=Jn("stat").parts("container","label","helpText","number","icon"),_i=Jn("switch").parts("container","track","thumb"),vi=Jn("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),xi=Jn("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),wi=Jn("tag").parts("container","label","closeButton"),ki=Jn("card").parts("container","header","body","footer");function Si(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/\s+/g,t)}(e.toString());return t.includes("\\.")?e:function(e){return!Number.isInteger(parseFloat(e.toString()))}(e)?t.replace(".","\\."):e}function Ti(e,t){return"var(".concat(Si(e)).concat(t?", ".concat(t):"",")")}function Ai(e){return"--".concat(function(e){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",Si(e)].filter(Boolean).join("-")}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:""))}function Ci(e,t){var r=Ai(e,null==t?void 0:t.prefix);return{variable:r,reference:Ti(r,Ei(null==t?void 0:t.fallback))}}function Ei(e){return"string"===typeof e?e:null==e?void 0:e.reference}function Ii(e){return dt(e)&&e.reference?e.reference:String(e)}var Pi,Mi,Di,zi=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.map(Ii).join(" ".concat(e," ")).replace(/calc/g,"")},Li=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc(".concat(zi.apply(void 0,["+"].concat(t)),")")},Ri=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc(".concat(zi.apply(void 0,["-"].concat(t)),")")},Bi=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc(".concat(zi.apply(void 0,["*"].concat(t)),")")},Oi=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc(".concat(zi.apply(void 0,["/"].concat(t)),")")},Fi=function(e){var t=Ii(e);return null==t||Number.isNaN(parseFloat(t))?Bi(t,-1):String(t).startsWith("-")?String(t).slice(1):"-".concat(t)},Ui=Object.assign((function(e){return{add:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ui(Li.apply(void 0,[e].concat(r)))},subtract:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ui(Ri.apply(void 0,[e].concat(r)))},multiply:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ui(Bi.apply(void 0,[e].concat(r)))},divide:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ui(Oi.apply(void 0,[e].concat(r)))},negate:function(){return Ui(Fi(e))},toString:function(){return e.toString()}}}),{add:Li,subtract:Ri,multiply:Bi,divide:Oi,negate:Fi}),Ni=rn(_i.keys),ji=Ni.defineMultiStyleConfig,Vi=Ni.definePartsStyle,Wi=Ci("switch-track-width"),qi=Ci("switch-track-height"),Gi=Ci("switch-track-diff"),$i=Ui.subtract(Wi,qi),Hi=Ci("switch-thumb-x"),Zi=Ci("switch-bg"),Xi=function(e){var t,r,n=e.colorScheme;return m(r={borderRadius:"full",p:"0.5",width:[Wi.reference],height:[qi.reference],transitionProperty:"common",transitionDuration:"fast"},Zi.variable,"colors.gray.300"),m(r,"_dark",m({},Zi.variable,"colors.whiteAlpha.400")),m(r,"_focusVisible",{boxShadow:"outline"}),m(r,"_disabled",{opacity:.4,cursor:"not-allowed"}),m(r,"_checked",(m(t={},Zi.variable,"colors.".concat(n,".500")),m(t,"_dark",m({},Zi.variable,"colors.".concat(n,".200"))),t)),m(r,"bg",Zi.reference),r},Yi={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[qi.reference],height:[qi.reference],_checked:{transform:"translateX(".concat(Hi.reference,")")}},Ki=Vi((function(e){var t;return{container:(t={},m(t,Gi.variable,$i),m(t,Hi.variable,Gi.reference),m(t,"_rtl",m({},Hi.variable,Ui(Gi).negate().toString())),t),track:Xi(e),thumb:Yi}})),Ji=ji({baseStyle:Ki,sizes:{sm:Vi({container:(Pi={},m(Pi,Wi.variable,"1.375rem"),m(Pi,qi.variable,"sizes.3"),Pi)}),md:Vi({container:(Mi={},m(Mi,Wi.variable,"1.875rem"),m(Mi,qi.variable,"sizes.4"),Mi)}),lg:Vi({container:(Di={},m(Di,Wi.variable,"2.875rem"),m(Di,qi.variable,"sizes.6"),Di)})},defaultProps:{size:"md",colorScheme:"blue"}});function Qi(e,t){return function(r){return"dark"===r.colorMode?t:e}}function ea(e){var t=e.orientation,r=e.vertical,n=e.horizontal;return t?"vertical"===t?r:n:{}}var ta=rn(vi.keys),ra=ta.defineMultiStyleConfig,na=ta.definePartsStyle,ia=na({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),aa={"&[data-is-numeric=true]":{textAlign:"end"}},oa=ra({baseStyle:ia,variants:{simple:na((function(e){var t=e.colorScheme;return{th:y({color:Qi("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Qi("".concat(t,".100"),"".concat(t,".700"))(e)},aa),td:y({borderBottom:"1px",borderColor:Qi("".concat(t,".100"),"".concat(t,".700"))(e)},aa),caption:{color:Qi("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),striped:na((function(e){var t=e.colorScheme;return{th:y({color:Qi("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Qi("".concat(t,".100"),"".concat(t,".700"))(e)},aa),td:y({borderBottom:"1px",borderColor:Qi("".concat(t,".100"),"".concat(t,".700"))(e)},aa),caption:{color:Qi("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Qi("".concat(t,".100"),"".concat(t,".700"))(e)},td:{background:Qi("".concat(t,".100"),"".concat(t,".700"))(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),unstyled:{}},sizes:{sm:na({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:na({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:na({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}});function sa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function la(e,t,r){return t&&sa(e.prototype,t),r&&sa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ua(e,t){return ua=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ua(e,t)}function da(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ua(e,t)}function ha(e){return ha=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ha(e)}function pa(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function fa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ma(e){var t=pa();return function(){var r,n=ha(e);if(t){var i=ha(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fa(e)}(this,r)}}function ga(e,t,r){return ga=pa()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&ua(i,r.prototype),i},ga.apply(null,arguments)}function ya(e){var t="function"===typeof Map?new Map:void 0;return ya=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ga(e,arguments,ha(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ua(n,e)},ya(e)}function ba(e,t,r){return Math.min(Math.max(e,r),t)}var _a=function(e){da(r,e);var t=ma(r);function r(e){return ca(this,r),t.call(this,'Failed to parse color: "'.concat(e,'"'))}return la(r)}(ya(Error)),va=_a;function xa(e){if("string"!==typeof e)throw new va(e);if("transparent"===e.trim().toLowerCase())return[0,0,0,0];var t=e.trim();t=Ia.test(e)?function(e){var t=e.toLowerCase().trim(),r=ka[function(e){var t=5381,r=e.length;for(;r;)t=33*t^e.charCodeAt(--r);return(t>>>0)%2341}(t)];if(!r)throw new va(e);return"#".concat(r)}(e):e;var r=Ta.exec(t);if(r){var n=Array.from(r).slice(1);return[].concat(u(n.slice(0,3).map((function(e){return parseInt(Sa(e,2),16)}))),[parseInt(Sa(n[3]||"f",2),16)/255])}var i=Aa.exec(t);if(i){var a=Array.from(i).slice(1);return[].concat(u(a.slice(0,3).map((function(e){return parseInt(e,16)}))),[parseInt(a[3]||"ff",16)/255])}var o=Ca.exec(t);if(o){var s=Array.from(o).slice(1);return[].concat(u(s.slice(0,3).map((function(e){return parseInt(e,10)}))),[parseFloat(s[3]||"1")])}var c=Ea.exec(t);if(c){var d=l(Array.from(c).slice(1).map(parseFloat),4),h=d[0],p=d[1],f=d[2],m=d[3];if(ba(0,100,p)!==p)throw new va(e);if(ba(0,100,f)!==f)throw new va(e);return[].concat(u(Ma(h,p,f)),[Number.isNaN(m)?1:m])}throw new va(e)}var wa=function(e){return parseInt(e.replace(/_/g,""),36)},ka="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((function(e,t){for(var r=wa(t.substring(0,3)),n=wa(t.substring(3)).toString(16),i="",a=0;a<6-n.length;a++)i+="0";return e[r]="".concat(i).concat(n),e}),{});var Sa=function(e,t){return Array.from(Array(t)).map((function(){return e})).join("")},Ta=new RegExp("^#".concat(Sa("([a-f0-9])",3),"([a-f0-9])?$"),"i"),Aa=new RegExp("^#".concat(Sa("([a-f0-9]{2})",3),"([a-f0-9]{2})?$"),"i"),Ca=new RegExp("^rgba?\\(\\s*(\\d+)\\s*".concat(Sa(",\\s*(\\d+)\\s*",2),"(?:,\\s*([\\d.]+))?\\s*\\)$"),"i"),Ea=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Ia=/^[a-z]+$/i,Pa=function(e){return Math.round(255*e)},Ma=function(e,t,r){var n=r/100;if(0===t)return[n,n,n].map(Pa);var i=(e%360+360)%360/60,a=(1-Math.abs(2*n-1))*(t/100),o=a*(1-Math.abs(i%2-1)),s=0,l=0,c=0;i>=0&&i<1?(s=a,l=o):i>=1&&i<2?(s=o,l=a):i>=2&&i<3?(l=a,c=o):i>=3&&i<4?(l=o,c=a):i>=4&&i<5?(s=o,c=a):i>=5&&i<6&&(s=a,c=o);var u=n-a/2;return[s+u,l+u,c+u].map(Pa)};function Da(e,t,r,n){return"rgba(".concat(ba(0,255,e).toFixed(),", ").concat(ba(0,255,t).toFixed(),", ").concat(ba(0,255,r).toFixed(),", ").concat(parseFloat(ba(0,1,n).toFixed(3)),")")}function za(e,t){var r=l(xa(e),4);return Da(r[0],r[1],r[2],r[3]-t)}var La=function(e,t,r){var n=function(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}(e,"colors.".concat(t),t);try{return function(e){var t=l(xa(e),4),r=t[0],n=t[1],i=t[2],a=t[3],o=function(e){var t=ba(0,255,e).toString(16);return 1===t.length?"0".concat(t):t};"#".concat(o(r)).concat(o(n)).concat(o(i)).concat(a<1?o(Math.round(255*a)):"")}(n),n}catch(i){return null!=r?r:"#000000"}},Ra=function(e){return function(t){var r=function(e){var t=l(xa(e),3);return(299*t[0]+587*t[1]+114*t[2])/1e3}(La(t,e));return r<128?"dark":"light"}},Ba=function(e,t){return function(r){return za(La(r,e),1-t)}};function Oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1rem",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(255, 255, 255, 0.15)";return{backgroundImage:"linear-gradient(\n    45deg,\n    ".concat(t," 25%,\n    transparent 25%,\n    transparent 50%,\n    ").concat(t," 50%,\n    ").concat(t," 75%,\n    transparent 75%,\n    transparent\n  )"),backgroundSize:"".concat(e," ").concat(e)}}function Fa(e){var t,r="#".concat(Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0"));return e&&(t=e,0!==Object.keys(t).length)?e.string&&e.colors?function(e,t){var r=0;if(0===e.length)return t[0];for(var n=0;n<e.length;n+=1)r=e.charCodeAt(n)+((r<<5)-r),r&=r;return r=(r%t.length+t.length)%t.length,t[r]}(e.string,e.colors):e.string&&!e.colors?function(e){var t=0;if(0===e.length)return t.toString();for(var r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t&=t;for(var n="#",i=0;i<3;i+=1){n+="00".concat((t>>8*i&255).toString(16)).substr(-2)}return n}(e.string):e.colors&&!e.string?function(e){return e[Math.floor(Math.random()*e.length)]}(e.colors):r:r}var Ua,Na,ja,Va,Wa,qa,Ga,$a,Ha=yr("tabs-color"),Za=yr("tabs-bg"),Xa=yr("tabs-border-color"),Ya=rn(xi.keys),Ka=Ya.defineMultiStyleConfig,Ja=Ya.definePartsStyle,Qa=function(e){return{display:"vertical"===e.orientation?"flex":"block"}},eo=function(e){return{flex:e.isFitted?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},to=function(e){var t=e.align,r=void 0===t?"start":t,n=e.orientation;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[r],flexDirection:"vertical"===n?"column":"row"}},ro={p:4},no=Ja((function(e){return{root:Qa(e),tab:eo(e),tablist:to(e),tabpanel:ro}})),io={sm:Ja({tab:{py:1,px:4,fontSize:"sm"}}),md:Ja({tab:{fontSize:"md",py:2,px:4}}),lg:Ja({tab:{fontSize:"lg",py:3,px:4}})},ao=Ja((function(e){var t,r,n,i,a=e.colorScheme,o="vertical"===e.orientation,s=o?"borderStart":"borderBottom",l=o?"marginStart":"marginBottom";return{tablist:(t={},m(t,s,"2px solid"),m(t,"borderColor","inherit"),t),tab:(i={},m(i,s,"2px solid"),m(i,"borderColor","transparent"),m(i,l,"-2px"),m(i,"_selected",(r={},m(r,Ha.variable,"colors.".concat(a,".600")),m(r,"_dark",m({},Ha.variable,"colors.".concat(a,".300"))),m(r,"borderColor","currentColor"),r)),m(i,"_active",(n={},m(n,Za.variable,"colors.gray.200"),m(n,"_dark",m({},Za.variable,"colors.whiteAlpha.300")),n)),m(i,"_disabled",{_active:{bg:"none"}}),m(i,"color",Ha.reference),m(i,"bg",Za.reference),i)}})),oo=Ja((function(e){var t,r,n,i=e.colorScheme;return{tab:(n={borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px"},m(n,Xa.variable,"transparent"),m(n,"_selected",(r={},m(r,Ha.variable,"colors.".concat(i,".600")),m(r,Xa.variable,"colors.white"),m(r,"_dark",(t={},m(t,Ha.variable,"colors.".concat(i,".300")),m(t,Xa.variable,"colors.gray.800"),t)),m(r,"borderColor","inherit"),m(r,"borderBottomColor",Xa.reference),r)),m(n,"color",Ha.reference),n),tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),so=Ja((function(e){var t,r,n,i=e.colorScheme;return{tab:(n={border:"1px solid",borderColor:"inherit"},m(n,Za.variable,"colors.gray.50"),m(n,"_dark",m({},Za.variable,"colors.whiteAlpha.50")),m(n,"mb","-1px"),m(n,"_notLast",{marginEnd:"-1px"}),m(n,"_selected",(r={},m(r,Za.variable,"colors.white"),m(r,Ha.variable,"colors.".concat(i,".600")),m(r,"_dark",(t={},m(t,Za.variable,"colors.gray.800"),m(t,Ha.variable,"colors.".concat(i,".300")),t)),m(r,"borderColor","inherit"),m(r,"borderTopColor","currentColor"),m(r,"borderBottomColor","transparent"),r)),m(n,"color",Ha.reference),m(n,"bg",Za.reference),n),tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),lo=Ja((function(e){var t=e.colorScheme,r=e.theme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:La(r,"".concat(t,".700")),bg:La(r,"".concat(t,".100"))}}}})),co=Ka({baseStyle:no,sizes:io,variants:{line:ao,enclosed:oo,"enclosed-colored":so,"soft-rounded":lo,"solid-rounded":Ja((function(e){var t,r,n,i=e.colorScheme;return{tab:(n={borderRadius:"full",fontWeight:"semibold"},m(n,Ha.variable,"colors.gray.600"),m(n,"_dark",m({},Ha.variable,"inherit")),m(n,"_selected",(r={},m(r,Ha.variable,"colors.white"),m(r,Za.variable,"colors.".concat(i,".600")),m(r,"_dark",(t={},m(t,Ha.variable,"colors.gray.800"),m(t,Za.variable,"colors.".concat(i,".300")),t)),r)),m(n,"color",Ha.reference),m(n,"bg",Za.reference),n)}})),unstyled:Ja({})},defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),uo=function(e,t){var r,n={},i=lt(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(Array.isArray(a)){var o=l(a,2),s=o[0],c=o[1];n[s]=yr("".concat(e,"-").concat(s),c)}else n[a]=yr("".concat(e,"-").concat(a))}}catch(u){i.e(u)}finally{i.f()}return n}("badge",["bg","color","shadow"]),ho=function(e){var t,r,n=e.colorScheme,i=e.theme,a=Ba("".concat(n,".500"),.6)(i);return m(r={},uo.bg.variable,"colors.".concat(n,".500")),m(r,uo.color.variable,"colors.white"),m(r,"_dark",(m(t={},uo.bg.variable,a),m(t,uo.color.variable,"colors.whiteAlpha.800"),t)),r},po=function(e){var t,r,n=e.colorScheme,i=e.theme,a=Ba("".concat(n,".200"),.16)(i);return m(r={},uo.bg.variable,"colors.".concat(n,".100")),m(r,uo.color.variable,"colors.".concat(n,".800")),m(r,"_dark",(m(t={},uo.bg.variable,a),m(t,uo.color.variable,"colors.".concat(n,".200")),t)),r},fo=function(e){var t,r=e.colorScheme,n=e.theme,i=Ba("".concat(r,".200"),.8)(n);return m(t={},uo.color.variable,"colors.".concat(r,".500")),m(t,"_dark",m({},uo.color.variable,i)),m(t,uo.shadow.variable,"inset 0 0 0px 1px ".concat(uo.color.reference)),t},mo={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:uo.bg.reference,color:uo.color.reference,boxShadow:uo.shadow.reference},variants:{solid:ho,subtle:po,outline:fo},defaultProps:{variant:"subtle",colorScheme:"gray"}},go=rn(wi.keys),yo=go.defineMultiStyleConfig,bo=go.definePartsStyle,_o=yr("tag-bg"),vo=yr("tag-color"),xo=yr("tag-shadow"),wo=yr("tag-min-height"),ko=yr("tag-min-width"),So=yr("tag-font-size"),To=yr("tag-padding-inline"),Ao=bo({container:(m(Ua={fontWeight:"medium",lineHeight:1.2,outline:0},vo.variable,uo.color.reference),m(Ua,_o.variable,uo.bg.reference),m(Ua,xo.variable,uo.shadow.reference),m(Ua,"color",vo.reference),m(Ua,"bg",_o.reference),m(Ua,"boxShadow",xo.reference),m(Ua,"borderRadius","md"),m(Ua,"minH",wo.reference),m(Ua,"minW",ko.reference),m(Ua,"fontSize",So.reference),m(Ua,"px",To.reference),m(Ua,"_focusVisible",m({},xo.variable,"shadows.outline")),Ua),label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}}),Co={sm:bo({container:(Na={},m(Na,wo.variable,"sizes.5"),m(Na,ko.variable,"sizes.5"),m(Na,So.variable,"fontSizes.xs"),m(Na,To.variable,"space.2"),Na),closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:bo({container:(ja={},m(ja,wo.variable,"sizes.6"),m(ja,ko.variable,"sizes.6"),m(ja,So.variable,"fontSizes.sm"),m(ja,To.variable,"space.2"),ja)}),lg:bo({container:(Va={},m(Va,wo.variable,"sizes.8"),m(Va,ko.variable,"sizes.8"),m(Va,So.variable,"fontSizes.md"),m(Va,To.variable,"space.3"),Va)})},Eo={subtle:bo((function(e){var t;return{container:null==(t=mo.variants)?void 0:t.subtle(e)}})),solid:bo((function(e){var t;return{container:null==(t=mo.variants)?void 0:t.solid(e)}})),outline:bo((function(e){var t;return{container:null==(t=mo.variants)?void 0:t.outline(e)}}))},Io=yo({variants:Eo,baseStyle:Ao,sizes:Co,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),Po=rn(li.keys),Mo=Po.definePartsStyle,Do=Po.defineMultiStyleConfig,zo=yr("input-height"),Lo=yr("input-font-size"),Ro=yr("input-padding"),Bo=yr("input-border-radius"),Oo=Mo({addon:{height:zo.reference,fontSize:Lo.reference,px:Ro.reference,borderRadius:Bo.reference},field:{width:"100%",height:zo.reference,fontSize:Lo.reference,px:Ro.reference,borderRadius:Bo.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),Fo={lg:(Wa={},m(Wa,Lo.variable,"fontSizes.lg"),m(Wa,Ro.variable,"space.4"),m(Wa,Bo.variable,"radii.md"),m(Wa,zo.variable,"sizes.12"),Wa),md:(qa={},m(qa,Lo.variable,"fontSizes.md"),m(qa,Ro.variable,"space.4"),m(qa,Bo.variable,"radii.md"),m(qa,zo.variable,"sizes.10"),qa),sm:(Ga={},m(Ga,Lo.variable,"fontSizes.sm"),m(Ga,Ro.variable,"space.3"),m(Ga,Bo.variable,"radii.sm"),m(Ga,zo.variable,"sizes.8"),Ga),xs:($a={},m($a,Lo.variable,"fontSizes.xs"),m($a,Ro.variable,"space.2"),m($a,Bo.variable,"radii.sm"),m($a,zo.variable,"sizes.6"),$a)},Uo={lg:Mo({field:Fo.lg,group:Fo.lg}),md:Mo({field:Fo.md,group:Fo.md}),sm:Mo({field:Fo.sm,group:Fo.sm}),xs:Mo({field:Fo.xs,group:Fo.xs})};function No(e){var t=e.focusBorderColor,r=e.errorBorderColor;return{focusBorderColor:t||Qi("blue.500","blue.300")(e),errorBorderColor:r||Qi("red.500","red.300")(e)}}var jo,Vo,Wo,qo,Go,$o,Ho,Zo,Xo,Yo,Ko,Jo,Qo,es=Mo((function(e){var t=e.theme,r=No(e),n=r.focusBorderColor,i=r.errorBorderColor;return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Qi("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:La(t,i),boxShadow:"0 0 0 1px ".concat(La(t,i))},_focusVisible:{zIndex:1,borderColor:La(t,n),boxShadow:"0 0 0 1px ".concat(La(t,n))}},addon:{border:"1px solid",borderColor:Qi("inherit","whiteAlpha.50")(e),bg:Qi("gray.100","whiteAlpha.300")(e)}}})),ts=Mo((function(e){var t=e.theme,r=No(e),n=r.focusBorderColor,i=r.errorBorderColor;return{field:{border:"2px solid",borderColor:"transparent",bg:Qi("gray.100","whiteAlpha.50")(e),_hover:{bg:Qi("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:La(t,i)},_focusVisible:{bg:"transparent",borderColor:La(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Qi("gray.100","whiteAlpha.50")(e)}}})),rs=Mo((function(e){var t=e.theme,r=No(e),n=r.focusBorderColor,i=r.errorBorderColor;return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:La(t,i),boxShadow:"0px 1px 0px 0px ".concat(La(t,i))},_focusVisible:{borderColor:La(t,n),boxShadow:"0px 1px 0px 0px ".concat(La(t,n))}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}})),ns=Do({baseStyle:Oo,sizes:Uo,variants:{outline:es,filled:ts,flushed:rs,unstyled:Mo({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}})},defaultProps:{size:"md",variant:"outline"}}),is=y(y({},null==(jo=ns.baseStyle)?void 0:jo.field),{},{paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"}),as={outline:function(e){var t,r;return null!=(r=null==(t=ns.variants)?void 0:t.outline(e).field)?r:{}},flushed:function(e){var t,r;return null!=(r=null==(t=ns.variants)?void 0:t.flushed(e).field)?r:{}},filled:function(e){var t,r;return null!=(r=null==(t=ns.variants)?void 0:t.filled(e).field)?r:{}},unstyled:null!=(Wo=null==(Vo=ns.variants)?void 0:Vo.unstyled.field)?Wo:{}},os={baseStyle:is,sizes:{xs:null!=(Go=null==(qo=ns.sizes)?void 0:qo.xs.field)?Go:{},sm:null!=(Ho=null==($o=ns.sizes)?void 0:$o.sm.field)?Ho:{},md:null!=(Xo=null==(Zo=ns.sizes)?void 0:Zo.md.field)?Xo:{},lg:null!=(Ko=null==(Yo=ns.sizes)?void 0:Yo.lg.field)?Ko:{}},variants:as,defaultProps:{size:"md",variant:"outline"}},ss=Ci("tooltip-bg"),ls=Ci("tooltip-fg"),cs=Ci("popper-arrow-bg"),us={baseStyle:(m(Qo={bg:ss.reference,color:ls.reference},ss.variable,"colors.gray.700"),m(Qo,ls.variable,"colors.whiteAlpha.900"),m(Qo,"_dark",(m(Jo={},ss.variable,"colors.gray.300"),m(Jo,ls.variable,"colors.gray.900"),Jo)),m(Qo,cs.variable,ss.reference),m(Qo,"px","2"),m(Qo,"py","0.5"),m(Qo,"borderRadius","sm"),m(Qo,"fontWeight","medium"),m(Qo,"fontSize","sm"),m(Qo,"boxShadow","md"),m(Qo,"maxW","xs"),m(Qo,"zIndex","tooltip"),Qo)},ds=rn(fi.keys),hs=ds.defineMultiStyleConfig,ps=ds.definePartsStyle,fs=function(e){var t=e.colorScheme,r=e.theme,n=e.isIndeterminate,i=e.hasStripe,a=Qi(Oa(),Oa("1rem","rgba(0,0,0,0.1)"))(e),o=Qi("".concat(t,".500"),"".concat(t,".200"))(e),s="linear-gradient(\n    to right,\n    transparent 0%,\n    ".concat(La(r,o)," 50%,\n    transparent 100%\n  )");return y(y({},!n&&i&&a),n?{bgImage:s}:{bgColor:o})},ms={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},gs=function(e){return{bg:Qi("gray.100","whiteAlpha.300")(e)}},ys=function(e){return y({transitionProperty:"common",transitionDuration:"slow"},fs(e))},bs=ps((function(e){return{label:ms,filledTrack:ys(e),track:gs(e)}})),_s=hs({sizes:{xs:ps({track:{h:"1"}}),sm:ps({track:{h:"2"}}),md:ps({track:{h:"3"}}),lg:ps({track:{h:"4"}})},baseStyle:bs,defaultProps:{size:"md",colorScheme:"blue"}});function vs(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return"function"===typeof e?e.apply(void 0,r):e}var xs,ws,ks,Ss,Ts,As,Cs,Es,Is,Ps,Ms,Ds,zs,Ls,Rs,Bs,Os,Fs,Us,Ns,js,Vs,Ws=rn(ni.keys),qs=Ws.definePartsStyle,Gs=Ws.defineMultiStyleConfig,$s=yr("checkbox-size"),Hs=function(e){var t=e.colorScheme;return{w:$s.reference,h:$s.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Qi("".concat(t,".500"),"".concat(t,".200"))(e),borderColor:Qi("".concat(t,".500"),"".concat(t,".200"))(e),color:Qi("white","gray.900")(e),_hover:{bg:Qi("".concat(t,".600"),"".concat(t,".300"))(e),borderColor:Qi("".concat(t,".600"),"".concat(t,".300"))(e)},_disabled:{borderColor:Qi("gray.200","transparent")(e),bg:Qi("gray.200","whiteAlpha.300")(e),color:Qi("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:Qi("".concat(t,".500"),"".concat(t,".200"))(e),borderColor:Qi("".concat(t,".500"),"".concat(t,".200"))(e),color:Qi("white","gray.900")(e)},_disabled:{bg:Qi("gray.100","whiteAlpha.100")(e),borderColor:Qi("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Qi("red.500","red.300")(e)}}},Zs={_disabled:{cursor:"not-allowed"}},Xs={userSelect:"none",_disabled:{opacity:.4}},Ys={transitionProperty:"transform",transitionDuration:"normal"},Ks=Gs({baseStyle:qs((function(e){return{icon:Ys,container:Zs,control:vs(Hs,e),label:Xs}})),sizes:{sm:qs({control:m({},$s.variable,"sizes.3"),label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:qs({control:m({},$s.variable,"sizes.4"),label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:qs({control:m({},$s.variable,"sizes.5"),label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},defaultProps:{size:"md",colorScheme:"blue"}}),Js=rn(mi.keys),Qs=Js.defineMultiStyleConfig,el=Js.definePartsStyle,tl=function(e){var t,r=null==(t=vs(Ks.baseStyle,e))?void 0:t.control;return y(y({},r),{},{borderRadius:"full",_checked:y(y({},null==r?void 0:r._checked),{},{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},rl=el((function(e){var t,r,n,i;return{label:null==(r=(t=Ks).baseStyle)?void 0:r.call(t,e).label,container:null==(i=(n=Ks).baseStyle)?void 0:i.call(n,e).container,control:tl(e)}})),nl=Qs({baseStyle:rl,sizes:{md:el({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:el({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:el({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},defaultProps:{size:"md",colorScheme:"blue"}}),il=rn(gi.keys),al=il.defineMultiStyleConfig,ol=il.definePartsStyle,sl=yr("select-bg"),ll={paddingInlineEnd:"8"},cl=al({baseStyle:ol({field:y(y({},null==(ws=ns.baseStyle)?void 0:ws.field),{},(m(xs={appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:sl.reference},sl.variable,"colors.white"),m(xs,"_dark",m({},sl.variable,"colors.gray.700")),m(xs,"> option, > optgroup",{bg:sl.reference}),xs)),icon:{width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}}}),sizes:{lg:y(y({},null==(ks=ns.sizes)?void 0:ks.lg),{},{field:y(y({},null==(Ss=ns.sizes)?void 0:Ss.lg.field),ll)}),md:y(y({},null==(Ts=ns.sizes)?void 0:Ts.md),{},{field:y(y({},null==(As=ns.sizes)?void 0:As.md.field),ll)}),sm:y(y({},null==(Cs=ns.sizes)?void 0:Cs.sm),{},{field:y(y({},null==(Es=ns.sizes)?void 0:Es.sm.field),ll)}),xs:y(y({},null==(Is=ns.sizes)?void 0:Is.xs),{},{field:y(y({},null==(Ps=ns.sizes)?void 0:Ps.xs.field),ll),icon:{insetEnd:"1"}})},variants:ns.variants,defaultProps:ns.defaultProps}),ul=yr("skeleton-start-color"),dl=yr("skeleton-end-color"),hl={baseStyle:(m(Ds={},ul.variable,"colors.gray.100"),m(Ds,dl.variable,"colors.gray.400"),m(Ds,"_dark",(m(Ms={},ul.variable,"colors.gray.800"),m(Ms,dl.variable,"colors.gray.600"),Ms)),m(Ds,"background",ul.reference),m(Ds,"borderColor",dl.reference),m(Ds,"opacity",.7),m(Ds,"borderRadius","sm"),Ds)},pl=yr("skip-link-bg"),fl={baseStyle:{borderRadius:"md",fontWeight:"semibold",_focusVisible:(zs={boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6"},m(zs,pl.variable,"colors.white"),m(zs,"_dark",m({},pl.variable,"colors.gray.700")),m(zs,"bg",pl.reference),zs)}},ml=rn(yi.keys),gl=ml.defineMultiStyleConfig,yl=ml.definePartsStyle,bl=yr("slider-thumb-size"),_l=yr("slider-track-size"),vl=yr("slider-bg"),xl=function(e){return y({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},ea({orientation:e.orientation,vertical:{h:"100%"},horizontal:{w:"100%"}}))},wl=function(e){var t,r;return y(y({},ea({orientation:e.orientation,horizontal:{h:_l.reference},vertical:{w:_l.reference}})),{},(m(r={overflow:"hidden",borderRadius:"sm"},vl.variable,"colors.gray.200"),m(r,"_dark",m({},vl.variable,"colors.whiteAlpha.200")),m(r,"_disabled",(m(t={},vl.variable,"colors.gray.300"),m(t,"_dark",m({},vl.variable,"colors.whiteAlpha.300")),t)),m(r,"bg",vl.reference),r))},kl=function(e){return y(y({},ea({orientation:e.orientation,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}})),{},{w:bl.reference,h:bl.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}})},Sl=function(e){var t,r=e.colorScheme;return m(t={width:"inherit",height:"inherit"},vl.variable,"colors.".concat(r,".500")),m(t,"_dark",m({},vl.variable,"colors.".concat(r,".200"))),m(t,"bg",vl.reference),t},Tl=gl({baseStyle:yl((function(e){return{container:xl(e),track:wl(e),thumb:kl(e),filledTrack:Sl(e)}})),sizes:{lg:yl({container:(Ls={},m(Ls,bl.variable,"sizes.4"),m(Ls,_l.variable,"sizes.1"),Ls)}),md:yl({container:(Rs={},m(Rs,bl.variable,"sizes.3.5"),m(Rs,_l.variable,"sizes.1"),Rs)}),sm:yl({container:(Bs={},m(Bs,bl.variable,"sizes.2.5"),m(Bs,_l.variable,"sizes.0.5"),Bs)})},defaultProps:{size:"md",colorScheme:"blue"}}),Al=Ci("spinner-size"),Cl={baseStyle:{width:[Al.reference],height:[Al.reference]},sizes:{xs:m({},Al.variable,"sizes.3"),sm:m({},Al.variable,"sizes.4"),md:m({},Al.variable,"sizes.6"),lg:m({},Al.variable,"sizes.8"),xl:m({},Al.variable,"sizes.12")},defaultProps:{size:"md"}},El=rn(bi.keys),Il=El.defineMultiStyleConfig,Pl=El.definePartsStyle,Ml=Il({baseStyle:Pl({container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:"2"},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"}}),sizes:{md:Pl({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},defaultProps:{size:"md"}}),Dl=yr("kbd-bg"),zl={baseStyle:(m(Os={},Dl.variable,"colors.gray.100"),m(Os,"_dark",m({},Dl.variable,"colors.whiteAlpha.100")),m(Os,"bg",Dl.reference),m(Os,"borderRadius","md"),m(Os,"borderWidth","1px"),m(Os,"borderBottomWidth","3px"),m(Os,"fontSize","0.8em"),m(Os,"fontWeight","bold"),m(Os,"lineHeight","normal"),m(Os,"px","0.4em"),m(Os,"whiteSpace","nowrap"),Os)},Ll={baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},Rl=rn(ci.keys),Bl=(0,Rl.defineMultiStyleConfig)({baseStyle:(0,Rl.definePartsStyle)({icon:{marginEnd:"2",display:"inline",verticalAlign:"text-bottom"}})}),Ol=rn(ui.keys),Fl=Ol.defineMultiStyleConfig,Ul=Ol.definePartsStyle,Nl=yr("menu-bg"),jl=yr("menu-shadow"),Vl=Fl({baseStyle:Ul({button:{transitionProperty:"common",transitionDuration:"normal"},list:(m(Us={},Nl.variable,"#fff"),m(Us,jl.variable,"shadows.sm"),m(Us,"_dark",(m(Fs={},Nl.variable,"colors.gray.700"),m(Fs,jl.variable,"shadows.dark-lg"),Fs)),m(Us,"color","inherit"),m(Us,"minW","3xs"),m(Us,"py","2"),m(Us,"zIndex",1),m(Us,"borderRadius","md"),m(Us,"borderWidth","1px"),m(Us,"bg",Nl.reference),m(Us,"boxShadow",jl.reference),Us),item:{py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:(Ns={},m(Ns,Nl.variable,"colors.gray.100"),m(Ns,"_dark",m({},Nl.variable,"colors.whiteAlpha.100")),Ns),_active:(js={},m(js,Nl.variable,"colors.gray.200"),m(js,"_dark",m({},Nl.variable,"colors.whiteAlpha.200")),js),_expanded:(Vs={},m(Vs,Nl.variable,"colors.gray.100"),m(Vs,"_dark",m({},Nl.variable,"colors.whiteAlpha.100")),Vs),_disabled:{opacity:.4,cursor:"not-allowed"},bg:Nl.reference},groupTitle:{mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},command:{opacity:.6},divider:{border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6}})}),Wl=rn(di.keys),ql=Wl.defineMultiStyleConfig,Gl=Wl.definePartsStyle,$l=yr("modal-bg"),Hl=yr("modal-shadow"),Zl={bg:"blackAlpha.600",zIndex:"modal"},Xl=function(e){return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e.isCentered?"center":"flex-start",overflow:"inside"===e.scrollBehavior?"hidden":"auto",overscrollBehaviorY:"none"}},Yl=function(e){var t,r,n=e.isCentered;return m(r={borderRadius:"md",color:"inherit",my:n?"auto":"16",mx:n?"auto":void 0,zIndex:"modal",maxH:"inside"===e.scrollBehavior?"calc(100% - 7.5rem)":void 0},$l.variable,"colors.white"),m(r,Hl.variable,"shadows.lg"),m(r,"_dark",(m(t={},$l.variable,"colors.gray.700"),m(t,Hl.variable,"shadows.dark-lg"),t)),m(r,"bg",$l.reference),m(r,"boxShadow",Hl.reference),r},Kl={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Jl={position:"absolute",top:"2",insetEnd:"3"},Ql=function(e){return{px:"6",py:"2",flex:"1",overflow:"inside"===e.scrollBehavior?"auto":void 0}},ec={px:"6",py:"4"};function tc(e){return Gl("full"===e?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var rc,nc,ic,ac,oc=ql({baseStyle:Gl((function(e){return{overlay:Zl,dialogContainer:vs(Xl,e),dialog:vs(Yl,e),header:Kl,closeButton:Jl,body:vs(Ql,e),footer:ec}})),sizes:{xs:tc("xs"),sm:tc("sm"),md:tc("md"),lg:tc("lg"),xl:tc("xl"),"2xl":tc("2xl"),"3xl":tc("3xl"),"4xl":tc("4xl"),"5xl":tc("5xl"),"6xl":tc("6xl"),full:tc("full")},defaultProps:{size:"md"}}),sc=rn(hi.keys),lc=sc.defineMultiStyleConfig,cc=sc.definePartsStyle,uc=Ci("number-input-stepper-width"),dc=Ci("number-input-input-padding"),hc=Ui(uc).add("0.5rem").toString(),pc=Ci("number-input-bg"),fc=Ci("number-input-color"),mc=Ci("number-input-border-color"),gc=(m(rc={},uc.variable,"sizes.6"),m(rc,dc.variable,hc),rc),yc=function(e){var t,r;return null!=(r=null==(t=vs(ns.baseStyle,e))?void 0:t.field)?r:{}},bc={width:uc.reference},_c=(m(ac={borderStart:"1px solid",borderStartColor:mc.reference,color:fc.reference,bg:pc.reference},fc.variable,"colors.chakra-body-text"),m(ac,mc.variable,"colors.chakra-border-color"),m(ac,"_dark",(m(nc={},fc.variable,"colors.whiteAlpha.800"),m(nc,mc.variable,"colors.whiteAlpha.300"),nc)),m(ac,"_active",(m(ic={},pc.variable,"colors.gray.200"),m(ic,"_dark",m({},pc.variable,"colors.whiteAlpha.300")),ic)),m(ac,"_disabled",{opacity:.4,cursor:"not-allowed"}),ac),vc=cc((function(e){var t;return{root:gc,field:null!=(t=vs(yc,e))?t:{},stepperGroup:bc,stepper:_c}}));function xc(e){var t,r,n,i=null==(t=ns.sizes)?void 0:t[e],a={lg:"md",md:"md",sm:"sm",xs:"sm"},o=null!=(n=null==(r=i.field)?void 0:r.fontSize)?n:"md",s=Un.fontSizes[o];return cc({field:y(y({},i.field),{},{paddingInlineEnd:dc.reference,verticalAlign:"top"}),stepper:{fontSize:Ui(s).multiply(.75).toString(),_first:{borderTopEndRadius:a[e]},_last:{borderBottomEndRadius:a[e],mt:"-1px",borderTopWidth:1}}})}var wc,kc,Sc,Tc,Ac,Cc=lc({baseStyle:vc,sizes:{xs:xc("xs"),sm:xc("sm"),md:xc("md"),lg:xc("lg")},variants:ns.variants,defaultProps:ns.defaultProps}),Ec=y(y({},null==(wc=ns.baseStyle)?void 0:wc.field),{},{textAlign:"center"}),Ic={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},Pc={outline:function(e){var t,r,n;return null!=(n=null==(r=vs(null==(t=ns.variants)?void 0:t.outline,e))?void 0:r.field)?n:{}},flushed:function(e){var t,r,n;return null!=(n=null==(r=vs(null==(t=ns.variants)?void 0:t.flushed,e))?void 0:r.field)?n:{}},filled:function(e){var t,r,n;return null!=(n=null==(r=vs(null==(t=ns.variants)?void 0:t.filled,e))?void 0:r.field)?n:{}},unstyled:null!=(Sc=null==(kc=ns.variants)?void 0:kc.unstyled.field)?Sc:{}},Mc={baseStyle:Ec,sizes:Ic,variants:Pc,defaultProps:ns.defaultProps},Dc=rn(pi.keys),zc=Dc.defineMultiStyleConfig,Lc=Dc.definePartsStyle,Rc=Ci("popper-bg"),Bc=Ci("popper-arrow-bg"),Oc=Ci("popper-arrow-shadow-color"),Fc=zc({baseStyle:Lc({popper:{zIndex:10},content:(m(Ac={},Rc.variable,"colors.white"),m(Ac,"bg",Rc.reference),m(Ac,Bc.variable,Rc.reference),m(Ac,Oc.variable,"colors.gray.200"),m(Ac,"_dark",(m(Tc={},Rc.variable,"colors.gray.700"),m(Tc,Oc.variable,"colors.whiteAlpha.300"),Tc)),m(Ac,"width","xs"),m(Ac,"border","1px solid"),m(Ac,"borderColor","inherit"),m(Ac,"borderRadius","md"),m(Ac,"boxShadow","sm"),m(Ac,"zIndex","inherit"),m(Ac,"_focusVisible",{outline:0,boxShadow:"outline"}),Ac),header:{px:3,py:2,borderBottomWidth:"1px"},body:{px:3,py:2},footer:{px:3,py:2,borderTopWidth:"1px"},closeButton:{position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2}})}),Uc=rn(ii.keys),Nc=Uc.definePartsStyle,jc=Uc.defineMultiStyleConfig,Vc=yr("drawer-bg"),Wc=yr("drawer-box-shadow");function qc(e){return Nc("full"===e?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var Gc,$c,Hc,Zc,Xc,Yc,Kc,Jc,Qc,eu,tu,ru,nu,iu,au,ou,su={bg:"blackAlpha.600",zIndex:"modal"},lu={display:"flex",zIndex:"modal",justifyContent:"center"},cu=function(e){var t,r;return y(y({},e.isFullHeight&&{height:"100vh"}),{},(m(r={zIndex:"modal",maxH:"100vh",color:"inherit"},Vc.variable,"colors.white"),m(r,Wc.variable,"shadows.lg"),m(r,"_dark",(m(t={},Vc.variable,"colors.gray.700"),m(t,Wc.variable,"shadows.dark-lg"),t)),m(r,"bg",Vc.reference),m(r,"boxShadow",Wc.reference),r))},uu={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},du={position:"absolute",top:"2",insetEnd:"3"},hu={px:"6",py:"2",flex:"1",overflow:"auto"},pu={px:"6",py:"4"},fu=jc({baseStyle:Nc((function(e){return{overlay:su,dialogContainer:lu,dialog:vs(cu,e),header:uu,closeButton:du,body:hu,footer:pu}})),sizes:{xs:qc("xs"),sm:qc("md"),md:qc("lg"),lg:qc("2xl"),xl:qc("4xl"),full:qc("full")},defaultProps:{size:"xs"}}),mu=rn(ai.keys),gu=mu.definePartsStyle,yu=(0,mu.defineMultiStyleConfig)({baseStyle:gu({preview:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}})}),bu=rn(oi.keys),_u=bu.definePartsStyle,vu=bu.defineMultiStyleConfig,xu=yr("form-control-color"),wu=vu({baseStyle:_u({container:{width:"100%",position:"relative"},requiredIndicator:(m(Gc={marginStart:"1"},xu.variable,"colors.red.500"),m(Gc,"_dark",m({},xu.variable,"colors.red.300")),m(Gc,"color",xu.reference),Gc),helperText:(m($c={mt:"2"},xu.variable,"colors.gray.600"),m($c,"_dark",m({},xu.variable,"colors.whiteAlpha.600")),m($c,"color",xu.reference),m($c,"lineHeight","normal"),m($c,"fontSize","sm"),$c)})}),ku=rn(si.keys),Su=ku.definePartsStyle,Tu=ku.defineMultiStyleConfig,Au=yr("form-error-color"),Cu=Tu({baseStyle:Su({text:(m(Hc={},Au.variable,"colors.red.500"),m(Hc,"_dark",m({},Au.variable,"colors.red.300")),m(Hc,"color",Au.reference),m(Hc,"mt","2"),m(Hc,"fontSize","sm"),m(Hc,"lineHeight","normal"),Hc),icon:(m(Zc={marginEnd:"0.5em"},Au.variable,"colors.red.500"),m(Zc,"_dark",m({},Au.variable,"colors.red.300")),m(Zc,"color",Au.reference),Zc)})}),Eu={baseStyle:{fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},Iu={baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},Pu=rn(ri.keys),Mu=Pu.defineMultiStyleConfig,Du=Pu.definePartsStyle,zu=yr("breadcrumb-link-decor"),Lu=Mu({baseStyle:Du({link:(m(Xc={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:zu.reference},zu.variable,"none"),m(Xc,"&:not([aria-current=page])",{cursor:"pointer",_hover:m({},zu.variable,"underline"),_focusVisible:{boxShadow:"outline"}}),Xc)})}),Ru=function(e){var t=e.colorScheme,r=e.theme;if("gray"===t)return{color:Qi("gray.800","whiteAlpha.900")(e),_hover:{bg:Qi("gray.100","whiteAlpha.200")(e)},_active:{bg:Qi("gray.200","whiteAlpha.300")(e)}};var n=Ba("".concat(t,".200"),.12)(r),i=Ba("".concat(t,".200"),.24)(r);return{color:Qi("".concat(t,".600"),"".concat(t,".200"))(e),bg:"transparent",_hover:{bg:Qi("".concat(t,".50"),n)(e)},_active:{bg:Qi("".concat(t,".100"),i)(e)}}},Bu={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Ou=function(e){var t,r=e.colorScheme;if("gray"===r){var n=Qi("gray.100","whiteAlpha.200")(e);return{bg:n,color:Qi("gray.800","whiteAlpha.900")(e),_hover:{bg:Qi("gray.200","whiteAlpha.300")(e),_disabled:{bg:n}},_active:{bg:Qi("gray.300","whiteAlpha.400")(e)}}}var i=null!=(t=Bu[r])?t:{},a=i.bg,o=void 0===a?"".concat(r,".500"):a,s=i.color,l=void 0===s?"white":s,c=i.hoverBg,u=void 0===c?"".concat(r,".600"):c,d=i.activeBg,h=void 0===d?"".concat(r,".700"):d,p=Qi(o,"".concat(r,".200"))(e);return{bg:p,color:Qi(l,"gray.800")(e),_hover:{bg:Qi(u,"".concat(r,".300"))(e),_disabled:{bg:p}},_active:{bg:Qi(h,"".concat(r,".400"))(e)}}},Fu={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:{ghost:Ru,outline:function(e){var t=e.colorScheme,r=Qi("gray.200","whiteAlpha.300")(e);return y({border:"1px solid",borderColor:"gray"===t?r:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"}},vs(Ru,e))},solid:Ou,link:function(e){var t=e.colorScheme;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Qi("".concat(t,".500"),"".concat(t,".200"))(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Qi("".concat(t,".700"),"".concat(t,".500"))(e)}}},unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"}},sizes:{lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},Uu=rn(ki.keys),Nu=Uu.definePartsStyle,ju=Uu.defineMultiStyleConfig,Vu=yr("card-bg"),Wu=yr("card-padding"),qu=yr("card-shadow"),Gu=yr("card-radius"),$u=yr("card-border-width","0"),Hu=yr("card-border-color"),Zu=Nu({container:(Yc={},m(Yc,Vu.variable,"colors.chakra-body-bg"),m(Yc,"backgroundColor",Vu.reference),m(Yc,"boxShadow",qu.reference),m(Yc,"borderRadius",Gu.reference),m(Yc,"color","chakra-body-text"),m(Yc,"borderWidth",$u.reference),m(Yc,"borderColor",Hu.reference),Yc),body:{padding:Wu.reference,flex:"1 1 0%"},header:{padding:Wu.reference},footer:{padding:Wu.reference}}),Xu={sm:Nu({container:(Kc={},m(Kc,Gu.variable,"radii.base"),m(Kc,Wu.variable,"space.3"),Kc)}),md:Nu({container:(Jc={},m(Jc,Gu.variable,"radii.md"),m(Jc,Wu.variable,"space.5"),Jc)}),lg:Nu({container:(Qc={},m(Qc,Gu.variable,"radii.xl"),m(Qc,Wu.variable,"space.7"),Qc)})},Yu=ju({baseStyle:Zu,variants:{elevated:Nu({container:(eu={},m(eu,qu.variable,"shadows.base"),m(eu,"_dark",m({},Vu.variable,"colors.gray.700")),eu)}),outline:Nu({container:(tu={},m(tu,$u.variable,"1px"),m(tu,Hu.variable,"colors.chakra-border-color"),tu)}),filled:Nu({container:m({},Vu.variable,"colors.chakra-subtle-bg")}),unstyled:{body:m({},Wu.variable,0),header:m({},Wu.variable,0),footer:m({},Wu.variable,0)}},sizes:Xu,defaultProps:{variant:"elevated",size:"md"}}),Ku=Ci("close-button-size"),Ju=Ci("close-button-bg"),Qu={baseStyle:{w:[Ku.reference],h:[Ku.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:(ru={},m(ru,Ju.variable,"colors.blackAlpha.100"),m(ru,"_dark",m({},Ju.variable,"colors.whiteAlpha.100")),ru),_active:(nu={},m(nu,Ju.variable,"colors.blackAlpha.200"),m(nu,"_dark",m({},Ju.variable,"colors.whiteAlpha.200")),nu),_focusVisible:{boxShadow:"outline"},bg:Ju.reference},sizes:{lg:(iu={},m(iu,Ku.variable,"sizes.10"),m(iu,"fontSize","md"),iu),md:(au={},m(au,Ku.variable,"sizes.8"),m(au,"fontSize","xs"),au),sm:(ou={},m(ou,Ku.variable,"sizes.6"),m(ou,"fontSize","2xs"),ou)},defaultProps:{size:"md"}},ed=mo.variants,td=mo.defaultProps,rd={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:uo.bg.reference,color:uo.color.reference,boxShadow:uo.shadow.reference},variants:ed,defaultProps:td},nd={baseStyle:{w:"100%",mx:"auto",maxW:"prose",px:"4"}},id={baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}},ad=rn(Qn.keys),od=ad.definePartsStyle,sd=(0,ad.defineMultiStyleConfig)({baseStyle:od({container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},panel:{pt:"2",px:"4",pb:"5"},icon:{fontSize:"1.25em"}})}),ld=rn(ei.keys),cd=ld.definePartsStyle,ud=ld.defineMultiStyleConfig,dd=yr("alert-fg"),hd=yr("alert-bg"),pd=cd({container:{bg:hd.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:dd.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:dd.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function fd(e){var t=e.theme,r=e.colorScheme,n=Ba("".concat(r,".200"),.16)(t);return{light:"colors.".concat(r,".100"),dark:n}}var md,gd,yd=cd((function(e){var t,r,n=e.colorScheme,i=fd(e);return{container:(r={},m(r,dd.variable,"colors.".concat(n,".500")),m(r,hd.variable,i.light),m(r,"_dark",(t={},m(t,dd.variable,"colors.".concat(n,".200")),m(t,hd.variable,i.dark),t)),r)}})),bd=cd((function(e){var t,r,n=e.colorScheme,i=fd(e);return{container:(r={},m(r,dd.variable,"colors.".concat(n,".500")),m(r,hd.variable,i.light),m(r,"_dark",(t={},m(t,dd.variable,"colors.".concat(n,".200")),m(t,hd.variable,i.dark),t)),m(r,"paddingStart","3"),m(r,"borderStartWidth","4px"),m(r,"borderStartColor",dd.reference),r)}})),_d=cd((function(e){var t,r,n=e.colorScheme,i=fd(e);return{container:(r={},m(r,dd.variable,"colors.".concat(n,".500")),m(r,hd.variable,i.light),m(r,"_dark",(t={},m(t,dd.variable,"colors.".concat(n,".200")),m(t,hd.variable,i.dark),t)),m(r,"pt","2"),m(r,"borderTopWidth","4px"),m(r,"borderTopColor",dd.reference),r)}})),vd=cd((function(e){var t,r,n=e.colorScheme;return{container:(r={},m(r,dd.variable,"colors.white"),m(r,hd.variable,"colors.".concat(n,".500")),m(r,"_dark",(t={},m(t,dd.variable,"colors.gray.900"),m(t,hd.variable,"colors.".concat(n,".200")),t)),m(r,"color",dd.reference),r)}})),xd=ud({baseStyle:pd,variants:{subtle:yd,"left-accent":bd,"top-accent":_d,solid:vd},defaultProps:{variant:"subtle",colorScheme:"blue"}}),wd=rn(ti.keys),kd=wd.definePartsStyle,Sd=wd.defineMultiStyleConfig,Td=yr("avatar-border-color"),Ad=yr("avatar-bg"),Cd=yr("avatar-font-size"),Ed=yr("avatar-size"),Id=(m(md={borderRadius:"full",border:"0.2em solid",borderColor:Td.reference},Td.variable,"white"),m(md,"_dark",m({},Td.variable,"colors.gray.800")),md),Pd=(m(gd={bg:Ad.reference,fontSize:Cd.reference,width:Ed.reference,height:Ed.reference,lineHeight:"1"},Ad.variable,"colors.gray.200"),m(gd,"_dark",m({},Ad.variable,"colors.whiteAlpha.400")),gd),Md=function(e){var t,r=e.name,n=e.theme,i=r?Fa({string:r}):"colors.gray.400",a=function(e){return function(t){return"dark"===Ra(e)(t)}}(i)(n),o="white";return a||(o="gray.800"),t={bg:Ad.reference,fontSize:Cd.reference,color:o,borderColor:Td.reference,verticalAlign:"top",width:Ed.reference,height:Ed.reference,"&:not([data-loaded])":m({},Ad.variable,i)},m(t,Td.variable,"colors.white"),m(t,"_dark",m({},Td.variable,"colors.gray.800")),t},Dd={fontSize:Cd.reference,lineHeight:"1"};function zd(e){var t,r,n="100%"!==e?jn[e]:void 0;return kd({container:(t={},m(t,Ed.variable,null!=n?n:e),m(t,Cd.variable,"calc(".concat(null!=n?n:e," / 2.5)")),t),excessLabel:(r={},m(r,Ed.variable,null!=n?n:e),m(r,Cd.variable,"calc(".concat(null!=n?n:e," / 2.5)")),r)})}var Ld={Accordion:sd,Alert:xd,Avatar:Sd({baseStyle:kd((function(e){return{badge:vs(Id,e),excessLabel:vs(Pd,e),container:vs(Md,e),label:Dd}})),sizes:{"2xs":zd(4),xs:zd(6),sm:zd(8),md:zd(12),lg:zd(16),xl:zd(24),"2xl":zd(32),full:zd("100%")},defaultProps:{size:"md"}}),Badge:mo,Breadcrumb:Lu,Button:Fu,Checkbox:Ks,CloseButton:Qu,Code:rd,Container:nd,Divider:id,Drawer:fu,Editable:yu,Form:wu,FormError:Cu,FormLabel:Eu,Heading:Iu,Input:ns,Kbd:zl,Link:Ll,List:Bl,Menu:Vl,Modal:oc,NumberInput:Cc,PinInput:Mc,Popover:Fc,Progress:_s,Radio:nl,Select:cl,Skeleton:hl,SkipLink:fl,Slider:Tl,Spinner:Cl,Stat:Ml,Switch:Ji,Table:oa,Tabs:co,Tag:Io,Textarea:os,Tooltip:us,Card:Yu,Stepper:Kn},Rd={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},Bd={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},Od={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},Fd=y(y({semanticTokens:Rd,direction:"ltr"},Vn),{},{components:Ld,styles:Bd,config:Od}),Ud=y(y({semanticTokens:Rd,direction:"ltr",components:{}},Vn),{},{styles:Bd,config:Od}),Nd=function(e,t){return e.find((function(e){return e.id===t}))};function jd(e,t){var r=Vd(e,t);return{position:r,index:r?e[r].findIndex((function(e){return e.id===t})):-1}}function Vd(e,t){for(var r=0,n=Object.entries(e);r<n.length;r++){var i=l(n[r],2),a=i[0],o=i[1];if(Nd(o,t))return a}}function Wd(e){return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===e||"bottom"===e?"0 auto":void 0,top:e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,bottom:e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,right:e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",left:e.includes("right")?void 0:"env(safe-area-inset-left, 0px)"}}function qd(t,r){var n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,e.useRef)(t);return(0,e.useEffect)((function(){n.current=t})),(0,e.useCallback)((function(){for(var e,t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(t=n.current)?void 0:(e=t).call.apply(e,[n].concat(i))}),r)}(t);(0,e.useEffect)((function(){if(null!=r){var e;return e=window.setTimeout((function(){n()}),r),function(){e&&window.clearTimeout(e)}}}),[r,n])}function Gd(t,r){var n=(0,e.useRef)(!1),i=(0,e.useRef)(!1);(0,e.useEffect)((function(){if(n.current&&i.current)return t();i.current=!0}),r),(0,e.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[])}var $d=(0,e.createContext)(null);function Hd(){return null===(t=(0,e.useContext)($d))||t.isPresent;var t}var Zd=(0,e.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),Xd=(0,e.createContext)({}),Yd="undefined"!==typeof document,Kd=Yd?e.useLayoutEffect:e.useEffect,Jd=(0,e.createContext)({strict:!1});function Qd(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function eh(e){return"string"===typeof e||Array.isArray(e)}function th(e){return"object"===typeof e&&"function"===typeof e.start}var rh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nh=["initial"].concat(rh);function ih(e){return th(e.animate)||nh.some((function(t){return eh(e[t])}))}function ah(e){return Boolean(ih(e)||e.variants)}function oh(t){var r=function(e,t){if(ih(e)){var r=e.initial,n=e.animate;return{initial:!1===r||eh(r)?r:void 0,animate:eh(n)?n:void 0}}return!1!==e.inherit?t:{}}(t,(0,e.useContext)(Xd)),n=r.initial,i=r.animate;return(0,e.useMemo)((function(){return{initial:n,animate:i}}),[sh(n),sh(i)])}function sh(e){return Array.isArray(e)?e.join(" "):e}var lh={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ch={},uh=function(e){ch[e]={isEnabled:function(t){return lh[e].some((function(e){return!!t[e]}))}}};for(var dh in lh)uh(dh);var hh=(0,e.createContext)({}),ph=(0,e.createContext)({}),fh=Symbol.for("motionComponentSymbol");function mh(t){var r=t.preloadedFeatures,n=t.createVisualElement,i=t.useRender,a=t.useVisualState,o=t.Component;r&&function(e){for(var t in e)ch[t]=y(y({},ch[t]),e[t])}(r);var s=(0,e.forwardRef)((function(t,s){var l,c=y(y(y({},(0,e.useContext)(Zd)),t),{},{layoutId:gh(t)}),u=c.isStatic,d=oh(t),h=a(t,u);if(!u&&Yd){d.visualElement=function(t,r,n,i){var a=(0,e.useContext)(Xd).visualElement,o=(0,e.useContext)(Jd),s=(0,e.useContext)($d),l=(0,e.useContext)(Zd).reducedMotion,c=(0,e.useRef)();i=i||o.renderer,!c.current&&i&&(c.current=i(t,{visualState:r,parent:a,props:n,presenceContext:s,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:l}));var u=c.current;(0,e.useInsertionEffect)((function(){u&&u.update(n,s)}));var d=(0,e.useRef)(Boolean(window.HandoffAppearAnimations));return Kd((function(){u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())})),(0,e.useEffect)((function(){u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,d.current=!1)})),u}(o,h,c,n);var p=(0,e.useContext)(ph),f=(0,e.useContext)(Jd).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,f,r,p))}return e.createElement(Xd.Provider,{value:d},l&&d.visualElement?e.createElement(l,y({visualElement:d.visualElement},c)):null,i(o,t,function(t,r,n){return(0,e.useCallback)((function(e){e&&t.mount&&t.mount(e),r&&(e?r.mount(e):r.unmount()),n&&("function"===typeof n?n(e):Qd(n)&&(n.current=e))}),[r])}(h,d.visualElement,s),h,u,d.visualElement))}));return s[fh]=o,s}function gh(t){var r=t.layoutId,n=(0,e.useContext)(hh).id;return n&&void 0!==r?n+"-"+r:r}function yh(e){function t(t){return mh(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;var r=new Map;return new Proxy(t,{get:function(e,n){return r.has(n)||r.set(n,t(n)),r.get(n)}})}var bh=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _h(e){return"string"===typeof e&&!e.includes("-")&&!!(bh.indexOf(e)>-1||/[A-Z]/.test(e))}var vh={};var xh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wh=new Set(xh);function kh(e,t){var r=t.layout,n=t.layoutId;return wh.has(e)||e.startsWith("origin")||(r||void 0!==n)&&(!!vh[e]||"opacity"===e)}var Sh=function(e){return Boolean(e&&e.getVelocity)},Th={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ah=xh.length;var Ch=function(e){return function(t){return"string"===typeof t&&t.startsWith(e)}},Eh=Ch("--"),Ih=Ch("var(--"),Ph=function(e,t){return t&&"number"===typeof e?t.transform(e):e},Mh=function(e,t,r){return Math.min(Math.max(r,e),t)},Dh={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},zh=y(y({},Dh),{},{transform:function(e){return Mh(0,1,e)}}),Lh=y(y({},Dh),{},{default:1}),Rh=function(e){return Math.round(1e5*e)/1e5},Bh=/(-)?([\d]*\.?[\d])+/g,Oh=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Fh=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Uh(e){return"string"===typeof e}var Nh=function(e){return{test:function(t){return Uh(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},jh=Nh("deg"),Vh=Nh("%"),Wh=Nh("px"),qh=Nh("vh"),Gh=Nh("vw"),$h=y(y({},Vh),{},{parse:function(e){return Vh.parse(e)/100},transform:function(e){return Vh.transform(100*e)}}),Hh=y(y({},Dh),{},{transform:Math.round}),Zh={borderWidth:Wh,borderTopWidth:Wh,borderRightWidth:Wh,borderBottomWidth:Wh,borderLeftWidth:Wh,borderRadius:Wh,radius:Wh,borderTopLeftRadius:Wh,borderTopRightRadius:Wh,borderBottomRightRadius:Wh,borderBottomLeftRadius:Wh,width:Wh,maxWidth:Wh,height:Wh,maxHeight:Wh,size:Wh,top:Wh,right:Wh,bottom:Wh,left:Wh,padding:Wh,paddingTop:Wh,paddingRight:Wh,paddingBottom:Wh,paddingLeft:Wh,margin:Wh,marginTop:Wh,marginRight:Wh,marginBottom:Wh,marginLeft:Wh,rotate:jh,rotateX:jh,rotateY:jh,rotateZ:jh,scale:Lh,scaleX:Lh,scaleY:Lh,scaleZ:Lh,skew:jh,skewX:jh,skewY:jh,distance:Wh,translateX:Wh,translateY:Wh,translateZ:Wh,x:Wh,y:Wh,z:Wh,perspective:Wh,transformPerspective:Wh,opacity:zh,originX:$h,originY:$h,originZ:Wh,zIndex:Hh,fillOpacity:zh,strokeOpacity:zh,numOctaves:Hh};function Xh(e,t,r,n){var i=e.style,a=e.vars,o=e.transform,s=e.transformOrigin,l=!1,c=!1,u=!0;for(var d in t){var h=t[d];if(Eh(d))a[d]=h;else{var p=Zh[d],f=Ph(h,p);if(wh.has(d)){if(l=!0,o[d]=f,!u)continue;h!==(p.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,s[d]=f):i[d]=f}}if(t.transform||(l||n?i.transform=function(e,t,r,n){for(var i=t.enableHardwareAcceleration,a=void 0===i||i,o=t.allowTransformNone,s=void 0===o||o,l="",c=0;c<Ah;c++){var u=xh[c];if(void 0!==e[u]){var d=Th[u]||u;l+="".concat(d,"(").concat(e[u],") ")}}return a&&!e.z&&(l+="translateZ(0)"),l=l.trim(),n?l=n(e,r?"":l):s&&r&&(l="none"),l}(e.transform,r,u,n):i.transform&&(i.transform="none")),c){var m=s.originX,g=void 0===m?"50%":m,y=s.originY,b=void 0===y?"50%":y,_=s.originZ,v=void 0===_?0:_;i.transformOrigin="".concat(g," ").concat(b," ").concat(v)}}var Yh=function(){return{style:{},transform:{},transformOrigin:{},vars:{}}};function Kh(e,t,r){for(var n in t)Sh(t[n])||kh(n,r)||(e[n]=t[n])}function Jh(t,r,n){var i={};return Kh(i,t.style||{},t),Object.assign(i,function(t,r,n){var i=t.transformTemplate;return(0,e.useMemo)((function(){var e=Yh();return Xh(e,r,{enableHardwareAcceleration:!n},i),Object.assign({},e.vars,e.style)}),[r])}(t,r,n)),t.transformValues?t.transformValues(i):i}function Qh(e,t,r){var n={},i=Jh(e,t,r);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}var ep=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function tp(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||ep.has(e)}var rp,np=function(e){return!tp(e)};try{(rp=require("@emotion/is-prop-valid").default)&&(np=function(e){return e.startsWith("on")?!tp(e):rp(e)})}catch(jo){}function ip(e,t,r){return"string"===typeof e?e:Wh.transform(t+r*e)}var ap={offset:"stroke-dashoffset",array:"stroke-dasharray"},op={offset:"strokeDashoffset",array:"strokeDasharray"};var sp=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function lp(e,t,r,n,i){var a=t.attrX,o=t.attrY,s=t.attrScale,l=t.originX,c=t.originY,u=t.pathLength,d=t.pathSpacing,h=void 0===d?1:d,p=t.pathOffset,f=void 0===p?0:p;if(Xh(e,b(t,sp),r,i),n)e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);else{e.attrs=e.style,e.style={};var m=e.attrs,g=e.style,y=e.dimensions;m.transform&&(y&&(g.transform=m.transform),delete m.transform),y&&(void 0!==l||void 0!==c||g.transform)&&(g.transformOrigin=function(e,t,r){var n=ip(t,e.x,e.width),i=ip(r,e.y,e.height);return"".concat(n," ").concat(i)}(y,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==a&&(m.x=a),void 0!==o&&(m.y=o),void 0!==s&&(m.scale=s),void 0!==u&&function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;var a=i?ap:op;e[a.offset]=Wh.transform(-n);var o=Wh.transform(t),s=Wh.transform(r);e[a.array]="".concat(o," ").concat(s)}(m,u,h,f,!1)}}var cp=function(){return y(y({},Yh()),{},{attrs:{}})},up=function(e){return"string"===typeof e&&"svg"===e.toLowerCase()};function dp(t,r,n,i){var a=(0,e.useMemo)((function(){var e=cp();return lp(e,r,{enableHardwareAcceleration:!1},up(i),t.transformTemplate),y(y({},e.attrs),{},{style:y({},e.style)})}),[r]);if(t.style){var o={};Kh(o,t.style,t),a.style=y(y({},o),a.style)}return a}function hp(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(r,n,i,a,o){var s=a.latestValues,l=(_h(r)?dp:Qh)(n,s,o,r),c=function(e,t,r){var n={};for(var i in e)"values"===i&&"object"===typeof e.values||(np(i)||!0===r&&tp(i)||!t&&!tp(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}(n,"string"===typeof r,t),u=y(y(y({},c),l),{},{ref:i}),d=n.children,h=(0,e.useMemo)((function(){return Sh(d)?d.get():d}),[d]);return(0,e.createElement)(r,y(y({},u),{},{children:h}))}}var pp=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};function fp(e,t,r,n){var i=t.style,a=t.vars;for(var o in Object.assign(e.style,i,n&&n.getProjectionStyles(r)),a)e.style.setProperty(o,a[o])}var mp=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gp(e,t,r,n){for(var i in fp(e,t,void 0,n),t.attrs)e.setAttribute(mp.has(i)?i:pp(i),t.attrs[i])}function yp(e,t){var r=e.style,n={};for(var i in r)(Sh(r[i])||t.style&&Sh(t.style[i])||kh(i,e))&&(n[i]=r[i]);return n}function bp(e,t){var r=yp(e,t);for(var n in e){if(Sh(e[n])||Sh(t[n]))r[-1!==xh.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]}return r}function _p(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==r?r:e.custom,n,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==r?r:e.custom,n,i)),t}function vp(t){var r=(0,e.useRef)(null);return null===r.current&&(r.current=t()),r.current}var xp=function(e){return Array.isArray(e)},wp=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},kp=function(e){return xp(e)?e[e.length-1]||0:e};function Sp(e){var t=Sh(e)?e.get():e;return wp(t)?t.toValue():t}var Tp=["transitionEnd","transition"];var Ap=function(t){return function(r,n){var i=(0,e.useContext)(Xd),a=(0,e.useContext)($d),o=function(){return function(e,t,r,n){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,s={latestValues:Cp(t,r,n,i),renderState:a()};return o&&(s.mount=function(e){return o(t,e,s)}),s}(t,r,i,a)};return n?o():vp(o)}};function Cp(e,t,r,n){var i={},a=n(e,{});for(var o in a)i[o]=Sp(a[o]);var s=e.initial,l=e.animate,c=ih(e),u=ah(e);t&&u&&!c&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===l&&(l=t.animate));var d=!!r&&!1===r.initial,h=(d=d||!1===s)?l:s;h&&"boolean"!==typeof h&&!th(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var r=_p(e,t);if(r){var n=r.transitionEnd,a=(r.transition,b(r,Tp));for(var o in a){var s=a[o];if(Array.isArray(s))s=s[d?s.length-1:0];null!==s&&(i[o]=s)}for(var l in n)i[l]=n[l]}}));return i}var Ep=function(e){return e},Ip=function(){function e(){ca(this,e),this.order=[],this.scheduled=new Set}return la(e,[{key:"add",value:function(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}},{key:"remove",value:function(e){var t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}},{key:"clear",value:function(){this.order.length=0,this.scheduled.clear()}}]),e}();var Pp=["prepare","read","update","preRender","render","postRender"];var Mp=function(e,t){var r=!1,n=!0,i={delta:0,timestamp:0,isProcessing:!1},a=Pp.reduce((function(e,t){return e[t]=function(e){var t=new Ip,r=new Ip,n=0,i=!1,a=!1,o=new WeakSet,s={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,s=a?t:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),s.add(e)&&a&&i&&(n=t.order.length),e},cancel:function(e){r.remove(e),o.delete(e)},process:function(l){if(i)a=!0;else{i=!0;var c=[r,t];if(t=c[0],(r=c[1]).clear(),n=t.order.length)for(var u=0;u<n;u++){var d=t.order[u];d(l),o.has(d)&&(s.schedule(d),e())}i=!1,a&&(a=!1,s.process(l))}}};return s}((function(){return r=!0})),e}),{}),o=function(e){return a[e].process(i)},s=function a(){var s=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(s-i.timestamp,40),1),i.timestamp=s,i.isProcessing=!0,Pp.forEach(o),i.isProcessing=!1,r&&t&&(n=!1,e(a))},l=Pp.reduce((function(t,o){var l=a[o];return t[o]=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r||(r=!0,n=!0,i.isProcessing||e(s)),l.schedule(t,a,o)},t}),{});return{schedule:l,cancel:function(e){return Pp.forEach((function(t){return a[t].cancel(e)}))},state:i,steps:a}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Ep,!0),Dp=Mp.schedule,zp=Mp.cancel,Lp=Mp.state,Rp=Mp.steps,Bp={useVisualState:Ap({scrapeMotionValuesFromProps:bp,createRenderState:cp,onMount:function(e,t,r){var n=r.renderState,i=r.latestValues;Dp.read((function(){try{n.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){n.dimensions={x:0,y:0,width:0,height:0}}})),Dp.render((function(){lp(n,i,{enableHardwareAcceleration:!1},up(t.tagName),e.transformTemplate),gp(t,n)}))}})},Op={useVisualState:Ap({scrapeMotionValuesFromProps:yp,createRenderState:Yh})};function Fp(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,r,n),function(){return e.removeEventListener(t,r)}}var Up=function(e){return"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary};function Np(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}var jp=function(e){return function(t){return Up(t)&&e(t,Np(t))}};function Vp(e,t,r,n){return Fp(e,t,jp(r),n)}var Wp=function(e,t){return function(r){return t(e(r))}},qp=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(Wp)};function Gp(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var $p=Gp("dragHorizontal"),Hp=Gp("dragVertical");function Zp(e){var t=!1;if("y"===e)t=Hp();else if("x"===e)t=$p();else{var r=$p(),n=Hp();r&&n?t=function(){r(),n()}:(r&&r(),n&&n())}return t}function Xp(){var e=Zp(!0);return!e||(e(),!1)}var Yp=function(){function e(t){ca(this,e),this.isMounted=!1,this.node=t}return la(e,[{key:"update",value:function(){}}]),e}();function Kp(e,t){var r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End");return Vp(e.current,r,(function(r,i){if("touch"!==r.type&&!Xp()){var a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[n]&&Dp.update((function(){return a[n](r,i)}))}}),{passive:!e.getProps()[n]})}var Jp=function(e){da(r,e);var t=ma(r);function r(){return ca(this,r),t.apply(this,arguments)}return la(r,[{key:"mount",value:function(){this.unmount=qp(Kp(this.node,!0),Kp(this.node,!1))}},{key:"unmount",value:function(){}}]),r}(Yp),Qp=function(e){da(r,e);var t=ma(r);function r(){var e;return ca(this,r),(e=t.apply(this,arguments)).isActive=!1,e}return la(r,[{key:"onFocus",value:function(){var e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}},{key:"onBlur",value:function(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}},{key:"mount",value:function(){var e=this;this.unmount=qp(Fp(this.node.current,"focus",(function(){return e.onFocus()})),Fp(this.node.current,"blur",(function(){return e.onBlur()})))}},{key:"unmount",value:function(){}}]),r}(Yp),ef=function e(t,r){return!!r&&(t===r||e(t,r.parentElement))};function tf(e,t){if(t){var r=new PointerEvent("pointer"+e);t(r,Np(r))}}var rf=function(e){da(r,e);var t=ma(r);function r(){var e;return ca(this,r),(e=t.apply(this,arguments)).removeStartListeners=Ep,e.removeEndListeners=Ep,e.removeAccessibleListeners=Ep,e.startPointerPress=function(t,r){if(e.removeEndListeners(),!e.isPressing){var n=e.node.getProps(),i=Vp(window,"pointerup",(function(t,r){if(e.checkPressEnd()){var n=e.node.getProps(),i=n.onTap,a=n.onTapCancel;Dp.update((function(){ef(e.node.current,t.target)?i&&i(t,r):a&&a(t,r)}))}}),{passive:!(n.onTap||n.onPointerUp)}),a=Vp(window,"pointercancel",(function(t,r){return e.cancelPress(t,r)}),{passive:!(n.onTapCancel||n.onPointerCancel)});e.removeEndListeners=qp(i,a),e.startPress(t,r)}},e.startAccessiblePress=function(){var t=Fp(e.node.current,"keydown",(function(t){if("Enter"===t.key&&!e.isPressing){e.removeEndListeners(),e.removeEndListeners=Fp(e.node.current,"keyup",(function(t){"Enter"===t.key&&e.checkPressEnd()&&tf("up",(function(t,r){var n=e.node.getProps().onTap;n&&Dp.update((function(){return n(t,r)}))}))})),tf("down",(function(t,r){e.startPress(t,r)}))}})),r=Fp(e.node.current,"blur",(function(){e.isPressing&&tf("cancel",(function(t,r){return e.cancelPress(t,r)}))}));e.removeAccessibleListeners=qp(t,r)},e}return la(r,[{key:"startPress",value:function(e,t){this.isPressing=!0;var r=this.node.getProps(),n=r.onTapStart;r.whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Dp.update((function(){return n(e,t)}))}},{key:"checkPressEnd",value:function(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Xp()}},{key:"cancelPress",value:function(e,t){if(this.checkPressEnd()){var r=this.node.getProps().onTapCancel;r&&Dp.update((function(){return r(e,t)}))}}},{key:"mount",value:function(){var e=this.node.getProps(),t=Vp(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Fp(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=qp(t,r)}},{key:"unmount",value:function(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}]),r}(Yp),nf=["root"],af=new WeakMap,of=new WeakMap,sf=function(e){var t=af.get(e.target);t&&t(e)},lf=function(e){e.forEach(sf)};function cf(e,t,r){var n=function(e){var t=e.root,r=b(e,nf),n=t||document;of.has(n)||of.set(n,{});var i=of.get(n),a=JSON.stringify(r);return i[a]||(i[a]=new IntersectionObserver(lf,y({root:t},r))),i[a]}(t);return af.set(e,r),n.observe(e),function(){af.delete(e),n.unobserve(e)}}var uf={some:0,all:1},df=function(e){da(r,e);var t=ma(r);function r(){var e;return ca(this,r),(e=t.apply(this,arguments)).hasEnteredView=!1,e.isInView=!1,e}return la(r,[{key:"startObserver",value:function(){var e=this;this.unmount();var t=this.node.getProps().viewport,r=void 0===t?{}:t,n=r.root,i=r.margin,a=r.amount,o=void 0===a?"some":a,s=r.once,l={root:n?n.current:void 0,rootMargin:i,threshold:"number"===typeof o?o:uf[o]};return cf(this.node.current,l,(function(t){var r=t.isIntersecting;if(e.isInView!==r&&(e.isInView=r,!s||r||!e.hasEnteredView)){r&&(e.hasEnteredView=!0),e.node.animationState&&e.node.animationState.setActive("whileInView",r);var n=e.node.getProps(),i=n.onViewportEnter,a=n.onViewportLeave,o=r?i:a;o&&o(t)}}))}},{key:"mount",value:function(){this.startObserver()}},{key:"update",value:function(){if("undefined"!==typeof IntersectionObserver){var e=this.node,t=e.props,r=e.prevProps,n=["amount","margin","root"].some(function(e){var t=e.viewport,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.viewport,a=void 0===i?{}:i;return function(e){return r[e]!==a[e]}}(t,r));n&&this.startObserver()}}},{key:"unmount",value:function(){}}]),r}(Yp);var hf={inView:{Feature:df},tap:{Feature:rf},focus:{Feature:Qp},hover:{Feature:Jp}};function pf(e,t){if(!Array.isArray(t))return!1;var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ff(e,t,r){var n=e.getProps();return _p(n,t,void 0!==r?r:n.custom,function(e){var t={};return e.values.forEach((function(e,r){return t[r]=e.get()})),t}(e),function(e){var t={};return e.values.forEach((function(e,r){return t[r]=e.getVelocity()})),t}(e))}var mf="data-"+pp("framerAppearId"),gf=Ep,yf=Ep;var bf=function(e){return 1e3*e},_f=function(e){return e/1e3},vf=!1,xf=function(e){return Array.isArray(e)&&"number"===typeof e[0]};function wf(e){return Boolean(!e||"string"===typeof e&&Sf[e]||xf(e)||Array.isArray(e)&&e.every(wf))}var kf=function(e){var t=l(e,4),r=t[0],n=t[1],i=t[2],a=t[3];return"cubic-bezier(".concat(r,", ").concat(n,", ").concat(i,", ").concat(a,")")},Sf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:kf([0,.65,.55,1]),circOut:kf([.55,0,1,.45]),backIn:kf([.31,.01,.66,-.59]),backOut:kf([.33,1.53,.69,.99])};function Tf(e){if(e)return xf(e)?kf(e):Array.isArray(e)?e.map(Tf):Sf[e]}var Af=function(e,t,r){return(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e},Cf=1e-7,Ef=12;function If(e,t,r,n){if(e===t&&r===n)return Ep;var i=function(t){return function(e,t,r,n,i){var a,o,s=0;do{(a=Af(o=t+(r-t)/2,n,i)-e)>0?r=o:t=o}while(Math.abs(a)>Cf&&++s<Ef);return o}(t,0,1,e,r)};return function(e){return 0===e||1===e?e:Af(i(e),t,n)}}var Pf=If(.42,0,1,1),Mf=If(0,0,.58,1),Df=If(.42,0,.58,1),zf=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},Lf=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},Rf=function(e){return function(t){return 1-e(1-t)}},Bf=function(e){return 1-Math.sin(Math.acos(e))},Of=Rf(Bf),Ff=Lf(Of),Uf=If(.33,1.53,.69,.99),Nf=Rf(Uf),jf=Lf(Nf),Vf={linear:Ep,easeIn:Pf,easeInOut:Df,easeOut:Mf,circIn:Bf,circInOut:Ff,circOut:Of,backIn:Nf,backInOut:jf,backOut:Uf,anticipate:function(e){return(e*=2)<1?.5*Nf(e):.5*(2-Math.pow(2,-10*(e-1)))}},Wf=function(e){if(Array.isArray(e)){yf(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=l(e,4);return If(t[0],t[1],t[2],t[3])}return"string"===typeof e?(yf(void 0!==Vf[e],"Invalid easing type '".concat(e,"'")),Vf[e]):e},qf=function(e,t){return function(r){return Boolean(Uh(r)&&Fh.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t))}},Gf=function(e,t,r){return function(n){var i;if(!Uh(n))return n;var a=l(n.match(Bh),4),o=a[0],s=a[1],c=a[2],u=a[3];return m(i={},e,parseFloat(o)),m(i,t,parseFloat(s)),m(i,r,parseFloat(c)),m(i,"alpha",void 0!==u?parseFloat(u):1),i}},$f=y(y({},Dh),{},{transform:function(e){return Math.round(function(e){return Mh(0,255,e)}(e))}}),Hf={test:qf("rgb","red"),parse:Gf("red","green","blue"),transform:function(e){var t=e.red,r=e.green,n=e.blue,i=e.alpha,a=void 0===i?1:i;return"rgba("+$f.transform(t)+", "+$f.transform(r)+", "+$f.transform(n)+", "+Rh(zh.transform(a))+")"}};var Zf={test:qf("#"),parse:function(e){var t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}},transform:Hf.transform},Xf={test:qf("hsl","hue"),parse:Gf("hue","saturation","lightness"),transform:function(e){var t=e.hue,r=e.saturation,n=e.lightness,i=e.alpha,a=void 0===i?1:i;return"hsla("+Math.round(t)+", "+Vh.transform(Rh(r))+", "+Vh.transform(Rh(n))+", "+Rh(zh.transform(a))+")"}},Yf={test:function(e){return Hf.test(e)||Zf.test(e)||Xf.test(e)},parse:function(e){return Hf.test(e)?Hf.parse(e):Xf.test(e)?Xf.parse(e):Zf.parse(e)},transform:function(e){return Uh(e)?e:e.hasOwnProperty("red")?Hf.transform(e):Xf.transform(e)}},Kf=function(e,t,r){return-r*e+r*t+e};function Jf(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}var Qf=function(e,t,r){var n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},em=[Zf,Hf,Xf];function tm(e){var t,r=(t=e,em.find((function(e){return e.test(t)})));yf(Boolean(r),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));var n=r.parse(e);return r===Xf&&(n=function(e){var t=e.hue,r=e.saturation,n=e.lightness,i=e.alpha;t/=360,n/=100;var a=0,o=0,s=0;if(r/=100){var l=n<.5?n*(1+r):n+r-n*r,c=2*n-l;a=Jf(c,l,t+1/3),o=Jf(c,l,t),s=Jf(c,l,t-1/3)}else a=o=s=n;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*s),alpha:i}}(n)),n}var rm=function(e,t){var r=tm(e),n=tm(t),i=y({},r);return function(e){return i.red=Qf(r.red,n.red,e),i.green=Qf(r.green,n.green,e),i.blue=Qf(r.blue,n.blue,e),i.alpha=Kf(r.alpha,n.alpha,e),Hf.transform(i)}};var nm={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Ep},im={regex:Oh,countKey:"Colors",token:"${c}",parse:Yf.parse},am={regex:Bh,countKey:"Numbers",token:"${n}",parse:Dh.parse};function om(e,t){var r,n=t.regex,i=t.countKey,a=t.token,o=t.parse,s=e.tokenised.match(n);s&&(e["num"+i]=s.length,e.tokenised=e.tokenised.replace(n,a),(r=e.values).push.apply(r,u(s.map(o))))}function sm(e){var t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&om(r,nm),om(r,im),om(r,am),r}function lm(e){return sm(e).values}function cm(e){var t=sm(e),r=t.values,n=t.numColors,i=t.numVars,a=t.tokenised,o=r.length;return function(e){for(var t=a,r=0;r<o;r++)t=r<i?t.replace(nm.token,e[r]):r<i+n?t.replace(im.token,Yf.transform(e[r])):t.replace(am.token,Rh(e[r]));return t}}var um=function(e){return"number"===typeof e?0:e};var dm={test:function(e){var t,r;return isNaN(e)&&Uh(e)&&((null===(t=e.match(Bh))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(Oh))||void 0===r?void 0:r.length)||0)>0},parse:lm,createTransformer:cm,getAnimatableNone:function(e){var t=lm(e);return cm(e)(t.map(um))}},hm=function(e,t){return function(r){return"".concat(r>0?t:e)}};function pm(e,t){return"number"===typeof e?function(r){return Kf(e,t,r)}:Yf.test(e)?rm(e,t):e.startsWith("var(")?hm(e,t):gm(e,t)}var fm=function(e,t){var r=u(e),n=r.length,i=e.map((function(e,r){return pm(e,t[r])}));return function(e){for(var t=0;t<n;t++)r[t]=i[t](e);return r}},mm=function(e,t){var r=y(y({},e),t),n={};for(var i in r)void 0!==e[i]&&void 0!==t[i]&&(n[i]=pm(e[i],t[i]));return function(e){for(var t in n)r[t]=n[t](e);return r}},gm=function(e,t){var r=dm.createTransformer(t),n=sm(e),i=sm(t);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?qp(fm(n.values,i.values),r):(gf(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),hm(e,t))},ym=function(e,t,r){var n=t-e;return 0===n?1:(r-e)/n},bm=function(e,t){return function(r){return Kf(e,t,r)}};function _m(e,t,r){for(var n,i=[],a=r||("number"===typeof(n=e[0])?bm:"string"===typeof n?Yf.test(n)?rm:gm:Array.isArray(n)?fm:"object"===typeof n?mm:bm),o=e.length-1,s=0;s<o;s++){var l=a(e[s],e[s+1]);if(t){var c=Array.isArray(t)?t[s]||Ep:t;l=qp(c,l)}i.push(l)}return i}function vm(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.clamp,i=void 0===n||n,a=r.ease,o=r.mixer,s=e.length;if(yf(s===t.length,"Both input and output ranges must be the same length"),1===s)return function(){return t[0]};e[0]>e[s-1]&&(e=u(e).reverse(),t=u(t).reverse());var l=_m(t,a,o),c=l.length,d=function(t){var r=0;if(c>1)for(;r<e.length-2&&!(t<e[r+1]);r++);var n=ym(e[r],e[r+1],t);return l[r](n)};return i?function(t){return d(Mh(e[0],e[s-1],t))}:d}function xm(e){var t=[0];return function(e,t){for(var r=e[e.length-1],n=1;n<=t;n++){var i=ym(0,t,n);e.push(Kf(r,1,i))}}(t,e.length-1),t}function wm(e){var t,r,n=e.duration,i=void 0===n?300:n,a=e.keyframes,o=e.times,s=e.ease,l=void 0===s?"easeInOut":s,c=zf(l)?l.map(Wf):Wf(l),u={done:!1,value:a[0]},d=function(e,t){return e.map((function(e){return e*t}))}(o&&o.length===a.length?o:xm(a),i),h=vm(d,a,{ease:Array.isArray(c)?c:(t=a,r=c,t.map((function(){return r||Df})).splice(0,t.length-1))});return{calculatedDuration:i,next:function(e){return u.value=h(e),u.done=e>=i,u}}}function km(e,t){return t?e*(1e3/t):0}var Sm=5;function Tm(e,t,r){var n=Math.max(t-Sm,0);return km(r-e(n),t-n)}var Am=.001,Cm=.01,Em=10,Im=.05,Pm=1;function Mm(e){var t,r,n=e.duration,i=void 0===n?800:n,a=e.bounce,o=void 0===a?.25:a,s=e.velocity,l=void 0===s?0:s,c=e.mass,u=void 0===c?1:c;gf(i<=bf(Em),"Spring duration must be 10 seconds or less");var d=1-o;d=Mh(Im,Pm,d),i=Mh(Cm,Em,_f(i)),d<1?(t=function(e){var t=e*d,r=t*i,n=t-l,a=zm(e,d),o=Math.exp(-r);return Am-n/a*o},r=function(e){var r=e*d*i,n=r*l+l,a=Math.pow(d,2)*Math.pow(e,2)*i,o=Math.exp(-r),s=zm(Math.pow(e,2),d);return(-t(e)+Am>0?-1:1)*((n-a)*o)/s}):(t=function(e){return Math.exp(-e*i)*((e-l)*i+1)-Am},r=function(e){return Math.exp(-e*i)*(i*i*(l-e))});var h=function(e,t,r){for(var n=r,i=1;i<Dm;i++)n-=e(n)/t(n);return n}(t,r,5/i);if(i=bf(i),isNaN(h))return{stiffness:100,damping:10,duration:i};var p=Math.pow(h,2)*u;return{stiffness:p,damping:2*d*Math.sqrt(u*p),duration:i}}var Dm=12;function zm(e,t){return e*Math.sqrt(1-t*t)}var Lm=["keyframes","restDelta","restSpeed"],Rm=["duration","bounce"],Bm=["stiffness","damping","mass"];function Om(e,t){return t.some((function(t){return void 0!==e[t]}))}function Fm(e){var t,r=e.keyframes,n=e.restDelta,i=e.restSpeed,a=b(e,Lm),o=r[0],s=r[r.length-1],l={done:!1,value:o},c=function(e){var t=y({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Om(e,Bm)&&Om(e,Rm)){var r=Mm(e);(t=y(y(y({},t),r),{},{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(a),u=c.stiffness,d=c.damping,h=c.mass,p=c.velocity,f=c.duration,m=c.isResolvedFromDuration,g=p?-_f(p):0,_=d/(2*Math.sqrt(u*h)),v=s-o,x=_f(Math.sqrt(u/h)),w=Math.abs(v)<5;if(i||(i=w?.01:2),n||(n=w?.005:.5),_<1){var k=zm(x,_);t=function(e){var t=Math.exp(-_*x*e);return s-t*((g+_*x*v)/k*Math.sin(k*e)+v*Math.cos(k*e))}}else if(1===_)t=function(e){return s-Math.exp(-x*e)*(v+(g+x*v)*e)};else{var S=x*Math.sqrt(_*_-1);t=function(e){var t=Math.exp(-_*x*e),r=Math.min(S*e,300);return s-t*((g+_*x*v)*Math.sinh(r)+S*v*Math.cosh(r))/S}}return{calculatedDuration:m&&f||null,next:function(e){var r=t(e);if(m)l.done=e>=f;else{var a=g;0!==e&&(a=_<1?Tm(t,e,r):0);var o=Math.abs(a)<=i,c=Math.abs(s-r)<=n;l.done=o&&c}return l.value=l.done?s:r,l}}}function Um(e){var t=e.keyframes,r=e.velocity,n=void 0===r?0:r,i=e.power,a=void 0===i?.8:i,o=e.timeConstant,s=void 0===o?325:o,l=e.bounceDamping,c=void 0===l?10:l,u=e.bounceStiffness,d=void 0===u?500:u,h=e.modifyTarget,p=e.min,f=e.max,m=e.restDelta,g=void 0===m?.5:m,y=e.restSpeed,b=t[0],_={done:!1,value:b},v=function(e){return void 0===p?f:void 0===f||Math.abs(p-e)<Math.abs(f-e)?p:f},x=a*n,w=b+x,k=void 0===h?w:h(w);k!==w&&(x=k-b);var S,T,A=function(e){return-x*Math.exp(-e/s)},C=function(e){return k+A(e)},E=function(e){var t=A(e),r=C(e);_.done=Math.abs(t)<=g,_.value=_.done?k:r},I=function(e){var t;(t=_.value,void 0!==p&&t<p||void 0!==f&&t>f)&&(S=e,T=Fm({keyframes:[_.value,v(_.value)],velocity:Tm(C,e,_.value),damping:c,stiffness:d,restDelta:g,restSpeed:y}))};return I(0),{calculatedDuration:null,next:function(e){var t=!1;return T||void 0!==S||(t=!0,E(e),I(e)),void 0!==S&&e>S?T.next(e-S):(!t&&E(e),_)}}}var Nm=function(e){var t=function(t){var r=t.timestamp;return e(r)};return{start:function(){return Dp.update(t,!0)},stop:function(){return zp(t)},now:function(){return Lp.isProcessing?Lp.timestamp:performance.now()}}},jm=2e4;function Vm(e){for(var t=0,r=e.next(t);!r.done&&t<jm;)t+=50,r=e.next(t);return t>=jm?1/0:t}var Wm=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],qm={decay:Um,inertia:Um,tween:wm,keyframes:wm,spring:Fm};function Gm(e){var t,r,n,i=e.autoplay,a=void 0===i||i,o=e.delay,s=void 0===o?0:o,l=e.driver,c=void 0===l?Nm:l,d=e.keyframes,h=e.type,p=void 0===h?"keyframes":h,f=e.repeat,m=void 0===f?0:f,g=e.repeatDelay,_=void 0===g?0:g,v=e.repeatType,x=void 0===v?"loop":v,w=e.onPlay,k=e.onStop,S=e.onComplete,T=e.onUpdate,A=b(e,Wm),C=1,E=!1,I=function(){r=new Promise((function(e){t=e}))};I();var P,M=qm[p]||wm;M!==wm&&"number"!==typeof d[0]&&(P=vm([0,100],d,{clamp:!1}),d=[0,100]);var D,z=M(y(y({},A),{},{keyframes:d}));"mirror"===x&&(D=M(y(y({},A),{},{keyframes:u(d).reverse(),velocity:-(A.velocity||0)})));var L="idle",R=null,B=null,O=null;null===z.calculatedDuration&&m&&(z.calculatedDuration=Vm(z));var F=z.calculatedDuration,U=1/0,N=1/0;null!==F&&(N=(U=F+_)*(m+1)-_);var j=0,V=function(e){if(null!==B){C>0&&(B=Math.min(B,e)),C<0&&(B=Math.min(e-N/C,B));var t=(j=null!==R?R:Math.round(e-B)*C)-s*(C>=0?1:-1),r=C>=0?t<0:t>N;j=Math.max(t,0),"finished"===L&&null===R&&(j=N);var n=j,i=z;if(m){var a=j/U,o=Math.floor(a),l=a%1;!l&&a>=1&&(l=1),1===l&&o--,o=Math.min(o,m+1);var c=Boolean(o%2);c&&("reverse"===x?(l=1-l,_&&(l-=_/U)):"mirror"===x&&(i=D));var u=Mh(0,1,l);j>N&&(u="reverse"===x&&c?1:0),n=u*U}var h=r?{done:!1,value:d[0]}:i.next(n);P&&(h.value=P(h.value));var p=h.done;r||null===F||(p=C>=0?j>=N:j<=0);var f=null===R&&("finished"===L||"running"===L&&p);return T&&T(h.value),f&&G(),h}},W=function(){n&&n.stop(),n=void 0},q=function(){L="idle",W(),t(),I(),B=O=null},G=function(){L="finished",S&&S(),W(),t()},$=function(){if(!E){n||(n=c(V));var e=n.now();w&&w(),null!==R?B=e-R:B&&"finished"!==L||(B=e),"finished"===L&&I(),O=B,R=null,L="running",n.start()}};a&&$();var H={then:function(e,t){return r.then(e,t)},get time(){return _f(j)},set time(e){e=bf(e),j=e,null===R&&n&&0!==C?B=n.now()-e/C:R=e},get duration(){var e=null===z.calculatedDuration?Vm(z):z.calculatedDuration;return _f(e)},get speed(){return C},set speed(e){e!==C&&n&&(C=e,H.time=_f(j))},get state(){return L},play:$,pause:function(){L="paused",R=j},stop:function(){E=!0,"idle"!==L&&(L="idle",k&&k(),q())},cancel:function(){null!==O&&V(O),q()},complete:function(){L="finished"},sample:function(e){return B=0,V(e)}};return H}var $m=["onUpdate","onComplete"],Hm=function(e){var t;return function(){return void 0===t&&(t=e()),t}}((function(){return Object.hasOwnProperty.call(Element.prototype,"animate")})),Zm=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function Xm(e,t,r){r.onUpdate;var n=r.onComplete,i=b(r,$m);if(!(Hm()&&Zm.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type))return!1;var a,o,s=!1,l=function(){o=new Promise((function(e){a=e}))};l();var c=i.keyframes,u=i.duration,d=void 0===u?300:u,h=i.ease,p=i.times;if(function(e,t){return"spring"===t.type||"backgroundColor"===e||!wf(t.ease)}(t,i)){for(var f=Gm(y(y({},i),{},{repeat:0,delay:0})),g={done:!1,value:c[0]},_=[],v=0;!g.done&&v<2e4;)g=f.sample(v),_.push(g.value),v+=10;p=void 0,c=_,d=v-10,h="linear"}var x=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.delay,a=void 0===i?0:i,o=n.duration,s=n.repeat,l=void 0===s?0:s,c=n.repeatType,u=void 0===c?"loop":c,d=n.ease,h=n.times,p=m({},t,r);h&&(p.offset=h);var f=Tf(d);return Array.isArray(f)&&(p.easing=f),e.animate(p,{delay:a,duration:o,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:l+1,direction:"reverse"===u?"alternate":"normal"})}(e.owner.current,t,c,y(y({},i),{},{duration:d,ease:h,times:p}));i.syncStart&&(x.startTime=Lp.isProcessing?Lp.timestamp:document.timeline?document.timeline.currentTime:performance.now());var w=function(){return x.cancel()},k=function(){Dp.update(w),a(),l()};return x.onfinish=function(){e.set(function(e,t){var r=t.repeat,n=t.repeatType;return e[r&&"loop"!==(void 0===n?"loop":n)&&r%2===1?0:e.length-1]}(c,i)),n&&n(),k()},{then:function(e,t){return o.then(e,t)},attachTimeline:function(e){return x.timeline=e,x.onfinish=null,Ep},get time(){return _f(x.currentTime||0)},set time(e){x.currentTime=bf(e)},get speed(){return x.playbackRate},set speed(e){x.playbackRate=e},get duration(){return _f(d)},play:function(){s||(x.play(),zp(w))},pause:function(){return x.pause()},stop:function(){if(s=!0,"idle"!==x.playState){var t=x.currentTime;if(t){var r=Gm(y(y({},i),{},{autoplay:!1}));e.setWithVelocity(r.sample(t-10).value,r.sample(t).value,10)}k()}},complete:function(){return x.finish()},cancel:k}}var Ym={type:"spring",stiffness:500,damping:25,restSpeed:10},Km={type:"keyframes",duration:.8},Jm={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Qm=function(e,t){var r=t.keyframes;return r.length>2?Km:wh.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===r[1]?2*Math.sqrt(550):30,restSpeed:10}:Ym:Jm},eg=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!dm.test(t)&&"0"!==t||t.startsWith("url(")))},tg=new Set(["brightness","contrast","saturate","opacity"]);function rg(e){var t=l(e.slice(0,-1).split("("),2),r=t[0],n=t[1];if("drop-shadow"===r)return e;var i=l(n.match(Bh)||[],1)[0];if(!i)return e;var a=n.replace(i,""),o=tg.has(r)?1:0;return i!==n&&(o*=100),r+"("+o+a+")"}var ng=/([a-z-]*)\(.*?\)/g,ig=y(y({},dm),{},{getAnimatableNone:function(e){var t=e.match(ng);return t?t.map(rg).join(" "):e}}),ag=y(y({},Zh),{},{color:Yf,backgroundColor:Yf,outlineColor:Yf,fill:Yf,stroke:Yf,borderColor:Yf,borderTopColor:Yf,borderRightColor:Yf,borderBottomColor:Yf,borderLeftColor:Yf,filter:ig,WebkitFilter:ig}),og=function(e){return ag[e]};function sg(e,t){var r=og(e);return r!==ig&&(r=dm),r.getAnimatableNone?r.getAnimatableNone(t):void 0}var lg=function(e){return/^0[^.\s]+$/.test(e)};function cg(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||lg(e):void 0}var ug=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function dg(e,t){return e[t]||e.default||e}var hg=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(i){var a=dg(n,e)||{},o=a.delay||n.delay||0,s=n.elapsed,l=void 0===s?0:s;l-=bf(o);var c=function(e,t,r,n){var i,a=eg(t,r);i=Array.isArray(r)?u(r):[null,r];for(var o=void 0!==n.from?n.from:e.get(),s=void 0,l=[],c=0;c<i.length;c++)null===i[c]&&(i[c]=0===c?o:i[c-1]),cg(i[c])&&l.push(c),"string"===typeof i[c]&&"none"!==i[c]&&"0"!==i[c]&&(s=i[c]);if(a&&l.length&&s)for(var d=0;d<l.length;d++)i[l[d]]=sg(t,s);return i}(t,e,r,a),d=c[0],h=c[c.length-1],p=eg(e,d),f=eg(e,h);gf(p===f,"You are trying to animate ".concat(e,' from "').concat(d,'" to "').concat(h,'". ').concat(d," is not an animatable value - to enable this animation set ").concat(d," to a value animatable to ").concat(h," via the `style` property."));var m=y(y({keyframes:c,velocity:t.getVelocity(),ease:"easeOut"},a),{},{delay:-l,onUpdate:function(e){t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:function(){i(),a.onComplete&&a.onComplete()}});if(function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from,e.elapsed;var t=b(e,ug);return!!Object.keys(t).length}(a)||(m=y(y({},m),Qm(e,m))),m.duration&&(m.duration=bf(m.duration)),m.repeatDelay&&(m.repeatDelay=bf(m.repeatDelay)),!p||!f||vf||!1===a.type)return function(e){var t=e.keyframes,r=e.delay,n=e.onUpdate,i=e.onComplete,a=function(){return n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Ep,pause:Ep,stop:Ep,then:function(e){return e(),Promise.resolve()},cancel:Ep,complete:Ep}};return r?Gm({keyframes:[0,1],duration:0,delay:r,onComplete:a}):a()}(vf?y(y({},m),{},{delay:0}):m);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){var g=Xm(t,e,m);if(g)return g}return Gm(m)}};function pg(e){return Boolean(Sh(e)&&e.add)}var fg=function(e){return/^\-?\d*\.?\d+$/.test(e)};function mg(e,t){-1===e.indexOf(t)&&e.push(t)}function gg(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)}var yg=function(){function e(){ca(this,e),this.subscriptions=[]}return la(e,[{key:"add",value:function(e){var t=this;return mg(this.subscriptions,e),function(){return gg(t.subscriptions,e)}}},{key:"notify",value:function(e,t,r){var n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(var i=0;i<n;i++){var a=this.subscriptions[i];a&&a(e,t,r)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),e}(),bg={current:void 0},_g=function(){function e(t){var r,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ca(this,e),this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.prev=n.current,n.current=e;var r=Lp.delta,i=Lp.timestamp;n.lastUpdated!==i&&(n.timeDelta=r,n.lastUpdated=i,Dp.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.events.change&&n.events.change.notify(n.current),n.events.velocityChange&&n.events.velocityChange.notify(n.getVelocity()),t&&n.events.renderRequest&&n.events.renderRequest.notify(n.current)},this.scheduleVelocityCheck=function(){return Dp.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.events.velocityChange&&n.events.velocityChange.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=i.owner}return la(e,[{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,t){var r=this;this.events[e]||(this.events[e]=new yg);var n=this.events[e].add(t);return"change"===e?function(){n(),Dp.read((function(){r.events.change.getSize()||r.stop()}))}:n}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}},{key:"setWithVelocity",value:function(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}},{key:"jump",value:function(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"get",value:function(){return bg.current&&bg.current.push(this),this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){return this.canTrackVelocity?km(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}},{key:"start",value:function(e){var t=this;return this.stop(),new Promise((function(r){t.hasAnimated=!0,t.animation=e(r),t.events.animationStart&&t.events.animationStart.notify()})).then((function(){t.events.animationComplete&&t.events.animationComplete.notify(),t.clearAnimation()}))}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}]),e}();function vg(e,t){return new _g(e,t)}var xg=function(e){return function(t){return t.test(e)}},wg=[Dh,Wh,Vh,jh,Gh,qh,{test:function(e){return"auto"===e},parse:function(e){return e}}],kg=function(e){return wg.find(xg(e))},Sg=[].concat(u(wg),[Yf,dm]),Tg=["transitionEnd","transition"];function Ag(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,vg(r))}function Cg(e,t){var r=ff(e,t),n=r?e.makeTargetAnimatable(r,!1):{},i=n.transitionEnd,a=void 0===i?{}:i,o=(n.transition,b(n,Tg));for(var s in o=y(y({},o),a)){Ag(e,s,kp(o[s]))}}function Eg(e,t){if(t)return(t[e]||t.default||t).from}var Ig=["transition","transitionEnd"];function Pg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.delay,i=void 0===n?0:n,a=r.transitionOverride,o=r.type,s=e.makeTargetAnimatable(t),l=s.transition,c=void 0===l?e.getDefaultTransition():l,u=s.transitionEnd,d=b(s,Ig),h=e.getValue("willChange");a&&(c=a);var p=[],f=o&&e.animationState&&e.animationState.getState()[o],m=function(t){var r=e.getValue(t),n=d[t];if(!r||void 0===n||f&&function(e,t){var r=e.protectedKeys,n=e.needsAnimating,i=r.hasOwnProperty(t)&&!0!==n[t];return n[t]=!1,i}(f,t))return"continue";var a=y({delay:i,elapsed:0},c);if(window.HandoffAppearAnimations&&!r.hasAnimated){var o=e.getProps()[mf];o&&(a.elapsed=window.HandoffAppearAnimations(o,t,r,Dp),a.syncStart=!0)}r.start(hg(t,r,n,e.shouldReduceMotion&&wh.has(t)?{type:!1}:a));var s=r.animation;pg(h)&&(h.add(t),s.then((function(){return h.remove(t)}))),p.push(s)};for(var g in d)m(g);return u&&Promise.all(p).then((function(){u&&Cg(e,u)})),p}function Mg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ff(e,t,r.custom),i=(n||{}).transition,a=void 0===i?e.getDefaultTransition()||{}:i;r.transitionOverride&&(a=r.transitionOverride);var o=n?function(){return Promise.all(Pg(e,n,r))}:function(){return Promise.resolve()},s=e.variantChildren&&e.variantChildren.size?function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=a,o=i.delayChildren,s=void 0===o?0:o,l=i.staggerChildren,c=i.staggerDirection;return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0,o=[],s=(e.variantChildren.size-1)*n,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*n}:function(){return s-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*n};return Array.from(e.variantChildren).sort(Dg).forEach((function(e,n){e.notify("AnimationStart",t),o.push(Mg(e,t,y(y({},a),{},{delay:r+l(n)})).then((function(){return e.notify("AnimationComplete",t)})))})),Promise.all(o)}(e,t,s+n,l,c,r)}:function(){return Promise.resolve()},c=a.when;if(c){var u=l("beforeChildren"===c?[o,s]:[s,o],2),d=u[0],h=u[1];return d().then((function(){return h()}))}return Promise.all([o(),s(r.delay)])}function Dg(e,t){return e.sortNodePosition(t)}var zg=["transition","transitionEnd"],Lg=u(rh).reverse(),Rg=rh.length;function Bg(e){return function(t){return Promise.all(t.map((function(t){var r=t.animation,n=t.options;return function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){var i=t.map((function(t){return Mg(e,t,n)}));r=Promise.all(i)}else if("string"===typeof t)r=Mg(e,t,n);else{var a="function"===typeof t?ff(e,t,n.custom):t;r=Promise.all(Pg(e,a,n))}return r.then((function(){return e.notify("AnimationComplete",t)}))}(e,r,n)})))}}function Og(e){var t=Bg(e),r={animate:Fg(!0),whileInView:Fg(),whileHover:Fg(),whileTap:Fg(),whileDrag:Fg(),whileFocus:Fg(),exit:Fg()},n=!0,i=function(t,r){var n=ff(e,r);if(n){n.transition;var i=n.transitionEnd,a=b(n,zg);t=y(y(y({},t),a),i)}return t};function a(a,o){for(var s=e.getProps(),l=e.getVariantContext(!0)||{},c=[],d=new Set,h={},p=1/0,f=function(){var t=Lg[m],f=r[t],g=void 0!==s[t]?s[t]:l[t],b=eh(g),_=t===o?f.isActive:null;!1===_&&(p=m);var v=g===l[t]&&g!==s[t]&&b;if(v&&n&&e.manuallyAnimateOnMount&&(v=!1),f.protectedKeys=y({},h),!f.isActive&&null===_||!g&&!f.prevProp||th(g)||"boolean"===typeof g)return"continue";var x=function(e,t){if("string"===typeof t)return t!==e;if(Array.isArray(t))return!pf(t,e);return!1}(f.prevProp,g),w=x||t===o&&f.isActive&&!v&&b||m>p&&b,k=Array.isArray(g)?g:[g],S=k.reduce(i,{});!1===_&&(S={});var T=f.prevResolvedValues,A=void 0===T?{}:T,C=y(y({},A),S),E=function(e){w=!0,d.delete(e),f.needsAnimating[e]=!0};for(var I in C){var P=S[I],M=A[I];h.hasOwnProperty(I)||(P!==M?xp(P)&&xp(M)?!pf(P,M)||x?E(I):f.protectedKeys[I]=!0:void 0!==P?E(I):d.add(I):void 0!==P&&d.has(I)?E(I):f.protectedKeys[I]=!0)}f.prevProp=g,f.prevResolvedValues=S,f.isActive&&(h=y(y({},h),S)),n&&e.blockInitialAnimation&&(w=!1),w&&!v&&c.push.apply(c,u(k.map((function(e){return{animation:e,options:y({type:t},a)}}))))},m=0;m<Rg;m++)f();if(d.size){var g={};d.forEach((function(t){var r=e.getBaseTarget(t);void 0!==r&&(g[t]=r)})),c.push({animation:g})}var b=Boolean(c.length);return n&&!1===s.initial&&!e.manuallyAnimateOnMount&&(b=!1),n=!1,b?t(c):Promise.resolve()}return{animateChanges:a,setActive:function(t,n,i){var o;if(r[t].isActive===n)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,n)})),r[t].isActive=n;var s=a(i,t);for(var l in r)r[l].protectedKeys={};return s},setAnimateFunction:function(r){t=r(e)},getState:function(){return r}}}function Fg(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var Ug=function(e){da(r,e);var t=ma(r);function r(e){var n;return ca(this,r),n=t.call(this,e),e.animationState||(e.animationState=Og(e)),n}return la(r,[{key:"updateAnimationControlsSubscription",value:function(){var e=this.node.getProps().animate;this.unmount(),th(e)&&(this.unmount=e.subscribe(this.node))}},{key:"mount",value:function(){this.updateAnimationControlsSubscription()}},{key:"update",value:function(){this.node.getProps().animate!==(this.node.prevProps||{}).animate&&this.updateAnimationControlsSubscription()}},{key:"unmount",value:function(){}}]),r}(Yp),Ng=0,jg=function(e){da(r,e);var t=ma(r);function r(){var e;return ca(this,r),(e=t.apply(this,arguments)).id=Ng++,e}return la(r,[{key:"update",value:function(){var e=this;if(this.node.presenceContext){var t=this.node.presenceContext,r=t.isPresent,n=t.onExitComplete,i=t.custom,a=(this.node.prevPresenceContext||{}).isPresent;if(this.node.animationState&&r!==a){var o=this.node.animationState.setActive("exit",!r,{custom:null!==i&&void 0!==i?i:this.node.getProps().custom});n&&!r&&o.then((function(){return n(e.id)}))}}}},{key:"mount",value:function(){var e=(this.node.presenceContext||{}).register;e&&(this.unmount=e(this.id))}},{key:"unmount",value:function(){}}]),r}(Yp),Vg={animation:{Feature:Ug},exit:{Feature:jg}},Wg=function(e,t){return Math.abs(e-t)};var qg=function(){function e(t,r){var n=this,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transformPagePoint;if(ca(this,e),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(n.lastMoveEvent&&n.lastMoveEventInfo){var e=Hg(n.lastMoveEventInfo,n.history),t=null!==n.startEvent,r=function(e,t){var r=Wg(e.x,t.x),n=Wg(e.y,t.y);return Math.sqrt(Math.pow(r,2)+Math.pow(n,2))}(e.offset,{x:0,y:0})>=3;if(t||r){var i=e.point,a=Lp.timestamp;n.history.push(y(y({},i),{},{timestamp:a}));var o=n.handlers,s=o.onStart,l=o.onMove;t||(s&&s(n.lastMoveEvent,e),n.startEvent=n.lastMoveEvent),l&&l(n.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){n.lastMoveEvent=e,n.lastMoveEventInfo=Gg(t,n.transformPagePoint),Dp.update(n.updatePoint,!0)},this.handlePointerUp=function(e,t){if(n.end(),n.lastMoveEvent&&n.lastMoveEventInfo){var r=n.handlers,i=r.onEnd,a=r.onSessionEnd,o=Hg("pointercancel"===e.type?n.lastMoveEventInfo:Gg(t,n.transformPagePoint),n.history);n.startEvent&&i&&i(e,o),a&&a(e,o)}},Up(t)){this.handlers=r,this.transformPagePoint=i;var a=Gg(Np(t),this.transformPagePoint),o=a.point,s=Lp.timestamp;this.history=[y(y({},o),{},{timestamp:s})];var l=r.onSessionStart;l&&l(t,Hg(a,this.history)),this.removeListeners=qp(Vp(window,"pointermove",this.handlePointerMove),Vp(window,"pointerup",this.handlePointerUp),Vp(window,"pointercancel",this.handlePointerUp))}}return la(e,[{key:"updateHandlers",value:function(e){this.handlers=e}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),zp(this.updatePoint)}}]),e}();function Gg(e,t){return t?{point:t(e.point)}:e}function $g(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Hg(e,t){var r=e.point;return{point:r,delta:$g(r,Xg(t)),offset:$g(r,Zg(t)),velocity:Yg(t,.1)}}function Zg(e){return e[0]}function Xg(e){return e[e.length-1]}function Yg(e,t){if(e.length<2)return{x:0,y:0};for(var r=e.length-1,n=null,i=Xg(e);r>=0&&(n=e[r],!(i.timestamp-n.timestamp>bf(t)));)r--;if(!n)return{x:0,y:0};var a=_f(i.timestamp-n.timestamp);if(0===a)return{x:0,y:0};var o={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Kg(e){return e.max-e.min}function Jg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=r}function Qg(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=n,e.originPoint=Kf(t.min,t.max,e.origin),e.scale=Kg(r)/Kg(t),(Jg(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Kf(r.min,r.max,e.origin)-e.originPoint,(Jg(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ey(e,t,r,n){Qg(e.x,t.x,r.x,n?n.originX:void 0),Qg(e.y,t.y,r.y,n?n.originY:void 0)}function ty(e,t,r){e.min=r.min+t.min,e.max=e.min+Kg(t)}function ry(e,t,r){e.min=t.min-r.min,e.max=e.min+Kg(t)}function ny(e,t,r){ry(e.x,t.x,r.x),ry(e.y,t.y,r.y)}function iy(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function ay(e,t){var r=t.min-e.min,n=t.max-e.max;if(t.max-t.min<e.max-e.min){var i=[n,r];r=i[0],n=i[1]}return{min:r,max:n}}var oy=.35;function sy(e,t,r){return{min:ly(e,t),max:ly(e,r)}}function ly(e,t){return"number"===typeof e?e:e[t]||0}var cy=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},uy=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function dy(e){return[e("x"),e("y")]}function hy(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function py(e){return void 0===e||1===e}function fy(e){var t=e.scale,r=e.scaleX,n=e.scaleY;return!py(t)||!py(r)||!py(n)}function my(e){return fy(e)||gy(e)||e.z||e.rotate||e.rotateX||e.rotateY}function gy(e){return yy(e.x)||yy(e.y)}function yy(e){return e&&"0%"!==e}function by(e,t,r){return r+t*(e-r)}function _y(e,t,r,n,i){return void 0!==i&&(e=by(e,i,n)),by(e,r,n)+t}function vy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=_y(e.min,t,r,n,i),e.max=_y(e.max,t,r,n,i)}function xy(e,t){var r=t.x,n=t.y;vy(e.x,r.translate,r.scale,r.originPoint),vy(e.y,n.translate,n.scale,n.originPoint)}function wy(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ky(e,t){e.min=e.min+t,e.max=e.max+t}function Sy(e,t,r){var n=l(r,3),i=n[0],a=n[1],o=n[2],s=void 0!==t[o]?t[o]:.5,c=Kf(e.min,e.max,s);vy(e,t[i],t[a],c,t.scale)}var Ty=["x","scaleX","originX"],Ay=["y","scaleY","originY"];function Cy(e,t){Sy(e.x,t,Ty),Sy(e.y,t,Ay)}function Ey(e,t){return hy(function(e,t){if(!t)return e;var r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}var Iy=new WeakMap,Py=function(){function e(t){ca(this,e),this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=uy(),this.visualElement=t}return la(e,[{key:"start",value:function(e){var t=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).snapToCursor,n=void 0!==r&&r,i=this.visualElement.presenceContext;if(!i||!1!==i.isPresent){this.panSession=new qg(e,{onSessionStart:function(e){t.stopAnimation(),n&&t.snapToCursor(Np(e,"page").point)},onStart:function(e,r){var n=t.getProps(),i=n.drag,a=n.dragPropagation,o=n.onDragStart;if(!i||a||(t.openGlobalLock&&t.openGlobalLock(),t.openGlobalLock=Zp(i),t.openGlobalLock)){t.isDragging=!0,t.currentDirection=null,t.resolveConstraints(),t.visualElement.projection&&(t.visualElement.projection.isAnimationBlocked=!0,t.visualElement.projection.target=void 0),dy((function(e){var r=t.getAxisMotionValue(e).get()||0;if(Vh.test(r)){var n=t.visualElement.projection;if(n&&n.layout){var i=n.layout.layoutBox[e];if(i)r=Kg(i)*(parseFloat(r)/100)}}t.originPoint[e]=r})),o&&Dp.update((function(){return o(e,r)}),!1,!0);var s=t.visualElement.animationState;s&&s.setActive("whileDrag",!0)}},onMove:function(e,r){var n=t.getProps(),i=n.dragPropagation,a=n.dragDirectionLock,o=n.onDirectionLock,s=n.onDrag;if(i||t.openGlobalLock){var l=r.offset;if(a&&null===t.currentDirection)return t.currentDirection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=null;Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x");return r}(l),void(null!==t.currentDirection&&o&&o(t.currentDirection));t.updateAxis("x",r.point,l),t.updateAxis("y",r.point,l),t.visualElement.render(),s&&s(e,r)}},onSessionEnd:function(e,r){return t.stop(e,r)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}}},{key:"stop",value:function(e,t){var r=this.isDragging;if(this.cancel(),r){var n=t.velocity;this.startAnimation(n);var i=this.getProps().onDragEnd;i&&Dp.update((function(){return i(e,t)}))}}},{key:"cancel",value:function(){this.isDragging=!1;var e=this.visualElement,t=e.projection,r=e.animationState;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}},{key:"updateAxis",value:function(e,t,r){var n=this.getProps().drag;if(r&&My(e,n,this.currentDirection)){var i=this.getAxisMotionValue(e),a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=function(e,t,r){var n=t.min,i=t.max;return void 0!==n&&e<n?e=r?Kf(n,e,r.min):Math.max(e,n):void 0!==i&&e>i&&(e=r?Kf(i,e,r.max):Math.min(e,i)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}}},{key:"resolveConstraints",value:function(){var e=this,t=this.getProps(),r=t.dragConstraints,n=t.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;r&&Qd(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!r||!i)&&function(e,t){var r=t.top,n=t.left,i=t.bottom,a=t.right;return{x:iy(e.x,n,a),y:iy(e.y,r,i)}}(i.layoutBox,r),this.elastic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oy;return!1===e?e=0:!0===e&&(e=oy),{x:sy(e,"left","right"),y:sy(e,"top","bottom")}}(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&dy((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(i.layoutBox[t],e.constraints[t]))}))}},{key:"resolveRefConstraints",value:function(){var e=this.getProps(),t=e.dragConstraints,r=e.onMeasureDragConstraints;if(!t||!Qd(t))return!1;var n=t.current;yf(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(e,t,r){var n=Ey(e,r),i=t.scroll;return i&&(ky(n.x,i.offset.x),ky(n.y,i.offset.y)),n}(n,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:ay(e.x,t.x),y:ay(e.y,t.y)}}(i.layout.layoutBox,a);if(r){var s=r(function(e){var t=e.x,r=e.y;return{top:r.min,right:t.max,bottom:r.max,left:t.min}}(o));this.hasMutatedConstraints=!!s,s&&(o=hy(s))}return o}},{key:"startAnimation",value:function(e){var t=this,r=this.getProps(),n=r.drag,i=r.dragMomentum,a=r.dragElastic,o=r.dragTransition,s=r.dragSnapToOrigin,l=r.onDragTransitionEnd,c=this.constraints||{},u=dy((function(r){if(My(r,n,t.currentDirection)){var l=c&&c[r]||{};s&&(l={min:0,max:0});var u=a?200:1e6,d=a?40:1e7,h=y(y({type:"inertia",velocity:i?e[r]:0,bounceStiffness:u,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},o),l);return t.startAxisValueAnimation(r,h)}}));return Promise.all(u).then(l)}},{key:"startAxisValueAnimation",value:function(e,t){var r=this.getAxisMotionValue(e);return r.start(hg(e,r,0,t))}},{key:"stopAnimation",value:function(){var e=this;dy((function(t){return e.getAxisMotionValue(t).stop()}))}},{key:"getAxisMotionValue",value:function(e){var t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),n=r[t];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}},{key:"snapToCursor",value:function(e){var t=this;dy((function(r){if(My(r,t.getProps().drag,t.currentDirection)){var n=t.visualElement.projection,i=t.getAxisMotionValue(r);if(n&&n.layout){var a=n.layout.layoutBox[r],o=a.min,s=a.max;i.set(e[r]-Kf(o,s,.5))}}}))}},{key:"scalePositionWithinConstraints",value:function(){var e=this;if(this.visualElement.current){var t=this.getProps(),r=t.drag,n=t.dragConstraints,i=this.visualElement.projection;if(Qd(n)&&i&&this.constraints){this.stopAnimation();var a={x:0,y:0};dy((function(t){var r=e.getAxisMotionValue(t);if(r){var n=r.get();a[t]=function(e,t){var r=.5,n=Kg(e),i=Kg(t);return i>n?r=ym(t.min,t.max-n,e.min):n>i&&(r=ym(e.min,e.max-i,t.min)),Mh(0,1,r)}({min:n,max:n},e.constraints[t])}}));var o=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),dy((function(t){if(My(t,r,null)){var n=e.getAxisMotionValue(t),i=e.constraints[t],o=i.min,s=i.max;n.set(Kf(o,s,a[t]))}}))}}}},{key:"addListeners",value:function(){var e=this;if(this.visualElement.current){Iy.set(this.visualElement,this);var t=Vp(this.visualElement.current,"pointerdown",(function(t){var r=e.getProps(),n=r.drag,i=r.dragListener;n&&(void 0===i||i)&&e.start(t)})),r=function(){Qd(e.getProps().dragConstraints)&&(e.constraints=e.resolveRefConstraints())},n=this.visualElement.projection,i=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),r();var a=Fp(window,"resize",(function(){return e.scalePositionWithinConstraints()})),o=n.addEventListener("didUpdate",(function(t){var r=t.delta,n=t.hasLayoutChanged;e.isDragging&&n&&(dy((function(t){var n=e.getAxisMotionValue(t);n&&(e.originPoint[t]+=r[t].translate,n.set(n.get()+r[t].translate))})),e.visualElement.render())}));return function(){a(),t(),i(),o&&o()}}}},{key:"getProps",value:function(){var e=this.visualElement.getProps(),t=e.drag,r=void 0!==t&&t,n=e.dragDirectionLock,i=void 0!==n&&n,a=e.dragPropagation,o=void 0!==a&&a,s=e.dragConstraints,l=void 0!==s&&s,c=e.dragElastic,u=void 0===c?oy:c,d=e.dragMomentum,h=void 0===d||d;return y(y({},e),{},{drag:r,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:h})}}]),e}();function My(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}var Dy=function(e){da(r,e);var t=ma(r);function r(e){var n;return ca(this,r),(n=t.call(this,e)).removeGroupControls=Ep,n.removeListeners=Ep,n.controls=new Py(e),n}return la(r,[{key:"mount",value:function(){var e=this.node.getProps().dragControls;e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ep}},{key:"unmount",value:function(){this.removeGroupControls(),this.removeListeners()}}]),r}(Yp),zy=function(e){return function(t,r){e&&Dp.update((function(){return e(t,r)}))}},Ly=function(e){da(r,e);var t=ma(r);function r(){var e;return ca(this,r),(e=t.apply(this,arguments)).removePointerDownListener=Ep,e}return la(r,[{key:"onPointerDown",value:function(e){this.session=new qg(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}},{key:"createPanHandlers",value:function(){var e=this,t=this.node.getProps(),r=t.onPanSessionStart,n=t.onPanStart,i=t.onPan,a=t.onPanEnd;return{onSessionStart:zy(r),onStart:zy(n),onMove:i,onEnd:function(t,r){delete e.session,a&&Dp.update((function(){return a(t,r)}))}}}},{key:"mount",value:function(){var e=this;this.removePointerDownListener=Vp(this.node.current,"pointerdown",(function(t){return e.onPointerDown(t)}))}},{key:"update",value:function(){this.session&&this.session.updateHandlers(this.createPanHandlers())}},{key:"unmount",value:function(){this.removePointerDownListener(),this.session&&this.session.end()}}]),r}(Yp),Ry={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function By(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var Oy={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!Wh.test(e))return e;e=parseFloat(e)}var r=By(e,t.target.x),n=By(e,t.target.y);return"".concat(r,"% ").concat(n,"%")}},Fy={correct:function(e,t){var r=t.treeScale,n=t.projectionDelta,i=e,a=dm.parse(e);if(a.length>5)return i;var o=dm.createTransformer(e),s="number"!==typeof a[0]?1:0,l=n.x.scale*r.x,c=n.y.scale*r.y;a[0+s]/=l,a[1+s]/=c;var u=Kf(l,c,.5);return"number"===typeof a[2+s]&&(a[2+s]/=u),"number"===typeof a[3+s]&&(a[3+s]/=u),o(a)}},Uy=function(e){da(r,e);var t=ma(r);function r(){return ca(this,r),t.apply(this,arguments)}return la(r,[{key:"componentDidMount",value:function(){var e,t=this,r=this.props,n=r.visualElement,i=r.layoutGroup,a=r.switchLayoutGroup,o=r.layoutId,s=n.projection;e=jy,Object.assign(vh,e),s&&(i.group&&i.group.add(s),a&&a.register&&o&&a.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){t.safeToRemove()})),s.setOptions(y(y({},s.options),{},{onExitComplete:function(){return t.safeToRemove()}}))),Ry.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this,r=this.props,n=r.layoutDependency,i=r.visualElement,a=r.drag,o=r.isPresent,s=i.projection;return s?(s.isPresent=o,a||e.layoutDependency!==n||void 0===n?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||Dp.postRender((function(){var e=s.getStack();e&&e.members.length||t.safeToRemove()}))),null):null}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.visualElement.projection;t&&(t.root.didUpdate(),queueMicrotask((function(){!t.currentAnimation&&t.isLead()&&e.safeToRemove()})))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visualElement,r=e.layoutGroup,n=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}},{key:"safeToRemove",value:function(){var e=this.props.safeToRemove;e&&e()}},{key:"render",value:function(){return null}}]),r}(e.Component);function Ny(t){var r=function(){var t=(0,e.useContext)($d);if(null===t)return[!0,null];var r=t.isPresent,n=t.onExitComplete,i=t.register,a=(0,e.useId)();return(0,e.useEffect)((function(){return i(a)}),[]),!r&&n?[!1,function(){return n&&n(a)}]:[!0]}(),n=l(r,2),i=n[0],a=n[1],o=(0,e.useContext)(hh);return e.createElement(Uy,y(y({},t),{},{layoutGroup:o,switchLayoutGroup:(0,e.useContext)(ph),isPresent:i,safeToRemove:a}))}var jy={borderRadius:y(y({},Oy),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Oy,borderTopRightRadius:Oy,borderBottomLeftRadius:Oy,borderBottomRightRadius:Oy,boxShadow:Fy},Vy=["TopLeft","TopRight","BottomLeft","BottomRight"],Wy=Vy.length,qy=function(e){return"string"===typeof e?parseFloat(e):e},Gy=function(e){return"number"===typeof e||Wh.test(e)};function $y(e,t){return void 0!==e[t]?e[t]:e.borderRadius}var Hy=Xy(0,.5,Of),Zy=Xy(.5,.95,Ep);function Xy(e,t,r){return function(n){return n<e?0:n>t?1:r(ym(e,t,n))}}function Yy(e,t){e.min=t.min,e.max=t.max}function Ky(e,t){Yy(e.x,t.x),Yy(e.y,t.y)}function Jy(e,t,r,n,i){return e=by(e-=t,1/r,n),void 0!==i&&(e=by(e,1/i,n)),e}function Qy(e,t,r,n,i){var a=l(r,3),o=a[0],s=a[1],c=a[2];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(Vh.test(t)&&(t=parseFloat(t),t=Kf(o.min,o.max,t/100)-o.min),"number"===typeof t){var s=Kf(a.min,a.max,n);e===a&&(s-=t),e.min=Jy(e.min,t,r,s,i),e.max=Jy(e.max,t,r,s,i)}}(e,t[o],t[s],t[c],t.scale,n,i)}var eb=["x","scaleX","originX"],tb=["y","scaleY","originY"];function rb(e,t,r,n){Qy(e.x,t,eb,r?r.x:void 0,n?n.x:void 0),Qy(e.y,t,tb,r?r.y:void 0,n?n.y:void 0)}function nb(e){return 0===e.translate&&1===e.scale}function ib(e){return nb(e.x)&&nb(e.y)}function ab(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ob(e){return Kg(e.x)/Kg(e.y)}var sb=function(){function e(){ca(this,e),this.members=[]}return la(e,[{key:"add",value:function(e){mg(this.members,e),e.scheduleRender()}},{key:"remove",value:function(e){if(gg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}}},{key:"relegate",value:function(e){var t,r=this.members.findIndex((function(t){return e===t}));if(0===r)return!1;for(var n=r;n>=0;n--){var i=this.members[n];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}},{key:"promote",value:function(e,t){var r=this.lead;e!==r&&(this.prevLead=r,this.lead=e,e.show(),r&&(r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&r.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach((function(e){var t=e.options,r=e.resumingFrom;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()}))}},{key:"scheduleRender",value:function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),e}();function lb(e,t,r){var n="",i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(n="translate3d(".concat(i,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(n+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),r){var o=r.rotate,s=r.rotateX,l=r.rotateY;o&&(n+="rotate(".concat(o,"deg) ")),s&&(n+="rotateX(".concat(s,"deg) ")),l&&(n+="rotateY(".concat(l,"deg) "))}var c=e.x.scale*t.x,u=e.y.scale*t.y;return 1===c&&1===u||(n+="scale(".concat(c,", ").concat(u,")")),n||"none"}var cb=function(e,t){return e.depth-t.depth},ub=function(){function e(){ca(this,e),this.children=[],this.isDirty=!1}return la(e,[{key:"add",value:function(e){mg(this.children,e),this.isDirty=!0}},{key:"remove",value:function(e){gg(this.children,e),this.isDirty=!0}},{key:"forEach",value:function(e){this.isDirty&&this.children.sort(cb),this.isDirty=!1,this.children.forEach(e)}}]),e}();var db=["","X","Y","Z"],hb=0,pb={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function fb(e){var t=e.attachResizeListener,r=e.defaultParent,n=e.measureScroll,i=e.checkIsScrollRoot,a=e.resetTransform;return function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===r||void 0===r?void 0:r();ca(this,e),this.id=hb++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=function(){t.isUpdating&&(t.isUpdating=!1,t.clearAllSnapshots())},this.updateProjection=function(){var e;pb.totalNodes=pb.resolvedTargetDeltas=pb.recalculatedProjection=0,t.nodes.forEach(yb),t.nodes.forEach(Sb),t.nodes.forEach(Tb),t.nodes.forEach(bb),e=pb,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=n,this.root=i?i.root||i:this,this.path=i?[].concat(u(i.path),[i]):[],this.parent=i,this.depth=i?i.depth+1:0;for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new ub)}return la(e,[{key:"addEventListener",value:function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new yg),this.eventHandlers.get(e).add(t)}},{key:"notifyListeners",value:function(e){for(var t=this.eventHandlers.get(e),r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t&&t.notify.apply(t,n)}},{key:"hasListeners",value:function(e){return this.eventHandlers.has(e)}},{key:"mount",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(!this.instance){var i;this.isSVG=(i=e)instanceof SVGElement&&"svg"!==i.tagName,this.instance=e;var a=this.options,o=a.layoutId,s=a.layout,l=a.visualElement;if(l&&!l.current&&l.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||o)&&(this.isLayoutDirty=!0),t){var c,u=function(){return r.root.updateBlockedByResize=!1};t(e,(function(){r.root.updateBlockedByResize=!0,c&&c(),c=function(e,t){var r=performance.now(),n=function n(i){var a=i.timestamp-r;a>=t&&(zp(n),e(a-t))};return Dp.read(n,!0),function(){return zp(n)}}(u,250),Ry.hasAnimatedSinceResize&&(Ry.hasAnimatedSinceResize=!1,r.nodes.forEach(kb))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&l&&(o||s)&&this.addEventListener("didUpdate",(function(e){var t=e.delta,n=e.hasLayoutChanged,i=e.hasRelativeTargetChanged,a=e.layout;if(r.isTreeAnimationBlocked())return r.target=void 0,void(r.relativeTarget=void 0);var o=r.options.transition||l.getDefaultTransition()||Mb,s=l.getProps(),c=s.onLayoutAnimationStart,u=s.onLayoutAnimationComplete,d=!r.targetLayout||!ab(r.targetLayout,a)||i,h=!n&&i;if(r.options.layoutRoot||r.resumeFrom&&r.resumeFrom.instance||h||n&&(d||!r.currentAnimation)){r.resumeFrom&&(r.resumingFrom=r.resumeFrom,r.resumingFrom.resumingFrom=void 0),r.setAnimationOrigin(t,h);var p=y(y({},dg(o,"layout")),{},{onPlay:c,onComplete:u});(l.shouldReduceMotion||r.options.layoutRoot)&&(p.delay=0,p.type=!1),r.startAnimation(p)}else n||kb(r),r.isLead()&&r.options.onExitComplete&&r.options.onExitComplete();r.targetLayout=a}))}}},{key:"unmount",value:function(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);var e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zp(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}},{key:"startUpdate",value:function(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ab),this.animationId++)}},{key:"getTransformTemplate",value:function(){var e=this.options.visualElement;return e&&e.getProps().transformTemplate}},{key:"willUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())this.options.onExitComplete&&this.options.onExitComplete();else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var t=0;t<this.path.length;t++){var r=this.path[t];r.shouldResetTransform=!0,r.updateScroll("snapshot"),r.options.layoutRoot&&r.willUpdate(!1)}var n=this.options,i=n.layoutId,a=n.layout;if(void 0!==i||a){var o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}}},{key:"update",value:function(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(vb);this.isUpdating||this.nodes.forEach(xb),this.isUpdating=!1,this.nodes.forEach(wb),this.nodes.forEach(mb),this.nodes.forEach(gb),this.clearAllSnapshots();var e=performance.now();Lp.delta=Mh(0,1e3/60,e-Lp.timestamp),Lp.timestamp=e,Lp.isProcessing=!0,Rp.update.process(Lp),Rp.preRender.process(Lp),Rp.render.process(Lp),Lp.isProcessing=!1}},{key:"didUpdate",value:function(){var e=this;this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((function(){return e.update()})))}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(_b),this.sharedNodes.forEach(Cb)}},{key:"scheduleUpdateProjection",value:function(){Dp.preRender(this.updateProjection,!1,!0)}},{key:"scheduleCheckAfterUnmount",value:function(){var e=this;Dp.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}},{key:"updateLayout",value:function(){if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var e=0;e<this.path.length;e++){this.path[e].updateScroll()}var t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=uy(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);var r=this.options.visualElement;r&&r.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}}},{key:"updateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:n(this.instance)})}},{key:"resetTransform",value:function(){if(a){var e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!ib(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,i=n!==this.prevTransformTemplateValue;e&&(t||my(this.latestValues)||i)&&(a(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this.measurePageBox(),n=this.removeElementScroll(r);return t&&(n=this.removeTransform(n)),Lb((e=n).x),Lb(e.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:n,latestValues:{},source:this.id}}},{key:"measurePageBox",value:function(){var e=this.options.visualElement;if(!e)return uy();var t=e.measureViewportBox(),r=this.root.scroll;return r&&(ky(t.x,r.offset.x),ky(t.y,r.offset.y)),t}},{key:"removeElementScroll",value:function(e){var t=uy();Ky(t,e);for(var r=0;r<this.path.length;r++){var n=this.path[r],i=n.scroll,a=n.options;if(n!==this.root&&i&&a.layoutScroll){if(i.isRoot){Ky(t,e);var o=this.root.scroll;o&&(ky(t.x,-o.offset.x),ky(t.y,-o.offset.y))}ky(t.x,i.offset.x),ky(t.y,i.offset.y)}}return t}},{key:"applyTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=uy();Ky(r,e);for(var n=0;n<this.path.length;n++){var i=this.path[n];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Cy(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),my(i.latestValues)&&Cy(r,i.latestValues)}return my(this.latestValues)&&Cy(r,this.latestValues),r}},{key:"removeTransform",value:function(e){var t=uy();Ky(t,e);for(var r=0;r<this.path.length;r++){var n=this.path[r];if(n.instance&&my(n.latestValues)){fy(n.latestValues)&&n.updateSnapshot();var i=uy();Ky(i,n.measurePageBox()),rb(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,i)}}return my(this.latestValues)&&rb(t,this.latestValues),t}},{key:"setTargetDelta",value:function(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}},{key:"setOptions",value:function(e){this.options=y(y(y({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"forceRelativeParentToResolveTarget",value:function(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Lp.timestamp&&this.relativeParent.resolveTargetDelta(!0)}},{key:"resolveTargetDelta",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);var n=Boolean(this.resumingFrom)||this!==r;if(!!(t||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget)){var i=this.options,a=i.layout,o=i.layoutId;if(this.layout&&(a||o)){if(this.resolvedRelativeTargetAt=Lp.timestamp,!this.targetDelta&&!this.relativeTarget){var s=this.getClosestProjectingParent();s&&s.layout&&1!==this.animationProgress?(this.relativeParent=s,this.forceRelativeParentToResolveTarget(),this.relativeTarget=uy(),this.relativeTargetOrigin=uy(),ny(this.relativeTargetOrigin,this.layout.layoutBox,s.layout.layoutBox),Ky(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var l,c,u;if(this.target||(this.target=uy(),this.targetWithTransforms=uy()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),l=this.target,c=this.relativeTarget,u=this.relativeParent.target,ty(l.x,c.x,u.x),ty(l.y,c.y,u.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Ky(this.target,this.layout.layoutBox),xy(this.target,this.targetDelta)):Ky(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;var d=this.getClosestProjectingParent();d&&Boolean(d.resumingFrom)===Boolean(this.resumingFrom)&&!d.options.layoutScroll&&d.target&&1!==this.animationProgress?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=uy(),this.relativeTargetOrigin=uy(),ny(this.relativeTargetOrigin,this.target,d.target),Ky(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}pb.resolvedTargetDeltas++}}}}},{key:"getClosestProjectingParent",value:function(){if(this.parent&&!fy(this.parent.latestValues)&&!gy(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}},{key:"isProjecting",value:function(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}},{key:"calcProjection",value:function(){var e,t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t,n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===Lp.timestamp&&(n=!1),!n){var i=this.options,a=i.layout,o=i.layoutId;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(a||o)){Ky(this.layoutCorrected,this.layout.layoutBox);var s=this.treeScale.x,l=this.treeScale.y;!function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r.length;if(i){var a,o;t.x=t.y=1;for(var s=0;s<i;s++){o=(a=r[s]).projectionDelta;var l=a.instance;l&&l.style&&"contents"===l.style.display||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Cy(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,xy(e,o)),n&&my(a.latestValues)&&Cy(e,a.latestValues))}t.x=wy(t.x),t.y=wy(t.y)}}(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);var c=t.target;if(c){this.projectionDelta||(this.projectionDelta=cy(),this.projectionDeltaWithTransform=cy());var u=this.projectionTransform;ey(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.projectionTransform=lb(this.projectionDelta,this.treeScale),this.projectionTransform===u&&this.treeScale.x===s&&this.treeScale.y===l||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c)),pb.recalculatedProjection++}else this.projectionTransform&&(this.projectionDelta=cy(),this.projectionTransform="none",this.scheduleRender())}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){var t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"setAnimationOrigin",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.snapshot,i=n?n.latestValues:{},a=y({},this.latestValues),o=cy();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!r;var s,l=uy(),c=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),d=!u||u.members.length<=1,h=Boolean(c&&!d&&!0===this.options.crossfade&&!this.path.some(Pb));this.animationProgress=0,this.mixTargetDelta=function(r){var n,u,p=r/1e3;Eb(o.x,e.x,p),Eb(o.y,e.y,p),t.setTargetDelta(o),t.relativeTarget&&t.relativeTargetOrigin&&t.layout&&t.relativeParent&&t.relativeParent.layout&&(ny(l,t.layout.layoutBox,t.relativeParent.layout.layoutBox),function(e,t,r,n){Ib(e.x,t.x,r.x,n),Ib(e.y,t.y,r.y,n)}(t.relativeTarget,t.relativeTargetOrigin,l,p),s&&(n=t.relativeTarget,u=s,n.x.min===u.x.min&&n.x.max===u.x.max&&n.y.min===u.y.min&&n.y.max===u.y.max)&&(t.isProjectionDirty=!1),s||(s=uy()),Ky(s,t.relativeTarget)),c&&(t.animationValues=a,function(e,t,r,n,i,a){i?(e.opacity=Kf(0,void 0!==r.opacity?r.opacity:1,Hy(n)),e.opacityExit=Kf(void 0!==t.opacity?t.opacity:1,0,Zy(n))):a&&(e.opacity=Kf(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(var o=0;o<Wy;o++){var s="border".concat(Vy[o],"Radius"),l=$y(t,s),c=$y(r,s);void 0===l&&void 0===c||(l||(l=0),c||(c=0),0===l||0===c||Gy(l)===Gy(c)?(e[s]=Math.max(Kf(qy(l),qy(c),n),0),(Vh.test(c)||Vh.test(l))&&(e[s]+="%")):e[s]=c)}(t.rotate||r.rotate)&&(e.rotate=Kf(t.rotate||0,r.rotate||0,n))}(a,i,t.latestValues,p,h,d)),t.root.scheduleUpdateProjection(),t.scheduleRender(),t.animationProgress=p},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}},{key:"startAnimation",value:function(e){var t=this;this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zp(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dp.update((function(){Ry.hasAnimatedSinceResize=!0,t.currentAnimation=function(e,t,r){var n=Sh(e)?e:vg(e);return n.start(hg("",n,t,r)),n.animation}(0,1e3,y(y({},e),{},{onUpdate:function(r){t.mixTargetDelta(r),e.onUpdate&&e.onUpdate(r)},onComplete:function(){e.onComplete&&e.onComplete(),t.completeAnimation()}})),t.resumingFrom&&(t.resumingFrom.currentAnimation=t.currentAnimation),t.pendingAnimation=void 0}))}},{key:"completeAnimation",value:function(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);var e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var e=this.getLead(),t=e.targetWithTransforms,r=e.target,n=e.layout,i=e.latestValues;if(t&&r&&n){if(this!==e&&this.layout&&n&&Rb(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||uy();var a=Kg(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+a;var o=Kg(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+o}Ky(t,r),Cy(t,i),ey(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}},{key:"registerSharedNode",value:function(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new sb),this.sharedNodes.get(e).add(t);var r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}},{key:"isLead",value:function(){var e=this.getStack();return!e||e.lead===this}},{key:"getLead",value:function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}},{key:"getPrevLead",value:function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}},{key:"getStack",value:function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)}},{key:"promote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsReset,r=e.transition,n=e.preserveFollowOpacity,i=this.getStack();i&&i.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})}},{key:"relegate",value:function(){var e=this.getStack();return!!e&&e.relegate(this)}},{key:"resetRotation",value:function(){var e=this.options.visualElement;if(e){var t=!1,r=e.latestValues;if((r.rotate||r.rotateX||r.rotateY||r.rotateZ)&&(t=!0),t){for(var n={},i=0;i<db.length;i++){var a="rotate"+db[i];r[a]&&(n[a]=r[a],e.setStaticValue(a,0))}for(var o in e.render(),n)e.setStaticValue(o,n[o]);e.scheduleRender()}}}},{key:"getProjectionStyles",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};if(!this.instance||this.isSVG)return n;if(!this.isVisible)return{visibility:"hidden"};n.visibility="";var i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=Sp(r.pointerEvents)||"",n.transform=i?i(this.latestValues,""):"none",n;var a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){var o={};return this.options.layoutId&&(o.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,o.pointerEvents=Sp(r.pointerEvents)||""),this.hasProjected&&!my(this.latestValues)&&(o.transform=i?i({},""):"none",this.hasProjected=!1),o}var s=a.animationValues||a.latestValues;this.applyTransformsToTarget(),n.transform=lb(this.projectionDeltaWithTransform,this.treeScale,s),i&&(n.transform=i(s,n.transform));var l=this.projectionDelta,c=l.x,u=l.y;for(var d in n.transformOrigin="".concat(100*c.origin,"% ").concat(100*u.origin,"% 0"),a.animationValues?n.opacity=a===this?null!==(t=null!==(e=s.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==t?t:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:n.opacity=a===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0,vh)if(void 0!==s[d]){var h=vh[d],p=h.correct,f=h.applyTo,m="none"===n.transform?s[d]:p(s[d],a);if(f)for(var g=f.length,y=0;y<g;y++)n[f[y]]=m;else n[d]=m}return this.options.layoutId&&(n.pointerEvents=a===this?Sp(r.pointerEvents)||"":"none"),n}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(vb),this.root.sharedNodes.clear()}}]),e}()}function mb(e){e.updateLayout()}function gb(e){var t,r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){var n=e.layout,i=n.layoutBox,a=n.measuredBox,o=e.options.animationType,s=r.source!==e.layout.source;"size"===o?dy((function(e){var t=s?r.measuredBox[e]:r.layoutBox[e],n=Kg(t);t.min=i[e].min,t.max=t.min+n})):Rb(o,r.layoutBox,i)&&dy((function(t){var n=s?r.measuredBox[t]:r.layoutBox[t],a=Kg(i[t]);n.max=n.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[t].max=e.relativeTarget[t].min+a)}));var l=cy();ey(l,i,r.layoutBox);var c=cy();s?ey(c,e.applyTransform(a,!0),r.measuredBox):ey(c,i,r.layoutBox);var u=!ib(l),d=!1;if(!e.resumeFrom){var h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){var p=h.snapshot,f=h.layout;if(p&&f){var m=uy();ny(m,r.layoutBox,p.layoutBox);var g=uy();ny(g,i,f.layoutBox),ab(m,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=m,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){var y=e.options.onExitComplete;y&&y()}e.options.transition=void 0}function yb(e){pb.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function bb(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function _b(e){e.clearSnapshot()}function vb(e){e.clearMeasurements()}function xb(e){e.isLayoutDirty=!1}function wb(e){var t=e.options.visualElement;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function kb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Sb(e){e.resolveTargetDelta()}function Tb(e){e.calcProjection()}function Ab(e){e.resetRotation()}function Cb(e){e.removeLeadSnapshot()}function Eb(e,t,r){e.translate=Kf(t.translate,0,r),e.scale=Kf(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Ib(e,t,r,n){e.min=Kf(t.min,r.min,n),e.max=Kf(t.max,r.max,n)}function Pb(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var Mb={duration:.45,ease:[.4,0,.1,1]},Db=function(e){return"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e)},zb=Db("applewebkit/")&&!Db("chrome/")?Math.round:Ep;function Lb(e){e.min=zb(e.min),e.max=zb(e.max)}function Rb(e,t,r){return"position"===e||"preserve-aspect"===e&&!Jg(ob(t),ob(r),.2)}var Bb=fb({attachResizeListener:function(e,t){return Fp(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),Ob={current:void 0},Fb=fb({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!Ob.current){var e=new Bb({});e.mount(window),e.setOptions({layoutScroll:!0}),Ob.current=e}return Ob.current},resetTransform:function(e,t){e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),Ub={pan:{Feature:Ly},drag:{Feature:Dy,ProjectionNode:Fb,MeasureLayout:Ny}};var Nb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var jb=4;function Vb(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;yf(r<=jb,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var n=function(e){var t=Nb.exec(e);if(!t)return[,];var r=l(t,3);return[r[1],r[2]]}(e),i=l(n,2),a=i[0],o=i[1];if(a){var s=window.getComputedStyle(t).getPropertyValue(a);if(s){var c=s.trim();return fg(c)?parseFloat(c):c}return Ih(o)?Vb(o,t,r+1):o}}function Wb(e,t,r){var n=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t)),i=e.current;if(!(i instanceof Element))return{target:n,transitionEnd:r};for(var a in r&&(r=y({},r)),e.values.forEach((function(e){var t=e.get();if(Ih(t)){var r=Vb(t,i);r&&e.set(r)}})),n){var o=n[a];if(Ih(o)){var s=Vb(o,i);s&&(n[a]=s,r||(r={}),void 0===r[a]&&(r[a]=o))}}return{target:n,transitionEnd:r}}var qb=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Gb=function(e){return qb.has(e)},$b=function(e){return e===Dh||e===Wh},Hb=function(e,t){return parseFloat(e.split(", ")[t])},Zb=function(e,t){return function(r,n){var i=n.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return Hb(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?Hb(o[1],e):0}},Xb=new Set(["x","y","z"]),Yb=xh.filter((function(e){return!Xb.has(e)}));var Kb={width:function(e,t){var r=e.x,n=t.paddingLeft,i=void 0===n?"0":n,a=t.paddingRight,o=void 0===a?"0":a;return r.max-r.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var r=e.y,n=t.paddingTop,i=void 0===n?"0":n,a=t.paddingBottom,o=void 0===a?"0":a;return r.max-r.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var r=t.top;return parseFloat(r)},left:function(e,t){var r=t.left;return parseFloat(r)},bottom:function(e,t){var r=e.y,n=t.top;return parseFloat(n)+(r.max-r.min)},right:function(e,t){var r=e.x,n=t.left;return parseFloat(n)+(r.max-r.min)},x:Zb(4,13),y:Zb(5,14)};Kb.translateX=Kb.x,Kb.translateY=Kb.y;var Jb=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=y({},t),n=y({},n);var i=Object.keys(t).filter(Gb),a=[],o=!1,s=[];if(i.forEach((function(i){var l=e.getValue(i);if(e.hasValue(i)){var c,u=r[i],d=kg(u),h=t[i];if(xp(h)){var p=h.length,f=null===h[0]?1:0;u=h[f],d=kg(u);for(var m=f;m<p&&null!==h[m];m++)c?yf(kg(h[m])===c,"All keyframes must be of the same type"):(c=kg(h[m]),yf(c===d||$b(d)&&$b(c),"Keyframes must be of the same dimension as the current value"))}else c=kg(h);if(d!==c)if($b(d)&&$b(c)){var g=l.get();"string"===typeof g&&l.set(parseFloat(g)),"string"===typeof h?t[i]=parseFloat(h):Array.isArray(h)&&c===Wh&&(t[i]=h.map(parseFloat))}else(null===d||void 0===d?void 0:d.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===u||0===h)?0===u?l.set(c.transform(u)):t[i]=d.transform(h):(o||(a=function(e){var t=[];return Yb.forEach((function(r){var n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),o=!0),s.push(i),n[i]=void 0!==n[i]?n[i]:t[i],l.jump(h))}})),s.length){var c=s.indexOf("height")>=0?window.pageYOffset:null,u=function(e,t,r){var n=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),o=a.display,s={};"none"===o&&t.setStaticValue("display",e.display||"block"),r.forEach((function(e){s[e]=Kb[e](n,a)})),t.render();var l=t.measureViewportBox();return r.forEach((function(r){var n=t.getValue(r);n&&n.jump(s[r]),e[r]=Kb[r](l,a)})),e}(t,e,s);return a.length&&a.forEach((function(t){var r=l(t,2),n=r[0],i=r[1];e.getValue(n).set(i)})),e.render(),Yd&&null!==c&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}return{target:t,transitionEnd:n}};function Qb(e,t,r,n){return function(e){return Object.keys(e).some(Gb)}(t)?Jb(e,t,r,n):{target:t,transitionEnd:n}}var e_={current:null},t_={current:!1};var r_=new WeakMap,n_=["willChange"],i_=["children"],a_=Object.keys(ch),o_=a_.length,s_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],l_=nh.length,c_=function(){function e(t){var r=this,n=t.parent,i=t.props,a=t.presenceContext,o=t.reducedMotionConfig,s=t.visualState,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ca(this,e),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return r.notify("Update",r.latestValues)},this.render=function(){r.current&&(r.triggerBuild(),r.renderInstance(r.current,r.renderState,r.props.style,r.projection))},this.scheduleRender=function(){return Dp.render(r.render,!1,!0)};var c=s.latestValues,u=s.renderState;this.latestValues=c,this.baseTarget=y({},c),this.initialValues=i.initial?y({},c):{},this.renderState=u,this.parent=n,this.props=i,this.presenceContext=a,this.depth=n?n.depth+1:0,this.reducedMotionConfig=o,this.options=l,this.isControllingVariants=ih(i),this.isVariantNode=ah(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(n&&n.current);var d=this.scrapeMotionValuesFromProps(i,{}),h=d.willChange,p=b(d,n_);for(var f in p){var m=p[f];void 0!==c[f]&&Sh(m)&&(m.set(c[f],!1),pg(h)&&h.add(f))}}return la(e,[{key:"scrapeMotionValuesFromProps",value:function(e,t){return{}}},{key:"mount",value:function(e){var t=this;this.current=e,r_.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((function(e,r){return t.bindToMotionValue(r,e)})),t_.current||function(){if(t_.current=!0,Yd)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return e_.current=e.matches};e.addListener(t),t()}else e_.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||e_.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}},{key:"unmount",value:function(){for(var e in r_.delete(this.current),this.projection&&this.projection.unmount(),zp(this.notifyUpdate),zp(this.render),this.valueSubscriptions.forEach((function(e){return e()})),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(var t in this.features)this.features[t].unmount();this.current=null}},{key:"bindToMotionValue",value:function(e,t){var r=this,n=wh.has(e),i=t.on("change",(function(t){r.latestValues[e]=t,r.props.onUpdate&&Dp.update(r.notifyUpdate,!1,!0),n&&r.projection&&(r.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(function(){i(),a()}))}},{key:"sortNodePosition",value:function(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}},{key:"loadFeatures",value:function(e,t,r,n){for(var i,a,o=this,s=(e.children,b(e,i_)),l=0;l<o_;l++){var c=a_[l],u=ch[c],d=u.isEnabled,h=u.Feature,p=u.ProjectionNode,f=u.MeasureLayout;p&&(i=p),d(s)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),f&&(a=f))}if(!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);var m=s.layoutId,g=s.layout,y=s.drag,_=s.dragConstraints,v=s.layoutScroll,x=s.layoutRoot;this.projection.setOptions({layoutId:m,layout:g,alwaysMeasureLayout:Boolean(y)||_&&Qd(_),visualElement:this,scheduleRender:function(){return o.scheduleRender()},animationType:"string"===typeof g?g:"both",initialPromotionConfig:n,layoutScroll:v,layoutRoot:x})}return a}},{key:"updateFeatures",value:function(){for(var e in this.features){var t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.options,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):uy()}},{key:"getStaticValue",value:function(e){return this.latestValues[e]}},{key:"setStaticValue",value:function(e,t){this.latestValues[e]=t}},{key:"makeTargetAnimatable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}},{key:"update",value:function(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(var r=0;r<s_.length;r++){var n=s_[r];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);var i=e["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=function(e,t,r){var n=t.willChange;for(var i in t){var a=t[i],o=r[i];if(Sh(a))e.addValue(i,a),pg(n)&&n.add(i);else if(Sh(o))e.addValue(i,vg(a,{owner:e})),pg(n)&&n.remove(i);else if(o!==a)if(e.hasValue(i)){var s=e.getValue(i);!s.hasAnimated&&s.set(a)}else{var l=e.getStaticValue(i);e.addValue(i,vg(void 0!==l?l:a,{owner:e}))}}for(var c in r)void 0===t[c]&&e.removeValue(c);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(e){return this.props.variants?this.props.variants[e]:void 0}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}},{key:"getVariantContext",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){var e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}for(var t={},r=0;r<l_;r++){var n=nh[r],i=this.props[n];(eh(i)||!1===i)&&(t[n]=i)}return t}},{key:"addVariantChild",value:function(e){var t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),function(){return t.variantChildren.delete(e)}}},{key:"addValue",value:function(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}},{key:"removeValue",value:function(e){this.values.delete(e);var t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}},{key:"hasValue",value:function(e){return this.values.has(e)}},{key:"getValue",value:function(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];var r=this.values.get(e);return void 0===r&&void 0!==t&&(r=vg(t,{owner:this}),this.addValue(e,r)),r}},{key:"readValue",value:function(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}},{key:"setBaseTarget",value:function(e,t){this.baseTarget[e]=t}},{key:"getBaseTarget",value:function(e){var t,r=this.props.initial,n="string"===typeof r||"object"===typeof r?null===(t=_p(this.props,r))||void 0===t?void 0:t[e]:void 0;if(r&&void 0!==n)return n;var i=this.getBaseTargetFromProps(this.props,e);return void 0===i||Sh(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new yg),this.events[e].add(t)}},{key:"notify",value:function(e){if(this.events[e]){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=this.events[e]).notify.apply(t,n)}}}]),e}(),u_=["transition","transitionEnd"],d_=function(e){da(r,e);var t=ma(r);function r(){return ca(this,r),t.apply(this,arguments)}return la(r,[{key:"sortInstanceNodePosition",value:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1}},{key:"getBaseTargetFromProps",value:function(e,t){return e.style?e.style[t]:void 0}},{key:"removeValueFromRenderState",value:function(e,t){var r=t.vars,n=t.style;delete r[e],delete n[e]}},{key:"makeTargetAnimatableFromInstance",value:function(e,t,r){var n=e.transition,i=e.transitionEnd,a=b(e,u_),o=t.transformValues,s=function(e,t,r){var n={};for(var i in e){var a=Eg(i,t);if(void 0!==a)n[i]=a;else{var o=r.getValue(i);o&&(n[i]=o.get())}}return n}(a,n||{},this);if(o&&(i&&(i=o(i)),a&&(a=o(a)),s&&(s=o(s))),r){!function(e,t,r){var n,i,a,o=Object.keys(t).filter((function(t){return!e.hasValue(t)})),s=o.length;if(s)for(var l=0;l<s;l++){var c=o[l],u=t[c],d=null;Array.isArray(u)&&(d=u[0]),null===d&&(d=null!==(i=null!==(n=r[c])&&void 0!==n?n:e.readValue(c))&&void 0!==i?i:t[c]),void 0!==d&&null!==d&&("string"===typeof d&&(fg(d)||lg(d))?d=parseFloat(d):(a=d,!Sg.find(xg(a))&&dm.test(u)&&(d=sg(c,u))),e.addValue(c,vg(d,{owner:e})),void 0===r[c]&&(r[c]=d),null!==d&&e.setBaseTarget(c,d))}}(this,a,s);var l=function(e,t,r,n){var i=Wb(e,t,n);return Qb(e,t=i.target,r,n=i.transitionEnd)}(this,a,s,i);i=l.transitionEnd,a=l.target}return y({transition:n,transitionEnd:i},a)}}]),r}(c_);var h_=function(e){da(r,e);var t=ma(r);function r(){return ca(this,r),t.apply(this,arguments)}return la(r,[{key:"readValueFromInstance",value:function(e,t){if(wh.has(t)){var r=og(t);return r&&r.default||0}var n,i=(n=e,window.getComputedStyle(n)),a=(Eh(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof a?a.trim():a}},{key:"measureInstanceViewportBox",value:function(e,t){return Ey(e,t.transformPagePoint)}},{key:"build",value:function(e,t,r,n){Xh(e,t,r,n.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return yp(e,t)}},{key:"handleChildMotionValue",value:function(){var e=this;this.childSubscription&&(this.childSubscription(),delete this.childSubscription);var t=this.props.children;Sh(t)&&(this.childSubscription=t.on("change",(function(t){e.current&&(e.current.textContent="".concat(t))})))}},{key:"renderInstance",value:function(e,t,r,n){fp(e,t,r,n)}}]),r}(d_);function p_(){return p_="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ha(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},p_.apply(this,arguments)}var f_=function(e){da(r,e);var t=ma(r);function r(){var e;return ca(this,r),(e=t.apply(this,arguments)).isSVGTag=!1,e}return la(r,[{key:"getBaseTargetFromProps",value:function(e,t){return e[t]}},{key:"readValueFromInstance",value:function(e,t){if(wh.has(t)){var r=og(t);return r&&r.default||0}return t=mp.has(t)?t:pp(t),e.getAttribute(t)}},{key:"measureInstanceViewportBox",value:function(){return uy()}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return bp(e,t)}},{key:"build",value:function(e,t,r,n){lp(e,t,r,this.isSVGTag,n.transformTemplate)}},{key:"renderInstance",value:function(e,t,r,n){gp(e,t,0,n)}},{key:"mount",value:function(e){this.isSVGTag=up(e.tagName),p_(ha(r.prototype),"mount",this).call(this,e)}}]),r}(d_),m_=function(e,t){return _h(e)?new f_(t,{enableHardwareAcceleration:!1}):new h_(t,{enableHardwareAcceleration:!0})},g_={layout:{ProjectionNode:Fb,MeasureLayout:Ny}},y_=y(y(y(y({},Vg),hf),Ub),g_),b_=yh((function(e,t){return function(e,t,r,n){var i=t.forwardMotionProps,a=void 0!==i&&i;return y(y({},_h(e)?Bp:Op),{},{preloadedFeatures:r,useRender:hp(a),createVisualElement:n,Component:e})}(e,t,y_,m_)}));var __=new Set([].concat(u(Xr),["textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"])),v_=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function x_(e){return v_.has(e)||!__.has(e)}var w_=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,k_=Te((function(e){return w_.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),S_=function(e){return"theme"!==e},T_=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?k_:S_},A_=function(e,t,r){var n;if(t){var i=t.shouldForwardProp;n=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof n&&r&&(n=e.__emotion_forwardProp),n},C_=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return qe(t,r,n),Oe((function(){return Ge(t,r,n)})),null},E_=function t(r,n){var i,a,o=r.__emotion_real===r,s=o&&r.__emotion_base||r;void 0!==n&&(i=n.label,a=n.target);var l=A_(r,n,o),c=l||T_(s),u=!c("as");return function(){var d=arguments,h=o&&void 0!==r.__emotion_styles?r.__emotion_styles.slice(0):[];if(void 0!==i&&h.push("label:"+i+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{0,h.push(d[0][0]);for(var p=d.length,f=1;f<p;f++)h.push(d[f],d[0][f])}var m=Ne((function(t,r,n){var i=u&&t.as||s,o="",d=[],p=t;if(null==t.theme){for(var f in p={},t)p[f]=t[f];p.theme=e.useContext(je)}"string"===typeof t.className?o=function(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n}(r.registered,d,t.className):null!=t.className&&(o=t.className+" ");var m=Re(h.concat(d),r.registered,p);o+=r.key+"-"+m.name,void 0!==a&&(o+=" "+a);var g=u&&void 0===l?T_(i):c,y={};for(var b in t)u&&"as"===b||g(b)&&(y[b]=t[b]);return y.className=o,y.ref=n,e.createElement(e.Fragment,null,e.createElement(C_,{cache:r,serialized:m,isStringTag:"string"===typeof i}),e.createElement(i,y))}));return m.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=r.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=h,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(e,r){return t(e,we({},n,r,{shouldForwardProp:A_(m,r,!0)})).apply(void 0,h)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){E_[e]=E_(e)}));var I_,P_=["theme","css","__css","sx"],M_=["baseStyle"],D_=null!=(I_=E_.default)?I_:E_,z_=function(e){var t=e.baseStyle;return function(e){e.theme;var r=e.css,n=e.__css,i=e.sx,a=sn(b(e,P_),(function(e,t){return Kr(t)})),o=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=y({},e),r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var a=0,o=n;a<o.length;a++){var s=o[a];if(null!=s)for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(l in t&&delete t[l],t[l]=s[l])}return t}({},n,cn(t,e),ln(a),i),s=tn(o)(e.theme);return r?[s,r]:s}};function L_(t,r){var n=null!=r?r:{},i=n.baseStyle,a=b(n,M_);a.shouldForwardProp||(a.shouldForwardProp=x_);var o=z_({baseStyle:i}),s=D_(t,a)(o);return e.forwardRef((function(t,r){var n=st(),i=n.colorMode,a=n.forced;return e.createElement(s,y({ref:r,"data-theme":a?i:void 0},t))}))}var R_=function(){var e=new Map;return new Proxy(L_,{apply:function(e,t,r){return L_.apply(void 0,u(r))},get:function(t,r){return e.has(r)||e.set(r,L_(r)),e.get(r)}})}(),B_={initial:function(e){var t=e.position,r=["top","bottom"].includes(t)?"y":"x",n=["top-right","bottom-right"].includes(t)?1:-1;return"bottom"===t&&(n=1),m({opacity:0},r,24*n)},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},O_=(0,e.memo)((function(t){var r=t.id,n=t.message,i=t.onCloseComplete,a=t.onRequestRemove,o=t.requestClose,s=void 0!==o&&o,c=t.position,u=void 0===c?"bottom":c,d=t.duration,h=void 0===d?5e3:d,p=t.containerStyle,f=t.motionVariants,m=void 0===f?B_:f,g=t.toastSpacing,b=void 0===g?"0.5rem":g,_=l((0,e.useState)(h),2),v=_[0],x=_[1],w=Hd();Gd((function(){w||null==i||i()}),[w]),Gd((function(){x(h)}),[h]);var k=function(){w&&a()};(0,e.useEffect)((function(){w&&s&&a()}),[w,s,a]),qd(k,v);var S=(0,e.useMemo)((function(){return y({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:b},p)}),[p,b]),T=(0,e.useMemo)((function(){return function(e){var t="center";return e.includes("right")&&(t="flex-end"),e.includes("left")&&(t="flex-start"),{display:"flex",flexDirection:"column",alignItems:t}}(u)}),[u]);return(0,Ye.jsx)(b_.div,{layout:!0,className:"chakra-toast",variants:m,initial:"initial",animate:"animate",exit:"exit",onHoverStart:function(){return x(null)},onHoverEnd:function(){return x(h)},custom:{position:u},style:T,children:(0,Ye.jsx)(R_.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:S,children:ht(n,{id:r,onClose:k})})})}));function F_(t){return(0,e.forwardRef)(t)}function U_(){var t=st(),r=function(){var t=(0,e.useContext)(je);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}();return y(y({},t),{},{theme:r})}O_.displayName="ToastComponent";var N_=r(77),j_=["styleConfig"];function V_(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.styleConfig,a=b(n,j_),o=U_(),s=o.theme,l=o.colorMode,c=t?on(s,"components.".concat(t)):void 0,u=i||c,d=yt({theme:s,colorMode:l},null!=(r=null==u?void 0:u.defaultProps)?r:{},ln(function(e,t){var r={};return Object.keys(e).forEach((function(n){t.includes(n)||(r[n]=e[n])})),r}(a,["children"]))),h=(0,e.useRef)({});if(u){var p=function(e){return function(t){var r,n=t.variant,i=t.size,a=nn(t.theme);return yt({},ht(null!=(r=e.baseStyle)?r:{},t),a(e,"sizes",i,t),a(e,"variants",n,t))}}(u),f=p(d);N_(h.current,f)||(h.current=f)}return h.current}function W_(e){return V_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function q_(e){return V_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}var G_=["as","viewBox","color","focusable","children","className","__css"],$_={path:(0,Ye.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,Ye.jsx)("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),(0,Ye.jsx)("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),(0,Ye.jsx)("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},H_=F_((function(e,t){var r=e.as,n=e.viewBox,i=e.color,a=void 0===i?"currentColor":i,o=e.focusable,s=void 0!==o&&o,l=e.children,c=e.className,u=e.__css,d=b(e,G_),h=ut("chakra-icon",c),p=W_("Icon",e),f={ref:t,focusable:s,className:h,__css:y(y({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:a},u),p)},m=null!=n?n:$_.viewBox;if(r&&"string"!==typeof r)return(0,Ye.jsx)(R_.svg,y(y({as:r},f),d));var g=null!=l?l:$_.path;return(0,Ye.jsx)(R_.svg,y(y(y({verticalAlign:"middle",viewBox:m},f),d),{},{children:g}))}));H_.displayName="Icon";function Z_(e){return(0,Ye.jsx)(H_,y(y({viewBox:"0 0 24 24"},e),{},{children:(0,Ye.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})}))}var X_=["label","thickness","speed","emptyColor","className"],Y_=function(){var e=He.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),K_=F_((function(e,t){var r=W_("Spinner",e),n=an(e),i=n.label,a=void 0===i?"Loading...":i,o=n.thickness,s=void 0===o?"2px":o,l=n.speed,c=void 0===l?"0.45s":l,u=n.emptyColor,d=void 0===u?"transparent":u,h=n.className,p=b(n,X_),f=ut("chakra-spinner",h),m=y({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:s,borderBottomColor:d,borderLeftColor:d,animation:"".concat(Y_," ").concat(c," linear infinite")},r);return(0,Ye.jsx)(R_.div,y(y({ref:t,__css:m,className:f},p),{},{children:a&&(0,Ye.jsx)(R_.span,{srOnly:!0,children:a})}))}));K_.displayName="Spinner";var J_=l(tt({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),2),Q_=J_[0],ev=J_[1],tv=l(tt({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),2),rv=tv[0],nv=tv[1],iv={info:{icon:function(e){return(0,Ye.jsx)(H_,y(y({viewBox:"0 0 24 24"},e),{},{children:(0,Ye.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})}))},colorScheme:"blue"},warning:{icon:Z_,colorScheme:"orange"},success:{icon:function(e){return(0,Ye.jsx)(H_,y(y({viewBox:"0 0 24 24"},e),{},{children:(0,Ye.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})}))},colorScheme:"green"},error:{icon:Z_,colorScheme:"red"},loading:{icon:K_,colorScheme:"blue"}};var av=["status","addRole"],ov=F_((function(e,t){var r,n=an(e),i=n.status,a=void 0===i?"info":i,o=n.addRole,s=void 0===o||o,l=b(n,av),c=null!=(r=e.colorScheme)?r:function(e){return iv[e].colorScheme}(a),u=q_("Alert",y(y({},e),{},{colorScheme:c})),d=y({width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},u.container);return(0,Ye.jsx)(Q_,{value:{status:a},children:(0,Ye.jsx)(rv,{value:u,children:(0,Ye.jsx)(R_.div,y(y({"data-status":a,role:s?"alert":void 0,ref:t},l),{},{className:ut("chakra-alert",e.className),__css:d}))})})}));function sv(e){var t=ev().status,r=function(e){return iv[e].icon}(t),n=nv(),i="loading"===t?n.spinner:n.icon;return(0,Ye.jsx)(R_.span,y(y({display:"inherit","data-status":t},e),{},{className:ut("chakra-alert__icon",e.className),__css:i,children:e.children||(0,Ye.jsx)(r,{h:"100%",w:"100%"})}))}ov.displayName="Alert",sv.displayName="AlertIcon";var lv=F_((function(e,t){var r=nv(),n=ev().status;return(0,Ye.jsx)(R_.div,y(y({ref:t,"data-status":n},e),{},{className:ut("chakra-alert__title",e.className),__css:r.title}))}));lv.displayName="AlertTitle";var cv=F_((function(e,t){var r=nv(),n=ev().status,i=y({display:"inline"},r.description);return(0,Ye.jsx)(R_.div,y(y({ref:t,"data-status":n},e),{},{className:ut("chakra-alert__desc",e.className),__css:i}))}));cv.displayName="AlertDescription";var uv=["children","isDisabled","__css"];function dv(e){return(0,Ye.jsx)(H_,y(y({focusable:"false","aria-hidden":!0},e),{},{children:(0,Ye.jsx)("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})}))}var hv=F_((function(e,t){var r=W_("CloseButton",e),n=an(e),i=n.children,a=n.isDisabled,o=n.__css,s=b(n,uv);return(0,Ye.jsx)(R_.button,y(y({type:"button","aria-label":"Close",ref:t,disabled:a,__css:y(y(y({},{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}),r),o)},s),{},{children:i||(0,Ye.jsx)(dv,{width:"1em",height:"1em"})}))}));hv.displayName="CloseButton";var pv=function(e){var t=e,r=new Set,n=function(e){t=e(t),r.forEach((function(e){return e()}))};return{getState:function(){return t},subscribe:function(t){return r.add(t),function(){n((function(){return e})),r.delete(t)}},removeToast:function(e,t){n((function(r){return y(y({},r),{},m({},t,r[t].filter((function(t){return t.id!=e}))))}))},notify:function(e,t){var r=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fv+=1;var i=null!=(t=n.id)?t:fv,a=null!=(r=n.position)?r:"bottom";return{id:i,message:e,position:a,duration:n.duration,onCloseComplete:n.onCloseComplete,onRequestRemove:function(){return pv.removeToast(String(i),a)},status:n.status,requestClose:!1,containerStyle:n.containerStyle}}(e,t),i=r.position,a=r.id;return n((function(e){var t,n,a=i.includes("top")?[r].concat(u(null!=(t=e[i])?t:[])):[].concat(u(null!=(n=e[i])?n:[]),[r]);return y(y({},e),{},m({},i,a))})),a},update:function(e,t){e&&n((function(r){var n=y({},r),i=jd(n,e),a=i.position,o=i.index;return a&&-1!==o&&(n[a][o]=y(y(y({},n[a][o]),t),{},{message:gv(t)})),n}))},closeAll:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).positions;n((function(t){return(null!=e?e:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((function(e,r){return e[r]=t[r].map((function(e){return y(y({},e),{},{requestClose:!0})})),e}),y({},t))}))},close:function(e){n((function(t){var r=Vd(t,e);return r?y(y({},t),{},m({},r,t[r].map((function(t){return t.id==e?y(y({},t),{},{requestClose:!0}):t})))):t}))},isActive:function(e){return Boolean(jd(pv.getState(),e).position)}}}({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]});var fv=0;var mv=function(e){var t=e.status,r=e.variant,n=void 0===r?"solid":r,i=e.id,a=e.title,o=e.isClosable,s=e.onClose,l=e.description,c=e.colorScheme,u=e.icon,d=i?{root:"toast-".concat(i),title:"toast-".concat(i,"-title"),description:"toast-".concat(i,"-description")}:void 0;return(0,Ye.jsxs)(ov,{addRole:!1,status:t,variant:n,id:null==d?void 0:d.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:c,children:[(0,Ye.jsx)(sv,{children:u}),(0,Ye.jsxs)(R_.div,{flex:"1",maxWidth:"100%",children:[a&&(0,Ye.jsx)(lv,{id:null==d?void 0:d.title,children:a}),l&&(0,Ye.jsx)(cv,{id:null==d?void 0:d.description,display:"block",children:l})]}),o&&(0,Ye.jsx)(hv,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function gv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.render,r=e.toastComponent,n=void 0===r?mv:r;return function(r){return"function"===typeof t?t(y(y({},r),e)):(0,Ye.jsx)(n,y(y({},r),e))}}function yv(){var t=(0,e.useRef)(!1);return Kd((function(){return t.current=!0,function(){t.current=!1}}),[]),t}var bv=function(e){da(r,e);var t=ma(r);function r(){return ca(this,r),t.apply(this,arguments)}return la(r,[{key:"getSnapshotBeforeUpdate",value:function(e){var t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){var r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.props.children}}]),r}(e.Component);function _v(t){var r=t.children,n=t.isPresent,i=(0,e.useId)(),a=(0,e.useRef)(null),o=(0,e.useRef)({width:0,height:0,top:0,left:0});return(0,e.useInsertionEffect)((function(){var e=o.current,t=e.width,r=e.height,s=e.top,l=e.left;if(!n&&a.current&&t&&r){a.current.dataset.motionPopId=i;var c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(t,"px !important;\n            height: ").concat(r,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(l,"px !important;\n          }\n        ")),function(){document.head.removeChild(c)}}}),[n]),e.createElement(bv,{isPresent:n,childRef:a,sizeRef:o},e.cloneElement(r,{ref:a}))}var vv=function(t){var r=t.children,n=t.initial,i=t.isPresent,a=t.onExitComplete,o=t.custom,s=t.presenceAffectsLayout,l=t.mode,c=vp(xv),u=(0,e.useId)(),d=(0,e.useMemo)((function(){return{id:u,initial:n,isPresent:i,custom:o,onExitComplete:function(e){c.set(e,!0);var t,r=lt(c.values());try{for(r.s();!(t=r.n()).done;){if(!t.value)return}}catch(n){r.e(n)}finally{r.f()}a&&a()},register:function(e){return c.set(e,!1),function(){return c.delete(e)}}}}),s?void 0:[i]);return(0,e.useMemo)((function(){c.forEach((function(e,t){return c.set(t,!1)}))}),[i]),e.useEffect((function(){!i&&!c.size&&a&&a()}),[i]),"popLayout"===l&&(r=e.createElement(_v,{isPresent:i},r)),e.createElement($d.Provider,{value:d},r)};function xv(){return new Map}var wv=function(e){return e.key||""};var kv=function(t){var r=t.children,n=t.custom,i=t.initial,a=void 0===i||i,o=t.onExitComplete,s=t.exitBeforeEnter,c=t.presenceAffectsLayout,d=void 0===c||c,h=t.mode,p=void 0===h?"sync":h;yf(!s,"Replace exitBeforeEnter with mode='wait'");var f,m=(0,e.useContext)(hh).forceRender||function(){var t=yv(),r=l((0,e.useState)(0),2),n=r[0],i=r[1],a=(0,e.useCallback)((function(){t.current&&i(n+1)}),[n]);return[(0,e.useCallback)((function(){return Dp.postRender(a)}),[a]),n]}()[0],g=yv(),y=function(t){var r=[];return e.Children.forEach(t,(function(t){(0,e.isValidElement)(t)&&r.push(t)})),r}(r),b=y,_=(0,e.useRef)(new Map).current,v=(0,e.useRef)(b),x=(0,e.useRef)(new Map).current,w=(0,e.useRef)(!0);if(Kd((function(){w.current=!1,function(e,t){e.forEach((function(e){var r=wv(e);t.set(r,e)}))}(y,x),v.current=b})),f=function(){w.current=!0,x.clear(),_.clear()},(0,e.useEffect)((function(){return function(){return f()}}),[]),w.current)return e.createElement(e.Fragment,null,b.map((function(t){return e.createElement(vv,{key:wv(t),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:d,mode:p},t)})));b=u(b);for(var k=v.current.map(wv),S=y.map(wv),T=k.length,A=0;A<T;A++){var C=k[A];-1!==S.indexOf(C)||_.has(C)||_.set(C,void 0)}return"wait"===p&&_.size&&(b=[]),_.forEach((function(t,r){if(-1===S.indexOf(r)){var i=x.get(r);if(i){var a=k.indexOf(r),s=t;if(!s){s=e.createElement(vv,{key:wv(i),isPresent:!1,onExitComplete:function(){x.delete(r),_.delete(r);var e=v.current.findIndex((function(e){return e.key===r}));if(v.current.splice(e,1),!_.size){if(v.current=y,!1===g.current)return;m(),o&&o()}},custom:n,presenceAffectsLayout:d,mode:p},i),_.set(r,s)}b.splice(a,0,s)}}})),b=b.map((function(t){var r=t.key;return _.has(r)?t:e.createElement(vv,{key:wv(t),isPresent:!0,presenceAffectsLayout:d,mode:p},t)})),e.createElement(e.Fragment,null,_.size?b:b.map((function(t){return(0,e.cloneElement)(t)})))},Sv=r(164),Tv=["containerRef"],Av=l(tt({strict:!1,name:"PortalContext"}),2),Cv=Av[0],Ev=Av[1],Iv="chakra-portal",Pv=function(e){return(0,Ye.jsx)("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children})},Mv=function(t){var r=t.appendToParentPortal,n=t.children,i=l((0,e.useState)(null),2),a=i[0],o=i[1],s=(0,e.useRef)(null),c=l((0,e.useState)({}),2)[1];(0,e.useEffect)((function(){return c({})}),[]);var u=Ev(),d=it();vn((function(){if(a){var e=a.ownerDocument,t=r&&null!=u?u:e.body;if(t){s.current=e.createElement("div"),s.current.className=Iv,t.appendChild(s.current),c({});var n=s.current;return function(){t.contains(n)&&t.removeChild(n)}}}}),[a]);var h=(null==d?void 0:d.zIndex)?(0,Ye.jsx)(Pv,{zIndex:null==d?void 0:d.zIndex,children:n}):n;return s.current?(0,Sv.createPortal)((0,Ye.jsx)(Cv,{value:s.current,children:h}),s.current):(0,Ye.jsx)("span",{ref:function(e){e&&o(e)}})},Dv=function(t){var r=t.children,n=t.containerRef,i=t.appendToParentPortal,a=n.current,o=null!=a?a:"undefined"!==typeof window?document.body:void 0,s=(0,e.useMemo)((function(){var e=null==a?void 0:a.ownerDocument.createElement("div");return e&&(e.className=Iv),e}),[a]),c=l((0,e.useState)({}),2)[1];return vn((function(){return c({})}),[]),vn((function(){if(s&&o)return o.appendChild(s),function(){o.removeChild(s)}}),[s,o]),o&&s?(0,Sv.createPortal)((0,Ye.jsx)(Cv,{value:i?s:null,children:r}),s):null};function zv(e){var t=y({appendToParentPortal:!0},e),r=t.containerRef,n=b(t,Tv);return r?(0,Ye.jsx)(Dv,y({containerRef:r},n)):(0,Ye.jsx)(Mv,y({},n))}zv.className=Iv,zv.selector=".chakra-portal",zv.displayName="Portal";var Lv=l(tt({name:"ToastOptionsContext",strict:!1}),2),Rv=Lv[0],Bv=(Lv[1],function(t){var r=(0,e.useSyncExternalStore)(pv.subscribe,pv.getState,pv.getState),n=t.motionVariants,i=t.component,a=void 0===i?O_:i,o=t.portalProps,s=Object.keys(r).map((function(e){var t=r[e];return(0,Ye.jsx)("div",{role:"region","aria-live":"polite","aria-label":"Notifications",id:"chakra-toast-manager-".concat(e),style:Wd(e),children:(0,Ye.jsx)(kv,{initial:!1,children:t.map((function(e){return(0,Ye.jsx)(a,y({motionVariants:n},e),e.id)}))})},e)}));return(0,Ye.jsx)(zv,y(y({},o),{},{children:s}))}),Ov=["children","theme","toastOptions"],Fv=function(e){return function(t){var r=t.children,n=t.theme,i=void 0===n?e:n,a=t.toastOptions,o=b(t,Ov);return(0,Ye.jsxs)(Pn,y(y({theme:i},o),{},{children:[(0,Ye.jsx)(Rv,{value:null==a?void 0:a.defaultOptions,children:r}),(0,Ye.jsx)(Bv,y({},a))]}))}},Uv=Fv(Fd);Fv(Ud);var Nv=["className","align","decoration","casing"],jv=F_((function(e,t){var r=W_("Text",e),n=an(e),i=(n.className,n.align,n.decoration,n.casing,b(n,Nv)),a=function(e){var t=Object.assign({},e);for(var r in t)void 0===t[r]&&delete t[r];return t}({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,Ye.jsx)(R_.p,y(y(y({ref:t,className:ut("chakra-text",e.className)},a),i),{},{__css:r}))}));jv.displayName="Text";var Vv=function(e){return(0,Ye.jsx)(R_.div,y(y({className:"chakra-stack__item"},e),{},{__css:y({display:"inline-block",flex:"0 0 auto",minWidth:0},e.__css)}))};Vv.displayName="StackItem";Object.freeze(["base","sm","md","lg","xl","2xl"]);var Wv=["isInline","direction","align","justify","spacing","wrap","children","divider","className","shouldWrapChildren"],qv=F_((function(t,r){var n=t.isInline,i=t.direction,a=t.align,o=t.justify,s=t.spacing,l=void 0===s?"0.5rem":s,c=t.wrap,u=t.children,d=t.divider,h=t.className,p=t.shouldWrapChildren,f=b(t,Wv),m=n?"row":null!=i?i:"column",g=(0,e.useMemo)((function(){return function(e){var t,r,n=e.spacing,i=e.direction,a={column:{my:n,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:n,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:n,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:n,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":(t=i,r=function(e){return a[e]},Array.isArray(t)?t.map((function(e){return null===e?null:r(e)})):dt(t)?Object.keys(t).reduce((function(e,n){return e[n]=r(t[n]),e}),{}):null!=t?r(t):null)}}({spacing:l,direction:m})}),[l,m]),_=!!d,v=!p&&!_,x=(0,e.useMemo)((function(){var t=function(t){return e.Children.toArray(t).filter((function(t){return(0,e.isValidElement)(t)}))}(u);return v?t:t.map((function(r,n){var i="undefined"!==typeof r.key?r.key:n,a=n+1===t.length,o=p?(0,Ye.jsx)(Vv,{children:r},i):r;if(!_)return o;var s=(0,e.cloneElement)(d,{__css:g}),l=a?null:s;return(0,Ye.jsxs)(e.Fragment,{children:[o,l]},i)}))}),[d,g,_,v,p,u]),w=ut("chakra-stack",h);return(0,Ye.jsx)(R_.div,y(y({ref:r,display:"flex",alignItems:a,justifyContent:o,flexDirection:m,flexWrap:c,gap:_?void 0:l,className:w},f),{},{children:x}))}));qv.displayName="Stack";var Gv=F_((function(e,t){return(0,Ye.jsx)(qv,y(y({align:"center"},e),{},{direction:"row",ref:t}))}));Gv.displayName="HStack";var $v=["size","centerContent"],Hv=["size"],Zv=R_("div");Zv.displayName="Box";var Xv=F_((function(e,t){var r=e.size,n=e.centerContent,i=void 0===n||n,a=b(e,$v),o=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return(0,Ye.jsx)(Zv,y({ref:t,boxSize:r,__css:y(y({},o),{},{flexShrink:0,flexGrow:0})},a))}));Xv.displayName="Square";var Yv=F_((function(e,t){var r=e.size,n=b(e,Hv);return(0,Ye.jsx)(Xv,y({size:r,ref:t,borderRadius:"9999px"},n))}));Yv.displayName="Circle";var Kv=F_((function(e,t){return(0,Ye.jsx)(qv,y(y({align:"center"},e),{},{direction:"column",ref:t}))}));function Jv(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){t.forEach((function(t){!function(e,t){if(null!=e)if("function"!==typeof e)try{e.current=t}catch(r){throw new Error("Cannot assign value '".concat(t,"' to ref '").concat(e,"'"))}else e(t)}(t,e)}))}}function Qv(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,e.useMemo)((function(){return Jv.apply(void 0,r)}),r)}Kv.displayName="VStack";var ex=["id","isRequired","isInvalid","isDisabled","isReadOnly"],tx=["getRootProps","htmlProps"],rx=l(tt({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),2),nx=rx[0],ix=rx[1],ax=l(tt({strict:!1,name:"FormControlContext"}),2),ox=ax[0],sx=ax[1];var lx=F_((function(t,r){var n=q_("Form",t),i=function(t){var r=t.id,n=t.isRequired,i=t.isInvalid,a=t.isDisabled,o=t.isReadOnly,s=b(t,ex),c=(0,e.useId)(),u=r||"field-".concat(c),d="".concat(u,"-label"),h="".concat(u,"-feedback"),p="".concat(u,"-helptext"),f=l((0,e.useState)(!1),2),m=f[0],g=f[1],_=l((0,e.useState)(!1),2),v=_[0],x=_[1],w=l((0,e.useState)(!1),2),k=w[0],S=w[1],T=(0,e.useCallback)((function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y(y({id:p},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{ref:Jv(e,(function(e){e&&x(!0)}))})}),[p]),A=(0,e.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y(y({},e),{},{ref:t,"data-focus":ft(k),"data-disabled":ft(a),"data-invalid":ft(i),"data-readonly":ft(o),id:void 0!==e.id?e.id:d,htmlFor:void 0!==e.htmlFor?e.htmlFor:u})}),[u,a,k,i,o,d]),C=(0,e.useCallback)((function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y(y({id:h},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{ref:Jv(e,(function(e){e&&g(!0)})),"aria-live":"polite"})}),[h]),E=(0,e.useCallback)((function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y(y(y({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),s),{},{ref:e,role:"group"})}),[s]),I=(0,e.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y(y({},e),{},{ref:t,role:"presentation","aria-hidden":!0,children:e.children||"*"})}),[]);return{isRequired:!!n,isInvalid:!!i,isReadOnly:!!o,isDisabled:!!a,isFocused:!!k,onFocus:function(){return S(!0)},onBlur:function(){return S(!1)},hasFeedbackText:m,setHasFeedbackText:g,hasHelpText:v,setHasHelpText:x,id:u,labelId:d,feedbackId:h,helpTextId:p,htmlProps:s,getHelpTextProps:T,getErrorMessageProps:C,getRootProps:E,getLabelProps:A,getRequiredIndicatorProps:I}}(an(t)),a=i.getRootProps,o=(i.htmlProps,b(i,tx)),s=ut("chakra-form-control",t.className);return(0,Ye.jsx)(ox,{value:o,children:(0,Ye.jsx)(nx,{value:n,children:(0,Ye.jsx)(R_.div,y(y({},a({},r)),{},{className:s,__css:n.container}))})})}));lx.displayName="FormControl";var cx=F_((function(e,t){var r=sx(),n=ix(),i=ut("chakra-form__helper-text",e.className);return(0,Ye.jsx)(R_.div,y(y({},null==r?void 0:r.getHelpTextProps(e,t)),{},{__css:n.helperText,className:i}))}));cx.displayName="FormHelperText";var ux=["isDisabled","isInvalid","isReadOnly","isRequired"],dx=["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"];function hx(e){var t=function(e){var t,r,n,i=sx(),a=e.id,o=e.disabled,s=e.readOnly,l=e.required,c=e.isRequired,u=e.isInvalid,d=e.isReadOnly,h=e.isDisabled,p=e.onFocus,f=e.onBlur,m=b(e,dx),g=e["aria-describedby"]?[e["aria-describedby"]]:[];(null==i?void 0:i.hasFeedbackText)&&(null==i?void 0:i.isInvalid)&&g.push(i.feedbackId);(null==i?void 0:i.hasHelpText)&&g.push(i.helpTextId);return y(y({},m),{},{"aria-describedby":g.join(" ")||void 0,id:null!=a?a:null==i?void 0:i.id,isDisabled:null!=(t=null!=o?o:h)?t:null==i?void 0:i.isDisabled,isReadOnly:null!=(r=null!=s?s:d)?r:null==i?void 0:i.isReadOnly,isRequired:null!=(n=null!=l?l:c)?n:null==i?void 0:i.isRequired,isInvalid:null!=u?u:null==i?void 0:i.isInvalid,onFocus:gt(null==i?void 0:i.onFocus,p),onBlur:gt(null==i?void 0:i.onBlur,f)})}(e),r=t.isDisabled,n=t.isInvalid,i=t.isReadOnly,a=t.isRequired;return y(y({},b(t,ux)),{},{disabled:r,readOnly:i,required:a,"aria-invalid":mt(n),"aria-required":mt(a),"aria-readonly":mt(i)})}var px=["htmlSize"],fx=F_((function(e,t){var r=e.htmlSize,n=b(e,px),i=q_("Input",n),a=hx(an(n)),o=ut("chakra-input",e.className);return(0,Ye.jsx)(R_.input,y(y({size:r},a),{},{__css:i.field,ref:t,className:o}))}));fx.displayName="Input",fx.id="Input";var mx=l(tt({strict:!1,name:"ButtonGroupContext"}),2),gx=(mx[0],mx[1]),yx=["children","className"];function bx(t){var r=t.children,n=t.className,i=b(t,yx),a=(0,e.isValidElement)(r)?(0,e.cloneElement)(r,{"aria-hidden":!0,focusable:!1}):r,o=ut("chakra-button__icon",n);return(0,Ye.jsx)(R_.span,y(y({display:"inline-flex",alignSelf:"center",flexShrink:0},i),{},{className:o,children:a}))}bx.displayName="ButtonIcon";var _x=["label","placement","spacing","children","className","__css"];function vx(t){var r=t.label,n=t.placement,i=t.spacing,a=void 0===i?"0.5rem":i,o=t.children,s=void 0===o?(0,Ye.jsx)(K_,{color:"currentColor",width:"1em",height:"1em"}):o,l=t.className,c=t.__css,u=b(t,_x),d=ut("chakra-button__spinner",l),h="start"===n?"marginEnd":"marginStart",p=(0,e.useMemo)((function(){var e;return y((m(e={display:"flex",alignItems:"center",position:r?"relative":"absolute"},h,r?a:0),m(e,"fontSize","1em"),m(e,"lineHeight","normal"),e),c)}),[c,r,h,a]);return(0,Ye.jsx)(R_.div,y(y({className:d},u),{},{__css:p,children:s}))}vx.displayName="ButtonSpinner";var xx=["isDisabled","isLoading","isActive","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"],wx=F_((function(t,r){var n=gx(),i=W_("Button",y(y({},n),t)),a=an(t),o=a.isDisabled,s=void 0===o?null==n?void 0:n.isDisabled:o,c=a.isLoading,u=a.isActive,d=a.children,h=a.leftIcon,p=a.rightIcon,f=a.loadingText,m=a.iconSpacing,g=void 0===m?"0.5rem":m,_=a.type,v=a.spinner,x=a.spinnerPlacement,w=void 0===x?"start":x,k=a.className,S=a.as,T=b(a,xx),A=(0,e.useMemo)((function(){var e=y(y({},null==i?void 0:i._focus),{},{zIndex:1});return y(y({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none"},i),!!n&&{_focus:e})}),[i,n]),C=function(t){var r=l((0,e.useState)(!t),2),n=r[0],i=r[1],a=(0,e.useCallback)((function(e){e&&i("BUTTON"===e.tagName)}),[]);return{ref:a,type:n?"button":void 0}}(S),E=C.ref,I=C.type,P={rightIcon:p,leftIcon:h,iconSpacing:g,children:d};return(0,Ye.jsxs)(R_.button,y(y({ref:Qv(r,E),as:S,type:null!=_?_:I,"data-active":ft(u),"data-loading":ft(c),__css:A,className:ut("chakra-button",k)},T),{},{disabled:s||c,children:[c&&"start"===w&&(0,Ye.jsx)(vx,{className:"chakra-button__spinner--start",label:f,placement:"start",spacing:g,children:v}),c?f||(0,Ye.jsx)(R_.span,{opacity:0,children:(0,Ye.jsx)(kx,y({},P))}):(0,Ye.jsx)(kx,y({},P)),c&&"end"===w&&(0,Ye.jsx)(vx,{className:"chakra-button__spinner--end",label:f,placement:"end",spacing:g,children:v})]}))}));function kx(e){var t=e.leftIcon,r=e.rightIcon,n=e.children,i=e.iconSpacing;return(0,Ye.jsxs)(Ye.Fragment,{children:[t&&(0,Ye.jsx)(bx,{marginEnd:i,children:t}),n,r&&(0,Ye.jsx)(bx,{marginStart:i,children:r})]})}wx.displayName="Button";var Sx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tx=function(e,t,r){var n,i=Sx[e];return n="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==r&&void 0!==r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Ax(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var Cx={date:Ax({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Ax({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Ax({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ex={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ix=function(e,t,r,n){return Ex[e]};function Px(e){return function(t,r){var n;if("formatting"===(null!==r&&void 0!==r&&r.context?String(r.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=null!==r&&void 0!==r&&r.width?String(r.width):i;n=e.formattingValues[a]||e.formattingValues[i]}else{var o=e.defaultWidth,s=null!==r&&void 0!==r&&r.width?String(r.width):e.defaultWidth;n=e.values[s]||e.values[o]}return n[e.argumentCallback?e.argumentCallback(t):t]}}var Mx={ordinalNumber:function(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Px({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Px({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Px({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Px({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Px({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},Dx=Mx;function zx(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;var o,s=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return}(l,(function(e){return e.test(s)})):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r;return}(l,(function(e){return e.test(s)}));return o=e.valueCallback?e.valueCallback(c):c,{value:o=r.valueCallback?r.valueCallback(o):o,rest:t.slice(s.length)}}}var Lx,Rx={ordinalNumber:(Lx={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(Lx.matchPattern);if(!r)return null;var n=r[0],i=e.match(Lx.parsePattern);if(!i)return null;var a=Lx.valueCallback?Lx.valueCallback(i[0]):i[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(n.length)}}),era:zx({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:zx({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:zx({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:zx({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:zx({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},Bx={code:"en-US",formatDistance:Tx,formatLong:Cx,formatRelative:Ix,localize:Dx,match:Rx,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ox(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Fx(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Ux(e){Fx(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===p(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Nx(e,t){return Fx(2,arguments),function(e,t){Fx(2,arguments);var r=Ux(e).getTime(),n=Ox(t);return new Date(r+n)}(e,-Ox(t))}function jx(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}var Vx=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Wx=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},qx={p:Wx,P:function(e,t){var r,n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return Vx(e,t);switch(i){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Vx(i,t)).replace("{{time}}",Wx(a,t))}},Gx=qx;var $x=["D","DD"],Hx=["YY","YYYY"];function Zx(e,t,r){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Xx=function(){function e(){ca(this,e),m(this,"priority",void 0),m(this,"subPriority",0)}return la(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),Yx=function(e){da(r,e);var t=ma(r);function r(e,n,i,a,o){var s;return ca(this,r),(s=t.call(this)).value=e,s.validateValue=n,s.setValue=i,s.priority=a,o&&(s.subPriority=o),s}return la(r,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,r){return this.setValue(e,t,this.value,r)}}]),r}(Xx),Kx=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",10),m(fa(e),"subPriority",-1),e}return la(r,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var r=new Date(0);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}}]),r}(Xx),Jx=function(){function e(){ca(this,e),m(this,"incompatibleTokens",void 0),m(this,"priority",void 0),m(this,"subPriority",void 0)}return la(e,[{key:"run",value:function(e,t,r,n){var i=this.parse(e,t,r,n);return i?{setter:new Yx(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,r){return!0}}]),e}(),Qx=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",140),m(fa(e),"incompatibleTokens",["R","u","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,r){return t.era=r,e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),r}(Jx),ew=(Math.pow(10,8),/^(1[0-2]|0?\d)/),tw=/^(3[0-1]|[0-2]?\d)/,rw=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,nw=/^(5[0-3]|[0-4]?\d)/,iw=/^(2[0-3]|[0-1]?\d)/,aw=/^(2[0-4]|[0-1]?\d)/,ow=/^(1[0-1]|0?\d)/,sw=/^(1[0-2]|0?\d)/,lw=/^[0-5]?\d/,cw=/^[0-5]?\d/,uw=/^\d/,dw=/^\d{1,2}/,hw=/^\d{1,3}/,pw=/^\d{1,4}/,fw=/^-?\d+/,mw=/^-?\d/,gw=/^-?\d{1,2}/,yw=/^-?\d{1,3}/,bw=/^-?\d{1,4}/,_w=/^([+-])(\d{2})(\d{2})?|Z/,vw=/^([+-])(\d{2})(\d{2})|Z/,xw=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ww=/^([+-])(\d{2}):(\d{2})|Z/,kw=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Sw(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Tw(e,t){var r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Aw(e,t){var r=t.match(e);return r?"Z"===r[0]?{value:0,rest:t.slice(1)}:{value:("+"===r[1]?1:-1)*(36e5*(r[2]?parseInt(r[2],10):0)+6e4*(r[3]?parseInt(r[3],10):0)+1e3*(r[5]?parseInt(r[5],10):0)),rest:t.slice(r[0].length)}:null}function Cw(e){return Tw(fw,e)}function Ew(e,t){switch(e){case 1:return Tw(uw,t);case 2:return Tw(dw,t);case 3:return Tw(hw,t);case 4:return Tw(pw,t);default:return Tw(new RegExp("^\\d{1,"+e+"}"),t)}}function Iw(e,t){switch(e){case 1:return Tw(mw,t);case 2:return Tw(gw,t);case 3:return Tw(yw,t);case 4:return Tw(bw,t);default:return Tw(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Pw(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Mw(e,t){var r,n=t>0,i=n?t:1-t;if(i<=50)r=e||100;else{var a=i+50;r=e+100*Math.floor(a/100)-(e>=a%100?100:0)}return n?r:1-r}function Dw(e){return e%400===0||e%4===0&&e%100!==0}var zw=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",130),m(fa(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){var n=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Sw(Ew(4,e),n);case"yo":return Sw(r.ordinalNumber(e,{unit:"year"}),n);default:return Sw(Ew(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r){var n=e.getUTCFullYear();if(r.isTwoDigitYear){var i=Mw(r.year,n);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var a="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),r}(Jx),Lw={};function Rw(){return Lw}function Bw(e,t){var r,n,i,a,o,s,l,c;Fx(1,arguments);var u=Rw(),d=Ox(null!==(r=null!==(n=null!==(i=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==n?n:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ux(e),p=h.getUTCDay(),f=(p<d?7:0)+p-d;return h.setUTCDate(h.getUTCDate()-f),h.setUTCHours(0,0,0,0),h}function Ow(e,t){var r,n,i,a,o,s,l,c;Fx(1,arguments);var u=Ux(e),d=u.getUTCFullYear(),h=Rw(),p=Ox(null!==(r=null!==(n=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==n?n:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(d+1,0,p),f.setUTCHours(0,0,0,0);var m=Bw(f,t),g=new Date(0);g.setUTCFullYear(d,0,p),g.setUTCHours(0,0,0,0);var y=Bw(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=y.getTime()?d:d-1}var Fw=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",130),m(fa(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){var n=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Sw(Ew(4,e),n);case"Yo":return Sw(r.ordinalNumber(e,{unit:"year"}),n);default:return Sw(Ew(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r,n){var i=Ow(e,n);if(r.isTwoDigitYear){var a=Mw(r.year,i);return e.setUTCFullYear(a,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Bw(e,n)}var o="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(o,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Bw(e,n)}}]),r}(Jx);function Uw(e){Fx(1,arguments);var t=Ux(e),r=t.getUTCDay(),n=(r<1?7:0)+r-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}var Nw=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",130),m(fa(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t){return Iw("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){var n=new Date(0);return n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0),Uw(n)}}]),r}(Jx),jw=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",130),m(fa(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t){return Iw("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),r}(Jx),Vw=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",120),m(fa(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"Q":case"QQ":return Ew(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}]),r}(Jx),Ww=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",120),m(fa(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"q":case"qq":return Ew(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}]),r}(Jx),qw=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),m(fa(e),"priority",110),e}return la(r,[{key:"parse",value:function(e,t,r){var n=function(e){return e-1};switch(t){case"M":return Sw(Tw(ew,e),n);case"MM":return Sw(Ew(2,e),n);case"Mo":return Sw(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),r}(Jx),Gw=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",110),m(fa(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){var n=function(e){return e-1};switch(t){case"L":return Sw(Tw(ew,e),n);case"LL":return Sw(Ew(2,e),n);case"Lo":return Sw(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),r}(Jx);var $w=6048e5;function Hw(e,t){Fx(1,arguments);var r=Ux(e),n=Bw(r,t).getTime()-function(e,t){var r,n,i,a,o,s,l,c;Fx(1,arguments);var u=Rw(),d=Ox(null!==(r=null!==(n=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==n?n:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1),h=Ow(e,t),p=new Date(0);return p.setUTCFullYear(h,0,d),p.setUTCHours(0,0,0,0),Bw(p,t)}(r,t).getTime();return Math.round(n/$w)+1}var Zw=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",100),m(fa(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"w":return Tw(nw,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r,n){return Bw(function(e,t,r){Fx(2,arguments);var n=Ux(e),i=Ox(t),a=Hw(n,r)-i;return n.setUTCDate(n.getUTCDate()-7*a),n}(e,r,n),n)}}]),r}(Jx);function Xw(e){Fx(1,arguments);var t=function(e){Fx(1,arguments);var t=Ux(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var i=Uw(n),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var o=Uw(a);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}(e),r=new Date(0);return r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0),Uw(r)}var Yw=6048e5;function Kw(e,t){Fx(2,arguments);var r=Ux(e),n=Ox(t),i=function(e){Fx(1,arguments);var t=Ux(e),r=Uw(t).getTime()-Xw(t).getTime();return Math.round(r/Yw)+1}(r)-n;return r.setUTCDate(r.getUTCDate()-7*i),r}var Jw=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",100),m(fa(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"I":return Tw(nw,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r){return Uw(Kw(e,r))}}]),r}(Jx),Qw=[31,28,31,30,31,30,31,31,30,31,30,31],ek=[31,29,31,30,31,30,31,31,30,31,30,31],tk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",90),m(fa(e),"subPriority",1),m(fa(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"d":return Tw(tw,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){var r=Dw(e.getUTCFullYear()),n=e.getUTCMonth();return r?t>=1&&t<=ek[n]:t>=1&&t<=Qw[n]}},{key:"set",value:function(e,t,r){return e.setUTCDate(r),e.setUTCHours(0,0,0,0),e}}]),r}(Jx),rk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",90),m(fa(e),"subpriority",1),m(fa(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"D":case"DD":return Tw(rw,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){return Dw(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,r){return e.setUTCMonth(0,r),e.setUTCHours(0,0,0,0),e}}]),r}(Jx);function nk(e,t,r){var n,i,a,o,s,l,c,u;Fx(2,arguments);var d=Rw(),h=Ox(null!==(n=null!==(i=null!==(a=null!==(o=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==o?o:null===r||void 0===r||null===(s=r.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:d.weekStartsOn)&&void 0!==i?i:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Ux(e),f=Ox(t),m=((f%7+7)%7<h?7:0)+f-p.getUTCDay();return p.setUTCDate(p.getUTCDate()+m),p}var ik=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",90),m(fa(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,n){return(e=nk(e,r,n)).setUTCHours(0,0,0,0),e}}]),r}(Jx),ak=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",90),m(fa(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r,n){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Sw(Ew(t.length,e),i);case"eo":return Sw(r.ordinalNumber(e,{unit:"day"}),i);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,n){return(e=nk(e,r,n)).setUTCHours(0,0,0,0),e}}]),r}(Jx),ok=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",90),m(fa(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r,n){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Sw(Ew(t.length,e),i);case"co":return Sw(r.ordinalNumber(e,{unit:"day"}),i);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,n){return(e=nk(e,r,n)).setUTCHours(0,0,0,0),e}}]),r}(Jx);var sk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",90),m(fa(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){var n=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Ew(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Sw(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return Sw(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return Sw(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return Sw(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,r){return e=function(e,t){Fx(2,arguments);var r=Ox(t);r%7===0&&(r-=7);var n=Ux(e),i=((r%7+7)%7<1?7:0)+r-n.getUTCDay();return n.setUTCDate(n.getUTCDate()+i),n}(e,r),e.setUTCHours(0,0,0,0),e}}]),r}(Jx),lk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",80),m(fa(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Pw(r),0,0,0),e}}]),r}(Jx),ck=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",80),m(fa(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Pw(r),0,0,0),e}}]),r}(Jx),uk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",80),m(fa(e),"incompatibleTokens",["a","b","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Pw(r),0,0,0),e}}]),r}(Jx),dk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",70),m(fa(e),"incompatibleTokens",["H","K","k","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"h":return Tw(sw,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,r){var n=e.getUTCHours()>=12;return n&&r<12?e.setUTCHours(r+12,0,0,0):n||12!==r?e.setUTCHours(r,0,0,0):e.setUTCHours(0,0,0,0),e}}]),r}(Jx),hk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",70),m(fa(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"H":return Tw(iw,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,r){return e.setUTCHours(r,0,0,0),e}}]),r}(Jx),pk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",70),m(fa(e),"incompatibleTokens",["h","H","k","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"K":return Tw(ow,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.getUTCHours()>=12&&r<12?e.setUTCHours(r+12,0,0,0):e.setUTCHours(r,0,0,0),e}}]),r}(Jx),fk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",70),m(fa(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"k":return Tw(aw,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,r){var n=r<=24?r%24:r;return e.setUTCHours(n,0,0,0),e}}]),r}(Jx),mk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",60),m(fa(e),"incompatibleTokens",["t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"m":return Tw(lw,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCMinutes(r,0,0),e}}]),r}(Jx),gk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",50),m(fa(e),"incompatibleTokens",["t","T"]),e}return la(r,[{key:"parse",value:function(e,t,r){switch(t){case"s":return Tw(cw,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Ew(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCSeconds(r,0),e}}]),r}(Jx),yk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",30),m(fa(e),"incompatibleTokens",["t","T"]),e}return la(r,[{key:"parse",value:function(e,t){return Sw(Ew(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,r){return e.setUTCMilliseconds(r),e}}]),r}(Jx),bk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",10),m(fa(e),"incompatibleTokens",["t","T","x"]),e}return la(r,[{key:"parse",value:function(e,t){switch(t){case"X":return Aw(_w,e);case"XX":return Aw(vw,e);case"XXXX":return Aw(xw,e);case"XXXXX":return Aw(kw,e);default:return Aw(ww,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),r}(Jx),_k=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",10),m(fa(e),"incompatibleTokens",["t","T","X"]),e}return la(r,[{key:"parse",value:function(e,t){switch(t){case"x":return Aw(_w,e);case"xx":return Aw(vw,e);case"xxxx":return Aw(xw,e);case"xxxxx":return Aw(kw,e);default:return Aw(ww,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),r}(Jx),vk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",40),m(fa(e),"incompatibleTokens","*"),e}return la(r,[{key:"parse",value:function(e){return Cw(e)}},{key:"set",value:function(e,t,r){return[new Date(1e3*r),{timestampIsSet:!0}]}}]),r}(Jx),xk=function(e){da(r,e);var t=ma(r);function r(){var e;ca(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(fa(e=t.call.apply(t,[this].concat(i))),"priority",20),m(fa(e),"incompatibleTokens","*"),e}return la(r,[{key:"parse",value:function(e){return Cw(e)}},{key:"set",value:function(e,t,r){return[new Date(r),{timestampIsSet:!0}]}}]),r}(Jx),wk={G:new Qx,y:new zw,Y:new Fw,R:new Nw,u:new jw,Q:new Vw,q:new Ww,M:new qw,L:new Gw,w:new Zw,I:new Jw,d:new tk,D:new rk,E:new ik,e:new ak,c:new ok,i:new sk,a:new lk,b:new ck,B:new uk,h:new dk,H:new hk,K:new pk,k:new fk,m:new mk,s:new gk,S:new yk,X:new bk,x:new _k,t:new vk,T:new xk},kk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Sk=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tk=/^'([^]*?)'?$/,Ak=/''/g,Ck=/\S/,Ek=/[a-zA-Z]/;function Ik(e,t,r,n){var i,a,o,s,l,c,u,d,h,f,m,g,y,b,_,v,x,w;Fx(3,arguments);var k=String(e),S=String(t),T=Rw(),A=null!==(i=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:T.locale)&&void 0!==i?i:Bx;if(!A.match)throw new RangeError("locale must contain match property");var C=Ox(null!==(o=null!==(s=null!==(l=null!==(c=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null===n||void 0===n||null===(u=n.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:T.firstWeekContainsDate)&&void 0!==s?s:null===(h=T.locale)||void 0===h||null===(f=h.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==o?o:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=Ox(null!==(m=null!==(g=null!==(y=null!==(b=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==b?b:null===n||void 0===n||null===(_=n.locale)||void 0===_||null===(v=_.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==y?y:T.weekStartsOn)&&void 0!==g?g:null===(x=T.locale)||void 0===x||null===(w=x.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==m?m:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===S)return""===k?Ux(r):new Date(NaN);var I,P={firstWeekContainsDate:C,weekStartsOn:E,locale:A},M=[new Kx],D=S.match(Sk).map((function(e){var t=e[0];return t in Gx?(0,Gx[t])(e,A.formatLong):e})).join("").match(kk),z=[],L=lt(D);try{var R=function(){var t=I.value;null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return-1!==Hx.indexOf(e)}(t)||Zx(t,S,e),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return-1!==$x.indexOf(e)}(t)||Zx(t,S,e);var r=t[0],i=wk[r];if(i){var a=i.incompatibleTokens;if(Array.isArray(a)){var o=z.find((function(e){return a.includes(e.token)||e.token===r}));if(o)throw new RangeError("The format string mustn't contain `".concat(o.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===i.incompatibleTokens&&z.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));z.push({token:r,fullToken:t});var s=i.run(k,t,A.match,P);if(!s)return{v:new Date(NaN)};M.push(s.setter),k=s.rest}else{if(r.match(Ek))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");if("''"===t?t="'":"'"===r&&(t=t.match(Tk)[1].replace(Ak,"'")),0!==k.indexOf(t))return{v:new Date(NaN)};k=k.slice(t.length)}};for(L.s();!(I=L.n()).done;){var B=R();if("object"===p(B))return B.v}}catch(G){L.e(G)}finally{L.f()}if(k.length>0&&Ck.test(k))return new Date(NaN);var O=M.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,r){return r.indexOf(e)===t})).map((function(e){return M.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),F=Ux(r);if(isNaN(F.getTime()))return new Date(NaN);var U,N=Nx(F,function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(F)),j={},V=lt(O);try{for(V.s();!(U=V.n()).done;){var W=U.value;if(!W.validate(N,P))return new Date(NaN);var q=W.set(N,j,P);Array.isArray(q)?(N=q[0],jx(j,q[1])):N=q}}catch(G){V.e(G)}finally{V.f()}return N}var Pk=[[43.4891597837122,12.6995352238424],[43.6285566937818,12.7427552209061],[43.6285566937818,12.7427552209061],[43.7373820706076,12.7086419025447],[43.7373820706076,12.7086419025447],[43.8352368507708,12.6746530216939],[43.8571180119347,12.6612055977708],[43.8571180119347,12.6612055977708],[43.87828331887,12.6400556502745],[43.9052726409223,12.631611386339],[43.9052726409223,12.631611386339],[43.924901299556,12.6195482745272],[43.924901299556,12.6195482745272],[43.9299597511618,12.6164395207171],[43.9979142596256,12.6083629602849],[43.9979142596256,11.999216213423],[43.9979142596256,12.0000171981235],[43.9979142596256,12.5000125187635],[43.9979142596256,12.6083629602849],[43.9979142596256,11.999216213423],[43.999929640485,11.999216213423],[44.4999507993412,11.999216213423],[44.9979049009057,11.999216213423],[44.9979049009057,11.999216213423],[44.9999719581974,11.999216213423],[45.4999931170535,11.999216213423],[45.9978955421857,11.999216213423],[45.9978955421857,11.999216213423],[46.0000142759097,11.999216213423],[46.5000354347659,11.999216213423],[46.9978861834658,11.999216213423],[46.9978861834658,11.999216213423],[46.9999532407575,11.999216213423],[47.4999743996136,11.999216213423],[47.9978768247458,11.999216213423],[47.9978768247458,11.999216213423],[47.9999955584698,11.999216213423],[48.500016717326,11.999216213423],[48.9978674660259,11.999216213423],[48.9978674660259,11.999216213423],[48.9999345233175,11.999216213423],[49.4999556821737,11.999216213423],[49.9978581073059,11.999216213423],[49.9978581073059,11.999216213423],[49.9999768410299,11.999216213423],[50.499997999886,11.999216213423],[50.9978487485859,11.999216213423],[50.9978487485859,11.999216213423],[51.0000191587422,11.999216213423],[51.2673930194204,11.999216213423],[51.2673930194204,11.999216213423],[51.4999369647338,11.999216213423],[51.997839389866,11.999216213423],[51.997839389866,10.9991222192783],[51.997839389866,11.0000007186273],[51.997839389866,11.5000218774834],[51.997839389866,11.999216213423],[51.997839389866,10.0976578857741],[51.997839389866,10.5000053979873],[51.997839389866,10.9991222192783],[51.997839389866,10.0976578857741],[52.1908499426373,9.99918325443058],[52.1908499426373,9.99918325443058],[52.997830031146,9.58745930682021],[52.997830031146,9.58745930682021],[53.9978206724261,9.07726072786629],[53.9978206724261,9.07726072786629],[54.1508343955497,8.99919261315053],[54.1508343955497,8.99919261315053],[54.9978113137061,8.56706214891236],[54.9978113137061,8.56706214891236],[55.9978019549862,8.05686356995843],[55.9978019549862,8.05686356995843],[56.1111227063174,7.99904694257361],[56.1111227063174,7.99904694257361],[56.9977925962662,7.5466649910045],[56.9977925962662,7.5466649910045],[57.9977832375462,7.03646641205059],[57.9977832375462,7.03646641205059],[58.071005873278,6.99910797772587],[58.071005873278,6.99910797772587],[58.9977738788263,6.52626783309666],[58.9977738788263,6.52626783309666],[59.9977645201063,6.01606925414273],[59.9977645201063,6.01606925414273],[60.0309903261903,5.99911733644582],[60.0309903261903,5.99911733644582],[60.500007765551,5.99911733644582],[60.9977551613864,5.99911733644582],[60.9977551613864,5.99911733644582],[60.9999255715426,5.99911733644582],[61.4999467303988,5.99911733644582],[61.9977458026664,5.99911733644582],[61.9977458026664,5.99911733644582],[61.9999678892549,5.99911733644582],[62.4999890481111,5.99911733644582],[62.9977364439465,5.99911733644582],[62.9977364439465,5.99911733644582],[63.0000102069673,5.99911733644582],[63.5000313658234,5.99911733644582],[63.9977270852265,5.99911733644582],[63.9977270852265,5.99911733644582],[63.999949171815,5.99911733644582],[64.4999703306712,5.99911733644582],[64.9977177265065,5.99911733644582],[64.9977177265065,5.99911733644582],[64.9999914895274,5.99911733644582],[65.5000126483835,5.99911733644582],[65.9977083677866,5.99911733644582],[65.9977083677866,5.99911733644582],[65.9999304543751,5.99911733644582],[66.4999516132313,5.99911733644582],[66.9976990090666,5.99911733644582],[66.9976990090666,5.99911733644582],[66.9999727720875,5.99911733644582],[67.4999939309436,5.99911733644582],[67.9976896503466,5.99911733644582],[67.9976896503466,5.99911733644582],[68.0000150897998,5.99911733644582],[68.500036248656,5.99911733644582],[68.9976802916267,5.99911733644582],[68.9976802916267,5.99911733644582],[68.9999540546475,5.99911733644582],[69.4999752135037,5.99911733644582],[69.9976709329067,5.99911733644582],[69.9976709329067,5.99911733644582],[69.9999963723599,5.99911733644582],[70.500017531216,5.99911733644582],[70.9976615741868,5.99911733644582],[70.9976615741868,5.99911733644582],[70.9999353372076,5.99911733644582],[71.4999564960638,5.99911733644582],[71.9976522154668,5.99911733644582],[71.9976522154668,5.99911733644582],[71.99997765492,5.99911733644582],[72.1872524679988,5.99911733644582],[72.1872524679988,5.99911733644582],[72.4999988137761,5.99911733644582],[72.9976428567469,5.99911733644582],[72.9976428567469,5.99911733644582],[73.0000199726323,5.99911733644582],[73.4999377786239,5.99911733644582],[73.9976334980269,5.99911733644582],[73.9976334980269,5.99911733644582],[73.99995893748,5.99911733644582],[74.4999800963362,5.99911733644582],[74.997624139307,5.99911733644582],[74.997624139307,5.99911733644582],[75.0000012551924,5.99911733644582],[75.5000224140485,5.99911733644582],[75.997614780587,5.99911733644582],[75.997614780587,5.99911733644582],[75.9999402200401,5.99911733644582],[76.4999613788963,5.99911733644582],[76.997605421867,5.99911733644582],[76.997605421867,5.99911733644582],[76.9999825377525,5.99911733644582],[77.5000036966086,5.99911733644582],[77.9975960631471,5.99911733644582],[77.9975960631471,5.99911733644582],[77.9999215026002,5.99911733644582],[78.4999426614564,5.99911733644582],[78.9975867044271,5.99911733644582],[78.9975867044271,5.99911733644582],[78.9999638203126,5.99911733644582],[79.4999849791687,5.99911733644582],[79.9975773457072,5.99911733644582],[79.9975773457072,5.99911733644582],[80.0000061380249,5.99911733644582],[80.1591910440674,5.99911733644582],[80.1591910440674,5.99911733644582],[80.3077727469456,5.99911733644582],[80.3077727469456,5.99911733644582],[80.4958931822977,5.94948212322947],[80.723992954434,5.97911855714887],[80.9711096536538,6.08864675539149],[81.3060762877697,6.2040143904831],[81.3801286152439,6.24104055422023],[81.6373222187606,6.42518952069231],[81.712459751313,6.51198008872652],[81.7674951517038,6.61411855715141],[81.8188098489697,6.75646128989938],[81.861184523449,6.90143952069423],[81.8741985062219,6.99910797772587],[81.8741985062219,6.99910797772587],[81.9975586282673,6.99910797772587],[81.9975586282673,6.99910797772587],[81.9998840677204,6.99910797772587],[82.4999052265765,6.99910797772587],[82.9975492695473,6.99910797772587],[82.9975492695473,6.99910797772587],[82.9999263854327,6.99910797772587],[83.4998441914243,6.99910797772587],[83.7564281136285,6.99910797772587],[83.7564281136285,6.99910797772587],[83.9975399108273,6.96802823760383],[83.9975399108273,6.96802823760383],[84.9975305521074,6.83912766278112],[84.9975305521074,6.83912766278112],[85.9975211933874,6.71022708795842],[85.9975211933874,6.71022708795842],[86.9975118346674,6.58132651313571],[86.9975118346674,6.58132651313571],[87.9975024759475,6.452425938313],[87.9975024759475,6.452425938313],[88.9974931172275,6.3235253634903],[88.9974931172275,6.3235253634903],[89.9974837585076,6.19462478866759],[89.9974837585076,6.19462478866759],[90.9974743997876,6.06572421384489],[90.9974743997876,6.06572421384489],[91.514200210635,5.99911733644582],[91.514200210635,5.99911733644582],[91.9974133646354,5.93683030020635],[91.9974133646354,5.93683030020635],[92.9974556823477,5.80792306419947],[92.9974556823477,5.80792306419947],[93.9974463236277,5.67902248937677],[93.9974463236277,5.67902248937677],[94.9974369649078,5.55012191455406],[94.9974369649078,5.55012191455406],[95.1998535501951,5.52403005617049],[95.2241931498045,5.52191132244651],[95.2241931498045,5.52191132244651],[95.2279138529295,5.56477692303262],[95.2353035827473,5.56901439048056],[95.2353035827473,5.56901439048056],[95.2797969909506,5.59281138755097],[95.3961723164719,5.62880402264226],[95.4506909525398,5.6266852889183],[95.4506909525398,5.6266852889183],[95.5168367858734,5.62456655519432],[95.6290263203791,5.60921865480364],[95.7374951517597,5.57906545656132],[95.8412097513695,5.51449575441264],[95.9974276061878,5.377388044941],[95.9974276061878,5.377388044941],[96.0275032897817,5.35099152264115],[96.1333366231155,5.29435415284925],[96.2507971537149,5.26683645265383],[96.4926428568409,5.22926768637764],[96.6153743835341,5.22027598715886],[96.8429057149152,5.27425202068771],[96.9678076517646,5.2689551863778],[97.0858366231193,5.22981028891671],[97.1905847513749,5.20758942303119],[97.4509306172613,5.23616649008861],[97.5001782572355,5.22820831951566],[97.5472554870534,5.20598745363014],[97.5874597513765,5.17053742107792],[97.706522251377,5.0403644881347],[97.7583218409743,4.99917837159808],[97.7583218409743,4.99917837159808],[97.9974088887479,4.99917837159808],[97.9974088887479,4.99917837159808],[97.9999410339302,4.99917837159808],[98.4999621927864,4.99917837159808],[98.997399530028,4.99917837159808],[98.997399530028,4.99917837159808],[98.9999833516426,4.99917837159808],[99.5000045104987,4.99917837159808],[99.9973384948757,4.99917837159808],[99.9973384948757,4.99917837159808],[100.000025669355,4.99917837159808],[100.489670872349,4.99917837159808],[100.489670872349,4.99917837159808],[100.614303420008,4.6524811873519],[100.614303420008,4.3736093204888],[100.660863885503,4.22596975343092],[100.760341017665,4.09739878988874],[100.795274285895,4.02329478598219],[100.757188755295,4.00161652263574],[100.715382521571,3.96616649008352],[100.782045119228,3.86454478598155],[100.851343214931,3.77672068930151],[101.024924351,3.6248436547957],[101.115409783943,3.4719072534279],[101.300101352954,3.25336762126557],[101.330280389412,3.14223745362189],[101.354051548267,3.01100515381668],[101.348523166643,2.9991454126057],[101.348523166643,2.9991454126057],[101.295347121183,2.88506968832138],[101.35141605022,2.83902598714933],[101.406968214933,2.81362702067787],[101.519726190194,2.68345408773465],[101.781105584727,2.57338328695295],[101.890142856862,2.44956655518162],[102.145734490978,2.24849355713394],[102.548397251396,2.04264048909927],[102.727249383559,1.85531342204122],[102.897109816502,1.79234568929358],[103.356978387467,1.54628835693582],[103.399818149837,1.49758331950073],[103.427310011817,1.42986135498224],[103.480226678483,1.32932485595839],[103.504617954525,1.33038422282037],[103.504617954525,1.33038422282037],[103.549576450619,1.33301972086726],[103.69458051963,1.44944672282085],[103.816795282,1.47642182047721],[103.915238885516,1.44678538655782],[103.991461623147,1.45474355713077],[103.991461623147,1.5499832218447],[103.98138471885,1.62354462321217],[103.997352736428,1.6029132731731],[103.997352736428,1.6029132731731],[104.015801222756,1.57907705322502],[104.076107619241,1.52988108968316],[104.10044721885,1.48807485595903],[104.094091017679,1.4462686222349],[104.114761590595,1.41239472086758],[104.176669956481,1.36477488851062],[104.250205519632,1.38859772379718],[104.276663852966,1.41239472086758],[104.089769674032,1.99915477132565],[104.218476190205,1.72302175537403],[104.288291050231,1.48065928792515],[104.280384556091,1.41557282145352],[104.276663852966,1.41239472086758],[104.089769674032,1.99915477132565],[104.499906040467,1.99915477132565],[104.997343377708,1.99915477132565],[104.997343377708,1.99915477132565],[104.999927199323,1.99915477132565],[105.499948358179,1.99915477132565],[105.997282342556,1.99915477132565],[105.997282342556,1.99915477132565],[105.999969517035,1.99915477132565],[106.499990675891,1.99915477132565],[106.997324660268,1.99915477132565],[106.997324660268,1.99915477132565],[107.000011834747,1.99915477132565],[107.500032993604,1.99915477132565],[107.997315301548,1.99915477132565],[107.997315301548,1.99915477132565],[107.999950799595,1.99915477132565],[108.499971958451,1.99915477132565],[108.997305942828,1.99915477132565],[108.997305942828,1.99915477132565],[108.997305942828,2.00003327067462],[108.997305942828,2.50000275309849],[108.997305942828,2.9991454126057],[108.997305942828,2.9991454126057],[108.999889764443,2.9991454126057],[109.499910923299,2.9991454126057],[109.997296584108,2.9991454126057],[109.997296584108,2.9991454126057],[109.999932082155,2.9991454126057],[110.499849888147,2.9991454126057],[110.997287225388,2.9991454126057],[110.997287225388,2.9991454126057],[110.999871047003,2.9991454126057],[111.499892205859,2.9991454126057],[111.997226190236,2.9991454126057],[111.997226190236,2.89577121305727],[111.997226190236,2.9991454126057],[111.997226190236,2.89577121305727],[112.118924188284,2.91470612224077],[112.737491082817,3.07027802165545],[112.920580682427,3.13061025635622],[112.987811720839,3.16182282146052],[112.997268507949,3.16900091619681],[112.997268507949,3.16900091619681],[113.044965854954,3.20520518636954],[113.140205519668,3.34333628988573],[113.320142856908,3.56133331950899],[113.446078322403,3.74072805421022],[113.709628894792,3.99908437745344],[113.709628894792,3.99908437745344],[113.712211948707,4.00161652263574],[113.923878615374,4.24343638754557],[113.952455682432,4.28893748617857],[113.987905714984,4.42071238852284],[113.990592889463,4.4826207544085],[113.984185011859,4.54558848715615],[113.997259149229,4.55937160807823],[113.997259149229,4.55937160807823],[114.012296991026,4.57522492107555],[114.053534783994,4.5926915551902],[114.177919956521,4.59108958578915],[114.299617954568,4.6069800887189],[114.424468214985,4.6604135197087],[114.544615920064,4.72444061931833],[114.64621178595,4.79800202068581],[114.740934686341,4.88109772381114],[114.840411818503,4.94618419028275],[114.948233143661,4.99917837159808],[114.948233143661,4.99917837159808],[114.995441115378,5.02238108969712],[114.997249790509,5.022179531226],[114.997249790509,5.022179531226],[115.047841017722,5.01654165284815],[115.047674782382,4.99917837159808],[115.047674782382,4.99917837159808],[115.047324253399,4.96256561931928],[115.026705356915,4.89959788657163],[115.139928420066,4.89959788657163],[115.374901157698,4.93295502361603],[115.427817824365,4.96946442303025],[115.46225195747,4.99917837159808],[115.46225195747,4.99917837159808],[115.519801873844,5.04883942303056],[115.554786818506,5.09328115480157],[115.581761916162,5.19436025636448],[115.466885207177,5.25414988852617],[115.421978387516,5.33034678794054],[115.418774448713,5.41289988852681],[115.556388787907,5.5668956567566],[115.603982782048,5.6034050561708],[115.624601678532,5.54888642010287],[115.684959751449,5.53514048911323],[115.741080356918,5.53302175538927],[115.797149285955,5.53619985597523],[115.876989373845,5.61345612225158],[115.918330519679,5.72510305421817],[115.997240431789,5.81288816675715],[115.997240431789,5.81288816675715],[116.059613885565,5.8822769230339],[116.108093937697,5.99911733644582],[116.108093937697,5.99911733644582],[116.109895054185,6.00345815675834],[116.138472121242,6.12939362225363],[116.494574416166,6.52151439048437],[116.537982619291,6.58288015383097],[116.749649285958,6.97711965578567],[116.770268182443,6.98717072186645],[116.770268182443,6.98717072186645],[116.764299554513,6.99910797772587],[116.764299554513,6.99910797772587],[116.7591577495,7.00939158775195],[116.824270054188,7.68989268638748],[116.971909621246,7.94018748619317],[116.971909621246,7.94018748619317],[116.974782760811,7.99904694257361],[116.974782760811,7.99904694257361],[116.975630324371,8.01641022382368],[116.993613722808,8.05025828697487],[117.043843214996,8.06191132245668],[117.043843214996,8.06191132245668],[117.19680545458,8.32119782148115],[117.218509556143,8.36724152265322],[117.218509556143,8.36724152265322],[117.228534784007,8.45666758873431],[117.256078322419,8.54079682050548],[117.349716017732,8.71383535403481],[117.417980584789,8.76675202070169],[117.530170119295,8.9027643904939],[117.593163690259,8.96836762128844],[117.629259276584,8.99919261315053],[117.629259276584,8.99919261315053],[117.744989048332,9.09802378990874],[117.884722121249,9.24088328697962],[117.931282586744,9.25147695559946],[117.983114048333,9.25359568932343],[117.997170037916,9.25925193354742],[117.997170037916,9.25925193354742],[118.023886753411,9.27000295657609],[118.114888950677,9.34671662031339],[118.34402225146,9.60285085696805],[118.533468052242,9.79387278893496],[118.691184523596,9.98964895267272],[118.698824951566,9.99918325443058],[118.698824951566,9.99918325443058],[118.727668084794,10.0351758895219],[118.820272251461,10.1055591903034],[118.845128615394,10.1314749210978],[118.997212355629,10.3204154660864],[118.997212355629,10.3204154660864],[118.997212355629,10.5000053979873],[118.997212355629,10.9991222192783],[118.997212355629,10.9991222192783],[118.997212355629,11.0000007186273],[118.997212355629,11.5000218774834],[118.997212355629,11.999216213423],[118.997212355629,11.999216213423],[118.997212355629,12.0000171981235],[118.997212355629,12.5000125187635],[118.997212355629,12.9991551782707],[118.997212355629,12.9991551782707],[118.997212355629,13.0000078394035],[118.997212355629,13.5000031600435],[118.997212355629,13.9991458195507],[118.997212355629,13.9991458195507],[118.997212355629,14.0000243188997],[118.997212355629,14.5000196395397],[118.997212355629,14.9990847843985],[118.997212355629,14.9990847843985],[118.997212355629,15.0000149601797],[118.997212355629,15.5000102808198],[118.997212355629,15.9991271021108],[118.997212355629,15.9991271021108],[118.997212355629,16.0000056014598],[118.997212355629,16.500026760316],[118.997212355629,16.9991177433909],[118.997212355629,16.9991177433909],[118.999899530108,16.9991177433909],[119.499920688964,16.9991177433909],[119.997202996909,16.9991177433909],[119.997202996909,16.9991177433909],[119.99994184782,16.9991177433909],[120.412454144181,16.9991177433909],[120.459415451557,17.9990567082386],[120.358576287926,17.6382260197606],[120.371805454593,17.5350540226899],[120.42472212126,17.4382123885749],[120.427357619306,17.3768207870122],[120.411492954593,17.2699280868164],[120.419967889489,17.0900165877923],[120.412454144181,16.9991177433909],[120.599801873864,18.5076561548552],[120.584505649906,18.3684915226932],[120.550657586755,18.2642343205444],[120.505130649906,18.1626384546585],[120.459415451557,17.9990567082386],[120.567616717878,18.9991507023832],[120.599801873864,18.5076561548552],[120.567616717878,18.9991507023832],[120.997193638189,18.9991507023832],[120.997193638189,18.9991507023832],[120.997193638189,19.0000292017322],[120.997193638189,19.5000245223722],[120.997193638189,19.999089667231],[120.997193638189,19.999089667231],[120.997193638189,20.0000198430123],[120.997193638189,20.5000151636523],[120.997193638189,20.999080308511],[120.997193638189,20.999080308511],[120.997193638189,21.0000104842923],[120.997193638189,21.5000058049323],[120.997193638189,21.7127204719257],[120.997193638189,21.7127204719257],[120.997193638189,21.9339824415196],[120.997193638189,21.9339824415196],[120.997193638189,21.9990192733588],[120.997193638189,21.9990192733588],[120.997193638189,22.0000011255723],[120.997193638189,22.5000222844285],[120.997193638189,22.5980892495735],[120.997193638189,22.5980892495735],[121.008924188319,22.6203508570201],[121.161317987148,22.7764395207577],[121.295728387539,22.9664020858627],[121.313970485171,22.9989582382065],[121.313970485171,22.9989582382065],[121.352365757331,23.0674811874256],[121.397324253425,23.1722551538973],[121.477216017748,23.4241519231041],[121.525843540535,23.6680905217379],[121.583566115405,23.8607144231058],[121.604929016268,23.9990522323512],[121.604929016268,23.9990522323512],[121.61322838754,24.0527957219347],[121.639169956551,24.1300519882111],[121.737045119312,24.2851071233028],[121.828047316578,24.5343425562465],[121.826497023609,24.6406926539032],[121.813267856942,24.746525987237],[121.820140822437,24.8243248560524],[121.856107619312,24.8952249211568],[121.929126418141,24.9735405542952],[121.926490920094,24.9835916203759],[121.922022536161,24.9989911971989],[121.926490920094,24.9835916203759],[121.922022536161,24.9989911971989],[121.997235955901,24.9989911971989],[121.997235955901,24.9989911971989],[121.997235955901,25.0000247258448],[121.997235955901,25.5000200464848],[121.997235955901,25.998981838479],[121.997235955901,25.998981838479],[121.997235955901,26.0000153671248],[121.997235955901,26.5000106877648],[121.997235955901,26.9989208033267],[121.997235955901,26.9989208033267],[121.997235955901,27.0000060084048],[121.997235955901,27.500027167261],[121.997235955901,27.998963121039],[121.997235955901,27.998963121039],[121.997235955901,28.000022487901],[121.997235955901,28.500017808541],[121.997235955901,28.9989537623191],[121.997235955901,28.9989537623191],[121.997235955901,29.0000131291811],[121.997235955901,29.5000084498211],[121.997235955901,29.8266064096467],[121.997235955901,29.8266064096467],[122.08312218637,29.8704509547054],[122.01749311736,29.88791758882],[122.002713657724,29.888976955682],[121.997235955901,29.8894751495035],[122.002713657724,29.888976955682],[121.997235955901,29.8894751495035],[121.997235955901,29.9988927271668],[121.997235955901,29.9988927271668],[121.997235955901,30.0000296086773],[121.997235955901,30.0422236678995],[121.997235955901,30.1424804658071],[121.969330682464,30.1429666203966],[121.977805617359,30.0635916203963],[121.997235955901,30.0422236678995],[121.997235955901,30.1424804658071],[121.997235955901,30.1523753633458],[121.997235955901,30.1523753633458],[121.997235955901,30.5000249293173],[121.997235955901,30.9989867213115],[121.997235955901,30.9989867213115],[121.997235955901,31.0000202499573],[121.997235955901,31.5000155705973],[121.997235955901,31.9989256861592],[121.997235955901,31.9989256861592],[121.997235955901,32.0000108912373],[121.997235955901,32.0356926051791],[121.997235955901,32.0356926051791],[122.997174920749,32.3300966352292],[122.997174920749,32.3300966352292],[122.997174920749,32.5000062118774],[122.997174920749,32.9989163274392],[122.997174920749,32.9989163274392],[122.997174920749,33.0000015325174],[122.997174920749,33.5000226913735],[122.997174920749,33.998855292287],[122.997174920749,33.998855292287],[122.997174920749,34.0000180120136],[122.997174920749,34.5000133326536],[122.997174920749,34.9987942571347],[122.997174920749,34.9987942571347],[122.997174920749,35.0000086532936],[122.997174920749,35.5000039739336],[122.997174920749,35.9987848984148],[122.997174920749,35.9987848984148],[122.997174920749,36.0000251327898],[122.997174920749,36.5000204534298],[122.997174920749,36.9987238632625],[122.997174920749,36.9987238632625],[122.997174920749,37.0000157740698],[122.997174920749,37.5000110947099],[122.997174920749,37.9988178574072],[121.997235955901,37.9988178574072],[122.000026483245,37.9988178574072],[122.499944289237,37.9988178574072],[122.997174920749,37.9988178574072],[120.997193638189,37.9988178574072],[120.999984165533,37.9988178574072],[121.500005324389,37.9988178574072],[121.997235955901,37.9988178574072],[120.944925250918,37.9988178574072],[120.997193638189,37.9988178574072],[119.997202996909,37.9988178574072],[119.99994184782,37.9988178574072],[120.499963006676,37.9988178574072],[120.944925250918,37.9988178574072],[118.997212355629,37.9988178574072],[119.000002882973,37.9988178574072],[119.500024041829,37.9988178574072],[119.997202996909,37.9988178574072],[118.997212355629,37.9520315355052],[118.997212355629,37.9988178574072],[119.035560149654,37.8101942920096],[119.027701450681,37.9037332219901],[118.997212355629,37.9520315355052],[119.035728291283,37.8081687771247],[119.035659621254,37.8090103215991],[119.035560149654,37.8101942920096],[119.035728291283,37.8081687771247],[119.035696149269,37.8081660182666],[119.03559802165,37.8081672499548],[119.035500487269,37.8081780939007],[118.946151984427,37.822580000789],[118.82668709783,37.7786696973459],[118.645372819382,37.6766481304131],[118.645252451633,37.6765906124069],[118.498181325331,37.6180153764041],[118.498103885324,37.6179881599382],[118.498024474061,37.6179673863466],[118.497943626592,37.6179531955952],[118.385538993264,37.6029487238986],[118.299159885542,37.5403894654177],[118.238393072249,37.4300497254902],[118.238338341464,37.4299615154155],[118.238274760854,37.4298794545714],[118.238203015594,37.4298044272845],[118.238123878845,37.4297372420846],[118.128518165954,37.3460730982041],[118.128433683165,37.3460152083752],[118.128343722492,37.3459662629844],[118.128249227494,37.345926775399],[117.970015991817,37.2891343763102],[117.969882269508,37.2890966371391],[117.824878200497,37.2588659242483],[117.824790723721,37.2588516986486],[117.824702330972,37.2588452740111],[117.693074819285,37.2551287325046],[117.608981880683,37.2271662883732],[117.571757476932,37.1748773123861],[117.571689810742,37.1747924223478],[117.571613341293,37.1747153674626],[117.57152896978,37.1746470558246],[117.571437690525,37.1745882924888],[117.485913195082,37.1258832550538],[117.485826861629,37.125839480581],[117.485736700359,37.125804258215],[117.352266530676,37.080978719789],[117.240850579549,36.9929183567509],[117.151329886942,36.8614767861758],[117.151276344173,36.8614052608429],[117.151216630993,36.8613388000472],[117.151151224073,36.8612779343252],[117.151080645537,36.8612231495498],[117.024990150745,36.7720813038464],[117.024895530073,36.7720220428179],[117.024794893153,36.771973698726],[117.024689494416,36.7719368741769],[116.862328197872,36.7252011956232],[116.735743836015,36.654893744437],[116.644844772477,36.5608477780184],[116.593532482175,36.4890826973046],[116.581795533393,36.4394580542114],[116.581768722833,36.4393650494462],[116.581733046294,36.4392750723547],[116.581688838017,36.4391889659045],[116.581636512177,36.4391075368005],[116.581576558999,36.4390315479269],[116.581509540165,36.4389617112001],[116.581436083555,36.438898680899],[116.451263150612,36.3377162264715],[116.451172468191,36.3376534435695],[116.227671898529,36.2005041922669],[116.227613777457,36.200471148963],[116.116509797115,36.1421312336347],[116.07847112599,36.108989139416]];var Mk=r.p+"static/media/mapbox-marker-icon-yellow.cbfef21b5e2ed96a601136e1c3d93aa1.svg";var Dk=r.p+"static/media/mapbox-marker-icon-orange.a768a15f9a5e0032e46eff0fda6ec12b.svg";var zk=r.p+"static/media/mapbox-marker-icon-blue.14573f114d8b9d5bcdcacfc26315f40c.svg";var Lk=r.p+"static/media/mapbox-marker-icon-red.cfd2904481792fea6b693a10bc91ed68.svg";var Rk,Bk=r.p+"static/media/mapbox-marker-icon-purple.fe876527147bdc440506b2eaf73ab033.svg",Ok=function(e){switch(e[3]){case"media/com_fabrik/images/purple-dot.png":return 1;case"media/com_fabrik/images/orange-dot.png":return 2;case"media/com_fabrik/images/yellow-dot.png":return 3;case"media/com_fabrik/images/blue-dot.png":return 4;case"media/com_fabrik/images/red-dot.png":return 5;default:return 0}},Fk=function(e){var t=e.map((function(e){return{type:"Feature",properties:{description:e[2],icon:e[3],severity:Ok(e)},geometry:{type:"Point",coordinates:[Number(e[1]),Number(e[0])]}}}));return{type:"FeatureCollection",features:t}},Uk=function(t){var r=t.reports,n=t.layerType;console.log(r.length);var i=(0,e.useRef)(null),a=(0,e.useRef)(null);return(0,e.useEffect)((function(){if(a.current){if(!a.current.getLayer("piracy-report")||!a.current.getLayer("report-heat"))return;"symbol"===n?(a.current.setLayoutProperty("piracy-report","visibility","visible"),a.current.setLayoutProperty("report-heat","visibility","none")):(a.current.setLayoutProperty("report-heat","visibility","visible"),a.current.setLayoutProperty("piracy-report","visibility","none"))}}),[n]),(0,e.useEffect)((function(){a.current?a.current.getSource("piracy-report")&&a.current.getSource("piracy-report").setData(Fk(r)):(a.current=new(h().Map)({container:i.current,style:"mapbox://styles/mapbox/streets-v12",center:[83.24316735223056,21.691865739539494],zoom:2.310934066772461,projection:"naturalEarth"}),a.current.on("load",(function(){a.current.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:Pk}}}),a.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#FF0","line-width":4}});for(var e=0,t=[{name:"media/com_fabrik/images/yellow-dot.png",label:"attempted-attack",src:Mk},{name:"media/com_fabrik/images/orange-dot.png",label:"boarded",src:Dk},{name:"media/com_fabrik/images/blue-dot.png",label:"fired-upon",src:zk},{name:"media/com_fabrik/images/red-dot.png",label:"hijacked",src:Lk},{name:"media/com_fabrik/images/purple-dot.png",label:"suspicious-vessel",src:Bk}];e<t.length;e++){var n=t[e],i=new Image(20,48);i.src=n.src,a.current.addImage(n.name,i)}a.current.addSource("piracy-report",{type:"geojson",data:Fk(r)}),a.current.addLayer({id:"piracy-report",type:"symbol",source:"piracy-report",layout:{visibility:"visible","icon-image":["get","icon"],"icon-allow-overlap":!0}}),a.current.addLayer({id:"report-heat",type:"heatmap",source:"piracy-report",layout:{visibility:"none"},maxzoom:9,paint:{"heatmap-weight":["interpolate",["linear"],["get","severity"],0,0,5,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}},"waterway-label"),a.current.on("click","piracy-report",(function(e){for(var t=e.features[0].geometry.coordinates.slice(),r=e.features[0].properties.description;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;(new(h().Popup)).setLngLat(t).setHTML(r).addTo(a.current)})),a.current.on("mouseenter","piracy-report",(function(){a.current.getCanvas().style.cursor="pointer"})),a.current.on("mouseleave","piracy-report",(function(){a.current.getCanvas().style.cursor=""})),a.current.addControl(new(h().FullscreenControl)),a.current.addControl(new(h().NavigationControl))})))}),[r]),(0,Ye.jsx)("div",{ref:i,className:"map-container"})},Nk=function(){return(0,Ye.jsxs)("div",{style:{margin:"1rem 0",display:"flex",alignItems:"center",justifyContent:"center",columnGap:"25px"},children:[(0,Ye.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Ye.jsx)("img",{src:Mk,alt:"yellow",width:"20",height:"48"}),(0,Ye.jsx)(jv,{children:"Attempted Attack"})]}),(0,Ye.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Ye.jsx)("img",{src:Dk,alt:"orange",width:"20",height:"48"}),(0,Ye.jsx)(jv,{children:"Boarded"})]}),(0,Ye.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Ye.jsx)("img",{src:zk,alt:"blue",width:"20",height:"48"}),(0,Ye.jsx)("span",{children:"Fired upon"})]}),(0,Ye.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Ye.jsx)("img",{src:Lk,alt:"red",width:"20",height:"48"}),(0,Ye.jsx)("span",{children:"Hijacked"})]}),(0,Ye.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Ye.jsx)("img",{src:Bk,alt:"purple",width:"20",height:"48"}),(0,Ye.jsx)("span",{children:"Suspicious vessel"})]})]})},jk=["title","titleId"];function Vk(){return Vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vk.apply(this,arguments)}function Wk(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function qk(t,r){var n=t.title,i=t.titleId,a=Wk(t,jk);return e.createElement("svg",Vk({width:30,height:30,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":i},a),n?e.createElement("title",{id:i},n):null,Rk||(Rk=e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 9.5C5 6.09371 8.00993 3 12 3C15.9901 3 19 6.09371 19 9.5C19 11.6449 17.6877 14.0406 15.9606 16.2611C14.5957 18.016 13.0773 19.5329 12 20.5944C10.9227 19.5329 9.40427 18.016 8.03935 16.2611C6.31229 14.0406 5 11.6449 5 9.5ZM12 1C6.99007 1 3 4.90629 3 9.5C3 12.3551 4.68771 15.2094 6.46065 17.4889C7.99487 19.4615 9.7194 21.1574 10.7973 22.2173C10.9831 22.4001 11.1498 22.564 11.2929 22.7071C11.4804 22.8946 11.7348 23 12 23C12.2652 23 12.5196 22.8946 12.7071 22.7071C12.8502 22.564 13.0169 22.4001 13.2027 22.2174L13.2028 22.2173C14.2806 21.1573 16.0051 19.4615 17.5394 17.4889C19.3123 15.2094 21 12.3551 21 9.5C21 4.90629 17.0099 1 12 1ZM12 12.5C13.3807 12.5 14.5 11.3807 14.5 10C14.5 8.61929 13.3807 7.5 12 7.5C10.6193 7.5 9.5 8.61929 9.5 10C9.5 11.3807 10.6193 12.5 12 12.5Z",fill:"#000000"})))}var Gk=e.forwardRef(qk),$k=(r.p,["title","titleId"]);function Hk(){return Hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hk.apply(this,arguments)}function Zk(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Xk(t,r){var n=t.title,i=t.titleId,a=Zk(t,$k);return e.createElement("svg",Hk({width:"30px",height:"30px",viewBox:"0 -1.5 2253 2253",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1.5},ref:r,"aria-labelledby":i},a),n?e.createElement("title",{id:i},n):null,e.createElement("rect",{id:"Heatmap",x:1.997,y:0,width:2250,height:2250,style:{fill:"none"}}),e.createElement("rect",{x:135.331,y:133.333,width:495.833,height:495.833,style:{fill:"#1c4e80",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:631.164,y:133.333,width:495.833,height:495.833,style:{fill:"#1c4e80",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:1127,y:133.333,width:495.833,height:495.833,style:{fill:"#eee",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:1622.83,y:133.333,width:495.833,height:495.833,style:{fill:"#ea6a47",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:135.331,y:629.167,width:495.833,height:495.833,style:{fill:"#1c4e80",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:135.331,y:1125,width:495.833,height:495.833,style:{fill:"#eee",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:135.331,y:1620.83,width:495.833,height:495.833,style:{fill:"#eee",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:631.164,y:629.167,width:495.833,height:495.833,style:{fill:"#eee",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:631.164,y:1125,width:495.833,height:495.833,style:{fill:"#eee",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:631.164,y:1620.83,width:495.833,height:495.833,style:{fill:"#eee",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:1127,y:629.167,width:495.833,height:495.833,style:{fill:"#eee",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:1127,y:1125,width:495.833,height:495.833,style:{fill:"#eee",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:1127,y:1620.83,width:495.833,height:495.833,style:{fill:"#ea6a47",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:1622.83,y:629.167,width:495.833,height:495.833,style:{fill:"#ea6a47",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:1622.83,y:1125,width:495.833,height:495.833,style:{fill:"#ea6a47",stroke:"#202020",strokeWidth:"66.67px"}}),e.createElement("rect",{x:1622.83,y:1620.83,width:495.833,height:495.833,style:{fill:"#ea6a47",stroke:"#202020",strokeWidth:"66.67px"}}))}var Yk=e.forwardRef(Xk);r.p;function Kk(e){return e.toISOString().split("T")[0]}h().accessToken="pk.eyJ1IjoiYWNhcm5hZ2V5IiwiYSI6ImNrZGNpYmZsbzBseXYyeXA5OXo2OXVwcngifQ.GAt6a5pZrIGFHxVL5Q9Lbw";var Jk=[].concat(u([{0:"2.7333333333333334",1:"6.4",2:"Attack ID: 195-20 <br /> Sitrep: <small> 29.12.2020: 1640 UTC: Posn: 02:44N &ndash; 006:24E, Around 94nm South of Brass, Nigeria.<br /><br />\r\nFive armed pirates in a skiff with a ladder approached and attempted to board a tanker underway. Master took evasive manoeuvres resulting in the attempt being aborted. The tanker and crew safe.<br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.395",1:"3.745",2:"Attack ID: 194-20 <br /> Sitrep: <small> 20.01.2020: 2200 UTC: Posn : 05:23.42N &ndash; 003:44.52E, Around 64nm  SSE of Lagos, Nigeria.<br /><br />\r\nArmed persons in a speedboat, approached and attempted to board a tanker underway. Master raised alarm and commenced evasive manoeuvres resulting in the approach being aborted. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.6166666666666667",1:"5.616666666666667",2:"Attack ID: 193-20 <br /> Sitrep: <small> 21.12.2020: 0409 UTC: Posn : 02:37N &ndash; 005:37E, Around 107nm SSW of Brass, Nigeria.<br /><br />\r\nAn unknown number of pirates attacked and boarded a container ship underway. Crew mustered in the citadel. After a few hours, the vessel and crew were reported safe.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.883333333333333",1:"-1.6833333333333333",2:"Attack ID: 192-20 <br /> Sitrep: <small> 26.12.2020: 0130 UTC: Posn: 04:53.51N &ndash; 001:41.87W, Takoradi Anchorage, Ghana.<br /><br />\r\nDuty OOW onboard an anchored general cargo ship noticed one robber on the forecastle, stealing ship&rsquo;s stores and properties. Alarm raised and crew mustered. Seeing the alerted crew, the robber escaped with the stolen items in a boat. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.327168203953766",1:"-4.029504060745239",2:"Attack ID: 191-20 <br /> Sitrep: <small> 08.12.2020: 0330 UTC: Posn: Carena Shipyard Mooring Buoy, Abidjan, Ivory Coast.<br /><br />\r\nRobbers boarded a supply vessel moored to a buoy, stole ship&rsquo;s stores, and escaped unnoticed. Local Authorities informed.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.602222222222222",1:"6.1691666666666665",2:'Attack ID: 190-20 <br /> Sitrep: <small> 19.12.2020: 1336 UTC: Posn: 02:36.8N &ndash; 006:10.9E, Around 100nm South of Brass, Nigeria.<br /><br />\r\nA container ship underway was attacked and boarded by armed pirates. SSAS activated, CSO informed and crew retreated into the citadel. A Nigerian Navy patrol boat was dispatched and Navy personnel boarded the ship. Investigations showed the pirates had fired towards the bridge and accommodation, damaged ship"s property and equipment, and stole cash and belongings before escaping. All crew reported safe. The patrol boat escorted the ship to a safe port. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.85",1:"6.15",2:"Attack ID: 189-20 <br /> Sitrep: <small> 16.12.2020: 0706 UTC: Posn: 03:51N &ndash; 006:09E, Around 27nm SSW of Brass, Nigeria.<br /><br />\r\nArmed persons attacked and boarded the ship underway, kidnapped eight crew members and escaped. Nigerian Authorities notified and a security vessel and Nigerian Navy patrol boat escorted the ship to a safe port. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.470833333333333",1:"5.521388888888889",2:"Attack ID: 188-20 <br /> Sitrep: <small> 26.11.2020: 1258 UTC: Posn: 04:28.15N &ndash; 005:31.17E, Around 10nm SW of Bayelsa, Nigeria.<br /><br />\r\nArmed persons attacked and boarded a general cargo ship underway. They kidnapped 10 crew members and left the ship drifting. Upon receiving the information from the Owners, the IMB Piracy Reporting Centre informed the relevant authorities, including the Italian navy. Nigerian Navy dispatched a patrol boat to investigate and assist the remaining crew and vessel. On 21 Dec 2020, the Owners confirmed that the 10 kidnapped crew members were released safely.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.434166666666667",1:"2.7",2:"Attack ID: 187-20 <br /> Sitrep: <small> 09.11.2020: 0630 UTC: Posn : 04:26.3N &ndash; 002:42.0E: Around 116nm South of Cotonou, Benin.<br /><br />\r\nDuty officer onboard a research vessel noticed a speed boat approaching and raised the alarm. Master transmitted a distress alert and fired a rocket flare resulting in the boat moving away temporarily and then commenced the approach again. Eight armed persons were identified in the approaching boat. All crew retreated into the citadel. The onboard Benin Navy personnel fired warning shots which resulted in the boat aborting and moving away. All crew safe. <br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.466666666666667",1:"1.4166666666666667",2:"Attack ID: 186-20 <br /> Sitrep: <small> 16.11.2020: 0540 UTC: Posn: 05:28N &ndash; 001:25E, Around 40nm SSE of Lome, Togo.<br /><br />\r\nThe IMB Piracy Reporting Centre received information that Owners had lost contact with their tanker. The Centre immediately informed and commenced information exchange with all relevant Regional Authorities including an Italian warship in the vicinity. The tanker was located by an Italian navy helicopter on 23 Nov 2020 and position updates of the tanker were provided by the Italian warship until a Nigerian Navy patrol boat arrived to escort the tanker to a safe port. Three crew were reported as kidnapped. <br /><br />\r\n </small>",3:"media/com_fabrik/images/red-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"9.333333333333334",1:"-13.716666666666667",2:"Attack ID: 185-20 <br /> Sitrep: <small> 27.03.2020: 0230 UTC: Posn: 09:20N &ndash; 013:43W, Conakry Anchorage, Guinea.<br /><br />\r\nAround eight robbers boarded an anchored bulk carrier and escaped with ship&rsquo;s properties, cash and crew belongings. Master reported the incident to the local Authorities.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"21.66888888888889",1:"91.70138888888889",2:"Attack ID: 184-20 <br /> Sitrep: <small> 12.12.2020: 1250 UTC: Posn: 21:40.8N &ndash; 091:42.5E, Around 10nm West of Matarbari, Bangladesh.<br /><br />\r\nTen robbers armed with knives in two small boats approached and boarded a tug towing a ship, stole ship&rsquo;s properties and spare parts and escaped. Master informed the Coast Guard and local agent through VHF CH12. A coast guard boat arrived at the location and conducted an investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.0008333333333335",1:"4.751944444444445",2:"Attack ID: 183-20 <br /> Sitrep: <small> 15.12.2020: 0215 UTC: Posn: 02:00.3N - 004:45.7E, Around 165nm SSW of Brass, Nigeria.<br /><br />\r\nPirates boarded the tanker underway. Duty officer noticed the pirates and raised the alarm. All crew retreated into the citadel. After a while, the pirates left the tanker and the crew emerged from the citadel. Crew and the tanker are safe.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.628333333333333",1:"4.636666666666667",2:"Attack ID: 182-20 <br /> Sitrep: <small> 10.12.2020: 0800 UTC: Posn: 04:37.42N &ndash; 004:38.12E, Around 51nm WSW Bayelsa, Nigeria.<br /><br />\r\nAn unknown number of pirates attacked and boarded a general cargo ship underway. They kidnapped five crew members and escaped. The remaining crew sailed the ship to a safe port. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.7519444444444443",1:"101.38305555555556",2:'Attack ID: 181-20 <br /> Sitrep: <small> 14.12.2020: 2100 UTC: Posn: 01:44.67N &ndash; 101:22.59E, Lubuk Gaung Port, Dumai, Indonesia.<br /><br />\r\nDuring routine rounds, duty officer onboard a berthed bulk carrier was taken hostage and tied up by four robbers armed with knives. The robbers stole ship"s stores and spare parts and released the duty officer before escaping. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.04722222222222222",1:"5.416666666666667",2:"Attack ID: 180-20 <br /> Sitrep: <small> 03.12.2020: 1035 UTC: Posn: 02:50N &ndash; 005:25E, Around 100nm SSW of Brass, Nigeria.<br /><br />\r\nDuty watchman onboard a Refrigerated Cargo Ship underway noticed two boats approaching at a distance of 3nm. Master alerted the onboard security team and increased speed. Two speed boats with six persons in each closed in to 0.5 cables and fired upon the ship. Alarm raised and non-essential crew mustered in the citadel. The security team responded resulting in the boats aborting the approach and moving away. The ship continued her voyage. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.1180555555555554",1:"2.8833333333333333",2:"Attack ID: 179-20 <br /> Sitrep: <small> 05.12.2020: 0630 UTC: Posn: 03:07.5N &ndash; 002:53.0E, Around 198nm SSW of Lagos, Nigeria.<br /><br />\r\nTen pirates armed with rifles boarded a product tanker underway. Ship&rsquo;s horn sounded, alarm raised, PA announcement made and all crew mustered in the citadel. The pirates left the tanker without stealing anything. Vessel and crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.01922607385796739",1:"-51.022911071777344",2:"Attack ID: 178-20 <br /> Sitrep: <small> 08.12.2020: 0545&ndash;0630 UTC: Posn: Macapa Anchorage, Brazil.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier, stole ship&rsquo;s properties and escaped. Incident was reported to the local authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.3511436402006485",1:"-10.796098581949867",2:'Attack ID: 177-20 <br /> Sitrep: <small> 25.11.2020: 0330 UTC: Posn: 06:20.65N &ndash; 010:47.75W, Monrovia Port, Liberia.<br /><br />\r\nA robber boarded a berthed bulk carrier and stole ship&rsquo;s properties. Upon noticing the robber, the vessel"s crew chased the robber who managed to escape. Incident reported to the Port Authority. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-12.032833333333333",1:"-77.19166666666666",2:"Attack ID: 176-20 <br /> Sitrep: <small> 05.12.2020: 0625 UTC: Posn: 12:01.97S &ndash; 077:11.50W, Callao Anchorage, Peru.<br /><br />\r\nTwo unauthorised persons attempted to board an anchored general cargo ship via the anchor chain. Alert duty watchmen heard some unusual noise and noticed the attempted boarding and responded. Hearing the alerted crew the persons aborted the attempted boarding and escaped in their boat. Incident reported to the local authorities. A coast guard boat arrived at location and conducted an investigation. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.7",1:"5.95",2:"Attack ID: 175-20 <br /> Sitrep: <small> 06.12.2020: 0442 UTC: Posn: 02:42N &ndash; 005:57E, Around 98nm SSW of Brass, Nigeria.<br /><br />\r\nFour pirates boarded a product tanker underway. Master activated the alarm and all crew retreated into the citadel. The pirates were unable to reach the crew and left the vessel without stealing anything. Vessel and crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.900833333333333",1:"1.168611111111111",2:"Attack ID: 174-20 <br /> Sitrep: <small> 29.11.2020: 2110 UTC: Posn: 04:54.3N &ndash; 001:10.7E, Around 56nm SSE of Anloga, Ghana.<br /><br />\r\nA product tanker underway noticed a possible mother vessel approaching and raised the alarm. SSAS activated, speed increased, evasive manoeuvres commenced, and non-essential crew retreated into the citadel. The bridge team kept a lookout towards the mother vessel. A skiff with four armed persons was noticed approaching from a different direction. As the skiff approached it opened fire towards the bridge. The pirates boarded the tanker using a ladder with hooks. Once onboard the pirates damaged the communication equipment, stole ship and crew cash and properties. Before escaping, they kidnapped four crew members. The Master was reported injured during the incident. The tanker sailed to a safe anchorage. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.568611111111111",1:"2.895",2:"Attack ID: 173-20 <br /> Sitrep: <small> 04.12.2020: 0940 UTC: Posn: 02:34.13N &ndash; 002:53.70E, Around 200nm SW of Bayelsa, Nigeria.<br /><br />\r\nWhile underway, a tanker was approached and fired upon by pirates in a skiff. General alarm sounded, PA announcement made, fire pumps activated, speed increased, evasive manoeuvres carried out, SSAS activated and crew retreated into safe area. Due to the hardening measures and evasive manoeuvres taken by the Master, the skiff aborted the attack and moved away. Vessel and crews reported safe. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.0166666666666666",1:"5.05",2:"Attack ID: 172-20 <br /> Sitrep: <small> 02.12.2020: 1303 UTC: Posn: 03:11N &ndash; 005:01E, Around 85nm SW of Brass, Nigeria.<br /><br />\r\nWhile underway, a tanker was approached and fired upon by pirates in two skiffs. Alarm sounded, SSAS activated, evasive manoeuvres conducted and all crew mustered in the citadel. After chasing the tanker for some time the pirates aborted and moved away. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.267777777777778",1:"104.26388888888889",2:"Attack ID: 171-20 <br /> Sitrep: <small> 29.11.2020: 2220 UTC: Posn: 01:16.4N &ndash; 104:15.5E, Singapore Straits.<br /><br />\r\nUnnoticed, robbers boarded a bulk carrier underway, stole ship&rsquo;s spares and escaped. Incident reported to VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"9.352222222222222",1:"-13.70111111111111",2:"Attack ID: 170-20 <br /> Sitrep: <small> 30.11.2020: 0300 UTC: Posn: 09:21.8N &ndash; 013:42.4W, Conakry Anchorage, Guinea.<br /><br />\r\nSix robbers armed with guns boarded an anchored general cargo vessel. The robbers stole ship&rsquo;s properties, cash, and crew personal belongings before escaping. All crew safe. Incident reported to the Port Authority. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.535277777777778",1:"6.151111111111111",2:"Attack ID: 169-20 <br /> Sitrep: <small> 16.11.2020: 0320 UTC: Posn: 03:32.7N &ndash; 006:09.4E, Around 45nm SSW of Brass, Nigeria.<br /><br />\r\nEight pirates armed with assault rifles in a speed boat boarded a general cargo vessel underway. The pirates stole ship and crew properties and kidnapped five crew before escaping. Remaining crew proceeded to a safe port. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.890833333333333",1:"-1.7002777777777778",2:"Attack ID: 168-20 <br /> Sitrep: <small> 27.11.2020: 0140 UTC: Posn: 04:53.27N &ndash; 001:41.61W, Takoradi Anchorage, Ghana.<br /><br />\r\nDuty watchmen onboard an anchored bulk carrier noticed two unauthorised persons on the forecastle deck and immediately informed the bridge. Alarm raised and crew mustered. Seeing the alerted crew, the robbers escaped without stealing anything. Incident reported to Port Control. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.650833333333333",1:"3.4788888888888887",2:'Attack ID: 167-20 <br /> Sitrep: <small> 22.10.2020: 0657 UTC: Posn: 04:38.63N &ndash; 003:28.44E, Around 105nm South of Lagos, Nigeria.<br /><br />\r\nA product tanker underway, was boarded by six armed pirates. The crew managed to retreat into the citadel. The Owners of the tanker notified the IMB Piracy Reporting Centre who liaised with relevant Regional and International Authorities in the region and requested for assistance. A Nigerian Navy patrol boat was dispatched to the location. An Italian Navy frigate and its helicopter also responded. The pirates damaged ship"s property and equipment and stole cash and belongings and escaped. All crew reported safe. Master proceeded to a safe port as advised by the Nigerian Navy. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.7152777777777777",1:"101.44111111111111",2:"Attack ID: 166-20 <br /> Sitrep: <small> 24.11.2020: 2115 UTC: Posn: 01:42.93N &ndash; 101: 26.48E, Dumai Anchorage, Indonesia.<br /><br />\r\nFour robbers armed with knives boarded an anchored tanker. Duty oiler on routine rounds was threatened by the robbers before escaping with stolen engine spares. Incident reported to local authorities through local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"22.366666666666667",1:"89.62694444444445",2:"Attack ID: 165-20 <br /> Sitrep: <small> 25.11.2020: 2105 UTC: Posn: 22:22.99N &ndash; 089:37.37E, Pussur River, Mongla, Bangladesh.<br /><br />\r\nThree robbers armed with a crowbar boarded an anchored tanker. Duty watchman noticed the robbers and informed the bridge. Alarm raised and crew mustered. Seeing the alerted crew, the robbers escaped without stealing anything. Incident reported to Port Control. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2825",1:"104.22722222222222",2:"Attack ID: 164-20 <br /> Sitrep: <small> 08.11.2020: 1326 UTC: Posn: 01:16.57N &ndash; 104:13.38E, Singapore Straits.<br /><br />\r\nThree robbers armed with knives boarded a tanker underway. Duty engineer on routine rounds noticed the robbers and immediately informed the bridge. Alarm raised, crew mustered and a search was carried out. Seeing the alerted crew, the robbers escaped with stolen ship&rsquo;s properties. Incident reported to the Port Authority. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"20.93861111111111",1:"107.30166666666666",2:"Attack ID: 163-20 <br /> Sitrep: <small> 19.11.2020: 1030-1330 UTC: Posn: 20:55.79N &ndash; 107:18.06E, Cam Pha Anchorage, Vietnam.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier, stole ship&rsquo;s stores and escaped. Incident noticed during routine rounds and reported to the Port Authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.25",1:"104.06666666666666",2:"Attack ID: 162-20 <br /> Sitrep: <small> 17.11.2020: 1450 UTC: Posn: 01:15.0N &ndash; 104:04.3E, Singapore Straits.<br /><br />\r\nA Bulk Carrier underway was contacted by VTIS indicating that the ship may have been boarded by robbers. Alarm raised, crew mustered, and ship lights switched on. Three robbers were seen on the poop deck. Seeing the alerted crew, the robbers escaped in a small boat without stealing anything. A search was carried out and VTIS notified. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.1922222222222223",1:"5.557222222222222",2:"Attack ID: 161-20 <br /> Sitrep: <small> 13.11.2020: 1454 UTC: Posn: 01:11.32N &ndash; 005:33.26E, Around 78nm NW of Neves, Sao Tome and Principe.<br /><br />\r\nPirates armed with rifles in a small boat approached a Heavy Load Carrier underway. They boarded the ship, opened fire and injured one crew. Before escaping the pirates stole ship and crew properties and kidnapped 14 crew members. The Owners of the ship notified the IMB Piracy Reporting Centre who then liaised with relevant Regional and International Authorities in the region and requested for assistance. Italian, Spanish and Portuguese Navy Vessels arrived at the location and aided the ship. The injured crew was transported on an Italian Aircraft to the hospital in Sao Tome and Principe. The ship and remaining crew were escorted to a safe port. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2827777777777778",1:"104.24916666666667",2:"Attack ID: 160-20 <br /> Sitrep: <small> 18.11.2020: 2019 UTC: Posn: 01:16.58N &ndash; 104:14.57E, Singapore Straits.<br /><br />\r\nSecond engineer on board a tanker underway spotted two unauthorised persons armed with knives. Alarm raised, crew mustered, and a search was carried out. Hearing the alarm and seeing the crew alertness, the robbers escaped without stealing anything. Incident reported to Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.8838888888888885",1:"-1.7016666666666667",2:"Attack ID: 159-20 <br /> Sitrep: <small> 13.11.2020: 0212 UTC: Posn: 04:53.2N &ndash; 001:42.6W, Takoradi Anchorage, Ghana.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship, broke into the forecastle store, stole ship&rsquo;s stores and escaped. Incident noticed during routine rounds and reported to the Port Authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.2",1:"2.5833333333333335",2:"Attack ID: 158-20 <br /> Sitrep: <small> 11.11.2020: 0100 UTC: Posn: 05:12N &ndash; 002:35E, Around 70nm South of Cotonou, Benin.<br /><br />\r\nAround eight armed pirates in a skiff chased and attempted to board a product tanker underway. Master raised the alarm, increased speed, took evasive manoeuvres and activated the distress alert. As the skiff closed in, the pirates opened fire towards the bridge and accommodation. A Nigerian Navy patrol boat responded to the distress alert. Due to the hardening measures taken by the Master, the skiff aborted the attack. The patrol boat rendezvoused with the tanker and escorted her to a safe port. Some bridge and accommodation damage was reported due to the firing. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.761666666666667",1:"2.4563888888888887",2:'Attack ID: 157-20 <br /> Sitrep: <small> 09.11.2020: 2028 UTC: Posn: 04:45.42N - 002:26.83E, Around 95nm South of Cotonou, Benin.<br /><br />\r\nA product tanker underway was approached by two skiffs. Alarm raised and all non-essential crew mustered in the citadel. The Master increased speed, commenced evasive manoeuvres, activated the fire pump and notified the Regional Authorities. The skiffs attempted to close in and fired upon the vessel. The vessel"s hardening and evasive manoeuvres resulted in the skiff aborting the attack and moving away. Vessel and crew reported safe. </small>',3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.5166666666666666",1:"2.5666666666666664",2:"Attack ID: 156-20 <br /> Sitrep: <small> 07.11.2020: 0615 UTC: Posn: 03:31N &ndash; 002:34E, Around 172nm South of Cotonou, Benin.<br /><br />\r\nPirates armed with rifles boarded a product tanker underway. Alarm raised, main engine stopped, SSAS activated, CSO informed and all crew mustered in the citadel. Benin Navy dispatched a patrol boat. An Italian Navy frigate and its helicopter responded. A naval boarding team boarded the tanker and once clearance was given, the crew emerged from the citadel and regained control of the tanker. All crew members are reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.5858333333333334",1:"4.600833333333333",2:"Attack ID: 155-20 <br /> Sitrep: <small> 07.11.2020: 1620 UTC: Posn: 03:35.9N &ndash; 004:36.3E, Around 87nm SW of Bayelsa, Nigeria.<br /><br />\r\nSeven armed pirates in a boat chased a product tanker underway. Alarm raised, crew mustered in citadel, and activated the fire pump. As the boat approached the tanker, the armed team fired warning shots resulting in the boat moving away. Vessel and crew safe. The Incident was reported to local agent.<br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.7319444444444443",1:"6.046666666666667",2:"Attack ID: 154-20 <br /> Sitrep: <small> 04.11.2020: 0549 UTC: Posn: 02:43.92N &ndash; 006:02.81E, Around 96nm SSW of Brass, Nigeria.<br /><br />\r\nAround six to seven pirates armed with rifles attacked and boarded a product tanker underway. Alarm raised and all crew mustered in the citadel. Local authorities notified. A security vessel was dispatched to assist the tanker. Once the pirates escaped the crew emerged and noticed the bridge equipment damaged. Ship&rsquo;s item were also reported stolen. Under the escort of the security vessel the ship proceeded to a safe port. Vessel and crew safe.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-0.0619007993816603",1:"-51.166194597880036",2:"Attack ID: 153-20 <br /> Sitrep: <small> 04.11.2020: 0301-0700 UTC: Posn: 00:03.7S &ndash; 051:10.0W, Santana Port, Brazil.<br /><br />\r\nUnnoticed, robbers boarded a berthed bulk carrier, broke into the forecastle store, stole ship&rsquo;s stores and escaped. Incident noticed during routine rounds. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-14.369166666666667",1:"40.70027777777778",2:"Attack ID: 152-20 <br /> Sitrep: <small> 02.11.2020: 2330 UTC: Posn: 14:22.9S &ndash; 040:42.1E, Nacala Anchorage, Mozambique.<br /><br />\r\nAround four to five robbers armed with long knives in a wooden boat came alongside an anchored bulk carrier. They boarded the ship using hooks attached with ropes and broke into the paint locker. Duty crew on routine rounds noticed the robbers, alerted the Duty Officer and retreated into the accommodation. Alarm raised and crew mustered. The robbers stole ship&rsquo;s stores and escaped. Local agents informed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.271111111111111",1:"104.15138888888889",2:"Attack ID: 151-20 <br /> Sitrep: <small> 25.10.2020: 1735 UTC: Posn: 01:15.76N &ndash; 104:08.65E, Singapore Straits.<br /><br />\r\nAfter the pilot disembarked, the Master onboard a bulk carrier underway was contacted by VTIS indicating that the ship may have been boarded by robbers. Master immediately raised the alarm and made announcement on the PA system. As the crew searched the accommodation and engine room, the 4th Engineer encountered three robbers armed with long knives. One of the robbers chased the 4th Engineer. Fortunately, the 4th Engineer managed to escape. Master was advised to drop anchor near Pulau Batam and two Indonesian Navy warships arrived. Indonesian Navy personnel then boarded the ship to investigate. Upon investigation, no robbers were found and the ship resumed her voyage. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.7013888888888888",1:"101.46722222222222",2:"Attack ID: 150-20 <br /> Sitrep: <small> 27.10.2020: 2105 UTC: Posn: 01:42.5N &ndash; 101:28.2E, Dumai Anchorage, Indonesia.<br /><br />\r\nDuty AB on routine rounds onboard an anchored chemical tanker noticed wet footsteps on the poop deck and saw an unauthorised person escaping. Duty Officer notified. The duty AB reported that the person had gained access to the tanker via a bamboo pole and that there were an additional three persons waiting in a boat. the Incident was reported to local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2355555555555555",1:"104.11805555555556",2:"Attack ID: 149-20 <br /> Sitrep: <small> 25.10.2020: 1700 UTC: Posn: 01:14.8N &ndash; 104:07.5E, Singapore Straits.<br /><br />\r\nWhile underway, a speed boat approached a bulk carrier and came alongside at the starboard quarter. Alarm raised, deck lights switched on, crew mustered and ship&rsquo;s whistle sounded. Seeing the alerted crew, the persons aborted the attempted boarding and escaped. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.25",1:"104.08555555555556",2:"Attack ID: 148-20 <br /> Sitrep: <small> 25.10.2020: 1515 UTC: Posn: 01:15.0N &ndash; 104:05.8E, Singapore Straits.<br /><br />\r\nDuty crew onboard a bulk carrier underway spotted five robbers armed with knives in the engine store room and immediately informed the OOW. Alarm raised and PA announcement made. Seeing the alerted crew, the robbers escaped. Some engine spares were reported stolen. Incident reported to the Singapore VTS. Vessel and crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-8.733333333333333",1:"13.283333333333333",2:"Attack ID: 147-20 <br /> Sitrep: <small> 26.10.2020: 0125 UTC: Posn: 08:44.43S &ndash; 013:17.75E, Luanda Anchorage, Angola.<br /><br />\r\nFive robbers in a wooden boat approached and came alongside an anchored Offshore Support Vessel. Second Officer noticed the boat and observed one person attempting to board the vessel. Alarm raised and crew mustered. Hearing the alarm and seeing the alerted crew, the robbers aborted the attempted boarding and escaped in their boat. Incident was reported to Port Authorities. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-4.780555555555556",1:"11.765277777777778",2:'Attack ID: 146-20 <br /> Sitrep: <small> 19.10.2020: 0107 UTC: Posn: 04:46.50S &ndash; 011:45.55E, Pointe Noire Anchorage, The Congo.<br /><br />\r\nDuty AB on routine rounds onboard an anchored container ship noticed a robber on the forecastle deck. The AB immediately retreated into the accommodation. Alarm raised, crew mustered, and Port Control notified. A patrol boat was dispatched to the location. Upon investigation, it was discovered that ship"s stores were stolen. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"9.367777777777778",1:"-13.733888888888888",2:"Attack ID: 145-20 <br /> Sitrep: <small> 15.10.2020: 2340 UTC: Posn: 09:22.4N &ndash; 013:44.2W, Conakry Anchorage, Guinea.<br /><br />\r\nTen persons armed with guns and knives in two blue coloured boats approached and boarded an anchored bulk carrier. Alarm raised, SSAS activated and authorities informed. The persons aggressively and violently ransacked all cabins and escaped with cash and crew personal belongings. A Coast Guard vessel came and remained with the ship will daybreak. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.271944444444444",1:"1.408611111111111",2:"Attack ID: 144-20 <br /> Sitrep: <small> 17.10.2020: 2055 UTC: Posn: 04:16.19N &ndash; 001:24.31E, Around 112nm SSE of Lome, Togo.<br /><br />\r\nA tanker was attacked by pirates while underway. All crew managed to retreat into the citadel. Togo Navy notified and a patrol vessel was dispatched to the location. The Togo Navy team boarded the tanker and a search was carried out. Once deemed safe, the crew emerged from the citadel and the tanker was then escorted to a safe port. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"18.65",1:"-72.61666666666666",2:'Attack ID: 143-20 <br /> Sitrep: <small> 05.10.2020: 0815 UTC: Posn: 18:39N &ndash; 072:37W, Around 5.4nm NNW of La Salle, Haiti.<br /><br />\r\nThree armed robbers boarded a drifting bulk carrier and stole ship"s stores. Alarm raised and crew mustered. Incident was reported to port authorities. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.776666666666667",1:"8.707777777777778",2:"Attack ID: 142-20 <br /> Sitrep: <small> 17.10.2020: 0534 UTC: Posn: 03:46.96N &ndash; 008:41.88E, LNG Terminal, Punta Europa, Equatorial Guinea.<br /><br />\r\nFive persons armed with rifles boarded a berthed tanker. Crew mustered in the citadel. One crew reported kidnapped. Local authorities notified. Remaining crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-12.019722222222223",1:"-77.20694444444445",2:"Attack ID: 141-20 <br /> Sitrep: <small> 17.10.2020: 0630 UTC: Posn: 12:01.11S - 077:11.85W, Callao Anchorage, Peru.<br /><br />\r\nDuty officer onboard a tanker noticed a suspicious light near the forward store and asked the duty watchman to investigate. As the duty watchman approached, he was taken hostage and tied up by the robbers who stole his personal belongings. The robbers released the duty watchman before escaping. Duty officer and Master informed. Alarm raised and a search was carried out. Incident reported to the port authorities and local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2819444444444446",1:"104.25166666666667",2:"Attack ID: 140-20 <br /> Sitrep: <small> 13.10.2020: 1530 UTC: Posn: 01:16.55N &ndash; 104:15.06E, Singapore Straits.<br /><br />\r\nThree robbers armed with a steel bar boarded a tanker underway. Duty crew on routine rounds noticed the robbers and immediately informed the OOW. Alarm raised and all crew mustered. Seeing the alerted crew, the robbers escaped. Vessel and crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"9.270833333333334",1:"-13.780833333333334",2:"Attack ID: 139-20 <br /> Sitrep: <small> 15.10.2020: 0436 UTC: Posn: 09:16.15N &ndash; 013:46.51W, Conakry Anchorage, Guinea.<br /><br />\r\nDuty OOW onboard and anchored tanker noticed a boat with four persons armed with guns approaching. Onboard armed military team notified. As the boat approached the tanker, the armed team fired warning shots resulting in the boat moving away. Incident was reported to the Port Authorities. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.433763880192734",1:"3.369532619052471",2:"Attack ID: 138-20 <br /> Sitrep: <small> 09.10.2020: 0245 UTC: Posn: 06:26.7N &ndash; 003:22.8E, Apapa Bulk Terminal Ltd. (ABTL), Lagos Port, Nigeria.<br /><br />\r\nDuring heavy rain, armed robbers in two boats approached and boarded a berthed product tanker engaged in cargo operations. Deck crew noticed the robbers and raised the alarm. The discharging operations were suspended, all access doors were locked and crew mustered in the citadel. Port Control informed through VHF CH12. Hearing the alarm, the robbers escaped. A Nigerian Navy Officer boarded the tanker for investigation. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-12.008333333333333",1:"-77.21666666666667",2:'Attack ID: 137-20 <br /> Sitrep: <small> 05.10.2020: 0930 UTC: Posn: 12:00.59S &ndash; 077:13.26W, Callao Anchorage, Peru.<br /><br />\r\nChief officer onboard an anchored bulk carrier noticed movement on the forecastle deck and instructed the bosun to check. As the bosun moved forward, he noticed armed robbers who threatened him with a gun and knife. The bosun retreated immediately and raised the alarm. Seeing the alerted crew, the robbers escaped. Incident reported to port control. On investigating, it was noticed that the robbers had boarded using a rope attached to a hook. Ship"s stores reported stolen. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.01444444444444444",1:"-51.00055555555556",2:"Attack ID: 136-20 <br /> Sitrep: <small> 08.10.2020: 0620 UTC: Posn: 00:00.88N &ndash; 051:00.04W, Macapa Anchorage, Brazil.<br /><br />\r\nThree persons in a small fishing boat came alongside an anchored bulk carrier. Two of the robbers boarded and broke into the forecastle store. Alert OOW noticed the unauthorised persons on the forecastle and raised the alarm and sounded the ship&rsquo;s horn. Crew mustered. Seeing crew alertness, the robbers escaped without stealing anything. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-4.733333333333333",1:"11.766666666666667",2:"Attack ID: 135-20 <br /> Sitrep: <small> 06.10.2020: 0700 UTC: Posn: 04:44S &ndash; 011:46E, Pointe Noire North Anchorage, The Congo.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship, stole ship&rsquo;s stores and escaped. Incident reported to Port Control. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.351111111111111",1:"-10.796388888888888",2:'Attack ID: 134-20 <br /> Sitrep: <small> 01.10.2020: 0342 UTC: Posn: 06:21.06N - 010:47.78W, BMC Pier, Monrovia, Liberia.<br /><br />\r\nDuty AB on routine rounds onboard a berthed tanker noticed one unauthorized person on the forecastle and immediately informed the Duty Officer. Alarm raised and local security guard alerted. Seeing the crew alertness, the robber escape with ship"s stores. A search was made throughout the tanker. Incident reported to Port Authority and Coast Guard. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-2.5516666666666667",1:"-80.10083333333333",2:"Attack ID: 133-20 <br /> Sitrep: <small> 02.10.2020: 0324 UTC: Posn: 02:33.6S &ndash; 080:06.3W, River Passage, Guayaquil, Ecuador.<br /><br />\r\nA container vessel under pilotage was approached and boarded by robbers armed with guns. Crew noticed the robbers opening the containers on deck. Alarm raised and all crew instructed to stay inside the accommodation. The robbers fired their weapons towards the accommodation area, and escaped with cargo stolen from the containers. Incident reported to Port Authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.5169444444444444",1:"104.81666666666666",2:"Attack ID: 132-20 <br /> Sitrep: <small> 29.09.2020: 1600 - 2200 UTC: Posn: 01:31.1N &ndash; 104:49.0E, Around 22nm NE of Tg. Berakit, Pulau Bintan, Indonesia<br /><br />\r\nUnauthorised persons boarded an anchored tanker, broke into the aft store, stole ship&rsquo;s spares and escaped. The break-in was noticed by crew during routine rounds. A search was carried out. Incident was reported to Port Authority and local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"14.585277777777778",1:"120.86666666666666",2:'Attack ID: 131-20 <br /> Sitrep: <small> 04.09.2020: 1820 UTC: Posn: 14:35.7N &ndash; 120:52.0E, MICT Anchorage, Manila, Philippines.<br /><br />\r\nDuty crew onboard an anchored container ship, noticed a masked robber, armed with a knife on the forward deck. He immediately notified the OOW who raised the alarm. Hearing the alerted crew the robber escaped with stolen ship"s properties. Incident reported to the local authorities. A coast guard boat arrived at location and conducted an investigation. No injuries to crew.<br /><br />\r\n </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-2.4333333333333336",1:"-80.03333333333333",2:"Attack ID: 130-20 <br /> Sitrep: <small> 26.09.2020: 0326 UTC: Posn: 02:26S &ndash; 080:02W, River Passage, Guayaquil, Ecuador.<br /><br />\r\nRobbers armed with guns approached and boarded a container vessel under pilotage. Master raised the alarm, activated the SSAS and crew mustered. Despite the continuous alarm and search lights, the robbers stole cargo from the containers and escaped. Incident reported to local Authorities, who later boarded the vessel for investigation. Two containers were found open. Vessel and crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.885277777777778",1:"-1.7005555555555558",2:"Attack ID: 129-20 <br /> Sitrep: <small> LATE REPORT:<br /><br />\r\n08.02.2020: Posn: Takoradi Anchorage, Ghana.<br /><br />\r\nUnnoticed, robbers boarded an anchored tanker stole ship&rsquo;s stores and escaped. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"16.980833333333333",1:"82.32444444444444",2:'Attack ID: 128-20 <br /> Sitrep: <small> LATE REPORT:<br /><br />\r\n11.02.2020: 0001 UTC: Posn: 16:58.51N - 082:18.88E, Kakinada Anchorage, India.<br /><br />\r\nDuty crew on routine rounds onboard an anchored offshore supply ship noticed three robbers armed with knives stealing ship"s properties. Alarm raised and crew alerted. Seeing the crew alertness, the robbers escaped. Incident reported to Port Control. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.0275",1:"-51.00222222222222",2:"Attack ID: 127-20 <br /> Sitrep: <small> 20.09.2020: 0410 UTC: Posn: 00:01.39N &ndash; 051:00.08W, Macapa Anchorage, Brazil.<br /><br />\r\nDuty AB onboard an anchored bulk carrier noticed some suspicious activity near the forepeak store and proceeded to investigate. As he approached the store he noticed two robbers armed with knives. He immediately informed the D/O and retreated into the accommodation. Alarm raised, ship&rsquo;s horn sounded, crew mustered, and searchlights directed towards the forepeak. Hearing the alarm and seeing the crew alertness, the robbers escaped in a white hull boat. A search was carried out and ship&rsquo;s properties were reported stolen. Pilot Station informed.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.385833333333336",1:"104.45222222222222",2:"Attack ID: 126-20 <br /> Sitrep: <small> 22.09.2020: 1600&ndash;1800 UTC: Posn: 01:23.9N &ndash; 104:27.8E, Around 10nm ENE of Pulau Peak, Johor, Malaysia.<br /><br />\r\nC/E on routine rounds in the engine room of a bulk carrier under pilotage noticed engine spares missing. An inspection indicated that unauthorised persons entered the engine room, stole ship&rsquo;s spares and escaped. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-12.024722222222222",1:"-77.21083333333333",2:"Attack ID: 125-20 <br /> Sitrep: <small> 09.09.2020: 0554 UTC: Posn: 12:01.49S &ndash; 077:12.65W, Callao Anchorage, Peru.<br /><br />\r\nDuty AB on routine rounds onboard an anchored container ship noticed a robber on the forecastle deck. Seeing the duty AB, the robber armed with a machete shouted and ran towards the AB resulting in the AB immediately retreating into the accommodation. Alarm raised and crew mustered. Hearing the alarm and seeing the crew alertness, the robber escaped without stealing anything. VTS notified and a patrol boat was dispatched to check and search the anchorage area. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-0.25277777777777777",1:"117.59166666666667",2:"Attack ID: 124-20 <br /> Sitrep: <small> 25.06.2020: 1945 UTC: Posn: 00:15.16S - 117:35.54E, Muara Berau Anchorage, Indonesia.<br /><br />\r\nUnnoticed robbers boarded an anchored bulk carrier, broke into the bosun store, stole ship&rsquo;s stores and escaped. The theft was noticed by the Duty AB on security rounds. Incident reported to Port Control. The Indonesian Marine Police (IMP) boarded the ship for investigation. On 11.07.2020, the IMP identified and apprehended three persons responsible for the theft and managed to recover the stolen items. The Master and the CSO were requested to collect the stolen items from the IMP Regional Directorate of East Kalimantan. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.883333333333333",1:"3.283333333333333",2:"Attack ID: 123-20 <br /> Sitrep: <small> 08.09.2020: 0530 UTC: Posn: 05:53N - 003:17E, Around 33nm SSW of Lagos, Nigeria.<br /><br />\r\nA refrigerated cargo ship was attacked by armed pirates while underway. The pirates kidnapped two crew. The remaining crew managed to retreat into the citadel. Nigerian navy patrol vessels were deployed to the location to assist. The navy boarded the vessel, conducted a search and escorted the vessel to a safe anchorage. Remaining crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2338888888888888",1:"103.485",2:"Attack ID: 122-20 <br /> Sitrep: <small> 15.05.2020: 1030 UTC: Posn: 01:14.2N - 103:29.6E, Around 3nm SSW of Tanjung Piai, Malaysia.<br /><br />\r\nRobbers boarded a barge under tow and stole properties on the deck. Crew in the tug noticed the robbers and raised the alarm resulting in the robbers escaping. Incident reported to VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"14.540833333333333",1:"120.84972222222223",2:"Attack ID: 121-20 <br /> Sitrep: <small> 03.09.2020: 1935 UTC: Posn: 14:31.87N - 120:50.59E, Manila OPL Anchorage, Philippines.<br /><br />\r\nUnnoticed, robbers boarded an anchored general cargo ship, stole ship&rsquo;s stores and properties and escaped. Incident noticed during routine rounds and reported to the Port Authority. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2831194444444445",1:"104.28166666666667",2:"Attack ID: 120-20 <br /> Sitrep: <small> 29.08.2020: 1640 UTC: Posn: 01:16.39N - 104:16.09E, Singapore Straits.<br /><br />\r\nThree unauthorised persons in a boat came alongside a bulk carrier underway. Using a bamboo pole and hook one person boarded the vessel. Alert crew noticed the boarding and raised the alarm. All crew mustered. Seeing the crew alertness, the robbery was averted. Incident reported to Singapore VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"10.39358396722763",1:"107.04578603108725",2:"Attack ID: 119-20 <br /> Sitrep: <small> 14.06.2020: Posn: Vung Tau Anchorage, Vietnam.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier. They stole ship&rsquo;s stores and escaped. The robbery was discovered during the voyage to the next port. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.568888888888889",1:"1.517777777777778",2:"Attack ID: 118-20 <br /> Sitrep: <small> 28.08.2020: 0735 UTC: Posn: 04:34.15N &ndash; 001:31.07E, Around 82nm SSE of Anloga, Ghana.<br /><br />\r\nUnknown persons attacked a fishing vessel. Two crews were reported kidnapped. The incident was reported to the Ghana Authorities. Vessel sailed to a safe port. Investigations are ongoing. </small>",3:"media/com_fabrik/images/red-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.7166666666666668",1:"101.44166666666666",2:"Attack ID: 117-20 <br /> Sitrep: <small> 28.08.2020: 2005 UTC: Posn: 01:42.8N &ndash; 101:26.6E, Dumai Anchorage, Indonesia.<br /><br />\r\nDuty watchman on routine rounds onboard an anchored chemical tanker noticed four robbers armed with knives on poop deck trying to open the hatch for emergency towing arrangements. The duty watchman informed bridge. Alarm raised and all non-essential crew mustered in the citadel. Hearing the alarm, the robbers escaped. Port Control notified via VHF ch 12. Coast guard officers boarded the tanker for investigation. Nothing was reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.729722222222223",1:"-1.5902777777777777",2:"Attack ID: 116-20 <br /> Sitrep: <small> 18.08.2020: 0350 UTC: Posn: 04:43.80N &ndash; 001:35.42W, Around 13nm SE of Takoradi, Ghana.<br /><br />\r\nDuty  AB on routine rounds onboard an anchored drilling ship noticed a movement near the aft deck. He called for assistance on radio. Seeing the crew alertness, the unknown persons jumped overboard and escaped in their canoe. Upon inspection, it was discovered that the paint store and boxes containing spares was broken into. Nothing reported stolen. Incident reported to the Port Authority. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-3.708726384180013",1:"114.46723937988281",2:"Attack ID: 115-20 <br /> Sitrep: <small> 28.04.2020: 2000 UTC: Posn: Taboneo Anchorage, Indonesia.<br /><br />\r\nDuring routine rounds onboard an anchored bulk carrier, alert crew noticed the forecastle booby hatch open and ship&rsquo;s stores missing. Incident reported to the port control. A police patrol boat arrived and conducted an investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-0.23517542606521258",1:"117.58563995361328",2:"Attack ID: 114-20 <br /> Sitrep: <small> 21.05.2020: 2145 UTC: Posn: Muara Berau Anchorage, Indonesia.<br /><br />\r\nRobbers boarded an anchored bulk carrier and attempted to break the bosun store lock. They were noticed by ship&rsquo;s crew and alarm raised. The robbers jumped overboard and escaped. Nothing was stolen. Incident reported to port control. Police patrol boat arrived at location and conducted an investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-3.7016666666666667",1:"114.41722222222222",2:'Attack ID: 113-20 <br /> Sitrep: <small> 04.04.2020: 1430 UTC: Posn: Taboneo Anchorage, Indonesia.<br /><br />\r\nRobbers boarded an anchored bulk carrier, stole ship&rsquo;s equipment and escaped. Incident reported to port control. A police patrol boat arrived and conducted an investigation. </small><br />Attack ID: 005-20 <br /> Sitrep: <small> 22.01.2020: 0001 UTC: Posn: 03:42.6S - 114:25.2E, Taboneo Anchorage, Indonesia.<br /><br />\r\nDuty crew onboard an anchored bulk carrier noticed the lock at the bosun store broken and ship"s properties stolen. The incident was reported to Port Control and local agent. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"13.733611111111111",1:"121.0188888888889",2:"Attack ID: 112-20 <br /> Sitrep: <small> 20.08.2020: 1320 UTC: Posn: 13:44.1N &ndash; 121:01.8E, Batangas Anchorage, Philippines.<br /><br />\r\nDuty crew on security rounds onboard an anchored bulk carrier was attacked and injured by a robber armed with a knife. The duty crew managed to escape. OOW notified. Alarm raised and crew mustered. Hearing the alarm and seeing the alerted crew, the robber escaped. Incident reported to the authorities and medical assistance requested. Doctors and coast guard officers boarded the vessel to treat the injured crew and investigate. The crew was later sent to the hospital. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"13.776944444444444",1:"120.97666666666667",2:"Attack ID: 111-20 <br /> Sitrep: <small> 13.08.2020: 1700 UTC: Posn: 13:46.63N &ndash; 120:58.61E, BBTI Terminal, Batangas, Philippines.<br /><br />\r\nTwo robbers in a boat approached a berthed chemical tanker. One robber armed with a knife attempted to board the tanker via the stern mooring rope. Deck watchkeeper noticed the robbers and raised the alarm. Crew mustered. Hearing the alarm and seeing the crew alertness, the robbers aborted the attempted boarding and escaped in their boat. Port Authorities and Coast Guard informed. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.7022222222222223",1:"101.45222222222222",2:"Attack ID: 110-20 <br /> Sitrep: <small> 11.08.2020: 2015 UTC: Posn: 01:42.8N &ndash; 101:27.8E, Dumai Inner Anchorage, Indonesia.<br /><br />\r\nA robber boarded an anchored tanker using a hook attached to a rope. Alert duty crew noticed the robber along with two other persons in a wooden boat and raised the alarm. Hearing the alerted crew, the robbers escaped without stealing anything. Port Authorities informed through the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-8.710555555555555",1:"13.3125",2:"Attack ID: 109-20 <br /> Sitrep: <small> 10.08.2020: 0206 UTC: Posn: 08:41.98S &ndash; 013:18.45E, Luanda Anchorage, Angola.<br /><br />\r\nThree robbers boarded an anchored general cargo ship. The deck patrol was threatened and tied by the robbers. When the deck patrol did not report for 15 minutes, the OOW raised the alarm. Crew mustered, proceeded forward and noticed the tied apprehended crew.  The robbers escaped with stolen ship&rsquo;s properties. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"18.585833333333333",1:"-72.45055555555555",2:"Attack ID: 108-20 <br /> Sitrep: <small> 29.07.2020: 0310 UTC: Posn: 18:35.9N &ndash; 072:27.2W, Around 6nm NW of Port Au Prince, Haiti.<br /><br />\r\nDuty AB on routine rounds onboard a bulk carrier drifting while waiting for orders was confronted and taken hostage by two armed robbers. They stole the AB personnel properties and two mooring ropes before escaping in a waiting boat. Alarm raised and crew mustered.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.451388888888889",1:"108.66916666666667",2:"Attack ID: 107-20 <br /> Sitrep: <small> 08.07.2020: 1404 UTC: Posn: 03:27.5N - 108:40.9E, Around 23nm SE of Natuna Island, Indonesia.<br /><br />\r\nAround five persons in a boat attempted to come alongside and board a LPG Tanker underway. Seeing the approaching boat the vessel made evasive manoeuvres and directed the Aldis lights towards the boat resulting in the persons aborting and moving away. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.03944444444444444",1:"-50.98444444444444",2:"Attack ID: 106-20 <br /> Sitrep: <small> 28.07.2020: 1000 UTC: Posn: 00:02.37N - 050:59.08W, Macapa Anchorage No.2, Brazil.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier. Duty AB on security rounds noticed the forecastle and paint store doors open and raised the alarm. Upon investigation, ship&rsquo;s stores reported stolen. Incident reported to Port Control.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.211111111111111",1:"103.54611111111112",2:"Attack ID: 105-20 <br /> Sitrep: <small> 26.07.2020: 0030 UTC: Posn: 01:12.40N - 103:32.46E, Singapore Straits.<br /><br />\r\nRobbers in a wooden boat approached and boarded a barge towed by an underway tug. The crew spotted the boat and raised the alarm. Seeing the crew alertness, the robbers escaped. Incident reported to the coast guard, who later boarded the barge for investigation. On searching the barge, nothing was reported stolen.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.95",1:"2.7666666666666666",2:"Attack ID: 104-20 <br /> Sitrep: <small> 17.07.2020: 1000 UTC: Posn: 02:57N &ndash; 002:46E, Around 196nm SW of Bayelsa, Nigeria.<br /><br />\r\nEight pirates armed with machine guns boarded a tanker underway. They held hostage all crew members, stole the tanker&rsquo;s documents and valuables and kidnapped 13 crew members before escaping. The tanker was left drifting with limited and unqualified crew onboard. A nearby merchant vessel rendered assistance which allowed the tanker to sail to a safe port. Regional authorities notified. On 02.09.2020, the Owners confirmed that the 13 kidnapped crew members were released safely on 19.08.2020. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.85",1:"6.967777777777778",2:"Attack ID: 103-20 <br /> Sitrep: <small> 02.07.2020: 0320 UTC: Posn: 03:51.01N &ndash; 006:58.08E, Around 33nm SSW of Bonny Island, Nigeria.<br /><br />\r\nArmed pirates attacked and boarded an FPSO, kidnapped nine crew members and escaped. Remaining crew reported safe. On 09.09.2020, the Owners confirmed that the 9 kidnapped crew members were safely released on 06.08.2020. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2666666666666666",1:"104.20194444444445",2:"Attack ID: 102-20 <br /> Sitrep: <small> 11.07.2020: 1800 UTC: Posn: 01:16.0N &ndash; 104:12.7E, Singapore Straits.<br /><br />\r\nThree robbers armed with knives and an axe boarded a bulk carrier underway. The C/E noticed the armed robbers in the steering gear room and immediately informed the Master. Alarm raised, deck lights switched on and crew mustered on the bridge. Incident reported to the CSO and VTS. A search was carried out. It was reported that ship&rsquo;s spares and stores were stolen.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.883611111111112",1:"-1.7080555555555557",2:"Attack ID: 101-20 <br /> Sitrep: <small> 30.06.2020: 0235 UTC: Posn: 04:53.01N &ndash; 001:41.89W, Takoradi Anchorages, Ghana.<br /><br />\r\nDuty AB onboard an anchored bulk carrier noticed three robbers on the forecastle and immediately informed the OOW who raised the alarm. Seeing the alerted crew the robbers escaped with stolen ship&rsquo;s properties. Incident reported to Takoradi Port Control.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.8216666666666668",1:"2.4166666666666665",2:"Attack ID: 100-20 <br /> Sitrep: <small> 02.07.2020: 2220 UTC: Posn: 03:49.3N &ndash; 002:25.0E, Around 150nm South of Cotonou, Benin.<br /><br />\r\nArmed pirates attacked and boarded a general cargo ship that was drifting and awaiting operational instructions. They kidnapped five crew members, stole ship&rsquo;s properties, cash and crew personal belongings before escaping in a small boat. Authorities informed, crew mustered, and a search was carried out onboard the ship. The remaining crew are reported safe. On 04.08.2020, the Owners confirmed that the 5 kidnapped crew members were released safely on 31.07.2020.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.291111111111111",1:"104.31944444444444",2:"Attack ID: 099-20 <br /> Sitrep: <small> 01.07.2020: 1640 UTC: Posn: 01:16.88N - 104:19.10E, Singapore Straits.<br /><br />\r\nFour robbers armed with knives boarded a reefer vessel. Duty crew spotted the robbers and raised the alarm. All crew mustered. Seeing the crew alertness, the robbers escaped with ship&rsquo;s spares. Incident reported to VTIS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-14.383888888888889",1:"40.685833333333335",2:"Attack ID: 098-20 <br /> Sitrep: <small> 30.06.2020: 2115 UTC: Posn: 14:23.2S &ndash; 040:41.9E, Nacala Anchorage, Mozambique<br /><br />\r\nDuty AB on routine rounds onboard an anchored bulk carrier noticed a mooring line cut and missing. Alarm raised, PA announcement made and a search was carried out onboard the ship. Port Control notified and a patrol boat was dispatched to the location.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-12.028333333333334",1:"-77.18888888888888",2:"Attack ID: 097-20 <br /> Sitrep: <small> 27.06.2020: 0010 UTC: Posn: 12:01.4S - 077:10.8W, Callao Anchorage, Peru.<br /><br />\r\nDuty AB onboard an anchored bulk carrier noticed three persons attempting to board via the anchor chain. The AB immediately informed the D/O and started shouting at the robbers. Alarm raised and crew mustered. Seeing the alerted crew, the persons aborted the attempted boarding and escaped. Port Control and Coast Guard were notified who later arrived at the location and made a search.<br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.366666666666666",1:"2.65",2:"Attack ID: 096-20 <br /> Sitrep: <small> 24.06.2020: Around 1430 UTC: Posn: 05:21N &ndash; 002:37E, Around 60nm South of Cotonou, Benin.<br /><br />\r\nSix armed pirates attacked and boarded a fishing vessel underway, kidnapped six crew and escaped. The incident was reported to the Regional Authorities who coordinated a response and escorted the remaining crew to a safe port. <br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"14.563888888888888",1:"120.90555555555555",2:"Attack ID: 095-20 <br /> Sitrep: <small> 12.06.2020: 2000 &ndash; 2100 UTC: Posn: 14:33.5N &ndash; 120:53.8E, Manila Anchorage, Philippines.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship. Duty AB on routine rounds noticed the bosun store and paint room door padlocks broken and doors open. He immediately informed the D/O who raised the alarm and crew mustered. A search was carried out. It was reported that ship&rsquo;s stores and properties were stolen. Incident reported to the Port Authority.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-5.900555555555556",1:"105.98333333333333",2:"Attack ID: 094-20 <br /> Sitrep: <small> 17.06.2020: 0200 UTC: Posn : 05:54.2S &ndash; 105:59.0E: Merak Anchorage, Indonesia.<br /><br />\r\nUnnoticed, robbers boarded an anchored product tanker, stole ship&rsquo;s spares and escaped. The robbery was discovered during routine rounds of the engine room. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"13.185555555555556",1:"100.83555555555556",2:"Attack ID: 093-20 <br /> Sitrep: <small> 16.06.2020: 0415 UTC: Posn : 13:11.08N &ndash; 100:50.80E: Kosichang Anchorage, Thailand.<br /><br />\r\nUnnoticed robbers boarded a anchored bulk carrier during cargo operations, broke into the aft store, stole ship&rsquo;s equipment and escaped. The break-in was noticed by crew during routine operations. Incident reported to agent and PFSO.  <br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"9.35",1:"-13.783333333333333",2:"Attack ID: 092-20 <br /> Sitrep: <small> 09.06.2020: Around 0015 UTC: Posn: 09:21.2N &ndash; 013:47.0W, Conakry Anchorage, Guinea.<br /><br />\r\nAround seven persons armed with guns and knives boarded an anchored tanker. They stole ship&rsquo;s cash and crew personal belongings before escaping. It was reported that five crew members were assaulted during the incident. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.035555555555555556",1:"-50.968333333333334",2:'Attack ID: 091-20 <br /> Sitrep: <small> 10.06.2020: 0330 UTC: Posn: 00:02.8N &ndash; 050:58.6W, Macapa Anchorage, Brazil.<br /><br />\r\nDuty crew onboard an anchored bulk carried noticed two unauthorised persons on the aft deck. As he approached to investigate the two persons armed with a knife and pipe threatened the watchkeeper who retreated and reported the attack to the OOW. Alarm raised and crew mustered. Seeing the alerted crew the robbers escaped with stolen ship"s properties. Incident reported to Port Authority and local agent. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.2416666666666667",1:"4.716666666666667",2:"Attack ID: 090-20 <br /> Sitrep: <small> 09.06.2020: 1900 UTC: Posn: 03:14.3N &ndash; 004:43.0E, Around 95nm SW of Bayelsa, Nigeria.<br /><br />\r\nFive persons in a skiff, approached a container ship underway. The D/O raised the alarm, activated the fire pump, increased speed and commenced evasive manoeuvres. After several attempts to board the ship the skiff aborted and moved away. Ship and crew safe. Incident reported to the Authorities and Security Escort Company.<br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"18.5525",1:"-72.5525",2:"Attack ID: 089-20 <br /> Sitrep: <small> 03.06.2020: 0840 UTC: Posn: 18:35.2N &ndash; 072:33.7W, Port Au Prince Anchorage, Outside Anchorage Area S, Haiti.<br /><br />\r\nFive robbers armed with a machete and knives boarded an anchored tanker. Duty watchmen on routine rounds noticed the robbers and immediately informed the D/O who raised the alarm. Crew mustered on the bridge. Seeing the alerted crew the robbers escaped with stolen mooring ropes and ship&rsquo;s properties. The incident reported to the CSO and Port Control.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2513888888888889",1:"104.11805555555556",2:"Attack ID: 088-20 <br /> Sitrep: <small> 27.01.2020: 1810 UTC: Posn: 01:15.5N - 104:07.5E, Singapore Straits.<br /><br />\r\nTwo robbers armed with knives boarded a bulk carrier underway. Duty crew spotted the robbers. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped with ship&rsquo;s engine spares. Incident reported to VTIS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-0.2777777777777778",1:"117.61944444444444",2:"Attack ID: 087-20 <br /> Sitrep: <small> 28.05.2020: 2020 UTC: Posn: 00:16.4S - 117:36.7E, Muara Berau Anchorage, Indonesia.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier. Duty AB on routine rounds noticed the forecastle skylight opened and anchor pipe cover and padlock missing. He immediately informed the D/O who raised the alarm and crew mustered. A search was carried out. It was reported that ship&rsquo;s stores were stolen. Incident reported to the Coast Guard who boarded the ship for investigation.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-0.2733333333333333",1:"117.62222222222222",2:"Attack ID: 086-2020 <br /> Sitrep: <small> 02.06.2020: 1100 UTC: Posn: 00:15.94S &ndash; 117:36.85E, Muara Berau Anchorage, Indonesia.<br /><br />\r\nWhile at anchor two robbers from a small boat boarded a bulk carrier using hooks and ropes. They broke into the forecastle store and started lowering them in the water. Alert crew noticed the robbers and raised the alarm resulting in the robbers aborting and escaping without anything.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"22.274166666666666",1:"91.81777777777778",2:"Attack ID: 085-20 <br /> Sitrep: <small> 24.05.2020: 1600 UTC: Posn: 22:16.27N - 091:48.64E, Chattogram Port, Bangladesh.<br /><br />\r\nUnnoticed, robbers boarded a berthed product tanker. Duty crew on routine rounds noticed the mooring rope on the winch was cut off. Alarm raised, crew mustered, and a search was carried out. Incident reported to PFSO.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.234722222222222",1:"5.050222222222223",2:"Attack ID: 084-20 <br /> Sitrep: <small> 20.05.2020: 1730 UTC: Posn: 02:14.5N &ndash; 005:03.7E, Around 142nm SW of Brass, Nigeria.<br /><br />\r\nSeven heavily armed pirates attacked and boarded a general cargo ship underway. The crew retreated into the citadel and contacted the owners and IMB PRC for help. The IMB Piracy Reporting Centre immediately started liaising with the Nigerian Authorities and requested for assistance. Two Nigerian Naval vessels responded. By the time the naval vessels arrived near the ship, the pirates had disembarked. The crew emerged from the citadel and the Naval vessels remained alongside the ship until daylight to ensure safety and security. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.587376153449855",1:"-5.51513671875",2:"Attack ID: 083-20 <br /> Sitrep: <small> 15.05.2020: Posn: Ivory Coast Fishing Areas, Ivory Coast.<br /><br />\r\nA fishing vessel carrying out fishing activities was boarded and hijacked by ten pirates. Upon receiving the distress message, the IMB Piracy Reporting Centre (IMB PRC) immediately started liaising with the Regional Authorities and the vessel operators. A Nigerian navy patrol vessel intercepted and boarded the hijacked vessel, apprehended the pirates, rescued the crew, and escorted the fishing vessel to a safe port. All crew reported safe. </small>",3:"media/com_fabrik/images/red-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2166666666666668",1:"104.1",2:"Attack ID: 082-20 <br /> Sitrep: <small> 18.05.2020: 1315 UTC: Posn: 01:13.3N &ndash; 104:06.5E, Singapore Straits.<br /><br />\r\nSix robbers armed with machetes boarded the barge under tow.  Three duty watchmen onboard the barge were threatened by the robbers. One watchman was taken hostage while the other two watchmen managed to escape and raised the alarm. Seeing the alerted crew, the robbers escaped stealing the watchmen&rsquo;s mobile phones. Authorities informed and they boarded the vessel for investigation.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.25",1:"104.08333333333333",2:"Attack ID: 081-20 <br /> Sitrep: <small> 09.05.2020: 1548 UTC: Posn: 01:15.2N - 104:05.8E, Singapore Straits.<br /><br />\r\nFive robbers armed with knives boarded a bulk carrier underway. They injured the duty crew on watch and stole his personal properties. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped with stolen ship&rsquo;s properties. Incident reported to VTIS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-5.913471157566866",1:"105.9984395345052",2:"Attack ID: 080-20 <br /> Sitrep: <small> 17.05.2020: 1925 UTC: Posn: 05:53.95S &ndash; 105:59.07E, Merak Anchorage, Indonesia.<br /><br />\r\nThree robbers armed with long knives in a small boat boarded an anchored tanker using a ladder. They forced their way into the steering gear room after breaking the padlock. Alarm raised and crew mustered. Hearing the alarm, the robbers escaped in their boat. A search was carried out. It was reported that engine spares were stolen. Port Control was informed.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"20.950555555555557",1:"107.30222222222223",2:"Attack ID: 079-20 <br /> Sitrep: <small> 21.05.2020: 1830-2150 UTC: Posn: 20:57.2N - 107:18.8E, Campha Anchorage, Vietnam.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier and stole ship&rsquo;s stores. The incident was noticed after the completion of cargo operations. Incident reported to local agent.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-6.031519530918296",1:"105.92959969838458",2:"Attack ID: 078-20 <br /> Sitrep: <small> 16.05.2020: 1830 UTC: Posn: 05:58.7S - 105:56.0E, Anyer Anchorage, Indonesia.<br /><br />\r\nDuty crew on routine rounds onboard an anchored tanker noticed a robber armed with a knife. OOW informed and alarm raised. While retreating into the accommodation, the duty crew spotted another robber emerging from the emergency steering room. Crew mustered, and the robbers were seen escaping in their boat. A search was carried out and engine spares were reported missing.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.0841666666666667",1:"104.16888888888889",2:"Attack ID: 077-20 <br /> Sitrep: <small> 16.05.2020: 2100 UTC: Posn: 01:05.3N &ndash; 104:10.8E, Tanjung Uban Anchorage, Indonesia.<br /><br />\r\nDuty crew on routine rounds, onboard an anchored product tanker noticed three robbers armed with knives. The crew raised the alarm and retreated into the accommodation. Crew mustered. Seeing the alerted crew, the robbers escaped. Nothing was reported stolen. Vessel and crew safe.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.783603525527392",1:"98.70507717132568",2:"Attack ID: 076-20 <br /> Sitrep: <small> 15.05.2020: 2100&ndash;2230 UTC: Posn: 03:47.3N - 098:41.8E, Belawan Port, Indonesia.<br /><br />\r\nUnnoticed, robbers boarded a berthed product tanker and stole ship&rsquo;s stores. The incident was noticed after the completion of cargo operations. Incident reported to Port Authority.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.586111111111111",1:"2.491388888888889",2:"Attack ID: SUS-01 <br /> Sitrep: <small> SUSPICIOUS: THIS INCIDENT WILL NOT BE INCLUDED IN THE STATISTICS<br /><br />\r\n14.05.2020 : 0130 UTC : Posn: 04:34.70N \u2010 002:29.90E, Around 107nm South Of Cotonou, Benin<br /><br />\r\nTwo skiffs were noticed following a Ro- Ro Vessel underway at a distance of 2.5nm. The master, increased speed, altered course and notified the IMB Piracy Reporting Center (IMB PRC). Upon receiving the message, the IMB PRC immediately alerted the Authorities in the Region, and commenced liaising with the authorities and vessel operators. The skiffs stopped following the vessel and moved away after around one hour.  </small>",3:"media/com_fabrik/images/purple-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.5322222222222223",1:"9.129166666666666",2:"Attack ID: 075-20 <br /> Sitrep: <small> 03.05.2020: 0300 UTC: Posn: 00:30.50N \u2010 009:06.21E, Around 22nm WNW of Libreville, Gabon.<br /><br />\r\nUnknown persons attacked a fishing vessel. Three crews were reported kidnapped. The incident was reported to the Gabon Authorities who then escorted the remaining crew back to a safe port.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.9233333333333333",1:"9.135833333333334",2:"Attack ID: 074-20 <br /> Sitrep: <small> 03.05.2020: 0500 UTC: Posn: 00:55.24N \u2010 009:08.09E, Around 11nm West of Corisco Island, Equatorial Guinea.<br /><br />\r\nUnknown persons attacked a fishing vessel. Three crews were reported kidnapped. The incident was reported to Authorities who then escorted the remaining crew back to a safe port. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.7905555555555557",1:"8.775833333333333",2:"Attack ID: 073-20 <br /> Sitrep: <small> 09.05.2020: 0107 UTC: Posn: 03:47.26N &ndash; 008:45.93E, Malabo Inner Anchorage, Equatorial Guinea.<br /><br />\r\nFive persons armed with rifles in a skiff approached an anchored general cargo ship. They boarded the ship and opened fire causing injuries to two crew members. Before escaping, they kidnapped two crew members and stole two mobile phones. Incident reported to Port Control and a naval ship via VHF ch.16. The naval personnel boarded the ship and evacuated the injured crew to a hospital. It was reported that the crew members had sustained bullet wound injuries in their legs.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-14.500277777777779",1:"40.65138888888889",2:"Attack ID: 072-20 <br /> Sitrep: <small> 10.05.2020: 2050 UTC: Posn: 14:30.1S &ndash; 040:39.5E, Nacala Anchorage, Mozambique.<br /><br />\r\nOne person boarded an anchored tanker during cargo operation. Alarm raised, resulting in the person escaping with his two accomplices in the boat. Port Control was notified. Nothing reported stolen.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"18.69049698085147",1:"-72.35721782445907",2:"Attack ID: 071-20 <br /> Sitrep: <small> 10.05.2020: 0600 UTC: Posn: 18:41.44N &ndash; 072:21.46W, Lafiteau Port, Haiti.<br /><br />\r\nDuty AB on routine rounds onboard a berthed bulk carrier noticed an aft mooring rope missing. Alarm raised, crew mustered and a search was carried out onboard the ship. Port Control and agents notified. The PFSO and Terminal Authorities also searched the port area and around the ship.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-0.26666666666666666",1:"117.58333333333333",2:"Attack ID: 070-20 <br /> Sitrep: <small> 05.05.2020: 2330 UTC: Posn: 00:16S - 117:35E, Muara Berau Anchorage, Indonesia.<br /><br />\r\nDuty crew on routine rounds onboard an anchored bulk carrier noticed the forward hatch of the forecastle open. Upon inspection, it was discovered that the security padlock was broken and ship&rsquo;s stores stolen. Incident reported to the Port Authorities and the local agent.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-2.772222222222222",1:"-80.245",2:"Attack ID: 069-20 <br /> Sitrep: <small> 02.05.2020: 0315-0400 UTC: Posn: 02:46.2S - 080:14.7W, Around 4nm South of Posorja, Ecuador.<br /><br />\r\nSeven armed persons in a skiff chased and fired upon a container vessel underway. Alarm raised, crew mustered, and the search light directed towards the skiff. Coast Guard onboard the vessel fired four warning shots resulting in the skiff moving away. Crew and vessel safe.<br /><br />\r\n </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.6019444444444444",1:"104.86888888888889",2:"Attack ID: 068-20 <br /> Sitrep: <small> 03.05.2020: 1950 UTC: Posn: 01:36.7N &ndash; 104:52.8E, Around 29nm NE of Pulau Bintan, Indonesia.<br /><br />\r\nFour robbers in a wooden boat, armed with knives, came alongside an anchored product tanker. Two of the robbers boarded the tanker using a hook attached with a rope. Duty AB on routine rounds encountered the robbers and immediately informed the bridge. Alarm raised, PA announcement made, and crew mustered. The robbers took the AB&rsquo;s UHF radio by force and escaped. A search was made throughout the tanker. Padlocks to four storerooms were found broken but nothing reported stolen.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.5",1:"3.8333333333333335",2:"Attack ID: 067-20 <br /> Sitrep: <small> 30.04.2020: Around 1845 UTC: Posn: 03:29.99N &ndash; 003:50.17E, Around 127nm SW of Bayelsa, Nigeria.<br /><br />\r\nArmed pirates in a skiff attacked and boarded a product tanker underway. They kidnapped 10 crews and escaped. The Owners of the tanker informed the IMB Piracy Reporting Centre who then liaised with relevant regional and international authorities in the region and requested for assistance. A Nigerian Navy Security Vessel was dispatched to the location and provided assistance to the tanker. The four remaining crew members onboard together with the assistance of another sister vessel managed to sail the tanker to a safe port. Nigerian Authorities are investigating. On 25.05.2020, the Owners confirmed that the 10 kidnapped crew members were released safely on 22.05.2020. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2686111111111111",1:"104.26916666666666",2:"Attack ID: 066-20 <br /> Sitrep: <small> 29.04.2020: 2115 UTC: Posn: 01:16.7N &ndash; 104:16.9E, Singapore Straits.<br /><br />\r\nDuty crew in the engine room noticed three unauthorised persons entering the engine room. The duty crew shouted at the persons who escaped. Alarm raised, crew mustered, and Singapore VTIS notified. The Singapore Police boarded the vessel for inspection. On searching the vessel, nothing was reported stolen.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-4.716944444444445",1:"11.767222222222223",2:"Attack ID: 065-20 <br /> Sitrep: <small> 20.03.2020: 0130 - 0530 UTC: Posn: 04:43.1S - 011:46.2E, Pointe Noire Northern Anchorage, The Congo.<br /><br />\r\nUnnoticed, robbers boarded an anchored container vessel via the anchor chain, stole ship&rsquo;s properties and escaped. Incident reported to local Port Control.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.985555555555555",1:"2.3505555555555557",2:"Attack ID: 064-20 <br /> Sitrep: <small> 26.03.2020: 0830 UTC: Posn: 05:59.8N &ndash; 002:21.2E, Around 21nm SSW of Cotonou, Benin.<br /><br />\r\nAround five persons in a speed boat approached a product tanker underway. PA announcement was made, accommodation locked down and all non-essential crew mustered in the citadel. Master increased speed and commenced evasive manoeuvres, resulting in the pirates aborting the approach and moving away. Vessel and crew safe. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.9",1:"-1.6852777777777779",2:"Attack ID: 063-20 <br /> Sitrep: <small> 04.03.2020: 0345 UTC: Posn: 04:54.0N &ndash; 001:41.7W, Takoradi Anchorage, Ghana.<br /><br />\r\nRobbers in two wooden boats approached and boarded an anchored general cargo ship, stole ship&rsquo;s properties and escaped. Alarm raised and extra lookouts posted. Incident reported to Port Control and the Ghana Authorities boarded the vessel for investigation.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2555555555555555",1:"104.05",2:"Attack ID: 062-20 <br /> Sitrep: <small> 22.04.2020: 1500 UTC: Posn: 01:14.8N - 104:03.1E, Singapore Straits.<br /><br />\r\nTwo robbers armed with knives boarded a bulk carrier underway. Duty crew spotted the robbers and informed the OOW. Alarm raised and crew mustered. Singapore Police Coast Guard boarded the vessel for investigation. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"30.0521173585786",1:"47.93719571431477",2:"Attack ID: 061-20 <br /> Sitrep: <small> 26.04.2020: 2300 UTC: Posn: 30:03.16N &ndash; 047:56.13E, Umm Qasr Port, Iraq.<br /><br />\r\nUnauthorised persons disguised as stevedores boarded a berthed container ship. They broke into the forepeak store and started stealing ship&rsquo;s properties by passing them to their accomplices on the jetty. Alert crew noticed the persons and raised the alarm resulting in them escaping. Port Authorities responded and were able to recover and return the stolen items.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-3.6905681987022207",1:"114.46002960205078",2:"Attack ID: 060-20 <br /> Sitrep: <small> 11.04.2020: 2100 UTC: Posn: Taboneo Anchorage, Indonesia.<br /><br />\r\nDuty crew on routine rounds onboard an anchored bulk carrier noticed the forward store room door security padlock broken. Further investigation revealed ship&rsquo;s stores were stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"18.490277777777777",1:"-93.30277777777778",2:"Attack ID: 059-20 <br /> Sitrep: <small> 09.04.2020: 0230 UTC: Posn: 18:29.25N &ndash; 093:17.70W, Hokchi Field, Offshore Puerto Dos Bocas, Mexico.<br /><br />\r\nDuty crew onboard a dynamic positioning pipelaying vessel noticed two boats with seven armed persons approaching at high speed. Alarm raised, PA announcement made and crew mustered in the citadel. Three persons managed to board the vessel. Master activated SSAS, increased speed, and commenced manoeuvres resulting in the persons escaping. Port Control notified and a patrol boat was dispatched to assist the vessel. After the crew emerged from the citadel a security search was carried out. Crew and vessel reported safe.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-6.081388888888889",1:"12.313888888888888",2:"Attack ID: 058-20 <br /> Sitrep: <small> 15.03.2020: 1605 UTC: Posn: 06:04.53S &ndash; 012:18.50E, Soyo Anchorage, Angola.<br /><br />\r\nOOW onboard an anchored offshore supply vessel noticed 12 armed persons in a wooden boat attempting to board. Alarm activated and the persons aborted the attempt and moved away. Port Authorities notified and a security boat was dispatched to the location. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.7083333333333335",1:"104.47777777777777",2:"Attack ID: 057-20 <br /> Sitrep: <small> 11.04.2020: 0230 UTC: Posn: 01:42.5N - 104:28.7E, Around 16nm NE of Bandar Penawar, Malaysia.<br /><br />\r\nUnnoticed, robber boarded an anchored tanker, stole ship&rsquo;s properties and escaped. Incident reported to the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.276439486518716",1:"2.533923848470066",2:"Attack ID: 056-20 <br /> Sitrep: <small> 18.04.2020: 2330 UTC: Posn: 06:16.8N &ndash; 002:32.4E, Cotonou Anchorage, Benin.<br /><br />\r\nArmed persons boarded an anchored container ship. Alarm raised and crew took shelter in the citadel. Incident reported to the Benin Authorities. A patrol boat in the vicinity was diverted to the location to rescue the crew members and to provide assistance to the ship. Eight crew reported kidnapped from the ship. On 28.05.2020, the Owners confirmed that the 8 kidnapped crew members were released safely on 23.05.2020.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"10.413364998907566",1:"107.1143388748169",2:"Attack ID: 055-20 <br /> Sitrep: <small> 19.04.2020: 1845 UTC: Posn: Vung Tau Anchorage, Vietnam.<br /><br />\r\nFour robbers in a wooden boat boarded an anchored chemical tanker. Duty watchman on routine rounds noticed the robbers and notified the OOW. Alarm raised and ship&rsquo;s whistle sounded. Hearing the alarm, the robbers escaped with stolen ship&rsquo;s stores. Crew mustered and a search was carried out. Incident reported to Port Control.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"18.875",1:"-91.88222222222223",2:"Attack ID: 054-20 <br /> Sitrep: <small> 15.04.2020: 0330 UTC: Posn: 18:51.94N &ndash; 091:52.56W, Around 12nm North of Ciudad del Carmen, Mexico.<br /><br />\r\nAround six persons armed with automatic weapons and pistols boarded an anchored accommodation construction barge. They attempted to enter into the accommodation without success and opened fire towards the superstructure causing damage to three windows. Master raised the alarm, sent distress message, informed CSO, and crew mustered in the citadel. The incident was reported to the Marine Control via VHF ch.16 and a naval boat was dispatched to the location. The persons stole the barge&rsquo;s high value project equipment and escaped. One crew was injured during the incident.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"18.6",1:"-93.325",2:"Attack ID: 053-20 <br /> Sitrep: <small> 10.04.2020: 0337 UTC: Posn: 18:36.76N &ndash; 093:19.39W, Around 13nm NW of Puerto Dos Bocas, Mexico.<br /><br />\r\nEight armed robbers boarded a drifting offshore supply ship. They fired several warning shots and later left the vessel. No injuries to crew members. Authorities have been informed.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2527777777777778",1:"104.03333333333333",2:"Attack ID: 052-20 <br /> Sitrep: <small> 15.04.2020 &ndash; 1700 UTC: Posn: 01:14.70N &ndash; 104:02.30E, Singapore Straits.<br /><br />\r\nThree robbers armed with long knives in an unlit boat approached and boarded a bulk carrier underway. Duty oiler on routine rounds noticed the robbers in the engine room and raised the alarm. Master made PA announcement, crew mustered and made a search. Hearing the alarm and seeing the crew alertness, the robbers escaped with stolen ship&rsquo;s engine spares and properties. VTIS informed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-2.868333333333333",1:"-80.38388888888889",2:"Attack ID: 051-20 <br /> Sitrep: <small> 11.04.2020: 0435 UTC: Posn: 02:52.6S &ndash; 080:23.2W, Around 7nm West of Isla Puna, Ecuador.<br /><br />\r\nSix armed robbers boarded a container ship under pilotage. They took hostage two duty crew members and tied them up. Seeing the robbers, the Master raised the alarm, crew mustered and pilot notified the coast guard. Seeing the alerted crew, the robbers fired warning shots and escaped. On searching the ship, some containers were noticed broken into. The crew and ship are safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"14.562786358359809",1:"120.91023763020833",2:"Attack ID: 050-20 <br /> Sitrep: <small> 13.04.2020: 1910 UTC: Posn: 14:36.06N &ndash; 120:52.16E, Manila Anchorage, Philippines.<br /><br />\r\nTwo robbers in an unlit boat approached and boarded an anchored container ship. Duty OS on routine rounds noticed the boat and raised the alarm. Crew mustered and moved forward. Seeing the alerted crew the robbers escaped with ship&rsquo;s properties. No injuries to crew. Incident reported to VTMS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-2.5680555555555555",1:"-80.11888888888889",2:"Attack ID: 049-20 <br /> Sitrep: <small> 09.04.2020: 0330 UTC: Posn: 02:34.05S &ndash; 080:06.68W, River Passage Guayaquil, Ecuador.<br /><br />\r\nEight armed robbers in two speed boats approached a container ship underway. Master raised the alarm, and activated the SSAS. The robbers fired warning shots, managed to board the ship, and opened 15 containers. When the search lights were directed towards the robbers, they opened fire towards the bridge. Port Control and Coast Guard notified. The robbers stole part of the cargo and escaped. Later, the Coast Guard boarded the ship for investigation. No injuries to crew. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"18.625",1:"-93.32805555555555",2:"Attack ID: 048-20 <br /> Sitrep: <small> 04.04.2020: 0206 UTC: Posn: 18:37.5N &ndash; 093:19.7W, HSP Platform, Offshore Dos Bocas, Mexico.<br /><br />\r\nCrew onboard a pipelaying vessel noticed a boat with eight armed persons approaching at high speed. Alarm sounded, accommodation locked down and all crew mustered. As the boat approached from the stern it started firing at the vessel. Using the thrusters the Master was able to prevent the boat from coming alongside resulting in the boat aborting and moving away. Port Control notified via VHF and a patrol boat was dispatched to the location. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"21.400277777777777",1:"72.33333333333333",2:"Attack ID: 047-20 <br /> Sitrep: <small> 27.03.2020: 1430 UTC: Posn: 21:24.1N &ndash; 072:20.0E, Around 8nm East of Alang, India.<br /><br />\r\nCrew onboard a tug towing the barge noticed unauthorised persons boarding the barge, stealing barge properties and escaping. Alarm raised and incident reported to VTS and Coast Guard, who dispatched a boat to investigate. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-8.752222222222223",1:"13.2675",2:"Attack ID: 046-20 <br /> Sitrep: <small> 25.02.2020: 2340 UTC: Posn: 08:45.8S &ndash; 013:16.3E, Luanda Inner Anchorage, Angola.<br /><br />\r\nCrew onboard an anchored offshore supply ship noticed the padlock to the paint store broken. On checking the CCTV footage, it was noticed that four robbers had forced their way into the paint store and stole ship&rsquo;s stores. Incident reported to Port Control. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.751666666666667",1:"6.9025",2:"Attack ID: 045-20 <br /> Sitrep: <small> 27.03.2020: 1700 UTC: Posn: 02:45.6N &ndash; 006:54.9E, Around 97nm South of Bonny Island, Nigeria.<br /><br />\r\nAbout ten pirates armed with AK-47 in a skiff doing 21 knots, chased and fired upon a container ship underway. Master raised the alarm, activated distress alert, increased speed and took evasive manoeuvres, resulting in the pirates aborting the attempted attack and moving away. The crew and ship are safe. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"21.69527777777778",1:"91.84277777777778",2:"Attack ID: 044-20 <br /> Sitrep: <small> 07.02.2020: 1310 UTC: Posn: 21:41.72N &ndash; 091:50.34E, Matarbari Anchorage, Bangladesh.<br /><br />\r\nDuty AB onboard an anchored tug noticed robbers armed with knives boarding the tug and immediately informed the Duty Officer. Alarm raised and crew mustered. Robbers stole ship&rsquo;s stores and escaped. Incident reported to the Coast Guard who boarded the tug for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.118611111111111",1:"5.585555555555556",2:"Attack ID: 043-20 <br /> Sitrep: <small> 25.03.2020: 1006 UTC: Posn: 03:07.7N &ndash; 005:35.8E, Around 75nm SSW of Bayelsa, Nigeria.<br /><br />\r\nSeven armed pirates in a black speed boat approached and attempted to board a bulk carrier underway. Alarm raised and all non-essential crew mustered in the citadel. Master activated SSAS alert, increased speed and commenced evasive manoeuvres, resulting in the pirates aborting the approach. Vessel and crew safe. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"13.692690587327043",1:"121.00204467773438",2:"Attack ID: 042-20 <br /> Sitrep: <small> 22.03.2020: 1885 UTC: Posn: Batangas Port, Philippines.<br /><br />\r\nDuty crew onboard a berthed product tanker noticed a robber with a long knife near the forecastle and immediately informed the OOW. Alarm raised and all crew mustered. Seeing the alerted crew, the robber escaped. Vessel and crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.5558333333333332",1:"8.4225",2:"Attack ID: 041-20 <br /> Sitrep: <small> 22.03.2020: 0557 UTC: Posn: 00:33.21N &ndash; 008:25.21E, Around 62nm WNW of Libreville, Gabon.<br /><br />\r\nPirates boarded a container ship underway. Most crew managed to retreat into the citadel. Regional Authorities notified and assistance was dispatched to the ship. When the crew emerged from the citadel seven crew were reported missing. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"0.11535636737820079",1:"-50.8721923828125",2:"Attack ID: 040-20 <br /> Sitrep: <small> 17.03.2020: 0330 UTC: Posn: Macapa Anchorage, Brazil.<br /><br />\r\nDuty AB on routine rounds onboard an anchored bulk carrier noticed a small boat near the bow and notified the OOW. As he headed forward to check, three robbers intercepted him and took him hostage. The OOW raised the alarm when he noticed some movements near the forecastle and the AB did not respond to his calls on the walkie-talkie. Crew mustered and moved forward. Hearing the alarm and seeing the crew alertness, the robbers released the captured AB and escaped with the AB&rsquo;s walkie-talkie and ship&rsquo;s stores. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"16.966666666666665",1:"82.3",2:"Attack ID: 039-20 <br /> Sitrep: <small> 27.02.2020: 2230 UTC: Posn: 16:58N &ndash; 082:18E, Kakinada Anchorage, India.<br /><br />\r\nSeven persons in a dinghy boat approached and boarded an anchored offshore tug. They stole lube oil drums and escaped. Incident reported to Kakinada Coast Guard. Two coast guard ships were deployed to search the fishing boats in the vicinity. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.302222222222222",1:"3.3583333333333334",2:"Attack ID: 038-20 <br /> Sitrep: <small> 19.03.2020: 0045 UTC: Posn: 06:18.80N &ndash; 003:21.30E, Lagos Anchorage, Nigeria.<br /><br />\r\nA robber boarded an anchored tanker. Duty crew spotted the robber and raised the alarm. Crew mustered. Hearing the alarm, the robber escaped with stolen cargo. Port control and Nigerian navy notified. A patrol boat was dispatched and Nigeria Naval personnel boarded the vessel for investigations.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.367222222222222",1:"1.6",2:"Attack ID: 037-20 <br /> Sitrep: <small> 05.03.2020: 0730 UTC: Posn: 05:22.2N &ndash; 001:36.0E, Around 49nm SE of Lome, Togo.<br /><br />\r\nMaster onboard a product tanker underway noticed a skiff on a parallel course. On altering her course, the skiff was seen altering course also and approaching the tanker. Alarm raised and the non-essential crew members mustered in the citadel. As the skiff closed in, ten persons were noticed in the skiff. A weapon was observed in the skiff as well. The Master increased speed and commenced evasive manoeuvres, resulting in the skiff aborting the approach. Vessel and crew safe. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.925",1:"98.7713888888889",2:"Attack ID: 036-20 <br /> Sitrep: <small> 13.03.2020: 1310 UTC: Posn: 03:55.50N &ndash; 098:46.30E, Belawan Anchorage, Indonesia.<br /><br />\r\nDuty watchman onboard an anchored container ship noticed an armed robber on the forecastle.  He immediately informed the duty officer who sounded the alarm. Hearing the alarm and seeing the alerted crew, the robber escaped by boat. A second robber was spotted escaping via the anchor chain. Crew mustered and a search was carried out. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.1691666666666667",1:"103.43333333333334",2:"Attack ID: 035-20 <br /> Sitrep: <small> 15.03.2020: 2030 UTC: Posn: 01:10.9N &ndash; 103:26.0E, Singapore Straits.<br /><br />\r\nThree robbers armed with crowbar and pipes boarded a bulk carrier underway. The engine crew noticed the robbers and managed to lock them inside the engine room workshop. Alarm raised and crew mustered. Two accomplices in a skiff tried to approach the vessel but were repelled by the crew. Singaporean and Indonesian Authorities notified. Two Indonesian Authority armed guards boarded the vessel and arrested the three robbers. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-12.051408050951387",1:"-77.18238830566406",2:'Attack ID: 034-20 <br /> Sitrep: <small> 13.03.2020: 0815 UTC: Posn: 12:01.6S - 077:16.4W, Callao Anchorage, Peru.<br /><br />\r\nNine robbers, in three small boats, came alongside and boarded an anchored reefer ship. They took hostage three crew members, tied them up and assaulted them. Alarm raised. Seeing the alerted crew, the robbers escaped with stolen ship"s stores. During the incident, two crew members received injuries. The incident reported to Port Authorities. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.083333333333333",1:"125.2",2:"Attack ID: 033-20 <br /> Sitrep: <small> 11.03.2020: 2100 UTC: Posn: 06:04.95N &ndash; 125:11.96E, General Santos Harbour Anchorage, Philippines.<br /><br />\r\nDuty officer and duty A/B on board an anchored tanker noticed some movements on the forecastle and raised the alarm. Hearing the alerted crew, the persons escaped. Incident reported to Port Control. A search was carried out. The padlock to the Bosun store was reported broken. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.2728203562675775",1:"-4.031960042317713",2:"Attack ID: 032-20 <br /> Sitrep: <small> 07.03.2020: 0150 UTC: Posn: 05:16.0N &ndash; 004:02.2W, Abidjan Anchorage, Ivory Coast.<br /><br />\r\nA robber in a canoe approached and boarded an anchored offshore tug. The alert crew noticed the presence of the robber and raised the alarm. All crew mustered and a security search was carried out throughout the vessel. Port Control informed and a security boat was sent to the location. It was reported that a mobile phone was stolen from the vessel. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.603611111111111",1:"2.343888888888889",2:"Attack ID: 031-20 <br /> Sitrep: <small> 05.03.2020: 1246 UTC: Posn: 05:36.13N &ndash; 002:20.38E, Around 45nm SSW of Cotonou, Benin.<br /><br />\r\nSix armed persons boarded a product tanker underway. Distress signal activated and regional authorities notified. All non-essential crew mustered in citadel. The Benin Navy responded, boarded the tanker and rescued the crew. One crew reported kidnapped. On 30 Mar 2020, the Owners confirmed that the kidnapped crew was released safely on 28.03.2020. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.1847222222222222",1:"103.44",2:"Attack ID: 030-20 <br /> Sitrep: <small> 27.02.2020: 1630 UTC: Posn: 01:10.65N &ndash; 103:25.84E, Singapore Straits.<br /><br />\r\nDuty lookout onboard the bridge of a bulk carrier underway noticed four unauthorized persons near the accommodation block. Alarm raised, crew mustered and Singapore VTIS notified. Hearing the alerted crew the unauthorised persons escaped. The Singapore Coast Guard boarded the vessel for inspection. On searching the vessel, nothing was reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"20.61111111111111",1:"71.0525",2:"Attack ID: 029-20 <br /> Sitrep: <small> 19.02.2020: 0250 UTC: Posn: 20:36.40N &ndash; 071:03.96E, Around 7.7nm SSE of Diu, Gujarat, India.<br /><br />\r\nNine persons in a fishing boat approached a tanker under tow by a tug. Two persons boarded the tanker. The Master of the tug immediately reported the incident to the Indian Coast Guard via vhf ch-16. A Coast Guard ship responded, arrived at the location, apprehended the nine persons and handed them over to the Marine Police for further legal action. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-12.018888888888888",1:"-77.20083333333334",2:"Attack ID: 028-20 <br /> Sitrep: <small> 01.03.2020: 0540 UTC: Posn: 12:01.8S &ndash; 077:12.3W, Callao Anchorage, Peru.<br /><br />\r\nDuty crew on routine safety rounds onboard an anchored bulk carrier noticed two small boats secured near the bow and three persons climbing the anchor chain. One person was seen waiting in the boat. Alarm raised and all crew moved towards the forecastle. Seeing the alerted crew, the persons retreated and escaped in their boats. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"17.051388888888887",1:"82.40166666666667",2:'Attack ID: 027-20 <br /> Sitrep: <small> 19.02.2020: 1830 UTC: Posn: 17:03.5N &ndash; 082:24.6E, Kakinada Anchorage, India.<br /><br />\r\nDuring routine rounds, crew noticed ship"s stores missing. On investigating, it was noticed that a robber had boarded the vessel, stolen ship&rsquo;s stores and escaped. Incident reported to Regional Authorities. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"18.566666666666666",1:"-72.38388888888889",2:'Attack ID: 026-20 <br /> Sitrep: <small> 25.02.2020: 0707 UTC: Posn: 18:34.0N &ndash; 072:23.2W, Echo Anchorage, Port Au Prince, Haiti.<br /><br />\r\nTwo robbers armed with a gun boarded an anchored tanker. Alert duty crew noticed the robbers, raised the alarm and retreated into the accommodation. All crew mustered. Seeing the alerted crew, the robbers escaped with ship"s properties in a wooden boat along with another accomplice. The incident was reported to the CSO and Port Control. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-8.167777777777777",1:"12.685",2:"Attack ID: 025-20 <br /> Sitrep: <small> 27.02.2020: 0824 UTC: Posn: 08:10.4S &ndash; 012:41.6E, Around 48.24nm NNW of Luanda, Angola.  <br /><br />\r\nEight pirates in a small boat approached and attempted to board a product tanker underway. All non-essential crew mustered in the citadel and CSO notified. Master commenced evasive manoeuvres, resulting in the pirates aborting the approach. Vessel and crew safe. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"2.8175",1:"4.668055555555555",2:"Attack ID: 024-20 <br /> Sitrep: <small> 21.02.2020: 0220 UTC: Posn: 02:49.3N &ndash; 004:40.5E, Around 130nm SW of Brass, Nigeria.<br /><br />\r\nDuty office onboard a container ship underway noticed a speed boat approaching at high speed. Alarm raised, speed increased, all non-essential crew mustered in the citadel and CSO notified. As the boat closed the Master commenced evasive manoeuvres. The approaching boat called the ship over VHF Ch 16 and demanded the ship to be stopped. Shots were heard being fired towards the ship. After around one hour the boat aborted and moved away. All crew safe. <br /><br />\r\n </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.141944444444444",1:"2.1038888888888887",2:"Attack ID: 023-20 <br /> Sitrep: <small> 20.02.2020: 0103 UTC: Posn: 05:08.31N &ndash; 002:06.14E, Around 75nm SSW of Cotonou, Benin. <br /><br />\r\nWhile underway, armed pirates attacked a tanker and kidnapped nine crew members. Vessel sailed to a safe port. Investigations are ongoing. On 06.03.2020 the nine kidnapped crew members were released safely. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.298055555555556",1:"3.2377777777777776",2:"Attack ID: 022-20 <br /> Sitrep: <small> 18.02.2020: 0020 UTC: Posn: 06:17.53N &ndash; 003:14.16E, Lagos Secure Anchorage Area, Nigeria.<br /><br />\r\nThree persons in a small boat approached an anchored tanker and attempted to board via the anchor chain. Duty crew on routine rounds noticed the attempted boarding and raised the alarm. Seeing the alerted crew the persons aborted the boarding and escaped in their boat. The incident reported to Port Control. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-8.716666666666667",1:"13.283333333333333",2:'Attack ID: 021-20 <br /> Sitrep: <small> 15.02.2020: 0300-0500 UTC: Posn: 08:43.4S - 013:17.5E, Luanda Anchorage, Angola.<br /><br />\r\nDuty crew onboard an anchored support vessel noticed the paint store broken into and ship"s stores stolen. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2583333333333333",1:"104.16166666666666",2:'Attack ID: 020-20 <br /> Sitrep: <small> 08.02.2020: 1820 UTC: Posn: 01:15.6N - 104:09.7E, Singapore Straits.<br /><br />\r\nDuty crew onboard a bulk carrier underway noticed six armed robbers in the engine room and raised the alarm. Crew mustered and incident reported to Singapore VTIS. Seeing the alerted crew, the robbers escaped with stolen ship"s properties. Singapore Police Coast Guard boarded the vessel for inspection. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.55",1:"5.316666666666666",2:"Attack ID: 019-20 <br /> Sitrep: <small> 14.02.2020: 0759 UTC: Posn: 01:33N &ndash; 005:19E, Around 102nm NW of Sao Tome Island, Sao Tome and Principe.<br /><br />\r\nArmed pirates in two boats approached and boarded a container ship underway. Master raised the alarm, sent distress message, stopped the ship and all crew members mustered in the citadel. Upon receiving the distress message, the IMB Piracy Reporting Centre (IMB PRC) immediately alerted the Authorities in the Region, and commenced liaising with the authorities and vessel operators. A security vessel with a Nigerian Navy team was dispatched to assist.  The Sao Tome Navy/Authorities requested a nearby Portuguese patrol boat to assist as well. The crew emerged from the citadel after the Nigerian navy personnel boarded and searched the ship. Some ships equipment were reported as damaged. Under the escort of the security vessel the ship proceeded to a safe port.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2722222222222221",1:"104.27083333333333",2:"Attack ID: 018-20 <br /> Sitrep: <small> 07.01.2020: 2015 UTC: Posn: 01:16.20N &ndash; 104:16.15E, Singapore Straits.<br /><br />\r\nDuty motorman on routine engine room rounds, onboard a product tanker underway, noticed an unauthorized person armed with a knife in the steering gear room. As the motorman challenged the person, a second person was noticed escaping towards the poop deck. Alarm raised. Incident reported to Singapore VTIS. On searching the tanker, nothing was reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.2686111111111111",1:"104.17444444444445",2:"Attack ID: 017-20 <br /> Sitrep: <small> 08.02.2020: 1830 UTC: Posn : 01:15.67N &ndash; 104:10.28E, Singapore Straits.<br /><br />\r\nDuty crew onboard a product tanker underway noticed an unauthorised person in the engine room. Alarm raised, crew mustered, and incident reported to Singapore VTIS. On searching the vessel it was noticed that ship&rsquo;s properties were stolen.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.141666666666667",1:"2.297222222222222",2:"Attack ID: 016-20 <br /> Sitrep: <small> 19.01.2020: 2010 UTC: Posn: 05:08.3N &ndash; 002:17.9E, Around 73nm South of Cotonou, Benin.<br /><br />\r\nTwo pirates armed with AK47 rifles in a boat approached and boarded a drifting container ship. Alarm raised, deck lights switched off, accommodation locked down and engines started and headed towards Tema. Ghana navy was notified and requested to board to search the vessel on arrival. All crew safe. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.251944444444445",1:"3.3169444444444443",2:"Attack ID: 015-20 <br /> Sitrep: <small> 01.02.2020: 0130 UTC: Posn: 06:15.7N &ndash; 003:19.1E, Lagos Anchorage, Nigeria.<br /><br />\r\nTwo robbers in a boat boarded an anchored tanker. They tried to seize the duty AB on routine rounds, who managed to escape. Alarm raised. Hearing the alerted crew, the robbers escaped without stealing anything. Incident reported to Nigerian Navy. A patrol boat was dispatched to the location. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.0747222222222221",1:"103.91055555555556",2:"Attack ID: 014-20 <br /> Sitrep: <small> 02.02.2020: 2120 UTC: Posn: 01:03.89N &ndash; 103:53.98E, Around 0.4nm SW of PT Dharma Sentosa Marindo Yard, Pulau Batam, Indonesia.<br /><br />\r\nAlert crew onboard a tug moored to a buoy noticed three robbers on deck and raised the alarm. The crew confronted the robbers who were able to escape with the assistance of two of their accomplices waiting in their boat. Incident reported to the police who boarded the tug for investigations. A search was carried out. It was noticed the padlock to the storeroom was damaged and ship&rsquo;s equipment stolen. All crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"1.0841056485083254",1:"104.1457986831665",2:"Attack ID: 013-20 <br /> Sitrep: <small> 20.01.2020: 2145 UTC: Posn: Kabil Anchorage, Pulau Batam, Indonesia.<br /><br />\r\nWhile anchored, a product tanker was boarded by two robbers. While they were stealing ship&rsquo;s properties the crew noticed the robbers and managed to apprehend one of the robbers. The other robber escaped in a waiting boat along with two other accomplices. The crew handed over the robber to the Indonesian Marine Police who boarded the vessel for investigations. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.683888888888889",1:"7.151111111111111",2:'Attack ID: 012-20 <br /> Sitrep: <small> 29.01.2020: 0300 UTC: Posn: 04:41.2N - 007:09.4E, Onne Port, Nigeria.<br /><br />\r\nDuty AB onboard a berthed offshore supply vessel noticed an unauthorised person on deck. Alarm raised and hearing the alerted crew, the person escaped with stolen ship"s properties. Incident reported to Port Authority and a search was carried out. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-12.25",1:"-77.18333333333334",2:"Attack ID: 011-20 <br /> Sitrep: <small> 28.01.2020: 0818 UTC: Posn: 12:00.15S &ndash; 077:10.59W, Callao Anchorage, Peru.<br /><br />\r\nTwo unauthorised persons from two skiffs came alongside and boarded an anchored tanker. Duty watchman on security rounds noticed the persons on the forecastle deck. Alarm raised and crew mustered. Seeing the alerted crew, the persons jumped overboard and escaped. Port Authorities notified. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"10.317222222222222",1:"-75.52805555555555",2:"Attack ID: 010-20 <br /> Sitrep: <small> 19.01.2020: 0500 UTC: Posn: 10:19.02N &ndash; 075:31.41W, Cartagena Anchorage, Colombia. <br /><br />\r\nTwo robbers armed with a machete were seen on the forecastle of  an anchored tanker. Alarm raised and crew mustered. Seeing the alerted crew the robbers escaped. Incident reported to the Coast Guard who board the vessel. Nothing was reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.291944444444445",1:"3.3313888888888887",2:"Attack ID: 009-20 <br /> Sitrep: <small> 25.01.2020: 0050 UTC: Posn: 06:16.91N &ndash; 003:19.53E, Lagos Anchorage, Nigeria.<br /><br />\r\nDuty crew onboard an anchored tanker carrying out STS operations noticed an unauthorised person near the forecastle. Alarm sounded. Seeing the alerted crew the person jumped overboard and escaped with his accomplices in a wooden boat. A naval patrol boat arrived at the location, searched the waters around the tanker and remained close to the tanker until daybreak. Nothing reported stolen. Crew and vessel safe.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.9469444444444446",1:"98.75666666666666",2:"Attack ID: 008-20 <br /> Sitrep: <small> 26.01.2020: 0324 UTC: Posn: 03:56.49N &ndash; 098:45.24E, Belawan Anchorage, Indonesia.<br /><br />\r\nDeck watchmen on routine rounds onboard an anchored tanker noticed the forward storeroom broken into and ships properties missing. On searching the area, footsteps were noticed on the forecastle and it was assumed that the thieves gained access via the anchor chain. <br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"6.293458760394113",1:"3.31787109375",2:"Attack ID: 007-20 <br /> Sitrep: <small> 17.01.2020: Early Morning Hrs: Posn: Lagos Secure Anchorage Area, Nigeria.<br /><br />\r\nRobbers in a small boat approached an anchored tanker during STS cargo operations. Two of the robbers attempted to board the tanker via the anchor chain. Duty crew on routine rounds noticed the robbers and raised the alarm. Crew mustered and patrol boat informed. Seeing the alerted crew, the robbers aborted the attempted boarding and escaped in their boat. Authorities notified.<br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"21.403333333333332",1:"72.28722222222223",2:"Attack ID: 006-20 <br /> Sitrep: <small> 07.01.2020: 0130 UTC: Posn: 21:23.90N &ndash; 072:17.14E, Alang Anchorage, India.<br /><br />\r\nWhile anchored, persons in a small boat approached and boarded a barge, stole some scrap metal and escaped. Master noticed the persons and reported the incident to the Authorities who managed to apprehend the thieves. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"5.486818520017563",1:"119.07875061035156",2:"Attack ID: 004-20 <br /> Sitrep: <small> 16.01.2020: Around 1200 UTC: Around 4nm NW of Tambisan, Lahad Datu, Malaysia.<br /><br />\r\nA fishing vessel was attacked by six armed persons in a grey coloured speed boat. Malaysian Authorities managed to locate and intercept the fishing vessel. Three crews were found safe on the vessel. The remaining five crews were reported kidnapped.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"3.6333333333333333",1:"6.67",2:"Attack ID: 003-20 <br /> Sitrep: <small> 16.01.2020: 2057 UTC: Posn: 03:38.0N &ndash; 006:40.2E, Around 52nm SW of Bonny, Nigeria.<br /><br />\r\nFive armed pirates in a small craft approached a tanker underway. Alarm raised and evasive manoeuvres commenced. Armed security team onboard the tanker fired warning shots resulting in the pirates returning fire and then aborting the approach and moving away. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"4.1",1:"5.748055555552228",2:"Attack ID: 002-20 <br /> Sitrep: <small> 21.01.2020: 0835 UTC: Posn: 04:05.62N - 005:44.52E, Around 19nm SW of Bayelsa, Nigeria.<br /><br />\r\nAround 15 armed persons in a speed boat chased and fired upon a container vessel underway. Alarm raised and the non-essential crew took shelter in the citadel. The vessel increased speed and the armed naval guard onboard returned fire, resulting in the skiff aborting the attack and moving away. Vessel and crew safe. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0},{0:"-14.369166666666667",1:"40.71527777777778",2:"Attack ID: 001-20 <br /> Sitrep: <small> 13.01.2020: 0004 UTC: Posn: 14:22.91S &ndash; 040:42.55E, Nacala Anchorage, Mozambique.<br /><br />\r\nDuty watchman during rounds on deck noticed two robbers armed with long knives approaching him. He immediately informed the duty officer who raised the alarm and alerted other crew. Upon inspection it was discovered that a mooring rope was missing from the forward store. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"185",title:"",groupClass:"type",c:0}]),u([{0:"-4.725833333333333",1:"11.739166666666666",2:'Attack ID: 001-21 <br /> Sitrep: <small> 04.01.2021: 0048 UTC: Posn: 04:42.93S &ndash; 011:44.21E, Pointe Noire North Anchorage, The Congo.<br /><br />\r\nRobbers armed with knives boarded an anchored container ship. General alarm sounded and all crew mustered in the citadel. The robbers stole ship"s stores and escaped. The incident was reported to Port Control. All crew reported safe. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-0.25222222222222224",1:"117.5675",2:'Attack ID: 002-21 <br /> Sitrep: <small> 03.01.2021: 1940 UTC: Posn: 00:15.8S &ndash; 117:34.3E, Muara Berau Anchorage, Indonesia.<br /><br />\r\nThree robbers armed with knives boarded an anchored bulk carrier. Duty crew spotted the robbers near the forecastle store escaping with ship"s stores. Incident reported to local authorities. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"18.633333333333333",1:"-72.61666666666666",2:"Attack ID: 003-21 <br /> Sitrep: <small> 05.01.2021: 0053 UTC: Posn: 18:38N &ndash; 072:37W, Port-au-Prince Bay, Haiti<br /><br />\r\nDuty officer onboard an anchored bulk carrier noticed a suspicious echo on the radar and asked the security patrol to investigate. The security patrol noticed a boat with around six robbers armed with a gun boarding using a ladder with hooks. Alarm raised, crew retreated into the accommodation. The robbers threatened the Chief Engineer who was attempting to secure an open accommodation door. Incident reported to the coast guard and PFSO. The Coast Guard responded and boarded the vessel to carry out a search and investigate. Ship&rsquo;s properties reported stolen. Crew and vessel safe.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"12.100277777777778",1:"44.43472222222222",2:"Attack ID: 004-21 <br /> Sitrep: <small> 14.01.2021: 0849 UTC: Posn: 12:06.1N &ndash; 044:26.5E, Gulf of Aden.<br /><br />\r\nWhile underway, a bulk carrier noticed a skiff approaching. Alarm sounded and all crew mustered. At a distance of 0.2nm weapons and ladders were noticed in the skiff. The onboard armed team fired warning shots, resulting in the skiff aborting and moving away. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"2.3994444444444443",1:"5.516666666666667",2:"Attack ID: 005-21 <br /> Sitrep: <small> 13.01.2021: 1900 UTC: Posn: 02:23.58N &ndash; 005:31.00E, Around 120nm SSW of Brass, Nigeria.<br /><br />\r\nWhile underway, a container ship was approached and fired upon by pirates in a small craft. Alarm sounded and all crew mustered in the citadel. The incident was reported to the Regional Authorities. Ship and crew reported safe. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-0.06666666666666667",1:"-51.166666666666664",2:"Attack ID: 006-21 <br /> Sitrep: <small> 13.01.2021: 0400 UTC: Posn: Santana Port, Brazil.<br /><br />\r\nUnnoticed, robbers boarded a berthed bulk carrier, stole ship&rsquo;s properties, and escaped. The theft was noticed by the duty crew during routine rounds. Incident reported to local police who boarded the ship for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.0702777777777777",1:"5.072777777777778",2:"Attack ID: 007-21 <br /> Sitrep: <small> 23.01.2021: 0535 UTC: Posn: 01:04.13N &ndash; 005:04.22E, Around 98nm NW of Sao Tome Island, Sao Tome and Principe.<br /><br />\r\nWhile underway, a container ship was boarded by an unknown number of pirates. One crew killed, 15 crews kidnapped. Remaining three crew managed to navigate to a safe port. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2908333333333333",1:"104.31972222222223",2:"Attack ID: 008-21 <br /> Sitrep: <small> 28.01.2021: 1820 UTC: Posn: 01:16.87N - 104:18.71E, Singapore Straits.<br /><br />\r\nThree robbers armed with long knives boarded a general cargo ship underway. Duty crew spotted the robbers in the engine room and raised the alarm. Crew mustered. Seeing the crew alertness, the robbers escaped empty handed. Incident reported to VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"2.9166666666666665",1:"1.935",2:"Attack ID: 009-21 <br /> Sitrep: <small> 30.01.2021: 0424 UTC: Posn: 02:55.0N &ndash; 001:56.6E, Around 200nm SE of Accra, Ghana.<br /><br />\r\nCrew onboard a bulk carrier underway noticed pirates boarding and retreated into the citadel. Upon hearing of the incident the IMB PRC immediately alerted and liaised with Regional Authorities and the vessel operators. A Ghana Navy patrol boat was dispatched but was unable to assist due to technical difficulties. Owners advised the Master to sail towards Nigerian waters to rendezvous with a Nigerian security team, which allowed the crew to emerge from the citadel and sail, under escort, to a safe port. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2802777777777778",1:"104.25166666666667",2:"Attack ID: 010-21 <br /> Sitrep: <small> 24.01.2021: 1925 UTC: Posn: 01:16.49N &ndash; 104:15.60E, Singapore Straits.<br /><br />\r\nFive robbers armed with knives boarded a bulk carrier underway. Crew mustered and a search was carried out. Nothing reported stolen. Incident reported to CSO and VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"2.0005555555555556",1:"8.250555555555556",2:"Attack ID: 011-21 <br /> Sitrep: <small> 06.02.2021: 2254 UTC: Posn: 02:00.02N - 008:15.02E, Around 50nm NE of Principe Island, Sao Tome and Principe.<br /><br />\r\nEight armed pirates boarded a product tanker underway. Alert crew noticed the pirates and retreated into the citadel. The pirates damaged communication and navigation equipment. Upon hearing of the incident the IMB PRC immediately alerted and liaised with Regional Authorities including a Portuguese Navy warship. Crew managed to navigate the tanker to try and rendezvous with dispatched Cameroonian and Equatorial Guinean patrol boats. The tanker was later escorted to a safe port. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-0.9833333333333333",1:"7.534166666666667",2:"Attack ID: 012-21 <br /> Sitrep: <small> 08.02.2021: 0444 UTC: Posn: 00:59.8S &ndash; 007:32.3E, Around 75nm WSW of Port Gentil, Gabon.<br /><br />\r\nCrew onboard a drifting tanker noticed a mother vessel launching a skiff with four persons, which approached at high speed. Master raised the alarm, increased speed, took evasive manoeuvres and non-essential crew mustered in the citadel. The skiff managed to come alongside the vessel but due to the hardening measures taken by the Master, the boarding was avoided. Crew and tanker reported safe. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-0.8571666666666667",1:"7.336666666666667",2:"Attack ID: 013-21 <br /> Sitrep: <small> 08.02.2021: 0620 UTC: Posn: 00:51.43S - 007:20.20E, Around 83nm WSW of Port Gentil, Gabon.<br /><br />\r\nA fishing vessel with fourteen crew onboard was boarded and hijacked by pirates. The IMB Piracy Reporting Centre liaised with Regional Authorities and international warship in the region. The hijacked fishing vessel was later intercepted by Gabon Authorities on the 12 February 2021. Nine crew members were reported kidnapped earlier and the remaining five crew members sailed the vessel to Gabon waters. Gabon Authorities are investigating. </small>",3:"media/com_fabrik/images/red-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"10.261666666666667",1:"-76.38166666666666",2:"Attack ID: 015-21 <br /> Sitrep: <small> 09.01.2021: 0855 UTC: Posn: 10:15.7N &ndash; 076:22.9W, Around 45nm West of Cartagena Sea Buoy Pilot Boarding Ground, Colombia.<br /><br />\r\nAround ten persons in a small craft approached and boarded a drifting container ship. Alarm activated, public announcement made, crew mustered and security messages sent. Port Control instructed the ship to proceed to pilot station. The crew conducted a search and reported ship&rsquo;s properties stolen. The search party also noticed that some intruders were still onboard and all crew immediately retreated into the accommodation. Upon arriving at the pilot station, a coast guard boat arrived and escorted the ship to the inner anchorage, where the police and coast guard boarded and searched the ship. Five intruders were found and detained. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.5833333333333335",1:"5.116666666666666",2:"Attack ID: 014-21 <br /> Sitrep: <small> 09.02.2021: 1222 UTC: Posn: 01:35N - 005:07E, Around 112nm NW of Sao Tome Island, Sao Tome and Principe.<br /><br />\r\nCrew onboard a product tanker underway noticed pirates boarding and retreated into the citadel. The IMB Piracy Reporting Centre immediately alerted and liaised with the operators, Regional Authorities and an international warship in the vicinity which was able to escort the tanker until an Equatorial Guinea patrol boat took over and stayed with the tanker until it was safely anchored. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2708333333333333",1:"104.28666666666666",2:"Attack ID: 017-21 <br /> Sitrep: <small> 28.01.2021: 1420 UTC: Posn: 01:16.15N - 104:16.72E, Singapore Straits.<br /><br />\r\nTen robbers armed with knives boarded a bulk carrier underway. General alarm sounded and all crew mustered. Incident reported to VTS. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"10.3",1:"-75.55",2:"Attack ID: 016-21 <br /> Sitrep: <small> 06.01.2021: Posn: 10:18.41N &ndash; 075:33.66W, Cartagena Charlie Anchorage, Colombia.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship and escaped with ship&rsquo;s properties. Onboard investigation revealed that the hawse pipe protection device was destroyed and the bosun store&rsquo;s padlock was damaged. The Authorities were informed through local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-0.7419444444444444",1:"6.141944444444444",2:"Attack ID: 018-21 <br /> Sitrep: <small> 08.02.2021: 1810 UTC: Posn: 00:43.91S &ndash; 006:07.91E, Around 50nm SW of Sao Tome Island, Sao Tome and Principe.<br /><br />\r\nAlert crew onboard a LNG tanker underway noticed a skiff approaching at high speed. Alarm raised, crew mustered and SSAS activated. As the skiff closed in, hooks and a ladder were noticed, and the pirates fired upon the tanker causing damage to the accommodation. Master increased speed and commenced evasive manoeuvres, resulting in the skiff aborting the attack and moving away. Crew and ship safe. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.026833333333334",1:"-77.22283333333333",2:"Attack ID: 019-21 <br /> Sitrep: <small> 04.02.2021: 1200 UTC: Posn: 12:01.61S &ndash; 077:13.37W, Callao Anchorage, Peru.<br /><br />\r\nUnnoticed, robbers boarded an anchored vehicle carrier, stole ship&rsquo;s stores and escaped. The theft was discovered by the duty AB on rounds. Incident reported to local agents. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"11.0225",1:"-74.78716666666666",2:"Attack ID: 020-21 <br /> Sitrep: <small> 13.02.2021: 0935 UTC: Posn: 11:01.35N &ndash; 074:47.23W, Magdalena River Passage, Colombia.<br /><br />\r\nFive robbers boarded a container ship under pilotage. Alert crew noticed the robbers. Master raised the alarm, crew mustered inside accommodation and pilot notified the port authorities. Seeing the alerted crew, the robbers escaped with stolen ship&rsquo;s properties. The vessel was instructed to anchor to allow the coast guard to board and investigate. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-8.734722222222222",1:"13.250277777777777",2:"Attack ID: 026-21 <br /> Sitrep: <small> 10.03.2021: 0700 UTC: Posn: 08:44.5S - 013:15.1E, Luanda Anchorage, Angola.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship. The theft was noticed by the duty Bosun during routine rounds. The crew conducted a search and reported ship&rsquo;s properties stolen. Incident reported to local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.1105555555555555",1:"103.75222222222222",2:"Attack ID: 021-21 <br /> Sitrep: <small> 21.02.2021: 0430 UTC: Posn: 01:06.38N - 103:44.68E, Singapore Straits.<br /><br />\r\nAn Indonesian navy patrol boat noticed a suspicious boat alongside a barge under tow and called the tug Master to reduce speed. Naval team boarded the barge and arrested five unauthorised persons. Tug and barge continued their voyage after investigations were completed. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-8.740857316825174",1:"13.30109235975477",2:"Attack ID: 022-21 <br /> Sitrep: <small> 26.02.2021: 0230&ndash;0300 UTC: Posn: 08:45.12S - 013:17.08E, Luanda Anchorage, Angola.<br /><br />\r\nUnnoticed, robbers boarded an anchored offshore supply ship. The theft was noticed by the duty AB during routine rounds. The crew conducted a search and reported ship&rsquo;s properties stolen. Incident reported to local port authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.017222222222221",1:"-77.20722222222223",2:"Attack ID: 023-21 <br /> Sitrep: <small> 13.02.2021: 0145 UTC: Posn: 12:00.62S &ndash; 077:11.86W, Callao Anchorage, Peru.<br /><br />\r\nRobbers armed with knives boarded an anchored tanker. Duty crew on routine rounds noticed the robbers on the forecastle, retreated into the accommodation and raised the alarm. Upon hearing the alarm, the robbers escaped in a wooden motorboat. Crew mustered and a search was carried out. It was reported that ship&rsquo;s stores were stolen. Local Authorities informed through local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"3.70667075923083",1:"9.295806884765625",2:"Attack ID: 024-21 <br /> Sitrep: <small> 06.03.2021: 0700 UTC: Posn: Douala Anchorage, Cameroon.<br /><br />\r\nUnnoticed, robbers boarded an anchored offshore supply ship. The theft was noticed by the bosun during routine rounds. Search conducted and several ship&rsquo;s properties reported stolen. Incident reported to local port authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"4.544444444444444",1:"119.62222222222222",2:"Attack ID: SUS-001 <br /> Sitrep: <small> THIS INCIDENT WILL NOT BE INCLUDED IN THE IMB STATISTICS<br /><br />\r\n<br /><br />\r\n03.03.2021: 0300 UTC: Posn: 04:32.40N &ndash; 119:37.20E, Around 11nm SE of Sibutu Island, Philippines.<br /><br />\r\nThree persons in a 15 meter long, silver hull speed boat with a red stripe approached a bulk carrier underway at high speed. As the boat closed in to 10 meters from the ship the persons showed some plastic drums and tried to come along side and fasten their boat by throwing ropes towards the ship. Duty officer raised the alarm, all crew mustered and all doors secured. Ship&rsquo;s whistle sounded continuously, and the Philippines Navy was contacted via VHF Ch.16. The boat continued its approach for around 20 minutes. On hearing the response from the Philippines Navy, the boat diverted and headed towards Sibutu Island.<br /><br />\r\n </small>",3:"media/com_fabrik/images/purple-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"6.093445999624126",1:"125.15800952911377",2:"Attack ID: 025-21 <br /> Sitrep: <small> 29.01.2021: 1910 UTC: Posn: 06:05.57N &ndash; 125:09.42E, Makar Wharf, General Santos City Port, Philippines.<br /><br />\r\nDuty crew onboard a berthed container ship noticed two robbers near the lifeboat deck and raised the alarm. Crew mustered. Hearing the alarm and seeing the alerted crew, the robbers jumped overboard and escaped in a waiting canoe. A search was carried out. It was reported that ship&rsquo;s properties were stolen. Incident reported to the Local Agent, Port Authority and Coast Guard. The Philippines Coast Guard apprehended one robber responsible for the theft and managed to recover the stolen items. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"4.860110046126267",1:"-1.734688720703117",2:"Attack ID: 027-21 <br /> Sitrep: <small> 11.03.2021: 0120 UTC: Posn: 04:44.1N - 001:35.6W, Takoradi Anchorage, Ghana.<br /><br />\r\nAn anchored drill ship was boarded by four unauthorised persons. Alert crew noticed the persons and informed the bridge. Incident reported to local port authorities and a security patrol team was dispatched. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-11.999166666666667",1:"-77.23611111111111",2:"Attack ID: 028-21 <br /> Sitrep: <small> 11.03.2021: 0210 UTC: Posn: 11:59.57S - 077:14.10W, Callao Anchorage, Peru.<br /><br />\r\nDuty crew on board an anchored bulk carrier noticed two robbers armed with knives on the forward mooring station and notified the duty officer. Alarm raised, PA announcement made and crew mustered. Upon hearing the alarm, the robbers escaped with stolen ship&rsquo;s stores. Incident reported to local VTS and a Coast Guard patrol boat was dispatched to search the waters around the vessel. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"2.8",1:"2.6",2:"Attack ID: 029-21 <br /> Sitrep: <small> 11.03.2021: 1512 UTC: Posn: 02:48N - 002:36E, Around 212nm South of Cotonou, Benin.<br /><br />\r\nNine armed pirates boarded a tanker underway. Alarm raised and distress messages activated. A Nigerian Security Vessel was dispatched to assist the tanker. By the time the security vessel arrived at the location the pirates kidnapped 15 crew and escaped. The tanker and remaining crew were escorted to a safe port. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.016944444444444",1:"-77.16805555555555",2:'Attack ID: 031-21 <br /> Sitrep: <small> 16.03.2021: 2230 UTC: Posn: 12:01.1S &ndash; 077:10.5W, Callao Anchorage, Peru.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier, broke into the forecastle store, stole ship"s properties and escaped. The theft was noticed by duty crew on routine security rounds. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"2.966666666666667",1:"2.8833333333333333",2:"Attack ID: 030-21 <br /> Sitrep: <small> 14.03.2021: 0731 UTC: Posn: 02:58N - 002:53E, Around 208nm South of Lagos, Nigeria.<br /><br />\r\nArmed pirates attacked and boarded an offshore support vessel underway. Alarm raised, Authorities notified, and all crew members retreated into the citadel. A Nigerian Security Vessel responded to provide assistance. The pirates managed to escape before the arrival of the Security Vessel. The crew members reported safe but there were some damages to the vessel. The vessel proceeded to a safe port under the escort of the Security Vessel. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.0025",1:"-77.21083333333333",2:"Attack ID: 032-21 <br /> Sitrep: <small> 17.03.2021: 0100 UTC: Posn: 12:00.92S &ndash; 077:11.99W, Callao Anchorage, Peru.<br /><br />\r\nEight robbers armed with knives boarded an anchored bulk carrier. Duty AB was taken hostage, tied up, and later released by the robbers before escaping with stolen ship&rsquo;s properties. Incident reported to local port authorities and a Coast Guard patrol boat was dispatched to assist. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-2.3333333333333335",1:"-79.96666666666667",2:"Attack ID: 033-21 <br /> Sitrep: <small> 06.03.2021: 2330 UTC: Posn: 02:20S &ndash; 079:58W, Around 10nm South of Guayaquil, Ecuador.<br /><br />\r\nSix armed robbers in two fast boats approached and boarded a container ship under pilotage. Master raised the alarm, activated the SSAS and contacted Guayaquil Authorities. The robbers took hostage a crew member and stole cargoes from the containers. Before escaping, they released the crew without any injury. It was reported that nine containers were opened and cargo damaged. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-6.033333333333333",1:"12.363888888888889",2:"Attack ID: 034-21 <br /> Sitrep: <small> 18.01.2021: 0300 UTC: Posn: 06:02.00S &ndash; 012:21.50E, Banana Anchorage, Democratic Republic of the Congo.<br /><br />\r\nThree robbers in a small wooden boat approached and boarded an anchored refrigerated cargo ship. Duty crew on routine rounds noticed the robbers at the forecastle store and retreated into the accommodation. Alarm raised and crew mustered. Upon hearing the alarm and seeing the crew alertness, the robbers escaped with the stolen ship&rsquo;s stores. Port Control contacted through VHF Ch.16. No response received. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"20.9025",1:"107.26861111111111",2:"Attack ID: 035-21 <br /> Sitrep: <small> 15.03.2021: 1701-2300 UTC: Posn: 20:54.9N &ndash; 107:16.7E, Campha Port, Vietnam.<br /><br />\r\nUnnoticed, robbers boarded a moored bulk carrier. They broke into two crew cabins, stole ship&rsquo;s and crew cash, and escaped. Local authorities informed and an investigation was carried out. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"26.333333333333332",1:"56.016666666666666",2:"Attack ID: SUS-002 <br /> Sitrep: <small> THIS INCIDENT WILL NOT BE INCLUDED IN THE IMB STATISTICS<br /><br />\r\n<br /><br />\r\n22.03.2021: 0900 UTC: Posn: 26:20N &ndash; 056:01E, Around 11nm NW of Harf Ghabi, Oman.<br /><br />\r\nDuty officer onboard a bulk carrier underway observed a skiff approaching at high speed. Alarm raised, ship&rsquo;s horn sounded, speed increased, PA announcement made. At a distance of around 40 meters, three armed and masked persons were observed in the skiff. The ship&rsquo;s VHF calls were acknowledged by a nearby European Mission warship which proceeded to render assistance. After around 20 mins, the skiff moved away. The communication with the warship continued until the ship was safe. <br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/purple-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2833333333333332",1:"104.30027777777778",2:"Attack ID: 037-21 <br /> Sitrep: <small> 24.03.2021: 1925 UTC: Posn: 01:17.0N &ndash; 104:18.1E, Singapore Straits.<br /><br />\r\nFive robbers armed with knives boarded a bulk carrier underway. Master raised the alarm, crew mustered, and a search was carried out. Nothing reported stolen. Incident reported to VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"3.9341666666666666",1:"98.75166666666667",2:"Attack ID: 036-21 <br /> Sitrep: <small> 30.01.2021: 1930 UTC: Posn: 03:56.3N &ndash; 098:45.6E, Belawan Anchorage, Indonesia.<br /><br />\r\nTwo robbers armed with knives threatened a duty AB on routine rounds onboard an anchored LNG carrier. The AB retreated into the accommodation and informed the duty officer. Alarm raised, crew mustered, and local authorities notified. Seeing the alerted crew, the robbers escaped with the stolen ship&rsquo;s properties. Port Control and Coast Guard responded and boarded the tanker to investigate. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.201111111111111",1:"103.55305555555556",2:"Attack ID: 038-21 <br /> Sitrep: <small> 30.03.2021: 0230 UTC: Posn: 01:12.47N &ndash; 103:32.71E, Singapore Straits.<br /><br />\r\nRobbers in two small boats approached the stern of the unmanned rig under tow. They detached and stole the emergency towline pickup buoy floating behind the rig and escaped. Incident reported to VTIS. Vessel and crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2702777777777778",1:"104.26555555555555",2:"Attack ID: 039-21 <br /> Sitrep: <small> 07.04.2021: 2150 UTC: Posn: 01:16.13N &ndash; 104:15.56E, Singapore Straits.<br /><br />\r\nTwo robbers boarded a tanker underway. Master raised the alarm resulting in the robbers escaping empty handed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2680555555555555",1:"104.25027777777778",2:"Attack ID: 040-21 <br /> Sitrep: <small> 07.04.2021: 1747 UTC: Posn: 01:16.5N &ndash; 104:16.1E, Singapore Straits.<br /><br />\r\nWhile underway, four robbers armed with knives entered into the engine room of a bulk carrier. The duty motorman saw the robbers, who pushed and hit the motorman on the head before escaping. Alarm raised, crew mustered and a search was carried out. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2638888888888888",1:"104.20111111111112",2:"Attack ID: 041-21 <br /> Sitrep: <small> 10.04.2021: 1715 UTC: Posn: 01:15.50N &ndash; 104:12.04E, Singapore Straits.<br /><br />\r\nFour robbers armed with knives boarded a bulk carrier underway. They broke into the engine room, stole engine spares, and escaped. The robbers were noticed by the duty crew who immediately informed the bridged and raised the alarm. Incident reported to VTIS and a patrol boat escorted the vessel until she was clear of the area. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.016388888888889",1:"-77.22",2:"Attack ID: 042-21 <br /> Sitrep: <small> 14.04.2021: 0040 UTC: Posn: 12:00.59S - 077:13.12W, Callao Anchorage, Peru.<br /><br />\r\nThree robbers armed with knives boarded an anchored LPG tanker. Two robbers assaulted a duty AB on routine rounds. Alarm raised and crew mustered. Seeing the alerted crew, the robbers escaped with the stolen ship&rsquo;s properties. Incident reported to authorities through local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.267777777777778",1:"104.23416666666667",2:"Attack ID: 043-21 <br /> Sitrep: <small> 16.04.2021: 2100 UTC: Posn: 01:16.4N &ndash; 104:14.3E, Singapore Straits.<br /><br />\r\nFour robbers boarded a bulk carrier underway. They assaulted and injured the fourth engineer, stole engine spares and escaped. Alarm raised, PA announcement made and crew mustered. On searching the vessel no robbers found. Incident reported to VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2675",1:"104.20222222222222",2:"Attack ID: 044-21 <br /> Sitrep: <small> 16.04.2021: 1740 UTC: Posn: 01:16.03N &ndash; 104:12.08E, Singapore Straits.<br /><br />\r\nDuty Engineer on routine rounds on a tanker underway, noticed someone was trying to open the steering gear entrance door from the poop deck and immediately informed the bridge. Alarm raised and all deck and accommodation lights switched on. Hearing the alarm, the perpetrators escaped. Crew mustered and a search was carried out. Nothing reported stolen. VTIS informed.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.45",1:"4.633333333333333",2:"Attack ID: 045-21 <br /> Sitrep: <small> 23.04.2021: 0903 UTC: Posn: 01:27N &ndash; 004:38E, Around 132nm NW of Neves, Sao Tome and Principe.<br /><br />\r\nCrew onboard a container ship underway noticed pirates in a skiff approaching. Alarm raised and all crew mustered in the citadel. Owners and authorities were notified, and an Italian navy frigate proceeded to intervene. The pirates boarded the ship but left after a few hours as they were unable to get access to any crew. The Italian navy frigate approached and escorted the ship towards its destination. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"5.787164074362619",1:"118.02592934926352",2:"Attack ID: 046-21 <br /> Sitrep: <small> 11.04.2021: 1948 UTC: Posn: 05:47.2N &ndash; 118:01.6E, MOT Terminal, Sandakan, Sabah, Malaysia.<br /><br />\r\nDuty crew onboard a berthed tanker noticed a robber on the forecastle and notified the OOW. Alarm raised and crew mustered. Seeing the alerted crew, the robber jumped overboard and escaped in a small skiff. Incident reported to local port authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-8.684166666666666",1:"13.285277777777777",2:"Attack ID: 047-21 <br /> Sitrep: <small> 29.04.2021: 0100 UTC: Posn: 08:41.3S &ndash; 013:17.7E, Luanda Outer Anchorage, Angola.<br /><br />\r\nDuty crew onboard an anchored container ship noticed two unauthorised persons on the forecastle deck and notified the bridge. Ship&rsquo;s horn sounded, crew mustered and a search was carried out. Incident reported to port authorities and a patrol boat was dispatched to investigate. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-11.991666666666667",1:"-77.20666666666666",2:'Attack ID: 048-21 <br /> Sitrep: <small> 04.05.2021: 0030 UTC: Posn: 11:59.5S &ndash; 077:12.4W, Callao Anchorage No. 8, Peru.<br /><br />\r\nFour robbers armed with knives boarded an anchored product tanker. They took the duty AB as hostage and tied him up. The robbers stole the AB&rsquo;s personal belongings and ship"s properties and escaped. The duty AB who was tied-up was later found by another AB. Alarm raised and PA announcement made. Owners and port authorities notified. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2555555555555555",1:"104.05",2:"Attack ID: 050-21 <br /> Sitrep: <small> 09.05.2021: 1439 UTC: Posn: 01:14.80N &ndash; 104:03.00E, Singapore Straits.<br /><br />\r\nDuty officer onboard a tanker underway identified a wooden boat approaching from astern and noticed the persons attempting to board using a rope attached to a hook and a wooden ladder. Alarm was raised, speed increased, course altered, deck lights switched on and search lights directed towards the boat. Seeing the alerted crew, the boat abandoned the attempted boarding and moved away. VTIS notified. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"14.551666666666668",1:"120.9413888888889",2:"Attack ID: 049-21 <br /> Sitrep: <small> 19.04.2021: 1855 UTC: Posn: 14:33.60N &ndash; 120:56.02E, Manila Bay Anchorage, Philippines.<br /><br />\r\nDuty security watchman onboard an anchored barge noticed six unauthorised persons moving cargo from the barge to their small boat. Alarm raised and the security guard managed to apprehend one robber while the remaining five jumped overboard, leaving their boat and stolen cargo behind. Incident reported to the Philippines Coast Guard who arrived to investigate. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"10.322222222222223",1:"-75.53888888888889",2:"Attack ID: 051-21 <br /> Sitrep: <small> 24.03.2021: 0545 UTC: Posn: 10:19.2N &ndash; 075:31.8W, Cartagena Inner Anchorage, Colombia.<br /><br />\r\nThree robbers armed with knives boarded an anchored LPG tanker. The duty AB noticed the three robbers and immediately notified the bridge. Alarm raised and crew mustered. Seeing the alerted crew, the robbers escaped in a boat with four other robbers. Ship&rsquo;s properties and stores were reported stolen. Incident reported to local authorities. The Colombian Coast Guard responded and boarded the tanker for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"4.551388888888889",1:"0.25166666666666665",2:"Attack ID: 052-21 <br /> Sitrep: <small> 19.05.2021: 1830 UTC: Posn: 04:33.5N &ndash; 000:15.6E, Around 66nm South of Tema, Ghana.<br /><br />\r\nWhile underway, a fishing vessel was approached, and fired upon and boarded by pirates in a small craft. The pirates stole crew personal belongings, kidnapped five crews and escaped. Ghanaian Navy was notified and a patrol boat was dispatched to escort the fishing vessel back to Tema. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-6.097333333333333",1:"106.88333333333334",2:"Attack ID: 053-21 <br /> Sitrep: <small> 12.02.2021: 2230 UTC: Posn: 06:05.84S &ndash; 106:53.65E, Tanjung Priok Container Berth, Jakarta, Indonesia.<br /><br />\r\nUnnoticed, robbers boarded a berthed container vessel, broke into engine room, stole engine spares and escaped. The robbery was noticed by duty crew on routine security rounds. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2780555555555555",1:"104.27666666666667",2:"Attack ID: 054-21 <br /> Sitrep: <small> 23.05.2021: 1430 UTC: Posn: 01:16.7N &ndash; 104:16.6E, Singapore Straits.<br /><br />\r\nFour robbers armed with knives boarded a bulk carrier underway and threatened a duty crew who retreated into the accommodation. Alarm raised and crew mustered resulting in the robbers escaping without stealing anything. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2769444444444444",1:"104.28027777777778",2:"Attack ID: 055-21 <br /> Sitrep: <small> 23.05.2021: 1647 UTC: Posn: 01:16.37N &ndash; 104:16.49E, Singapore Straits.<br /><br />\r\nDuty engine crew onboard a bulk carrier underway noticed unauthorized persons in the engine room. Alarm raised and crew mustered. Suspecting the persons to be still on board, the vessel anchored at the OPL. At daybreak, a full search was carried out. The vessel continued her voyage once it was determined that no unauthorized persons were onboard. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"4.55",1:"2.3833333333333333",2:"Attack ID: 056-21 <br /> Sitrep: <small> 31.05.2021: 1930 UTC: Posn: 04:33N &ndash; 002:23E, Around 104nm South of Cotonou, Benin.<br /><br />\r\nArmed pirates in two skiffs approached and boarded a fishing vessel. They ransacked the vessel, kidnapped five crew and escaped. The remaining crew reported the incident to the Authorities and a Ghanaian patrol boat escorted the vessel to a safe port. Crew reported that a mother vessel was sighted in the vicinity.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"2.963611111111111",1:"2.736111111111111",2:"Attack ID: 059-21 <br /> Sitrep: <small> 06.06.2021: 1600 UTC: Posn: 02:57.82N &ndash; 002:44.18E, Around 208nm SSW of Lagos, Nigeria.<br /><br />\r\nSix pirates in a skiff, armed with weapons approached and attempted to board a bulk carrier underway. Alarm raised and crew mustered. Master sent a distress message, increased speed and commenced evasive manoeuvres. Ladders with hook sighted on the skiff. The pirates showed their weapons to the Master. After 40 mins of attempting to board, the pirates aborted and moved away due to the hardening measures taken by the Master. Crew and ship safe. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-6.001111111111111",1:"106.88527777777777",2:"Attack ID: 057-21 <br /> Sitrep: <small> 29.03.2021: 1850 UTC: Posn: 06:00.4S &ndash; 106:53.7E, Jakarta Anchorage, Indonesia.<br /><br />\r\nDuty AB on routine rounds onboard an anchored container ship noticed two robbers on the poop deck with two sacks. The AB shouted and flashed his torchlight at the robbers. Alarm raised and crew mustered. Hearing the alarm, the robbers escaped immediately. A search was carried out. Ship&rsquo;s engine spares were reported stolen. Incident reported to the  local authorities, and the coast guard boarded the ship for investigation.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-14.363333333333333",1:"40.711666666666666",2:"Attack ID: 058-21 <br /> Sitrep: <small> 31.05.2021: 2220 UTC: Posn: 14:21.8S &ndash; 040:42.7E, Fernao Veloso Bay Anchorage, Mozambique.<br /><br />\r\nTwo robbers armed with knives boarded an anchored product tanker. Duty AB noticed the two robbers and informed the OOW. Alarm raised and crew mustered. Seeing the alerted crew, the robbers escaped without stealing anything. Incident reported to the Port Authorities via the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2522222222222221",1:"104.21861111111112",2:"Attack ID: 060-21 <br /> Sitrep: <small> 04.06.2021: 1730 UTC: Posn: 01:15.8N &ndash; 104:13.7E, Singapore Straits. <br /><br />\r\nDuty engine crew onboard a bulk carrier underway noticed three robbers in the engine room and immediately notified the bridge. Alarm raised and a search was carried out. Seeing the alerted crew, the robbers escaped with the stolen engine spares. Incident reported to VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"4.695",1:"7.166944444444445",2:"Attack ID: 061-21 <br /> Sitrep: <small> 29.05.2021: 0255 UTC: Posn: 04:41.70N &ndash; 007:10.02E, Port Onne, Nigeria.<br /><br />\r\nRobbers in a canoe approached a berthed offshore supply ship. One robber armed with a knife boarded the vessel while the ship&rsquo;s crew were engaged in cargo operations. The duty AB on deck patrol spotted the robber attempting to steal a hose coupling. Alarm raised. Seeing the alerted crew the robber jumped overboard and escaped. Crew mustered and a search was carried out.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"14.552222222222222",1:"120.91777777777777",2:"Attack ID: 063-21 <br /> Sitrep: <small> 15.06.2021: 1650 UTC: Posn: 14:33.8N &ndash; 120:55.4E, Manila Anchorage, Philippines.<br /><br />\r\nDuty watchman on routine rounds onboard an anchored container ship noticed around four persons in a small boat under the forecastle. He immediately informed the duty officer who sent the second security watchman to assist. Seeing the watchmen, the persons started their boat&rsquo;s engine and moved away. A search was carried out. The paint store was found broken into and ship&rsquo;s stores stolen. VTMS Manila informed.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"14.551111111111112",1:"120.91722222222222",2:"Attack ID: 062-21 <br /> Sitrep: <small> 09.06.2021: 1530 UTC: Posn: 14:33.4N &ndash; 120:55.2E, Manila Anchorage, Philippines.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship and escaped with ship&rsquo;s stores. The theft was noticed by the duty crew during routine rounds. Coast guard informed.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-5.983333333333333",1:"106.9",2:"Attack ID: 064-21 <br /> Sitrep: <small> 24.06.2021: 2136 UTC: Posn: 05:59.50S - 106:54.20E, Jakarta Anchorage, Indonesia.<br /><br />\r\nTwo persons boarded a container ship during anchoring operations. Duty AB noticed the unauthorised persons and raised the alarm. Seeing the alerted crew, the persons escaped in a waiting boat with another four persons onboard. Incident reported to the coast guard who boarded for investigation. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"14.5525",1:"120.91722222222222",2:"Attack ID: 065-21 <br /> Sitrep: <small> 21.06.2021: 1940 UTC: Posn: 14:33.9N &ndash; 120:55.2E, Manila Anchorage, Philippines.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship and escaped with ship&rsquo;s stores. The theft was discovered by the duty crew during routine rounds. Incident reported to the Port Authorities via the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2669444444444444",1:"104.23361111111112",2:"Attack ID: 066-21 <br /> Sitrep: <small> 29.06.2021: 1620 UTC: Posn: 01:16.10N &ndash; 104:14.10E, Singapore Straits. <br /><br />\r\nDuty engine crew onboard a bulk carrier underway noticed four robbers in the engine room and notified the bridge. Alarm raised and crew mustered. Seeing the alerted crew, the robbers escaped with the stolen engine spares. Incident reported to VTS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.016666666666667",1:"-77.21666666666667",2:"Attack ID: 067-21 <br /> Sitrep: <small> 28.06.2021: 2100 UTC: Posn: 12:01S &ndash; 077:13W, Callao Anchorage, Peru.<br /><br />\r\nUnnoticed, robbers boarded an anchored tanker and escaped with ship&rsquo;s stores. The theft was discovered by the duty crew during routine rounds. </small><br />Attack ID: 068-21 <br /> Sitrep: <small> 30.06.2021: 0530 UTC: Posn: 12:01S &ndash; 077:13W, Callao Anchorage, Peru.<br /><br />\r\nDuty watchman onboard an anchored tanker noticed three robbers on the forecastle. The watchman immediately reported to the OOW. Alarm raised and crew mustered. Upon hearing the alarm and seeing the crew alertness, the robbers escaped without stealing anything. TRAMAR port control informed and a coast guard patrol boat came and searched around the tanker. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.007166666666667",1:"-77.21416666666667",2:"Attack ID: 069-21 <br /> Sitrep: <small> 03.07.2021: 0212 UTC: Posn: 12:00.43S &ndash; 077:12.85W, Callao Inner Anchorage, Peru. <br /><br />\r\nDuty AB onboard an anchored bulk carrier noticed robbers attempting to board via the anchor chain. Alarm raised and crew mustered. Seeing the crew alertness, the robbers aborted and moved away. Incident reported to VTS. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"9.305833333333334",1:"-13.825",2:"Attack ID: 070-21 <br /> Sitrep: <small> 08.07.2021: 0330 UTC: Posn: 09:18.2N &ndash; 013:49.5W, Conakry Roads, Guinea.<br /><br />\r\nSeven robbers armed with a gun and knives boarded an anchored bulk carrier, stole crew personal belongings and escaped. Port Control notified. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"14.561666666666667",1:"120.92333333333333",2:'Attack ID: 071-21 <br /> Sitrep: <small> 27.06.2021: 1915 UTC: Posn: 14:33.7N &ndash; 120:55.4E, Manila South Quarantine Anchorage, Philippines.<br /><br />\r\nDuty officer onboard an anchored container ship noticed a suspicious craft in the vicinity and notified the duty crew to investigate. Forecastle door padlock found broken and ship"s properties reported stolen. Incident reported to VTS, Coast Guard and local agent. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.023333333333333",1:"-77.21",2:"Attack ID: 072-21 <br /> Sitrep: <small> 13.07.2021: 0020 UTC: Posn: 12:01.4S &ndash; 077:12.6W, Callao Anchorage, Peru.<br /><br />\r\nFive robbers boarded an anchored tanker using ropes. Duty crew on routine rounds noticed the robbers and raised the alarm. Hearing the alarm and seeing the crew alertness, the robbers escaped in an old motorboat. Crew mustered and a search was carried out. Padlock to bosun store found cut. Nothing reported stolen. TRAMAR port control informed. Patrol boat in the vicinity notified. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"22.041333333333334",1:"88.088",2:"Attack ID: 073-21 <br /> Sitrep: <small> 13.07.2021: Early Morning Hrs: Posn: 22:02.48N - 088:05.28E, Haldia Port, India.<br /><br />\r\nUnnoticed, robbers boarded a berthed bulk carrier. Duty engine crew noticed the padlock of the entrance door to the engine room broken and spares missing. Alarm raised, crew mustered, and a search was carried out. The incident was reported to the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"18.568444444444445",1:"-72.40094444444445",2:"Attack ID: 074-21 <br /> Sitrep: <small> 16.07.2021: 0130 UTC: Posn: 18:34.10N &ndash; 072:24.05W, Port Au Prince Anchorage, Haiti.<br /><br />\r\nFive robbers armed with a gun and knives boarded an anchored bulk carrier via long ladders. General alarm sounded and crew proceeded into citadel. Upon hearing the alarm and seeing the crew alertness, the robbers escaped without stealing anything. The incident was reported to the Port Authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.267",1:"104.2065",2:"Attack ID: 075-21 <br /> Sitrep: <small> 16.07.2021: 1615 UTC: Posn: 01:16.02N &ndash; 104:12.39E, Singapore Straits. <br /><br />\r\nThe duty officer onboard a bulk carrier underway noticed a suspicious boat alongside the ship and notified the Master who instructed the crew to check and secure the accommodation. Engine room crew reported five robbers armed with a knife outside of the steering room. Alarm was raised, resulting in the robbers escaping without stealing anything. Incident reported to VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"18.813333333333333",1:"-91.77166666666666",2:"Attack ID: 076-21 <br /> Sitrep: <small> 15.07.2021: 0330 UTC: Posn: 18:48.8N &ndash; 091:46.3W, Ciudad Del Carmen anchorage, Mexico.<br /><br />\r\nAround five persons in a fishing boat armed with a gun approached an anchored offshore support vessel. Seeing the armed guard onboard, they aborted and moved away. Incident reported to the Port Authority. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"14.559833333333334",1:"120.93666666666667",2:"Attack ID: 077-21 <br /> Sitrep: <small> 16.07.2021: 1725 UTC: Posn: 14:33.59N &ndash; 120:56.20E, Manila Anchorage, Philippines.<br /><br />\r\nEight robbers armed with a gun and iron bars boarded an anchored container ship. They took hostage the duty crew on routine rounds, tied him up, stole ship&rsquo;s stores and properties, and escaped in a small boat. The duty crew managed to untie himself and raised the alarm. Crew mustered and a search was carried out. Incident reported to Manila VTMS. The coast guard officers boarded the ship for investigations. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"10.323666666666666",1:"-75.52883333333334",2:'Attack ID: 078-21 <br /> Sitrep: <small> 29.07.2021: 0530 UTC: Posn: 10:19.42N &ndash; 075:31.73W, Cartagena Anchorage, Colombia.<br /><br />\r\nDuty crew onboard an anchored bulk carrier noticed two robbers on the forecastle. Alarm raised and crew mustered. Seeing the alerted crew the robbers escaped with stolen ship"s property. Incident reported to VTS. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-0.06333333333333334",1:"-51.1005",2:"Attack ID: 079-21 <br /> Sitrep: <small> 30.07.2021: 0500 UTC: Posn: 00:03.80S &ndash; 051:06.03W, Fazendinha Anchorage, Brazil.<br /><br />\r\nUnnoticed, robbers boarded an anchored general cargo ship and escaped with stolen ship&rsquo;s stores. The theft was noticed by the duty crew during routine rounds. The incident was reported to the Harbour Master through the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"5.588333333333333",1:"0.05333333333333334",2:"Attack ID: 080-21 <br /> Sitrep: <small> 31.07.2021: 2245 UTC: Posn: 05:35.3N - 000:03.2E, Tema Anchorage, Ghana.<br /><br />\r\nDuty officer onboard an anchored container ship noticed three persons in a skiff approaching the vessel. Master and crew notified, and fire hoses directed towards the skiff resulting in the persons aborting and moving away. After around 30 minutes the crew noticed the skiff approaching again, but due to the hardening measures, the skiff moved away. Port Control notified. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-2.4858333333333333",1:"-80.06888888888889",2:"Attack ID: 081-21 <br /> Sitrep: <small> 05.08.2021: 0612 UTC: Posn: 02:29.9S &ndash; 080:04.8W, Around 1.45nm South of Puerto La Seca, Ecuador.<br /><br />\r\nDuty crew onboard a container ship underway noticed a speed boat with five persons onboard alongside the ship. Alarm raised and local authorities notified. Seeing the alerted crew they moved away. Coast guard officers boarded and escorted the ship to a safe port. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.011833333333334",1:"-77.19383333333333",2:"Attack ID: 082-21 <br /> Sitrep: <small> 18.08.2021: 0630 UTC: Posn: 12:00.71S &ndash; 077:11.63W, Callao Anchorage, Peru.<br /><br />\r\nSeven robbers armed with knives boarded an anchored bulk carrier. They took the duty AB hostage, tied his hands, stole ship&rsquo;s stores and escaped. Incident reported to the local authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"14.543333333333333",1:"120.91333333333333",2:"Attack ID: 083-21 <br /> Sitrep: <small> 12.08.2021: 1730 UTC: Posn: 14:32.6N &ndash; 120:54.8E, Manila Quarantine Anchorage, Philippines.<br /><br />\r\nFive robbers armed with knives and guns boarded an anchored container ship. They took the duty AB hostage, tied his hands, threatened him, stole ship&rsquo;s stores and escaped. Incident reported to the local authorities who boarded for investigations. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2683333333333333",1:"104.235",2:"Attack ID: 084-21 <br /> Sitrep: <small> 16.07.2021: 1640 UTC: Posn: 01:16.6N &ndash; 104:14.6E, Singapore Straits. <br /><br />\r\nAn unknown number of robbers armed with knives approached and boarded a bulk carrier underway. They tried to break the padlock of a door leading to the engine room. Alert duty crew raised the alarm and crew mustered. Seeing the alerted crew, the robbers escaped without stealing anything. The vessel and crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.25",1:"104.10833333333333",2:"Attack ID: 086-21 <br /> Sitrep: <small> 20.08.2021: 1400 UTC: Posn: 01:15.0N &ndash; 104:06.5E, Singapore Straits. <br /><br />\r\nFour robbers armed with knives boarded a bulk carrier underway. Alert duty crew raised the alarm and crew mustered. Seeing the alerted crew, the robbers escaped with stolen ship&rsquo;s spares. Incident reported to Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"14.55749939467262",1:"120.93284962972005",2:"Attack ID: 085-21 <br /> Sitrep: <small> 10.07.2021: 1520 UTC: Posn: 14:33.2N &ndash; 120:55.3E, Manila Anchorage, Philippines. <br /><br />\r\nDuty crew onboard an anchored container ship noticed two unauthorised persons on the forecastle. Alarm raised and crew mustered. Seeing the alerted crew, the persons escaped with stolen ship&rsquo;s properties. Incident reported to Manila VTMS and the Philippines Coast Guard boarded the ship for investigations. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"9.273333333333333",1:"-13.8115",2:'Attack ID: 087-21 <br /> Sitrep: <small> 01.08.2021: 0330 UTC: Posn: 09:16.40N &ndash; 013:48.69W, Conakry Anchorage, Guinea.<br /><br />\r\nFour persons in a motorboat, armed with guns and knives boarded an anchored bulk carrier. They took the bosun as hostage and entered the bridge. The duty officer managed to escape and raised the alarm on the PA system. The persons took the bosun to the Master"s cabin and forced their way in. The robbers stole ship"s and Master"s cash and other personal effects and forced the Master to accompany them to the forecastle from where they escaped. SSAS activated and port control notified who later boarded the ship for investigations. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-0.05778092858268085",1:"-51.09701621161566",2:"Attack ID: 089-21 <br /> Sitrep: <small> 31.08.2021: 0825 UTC: Posn: 00:03.7S - 051:06.1W, Fazendinha Anchorage, Brazil.<br /><br />\r\nAlert crew onboard an anchored tanker noticed two robbers on the forecastle. Alarm was raised, resulting in the robbers escaping without stealing anything. Incident was reported to pilot station through VHF Ch. 11. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"3.7830137180818957",1:"98.70194191932679",2:"Attack ID: 088-21 <br /> Sitrep: <small> 27.08.2021: 2200 UTC: Posn: 03:47.2N &ndash; 098:42.0E, Belawan Port, Indonesia.<br /><br />\r\nTwo robbers armed with knives boarded a berthed tanker, stole ship&rsquo;s properties, and escaped. The theft was discovered by the duty crew during routine rounds after departure. The incident was reported to CSO. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"5.521",1:"0.015166666666666667",2:"Attack ID: 090-21 <br /> Sitrep: <small> 06.09.2021: 0445 UTC: Posn: 05:31.26N &ndash; 000:00.91E, Tema Anchorage, Ghana.<br /><br />\r\nDuty AB onboard an anchored bulk carrier noticed six robbers in a small boat approaching and immediately informed the OOW. Alarm raised and ship&rsquo;s whistle sounded. The boat came alongside and attempted to throw a hook attached with a rope. The duty AB kept shouting at the persons who circled the ship and then moved away. Incident reported to the port control. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"0.373",1:"9.4045",2:"Attack ID: 091-21 <br /> Sitrep: <small> 05.09.2021: 0007 UTC: Posn: 00:22.38N &ndash; 009:24.27E, Owendo Inner Anchorage, Gabon.<br /><br />\r\nFive persons in a speed boat armed with guns approached, fired upon, and boarded an anchored offshore supply ship. Alarm raised and crew secured themselves in the ship. Two crew were injured due to the firing and required hospitalization. One crew reported missing. Remaining crew onboard safe. Local authorities notified. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2570000000000001",1:"103.399",2:"Attack ID: 092-21 <br /> Sitrep: <small> 12.09.2021: 2015 UTC: Posn: 01:15.42N &ndash; 103:23.94E, Malacca Straits.<br /><br />\r\nFour robbers armed with knives boarded a tanker underway. Duty oiler saw the robbers trying to enter the engine room, and raised the alarm. All deck lights switched on, PA announcement made, and crew mustered. Seeing the crew alertness, the robbers escaped in their boat with two accomplices. VTIS informed. A search was made throughout the tanker. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.018055555555556",1:"-77.18527777777778",2:"Attack ID: 096-21 <br /> Sitrep: <small> 26.09.2021: 2355 UTC: Posn: 12:01.5S &ndash; 077:11.7W, Callao Anchorage, Peru.<br /><br />\r\nSix robbers in two boats approached and boarded an anchored bulk carrier using ropes. They tried to break into the bosun store. Duty crew noticed the robbers and raised the alarm. The robbers threatened the duty deck crew with knives and escaped without stealing anything. TRAMAR port control informed. A patrol boat was dispatched to search the waters around the ship. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-11.985833333333334",1:"-77.18583333333333",2:"Attack ID: 094-21 <br /> Sitrep: <small> 15.09.2021: 0025 UTC: Posn: 11:59.9S &ndash; 077:11.9W, Callao Anchorage, Peru.<br /><br />\r\nDuty crews onboard an anchored product tanker noticed around four robbers armed with knives on the forecastle deck. Alarm raised and crew mustered. Upon hearing the alarm and seeing the crew alertness, the robbers escaped with stolen ship&rsquo;s stores. TRAMAR port control informed and a coast guard patrol boat searched the waters around the tanker. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.02055",1:"-77.18378",2:"Attack ID: 093-21 <br /> Sitrep: <small> 13.09.2021: 1200 UTC: Posn: 12:01.23S &ndash; 077:11.02W, Callao Anchorage, Peru.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship and escaped with stolen ship&rsquo;s stores. The theft was noticed by the duty crew during routine rounds. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"9.233333333333333",1:"-13.816666666666666",2:"Attack ID: 095-21 <br /> Sitrep: <small> 02.04.2021: 0150 UTC: Posn: 09:14N &ndash; 013:49W, Conakry Anchorage, Guinea.<br /><br />\r\nFour persons armed with a gun and knives boarded an anchored bulk carrier ship. They stole cash and crew&rsquo;s personal belongings and escaped. No injuries reported to the crew members. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2841666666666667",1:"104.31916666666666",2:"Attack ID: 097-21 <br /> Sitrep: <small> 17.09.2021: 1940 UTC: Posn: 01:17.3N &ndash; 104:19.9E, Singapore Straits.<br /><br />\r\nA bulk carrier underway was boarded by five robbers armed with a gun and knife. They entered the engine room and threatened the Duty Oiler. Incident was noticed by the second engineer, who immediately informed the Master. Alarm raised, SSAS activated, all deck lights were turned on, PA announcement made, and crews were instructed to stay inside their cabin. Hearing the alarm, the robbers escaped with the stolen engine spares. Incident reported to Singapore and Indonesian coastguard. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"5.803055555555556",1:"118.10444444444444",2:'Attack ID: 098-21 <br /> Sitrep: <small> 05.10.2021: 2020 UTC: Posn: 05:48.11N &ndash; 118:05.76E, Sandakan Inner Anchorage, Sabah, Malaysia.<br /><br />\r\nDuty crew onboard an anchored product tanker noticed two robbers on the forecastle. The AB shouted and immediately notified the bridge. Seeing the alerted crew, the robbers escaped with stolen ship"s stores and property. The incident was reported to the Port Authorities through the local agent. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.0586111111111112",1:"103.62472222222222",2:"Attack ID: 099-21 <br /> Sitrep: <small> 06.10.2021: 1600 &ndash; 2200 UTC: Posn: Singapore Straits.<br /><br />\r\nRobbers boarded a bulk carrier underway, stole ship&rsquo;s spares and escaped unnoticed. The theft was noticed by duty crew during routine rounds. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.25",1:"104.1",2:"Attack ID: 100-21 <br /> Sitrep: <small> 05.10.2021: 1830 UTC: Posn: 01:15.00N &ndash; 104:06.81E, Singapore Straits.<br /><br />\r\nDuty crew onboard a product tanker underway noticed three robbers in the E/R workshop store. The crew immediately notified the bridge. Alarm raised and crew mustered. Seeing the alerted crew, the robbers escaped with stolen ship&rsquo;s spares. Incident reported to Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2633333333333332",1:"104.18833333333333",2:"Attack ID: 101-21 <br /> Sitrep: <small> 10.10.2021: 1530 UTC: Posn: 01:15.8N &ndash; 104:11.3E, Singapore Straits.<br /><br />\r\nDuty engine crew onboard a bulk carrier underway noticed two unauthorized persons in the engine room. The crew immediately informed the C/E who notified the bridge. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped. A search was carried out throughout the ship. Nothing reported missing. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2516666666666667",1:"104.06083333333333",2:"Attack ID: 102-21 <br /> Sitrep: <small> 14.10.2021: 1552 UTC: Posn: 01:15.10N &ndash; 104:03.65E, Singapore Straits.<br /><br />\r\nAlert crew onboard a tanker underway noticed three unauthorized persons onboard. Alarm raised, resulting in the persons escaping without stealing anything. Incident reported Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2872277777777779",1:"104.24027777777778",2:"Attack ID: 103-21 <br /> Sitrep: <small> 15.10.2021: 1445 UTC: Posn: 01:17.02N &ndash; 104:13.85E, Singapore Straits.<br /><br />\r\nA bulk carrier underway was boarded by five unauthorized persons. Duty crew noticed the intruders and closed all doors and reported to the bridge. Alarm was raised and crew mustered, resulting in all intruders escaping without stealing anything. Incident was reported to the port authorities and MMEA through local agent. MMEA responded and intercepted the ship to provide assistance. The ship was then escorted and instructed to anchor to allow MMEA to board and investigate. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-3.1895",1:"-80.04666666666667",2:"Attack ID: 104-21 <br /> Sitrep: <small> 18.10.2021: 1110 UTC: Posn: 03:11.37S &ndash; 080:02.80W, Around 1.64nm NW of Punta Jambeli, Ecuador.<br /><br />\r\nSix persons in a speed boat approached, fired upon and attempted to board a container ship underway. Master increased speed and commenced evasive manoeuvres, resulting in the speed boat aborting and moving away. Crew and ship safe. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.274166666666667",1:"104.18416666666666",2:"Attack ID: 105-21 <br /> Sitrep: <small> 19:10.2021: 1809 UTC: Posn: 01:15N &ndash; 104:11E, Singapore Straits.<br /><br />\r\nFive unauthorised persons boarded a general cargo ship underway and attempted to enter the engine room. Alert crew noticed the attempted break-in and raised the alarm resulting in the persons escaping empty handed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"2.216666666666667",1:"4.833333333333333",2:"Attack ID: 106-21 <br /> Sitrep: <small> 25.10.2021: 0855 UTC: Posn: 02:13N - 004:50E, Around 149nm SW of Brass, Nigeria.<br /><br />\r\nWhile underway, a container ship was boarded by an unknown number of pirates and the crew retreated into the citadel. On being notified of the incident the IMB Piracy Reporting Centre immediately alerted and liaised with the Regional Authorities and international warships to request for assistance. A Russian Navy warship and its helicopter responded and proceeded to render assistance resulting in the crew and ship being safe. The pirates escaped with stolen ship&rsquo;s properties. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2353333333333334",1:"103.97066666666667",2:"Attack ID: 107-21 <br /> Sitrep: <small> 27.10.2021: 1518 UTC: Posn: 01:14.12N &ndash; 103:58.24E, Singapore Straits.<br /><br />\r\nDuty crew onboard a tanker underway noticed three robbers boarding using a ladder. Alarm raised and crew mustered. The robbers attempted to enter the steering gear room but escaped on hearing the alerted crew. Incident reported to VTIS. All crew safe. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-1.355",1:"116.99666666666667",2:"Attack ID: 111-21 <br /> Sitrep: <small> 21.09.2021: 1518 UTC: Posn: 01:21.3S - 116:59.8E, Balikpapan Anchorage, Indonesia.<br /><br />\r\nDuty crew onboard an anchored tanker noticed an unauthorized person attempting to board via the hawse pipe. Alarm raised and crew mustered resulting in the person aborting and moving away. The vessel and crew reported safe. Incident reported to VTS and local agent. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2816666666666667",1:"104.33166666666666",2:"Attack ID: 108-21 <br /> Sitrep: <small> 27.10.2021: 1710 UTC: Posn: 01:16.90N &ndash; 104:19.90E, Singapore Straits.<br /><br />\r\nAlert crew onboard a tanker underway noticed one robber onboard and heading towards the steering gear room. Alarm raised and crew mustered resulting in the robber escaping without stealing anything. Incident reported to VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"4.400833333333333",1:"6.2508333333333335",2:"Attack ID: 110-21 <br /> Sitrep: <small> 01.11.2021: 0835 UTC: Posn: 04:24.05N &ndash; 006:15.05E, Bayelsa State Waterways, Nigeria.<br /><br />\r\nA passenger craft was boarded by armed robbers while underway in the Bayelsa State Waterways. The robbers stole personal effects of the passengers and escaped with the passenger craft&rsquo;s engine. Nigerian authorities dispatched a patrol boat to render assistance. All passengers reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2483333333333333",1:"104.02833333333334",2:"Attack ID: 109-21 <br /> Sitrep: <small> 03.11.2021: 1702 UTC: Posn: 01:14.9N &ndash; 104:01.7E, Singapore Straits.<br /><br />\r\nDuty crew onboard a bulk carrier underway noticed four unauthorized persons onboard and attempting to enter the steering gear room. Alarm raised and crew mustered resulting in the persons escaping. All crew safe. Nothing reported stolen. Incident reported Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2733333333333334",1:"104.26333333333334",2:"Attack ID: 112-21 <br /> Sitrep: <small> 17.09.2021: 1450 UTC: Posn: 01:16.4N &ndash; 104:15.8E, Singapore Straits.<br /><br />\r\nThree persons boarded a bulk carrier underway. Alarm raised and crew mustered resulting in the persons escaping. All crew safe. Nothing reported stolen. Incident reported Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.016",1:"-77.19316666666667",2:"Attack ID: 113-21 <br /> Sitrep: <small> 09.11.2021: 0110 UTC: Posn: 12:00.96S &ndash; 077:11.59W, Callao Anchorage, Peru.<br /><br />\r\nThree robbers in a small boat approached and boarded an anchored vehicle carrier. They threatened the duty crew who then managed to escape and informed the bridge. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped with stolen ship&rsquo;s stores. TRAMAR port control informed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-6.076666666666666",1:"12.311666666666667",2:"Attack ID: 114-21 <br /> Sitrep: <small> 12.11.2021: 0230 UTC: Posn: 06:04.6S &ndash; 012:18.7E, Soyo Anchorage, Angola.<br /><br />\r\nUnnoticed, robbers boarded an anchored offshore supply ship, stole ship&rsquo;s stores and escaped. All crew safe. Incident reported to local agents. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-5.886528467660785",1:"106.9134521484375",2:"Attack ID: 115-21 <br /> Sitrep: <small> 24.11.2021: 1700-2200 UTC: Posn: Jakarta Anchorage, Indonesia.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship and escaped with stolen engine spares. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2433333333333334",1:"104.02833333333334",2:"Attack ID: 116-21 <br /> Sitrep: <small> 28.11.2021: 2000 UTC: Posn: 01:14.6N &ndash; 104:01.7E, Singapore Straits.<br /><br />\r\nFour robbers boarded a bulk carrier underway and escaped with stolen engine spares. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2396666666666667",1:"104.04555555555555",2:"Attack ID: 117-21 <br /> Sitrep: <small> 30.11.2021: 1638 UTC: Posn: 01:14.38N &ndash; 104:02.74E, Singapore Straits.<br /><br />\r\nTwo persons boarded a bulk carrier underway. Alarm raised and crew mustered resulting in the persons escaping. All crew safe. Nothing reported stolen. Incident reported to Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"18.666166666666665",1:"-72.3925",2:"Attack ID: 118-21 <br /> Sitrep: <small> 23.11.2021: 0600 UTC: Posn: 18:39.97N - 072:23.55W, Lafiteau Pilot Station, Haiti.<br /><br />\r\nThree robbers armed with a gun and knives boarded a drifting container ship. They attacked, injured and tied up the duty crew. General alarm sounded and non-essential crew mustered in citadel. Seeing the crew alertness, the robbers escaped with stolen ship&rsquo;s properties. Incident reported to Lafiteau Pilot Station. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.05",1:"103.63",2:"Attack ID: 119-21 <br /> Sitrep: <small> 02.12.2021: 1230 UTC: Posn: 01:03.0N &ndash; 103:37.8E, Singapore Straits.<br /><br />\r\nA bulk carrier underway noticed a boat flashing a light towards the bridge. As the ship altered course the boat followed and continued to flash the light. Alert crew noticed another boat approaching from the quarter and attempting to board using hooks attached with ropes. Master raised the alarm and crew mustered on the poop deck, resulting in the persons aborting the attempted boarding. Incident reported to Singapore VTIS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2633333333333332",1:"104.21133333333333",2:"Attack ID: 120-21 <br /> Sitrep: <small> 24.11.2021: 1900-2200 UTC: Posn: 01:15.80N &ndash; 104:12.68E, Singapore Straits.<br /><br />\r\nUnnoticed, robbers boarded a tanker underway and escaped with ship&rsquo;s spares. The theft was noticed by the 2/E during routine rounds. Further checks identified footprints on the steering flat floor.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.005333333333333",1:"-77.2015",2:"Attack ID: 121-21 <br /> Sitrep: <small> 04.12.2021: 0030 UTC: Posn: 12:00.32S &ndash; 077:12.09W, Callao Anchorage, Peru.<br /><br />\r\nAlert crew onboard an anchored tanker noticed three unauthorized persons armed with knives on the forecastle. Alarm raised and crew mustered, resulting in the persons escaping without stealing anything. Incident reported to the Port Authorities. Police officers boarded the tanker for investigation.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"3.895",1:"-77.07027777777778",2:"Attack ID: 122-21 <br /> Sitrep: <small> 05.12.2021: 0506 UTC: Posn: 03:53.42N &ndash; 077:03.73W, Buenaventura Port, Colombia.<br /><br />\r\nUnnoticed, robbers boarded a product tanker and escaped with stolen ship&rsquo;s properties. The theft was noticed by the crew during gauging of bunker tanks. The incident was reported to the Port Authorities through the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"18.573333333333334",1:"-72.34833333333333",2:"Attack ID: 123-21 <br /> Sitrep: <small> 11.12.2021: 0108 UTC: Posn: 18:34.4N &ndash; 072:20.9W, Port-Au-Prince Port, Haiti.<br /><br />\r\nFour persons armed with guns and knives boarded a berthed bulk carrier. Duty crew on routine rounds were confronted by the robbers who pointed guns at them while they lowered ship&rsquo;s stores into a waiting boat. The crew took cover in the mooring winch and shouted for help. The 2/O immediately raised the alarm. There was an exchange of fire between the armed robbers and the locally appointed armed guards onboard the vessel resulting in two robbers being killed. The others escaped. Haiti Port Security notified. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"22.783333333333335",1:"70.03333333333333",2:"Attack ID: 124-21 <br /> Sitrep: <small> 18.11.2021: 1450 UTC: Posn: 22:47N &ndash; 070:02E, Kandla Anchorage, India.<br /><br />\r\nAlert crew onboard an anchored general cargo ship noticed two unauthorised persons on the forecastle deck entering the bosun store. Alarm raised and crew mustered. Hearing the alarm and seeing the crew alertness, the persons escaped. A search was made. Nothing reported stolen. Incident reported to Port Maritime Security Officer. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"2.318611111111111",1:"9.418611111111112",2:"Attack ID: 127-21 <br /> Sitrep: <small> 15.12.2021: 1830 UTC: Posn: 02:19.7N &ndash; 009:25.7E, Around 21nm West of Punta Campo, Equatorial Guinea.<br /><br />\r\nWhile underway, a landing craft was approached and fired upon by pirates in a small craft. There was an exchange of fire between the pirates and the locally appointed armed guards onboard the vessel resulting in one armed guard being injured. Incident reported to local port authorities. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"3.195",1:"7.817222222222222",2:"Attack ID: 125-21 <br /> Sitrep: <small> 13.12.2021: 1427 UTC: Posn: 03:11.42N &ndash; 007:49.02E, Around 46nm SW of Luba, Equatorial Guinea.<br /><br />\r\nA container ship underway was boarded by an unknown number of pirates. The Danish Navy warship was notified and proceeded to render assistance. The pirates escaped with six kidnapped crew. It is reported that one crew was injured during the incident. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"0.30516666666666664",1:"9.400555555555556",2:"Attack ID: 126-21 <br /> Sitrep: <small> 13.12.2021: 0100 UTC: Posn: 00:18.31N &ndash; 009:24.03E, Owendo Anchorage, Gabon.<br /><br />\r\nDuty crew on routine rounds onboard an anchored offshore supply ship noticed an unauthorised person moving the barbed wires to make way for his accomplices who were armed with AK-47 rifles. Alarm raised and crew mustered in the citadel. Port Authority was informed, and the Gabon Authorities boarded the vessel to investigate. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.3",1:"106.23555555555555",2:"Attack ID: 128-21 <br /> Sitrep: <small> 20.08.2021: 1900 UTC: Posn: 01:18.0N &ndash; 106:14.8E, around 17nm SSW of Pulau Pengibu, Indonesia.<br /><br />\r\nWhile enroute to Singapore, four persons armed with knives boarded a bulk carrier underway, entered the engine room and threatened the duty engineer, who escaped and notified the bridge. Alarm raised and Master instructed all crew to stay in cabins. Incident reported to Singapore VTIS. Singapore Police Coast Guard boarded the vessel when she entered Singapore waters. All crew safe. Engine spares reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-2.584722222222222",1:"-80.13472222222222",2:"Attack ID: 129-21 <br /> Sitrep: <small> 23.12.2021: 1055 UTC: Posn: 02:35.5S &ndash; 080:08.5W, Around 1.6nm SE of Puerto Pizarro, Ecuador.<br /><br />\r\nA container ship underway was approached and fired upon by an unknown number of armed persons in a speedboat. The armed guards onboard returned fire resulting in the persons aborting and moving away. Crew and ship safe. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"1.2416666666666667",1:"104.03333333333333",2:"Attack ID: 130-21 <br /> Sitrep: <small> 18.12.2021: 1610 UTC: Posn: 01:14.5N &ndash; 104:02.0E, Singapore Straits.<br /><br />\r\nFour unauthorised persons in a speed boat approached and boarded a bulk carrier underway. Alert crew noticed the persons at the engine room store and informed the bridge. General alarm was raised, and crew mustered. Hearing the alarm and seeing the crew alertness, the unauthorised persons escaped. A search was made throughout the ship. Nothing reported stolen. Incident reported to VTIS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"-12.027333333333333",1:"-77.203",2:"Attack ID: 131-21 <br /> Sitrep: <small> 24.12.2021: 0055 UTC: Posn: 12:01.64S &ndash; 077:12.18W, Callao Anchorage, Peru.<br /><br />\r\nSeven robbers in a wooden boat approached an anchored bulk carrier. Three robbers armed with knives boarded the ship, broke into the forecastle store stole ship&rsquo;s stores and threatened the crew on routine rounds. Alarm raised and crew mustered resulting in the robbers escaping. Incident reported to TRAMAR and the coast guard who boarded the ship for inspection. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0},{0:"6.3533333333333335",1:"-10.88888888888889",2:"Attack ID: 132-21 <br /> Sitrep: <small> 08.12.2021: 0500 UTC: Posn: 06:20.72N &ndash; 010:53.20W, Monrovia Outer Anchorage, Liberia.<br /><br />\r\nDuty crew on routine rounds onboard an anchored bulk carrier noticed footprints near the lifeboat and informed the OOW. Emergency alarm raised, crew mustered, and search carried out. Lifeboat stores reported stolen. Crew and vessel safe.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"191",title:"",groupClass:"type",c:0}]),u([{0:"-12",1:"-77.2",2:"Attack ID: 115-22 <br /> Sitrep: <small> 20.12.2022: 0745 UTC: Posn: 12:00S &ndash; 077:12W, Callao Anchorage, Peru.<br /><br />\r\nFive robbers armed with knives boarded a product tanker via the anchor chain. They threatened the duty crew on rounds with a knife on the throat and tied him up. The robbers forced their way into the forecastle store, stole ship&rsquo;s properties and stores and escaped. The duty crew managed to free himself and alerted the bridge. General alarm raised and crew mustered. Incident reported to Callao VTS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12.019166666666667",1:"-77.20533333333333",2:"Attack ID: 114-22 <br /> Sitrep: <small> 19.12.2022: 0600 UTC: Posn: 12:01.15S &ndash; 077:12.32W, Callao Anchorage, Peru.<br /><br />\r\nTwo robbers armed with knives boarded an anchored vehicle carrier through the hawse pipe. They threatened the duty crew on rounds, stole his mobile phone and VHF radio and escaped. Alarm raised and crew mustered. Incident reported to port control. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"2.5880555555555556",1:"9.184722222222222",2:"Attack ID: 113-22 <br /> Sitrep: <small> 13.12.2022: 1007 UTC: Posn: 02:34.77N &ndash; 009:11.05E, Around 48nm SE of Bioko Island, Equatorial Guinea<br /><br />\r\nAround nine pirates in a fast boat approached, fired upon and boarded a crew boat underway. The pirates kidnapped two crew, stole portable communication equipment and escaped. Remaining crew managed to navigate to a safe port. On 18 Jan 2023, the Owners confirmed that the kidnapped two crew members were released safely on 17 Jan 2023. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"10.376333333333333",1:"107.04444444444445",2:'Attack ID: 112-22 <br /> Sitrep: <small> 06.12.2022: 0830 UTC: Posn: 10:22.58N &ndash; 107:02.40E, Vung Tau Anchorage, Vietnam.<br /><br />\r\nDuty officer onboard a tug towing a barge was notified by a nearby Vietnam Border Guard patrol boat that two persons had boarded the barge. The Master of the tug confirmed that persons were not part of the tug"s crew resulting in the patrol boat approaching the barge and arresting the individuals. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"2.417777777777778",1:"8.401388888888889",2:"Attack ID: 111-22 <br /> Sitrep: <small> 12.12.2022: 0250 UTC: Posn: 02:25.4N &ndash; 008:24.5E, Around 87nm NW of Bata, Equatorial Guinea.<br /><br />\r\nWhile underway, a tanker was fired upon by unidentified persons in a skiff. Alarm raised, crew mustered, ship&rsquo;s speed increased, and incident reported to regional authorities. After a while, the skiff aborted and moved away. Vessel and crew reported safe. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.0526666666666666",1:"103.63716666666667",2:"Attack ID: 110-22 <br /> Sitrep: <small> 01.12.2022: 1227 UTC: Posn: 01:03.16N &ndash; 103:38.23E, Singapore Straits.<br /><br />\r\nSix robbers armed with knives boarded a bulk carrier underway and entered the engine room. The robbers were spotted by the duty watchman who immediately informed the bridge. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped empty handed. Singapore Coast Guard boarded the vessel to investigate. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.0476666666666667",1:"103.63166666666666",2:"Attack ID: 109-22 <br /> Sitrep: <small> 25.11.2022: 1525 UTC: Posn: 01:02.86N &ndash; 103:37.92E, Singapore Straits.<br /><br />\r\nThree robbers armed with long knives boarded a bulk carrier underway. Duty engineer spotted the robbers near the engine storeroom and immediately informed the bridge. Alarm raised, crew mustered, VTS informed and a search was carried out. The coast guard boarded the vessel to investigate. All crew safe and nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"2.029166666666667",1:"104.65433333333333",2:"Attack ID: 108-22 <br /> Sitrep: <small> 24.11.2022: 1200 UTC: Posn: 02:01.75N &ndash; 104:39.26E, Around 32nm East of Tanjung Sedili, Johor, Malaysia.<br /><br />\r\nDuty crew onboard an anchored container ship noticed a person attempting to board the vessel via hawse pipe. Ship&rsquo;s horn sounded and crew were alerted resulting in the person escaping.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.3022222222222222",1:"-4.65",2:'Attack ID: 107-22 <br /> Sitrep: <small> 23.11.2022: 2300 UTC: Posn: 01:18.8N &ndash; 004:39.0W, Around 236nm SSW of Abidjan, Ivory Coast.<br /><br />\r\nOwners informed the IMB Piracy Reporting Centre that they had lost communication with their tanker. The IMB PRC broadcast a missing vessel message to all ships in the region to look out for the missing tanker. On 25 November 2022, the Master managed to contact the Owners and reported that eight armed pirates had boarded the vessel and destroyed all navigation and communication systems. The pirates stole ship"s cargo and prior to escaping stole ship"s and crew monies and properties. An Italian Navy Warship later intercepted and rendered assistance to the vessel. All crew reported safe. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"18.4",1:"-93.79466666666667",2:"Attack ID: 106-22 <br /> Sitrep: <small> 05.07.2022: 0650 UTC: Posn: 18:24.00N &ndash; 093:47.68W, Around 34nm West of Dos Bocas Port, Mexico.<br /><br />\r\nFour robbers armed with guns boarded a drilling platform. Alarm raised and crew mustered. Upon hearing the alarm, the robbers escaped with stolen ship&rsquo;s properties. Incident reported to Mexican Navy. A patrol vessel was dispatched to search the waters around the platform. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"7.2",1:"-13.283333333333333",2:"Attack ID: 105-22 <br /> Sitrep: <small> 15.11.2022: 1930 UTC: Posn: 07:12N &ndash; 013:17W, Around 28nm SW of Turtle Islands, Sierra Leone.<br /><br />\r\nSeven pirates armed with guns and knives boarded a Ro-Ro cargo ship underway. They took control of the vessel, took the crew hostage and stole crew cash, personal effects, and ship&rsquo;s properties. As the pirates were unable to navigate the ship professionally, the ship was grounded. The crew fought back, disarming the pirates before retreating into the citadel. Due to unsuccessful attempt to break into the citadel, the pirates left the ship. The Sierra Leone authorities were notified who later boarded the ship for investigation. </small>",3:"media/com_fabrik/images/red-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"10.266666666666667",1:"-64.56666666666666",2:"Attack ID: 104-22 <br /> Sitrep: <small> 24.11.2022: 1450 UTC: Posn: 10:16N &ndash; 064:34W, Guanta Anchorage, Venezuela.<br /><br />\r\nDuty crew onboard an anchored bulk carrier noticed the lashing straps of the forward life raft cut and the life raft missing. Alarm raised, a search was carried out and the incident was reported to port authorities via the local agents. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.0586666666666666",1:"103.61083333333333",2:"Attack ID: 103-22 <br /> Sitrep: <small> 23.11.2022: 1705 UTC: Posn: 01:03.52N &ndash; 103:36.65E, Singapore Straits.<br /><br />\r\nDuty crew onboard a bulk carrier underway spotted three unauthorised persons on the starboard quarterdeck. Alarm raised and crew mustered. Seeing the crew alertness, the persons escaped with stolen ship&rsquo;s spares. Singapore Coast Guard boarded the vessel to investigate. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"10.19",1:"107.03166666666667",2:'Attack ID: 102-22 <br /> Sitrep: <small> 21.11.2022: 1845 UTC: Posn: 10:11.4N &ndash; 107:01.9E, Vung Tau Anchorage, Vietnam.<br /><br />\r\nDuty crew onboard an anchored chemical tanker spotted a small boat near the bows and informed the OOW. Alarm raised and crew mustered. A search was carried out. The paint locker was found broken into and ship"s stores stolen. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"21.458333333333332",1:"89.59833333333333",2:"Attack ID: 101-22 <br /> Sitrep: <small> 21.11.2022: 1809 UTC: Posn: 21:27.5N &ndash; 089:35.9E, Mongla Outer Anchorage, Bangladesh.<br /><br />\r\nAbout 18 robbers in two long wooden boats armed with long knives boarded an anchored bulk carrier using ropes. They took hostage the deck watchman on routine rounds, threatened him with a knife on the throat and tied him up. Alarm raised, pilot station and coast guard notified by VHF and all non-essential crew retreated into the citadel. The robbers broke into the paint locker, the bosun and forecastle stores and started stealing ship&rsquo;s properties and stores. Three of the robbers approached the accommodation and using the deck watchman&rsquo;s UHF radio contacted the Master and asked for a ransom. The Master offered a reduced amount which was rejected. The robbers told the Master that they would leave once they had taken the ship&rsquo;s stores and properties. Later, the deck watch man was released and was found to have sustained minor injuries because of the knife being pressed on the neck and the hands being tied. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.3543333333333334",1:"103.2935",2:"Attack ID: 100-22 <br /> Sitrep: <small> 21.11.2022: 0740 UTC: Posn: 01:21.26N &ndash; 103:17.61E, Around 7nm WNW of Pulau Kukup, Johor, Malaysia.<br /><br />\r\nFour persons in two small boats boarded a barge under tow. Master reported the incident to VTS Port Klang and Malaysian Coast Guard. All crew reported safe. The tug and barge continued their journey. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.1498333333333333",1:"103.47283333333333",2:"Attack ID: 099-22 <br /> Sitrep: <small> 08.11.2022: 1940 UTC: Posn: 01:08.99N &ndash; 103:28.37E, Singapore Straits.<br /><br />\r\nDuty officer onboard a tug towing a barge noticed unauthorised persons boarding the barge. VTIS informed and searchlights directed towards the barge and persons. Seeing the alerted crew the persons escaped with stolen barge cargo. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.155",1:"103.45666666666666",2:"Attack ID: 098-22 <br /> Sitrep: <small> 16.10.2022: 1430 UTC: Posn: 01:09.3N &ndash; 103:27.4E, Singapore Straits.<br /><br />\r\nThree unauthorised persons boarded a bulk carrier underway. Duty crew sighted the persons in the steering gear room and raised the alarm. Hearing the alerted crew, the persons escaped without stealing anything. Incident reported to Singapore VTS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"4.899166666666667",1:"-1.6676666666666666",2:'Attack ID: 097-22 <br /> Sitrep: <small> 16.11.2022: 0150 UTC: Posn: 04:53.95N &ndash; 001:40.06W, Takoradi Anchorage, Ghana.<br /><br />\r\nThree robbers armed with long knives boarded an anchored bulk carrier. Deck watchkeepers on routine rounds noticed the robbers, informed the bridge, and shouted at them. The robbers threatened the watchkeepers and escaped. Alarm raised, ship"s whistle sounded and incident reported to the port control. Port security personnel boarded the ship to investigate. Footprints were identified on deck. The paint locker was found broken into and ship"s stores missing. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12.012",1:"-77.2305",2:"Attack ID: 096-22 <br /> Sitrep: <small> 07.11.2022: 1000 UTC: Posn: 12:00.72S - 077:13.83W, Callao Anchorage, Peru.<br /><br />\r\nDuty crew on routine rounds onboard an anchored tanker noticed the hawse pipe cover opened, the forepeak store broken into and ship&rsquo;s stores missing. Incident reported to Callao VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"22.793333333333333",1:"70.06833333333333",2:'Attack ID: 095-22 <br /> Sitrep: <small> 31.10.2022: 1630 UTC: Posn: 22:47.6N &ndash; 070:04.1E, Kandla Anchorage, India.<br /><br />\r\nAround six robbers armed with knives and rods boarded an anchored chemical tanker. Alert duty crew spotted the robbers and immediately informed the bridge. General alarm raised, PA announcement made, and crew mustered. Upon hearing the alarm, the robbers escaped with stolen ship"s properties. Incident reported to the Kandla Port Authority. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.1533333333333333",1:"103.454",2:"Attack ID: 094-22 <br /> Sitrep: <small> 16.10.2022: 1705 UTC: Posn: 01:09.20N &ndash; 103:27.24E, Singapore Straits.<br /><br />\r\nThree robbers armed with knives boarded a bulk carrier underway and entered the engine room. The robbers were spotted by the duty watchman who immediately informed the bridge. General alarm raised, PA announcement made, and crew mustered. Upon hearing the alarm, the robbers escaped with stolen engine spares. Incident reported to the Singapore VTS. Marine Police boarded the vessel for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.1666666666666667",1:"103.43333333333334",2:"Attack ID: 093-22 <br /> Sitrep: <small> 23.10.2022: 1600 UTC: Posn: 01:10N &ndash; 103:26E, Singapore Straits.<br /><br />\r\nFive robbers boarded a bulk carrier underway. Duty Engineer sighted the robbers and informed the bridge. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped empty handed. Incident reported to Singapore VTS. Marine Police boarded the vessel for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-11.977166666666667",1:"-77.2025",2:"Attack ID: 092-22 <br /> Sitrep: <small> 14.10.2022: 0630 UTC: Posn: 11:58.63S &ndash; 077:12.15W, Callao Anchorage, Peru.<br /><br />\r\nDuty crew onboard an anchored tanker heard noises from the forward store and raised the alarm resulting in the unauthorised persons escaping with ship&rsquo;s stores. Incident reported to TRAMAR port control and harbour master. Port police boarded the vessel to investigate the theft. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-5.475",1:"105.312",2:"Attack ID: 091-22 <br /> Sitrep: <small> 14.10.2022: 2100 UTC: Posn: 05:28.50S - 105:18.72E, Panjang Anchorage, Indonesia.<br /><br />\r\nUnnoticed, robbers boarded an anchored general cargo ship and escaped with ship&rsquo;s properties. The theft was noticed by the duty crew on routine rounds. Incident reported to the local agent.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12.046944444444444",1:"-77.14444444444445",2:"Attack ID: 090-22 <br /> Sitrep: <small> 29.09.2022: 0515 UTC: Posn: 12:02.81S &ndash; 077:08.66W, APM Terminal, Callao Port, Peru.<br /><br />\r\nUnnoticed, robbers boarded a berthed tanker during cargo operations and escaped with ship&rsquo;s stores. The theft was noticed by the duty crew on routine rounds. The incident was reported to port control and local authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"22.187166666666666",1:"91.785",2:"Attack ID: 089-22 <br /> Sitrep: <small> 15.04.2022: 1945 UTC: Posn: 22:11.23N &ndash; 091:47.10E, Chittagong Anchorage, Bangladesh.<br /><br />\r\nFive robbers armed with knives, in a motorboat, boarded an anchored LPG tanker and broke into the paint store. Duty crew on routine rounds noticed the robbers lowering the stores into their boat and raised the alarm resulting in the robbers escaping. The incident was reported to port control and the coast guard who responded, apprehended the robbers and recovered the stolen items.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"4.900555555555556",1:"-1.6852777777777779",2:"Attack ID: 088-22 <br /> Sitrep: <small> 19.09.2022: 0250 UTC: Posn: 04:54.2N &ndash; 001:41.7W, Takoradi Anchorage, Ghana.<br /><br />\r\nFour unauthorised persons boarded an anchored refrigerated cargo ship, stole ship&rsquo;s stores and escaped. Incident reported to Takoradi port control and coast guard. A patrol boat was dispatched to search the waters around the ship and remained in the vicinity of the ship until daybreak. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.3247222222222224",1:"104.30527777777777",2:"Attack ID: 087-22 <br /> Sitrep: <small> 17.09.2022: 0230 UTC: Posn: 01:19.48N &ndash; 104:18.31E, Singapore Straits.<br /><br />\r\nAround 10 unauthorized persons in wooden sampans came alongside and boarded a laden barge under tow. The crew noticed the persons stealing the barge cargo and raised the alarm. VTIS informed, and a patrol boat was sent to investigate. Seeing the patrol boat, the persons escaped with the stolen cargo.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.3205",1:"104.37533333333333",2:"Attack ID: 086-22 <br /> Sitrep: <small> 22.06.2022: 2020 UTC: Posn: 01:19.23N &ndash; 104:22.52E, Singapore Straits.<br /><br />\r\nDuty oiler onboard a bulk carrier underway noticed a robber in the engine room pointing a gun at him. He immediately escaped to the ECR and informed the bridge. Alarm raised, VTIS informed, PA announcement made, and crew mustered. Under the CSO&rsquo;s advise, the vessel diverted into Singapore where a patrol boat assisted to search the vessel to ensure no armed persons were on board. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2776666666666667",1:"104.29433333333333",2:"Attack ID: 085-22 <br /> Sitrep: <small> 02.09.2022: 1613 UTC: Posn: 01:16.66N - 104:17.66E, Singapore Straits.<br /><br />\r\nTwo robbers wearing face masks armed with long knives boarded a bulk carrier underway and entered the engine room. Alarm raised, crew mustered and VTIS informed. Seeing the alerted crew the robbers escaped with stolen ship&rsquo;s stores.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"6.091666666666667",1:"125.155",2:"Attack ID: 084-22 <br /> Sitrep: <small> 17.04.2022: 1905 UTC: Posn: 06:05.50N - 125:09.30E, Port of General Santos, Philippines.<br /><br />\r\nDuty AB on routine rounds onboard a berthed container ship noticed one unauthorised person near the gangway and alerted the OOW. Seeing the alerted crew the person escaped without stealing anything. </small><br />Attack ID: 083-22 <br /> Sitrep: <small> 17.04.2022: 1630 UTC: Posn: 06:05.50N - 125:09.30E, Port of General Santos, Philippines.<br /><br />\r\nDuty officer on routine rounds onboard a berthed container ship noticed two unauthorised persons attempting to board and alerted the other duty crew. Seeing the alerted crew, the persons aborted the attempted boarding and escaped. A search was made and nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2883333333333333",1:"104.33833333333334",2:"Attack ID: 082-22 <br /> Sitrep: <small> 26.08.2022: 0330 UTC: Posn: 01:17.30N - 104:20.30E, Singapore Straits.<br /><br />\r\nAlert crew on board a tug notice several unauthorised persons boarding the barge under tow. VTIS informed and searchlights directed towards the barge and persons. A coast guard patrol boat responded. Seeing the patrol boat the persons escaped. The patrol boat escorted the tug and barge and inspected the barge to ensure no unauthorised persons remained onboard. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2326666666666666",1:"103.50883333333333",2:"Attack ID: 081-22 <br /> Sitrep: <small> 03.08.2022: 0800 UTC: Posn: 01:13.96N &ndash; 103:30.53E, Singapore Straits.<br /><br />\r\nWhile underway, a barge under tow was boarded by unauthorized persons. Master informed VTIS and a coastguard patrol boat was sent to investigate. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"29.909561377974182",1:"32.55592346191406",2:"Attack ID: 080-22 <br /> Sitrep: <small> 07.09.2022: 0215 UTC: Posn: Suez Canal Southern Anchorage, Egypt.<br /><br />\r\nAlert duty crew onboard an anchored container ship noticed two unauthorized persons attempting to board via the anchor chain and directed the searchlight towards the persons resulting in the boarding attempt being aborted and the persons moving away. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"0.051666666666666666",1:"-50.995",2:"Attack ID: 079-22 <br /> Sitrep: <small> 30.08.2022: 0400 UTC: Posn: 00:03.1N &ndash; 050:59.7W, Macapa Anchorage, Brazil.<br /><br />\r\nTwenty persons wearing black face masks, armed with a gun and long knives boarded an anchored bulk carrier. Six local security guards and duty crew were beaten by the robbers who then tied their hands and feet. Master raised the alarm and called port control via the VHF channel. Hearing the VHF calls, the robbers aborted their attempt to enter the accommodation and escaped with stolen ship&rsquo;s stores. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"13.756666666666666",1:"121.03833333333333",2:"Attack ID: 078-22 <br /> Sitrep: <small> 30.08.2022: 2330 UTC: Posn: 13:45.4N &ndash; 121:02.3E, Batangas Port, Philippines.<br /><br />\r\nUnnoticed, robbers boarded a berthed vehicle carrier and escaped with ship&rsquo;s properties. The theft was noticed by the duty crew on routine rounds. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-6.125",1:"12.21",2:"Attack ID: 077-22 <br /> Sitrep: <small> 24.08.2022: 0120 UTC: Posn: 06:07.5S &ndash; 012:12.6E, Soyo Anchorage, Angola.<br /><br />\r\nTwo robbers armed with bolt cutter and knives boarded an anchored container ship. Duty AB on routine rounds noticed the robbers and informed bridge. Alarm raised, ship&rsquo;s whistle sounded, and PA announcement made. Hearing the alarm, the robbers escaped. Crew mustered and a search was carried out. It was reported that one container was forced open, and some cargo contents were stolen. Incident was reported to the Port Authorities through local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"10.244333333333334",1:"-64.56388888888888",2:"Attack ID: 076-22 <br /> Sitrep: <small> 07.01.2022: 0630 UTC: Posn: Berth No.5, Port Pertigalete, Venezuela.<br /><br />\r\nDuty crew onboard a berthed bulk carrier noticed two robbers on the forecastle deck and raised the alarm. Seeing the alerted crew the robbers escaped. Chief officer and onboard security guard searched the area and reported that the padlocks to the watertight doors were broken, and the rescue boat motor engine was missing. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2383333333333333",1:"104.24305555555556",2:"Attack ID: 075-22 <br /> Sitrep: <small> 07.01.2022: 2140 UTC: Posn: 01:14.18N &ndash; 104:13.95E, Singapore Straits.<br /><br />\r\nFour robbers armed with knives boarded a tanker underway and entered into the engine room. They took hostage the duty motorman, locked him in the fuel injector room, and went into the workshop. The motorman managed to free himself and informed bridge. Alarm raised, crew mustered and VTIS informed. Hearing the alarm, the robbers escaped. A search was carried out. No injuries to crew and nothing reported stolen. The tanker resumed her voyage. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2441666666666666",1:"104.0625",2:"Attack ID: 074-22 <br /> Sitrep: <small> 01.03.2022: 1830 UTC: Posn: 01:14.39N &ndash; 104:03.45E, Singapore Straits.<br /><br />\r\nFour persons boarded a bulk carrier underway and entered into the engine room. 3/E noticed the persons and informed the bridge. Alarm raised, crew mustered, VTIS informed, and a search was carried out. VTIS instructed the ship to alter course to the anchorage area. Upon anchoring, the coast guard boarded and searched the ship. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"6.803333333333334",1:"-58.17",2:"Attack ID: 073-22 <br /> Sitrep: <small> 09.08.2022: 0400 UTC: Posn: 06:48.2N &ndash; 058:10.2W, GNIC Terminal, Port Georgetown, Guyana.<br /><br />\r\nUnnoticed, robbers boarded a berthed general cargo ship during cargo operations and escaped with ship&rsquo;s properties. The theft was noticed by the bosun after the vessel shifted to another terminal. The incident was reported to the port authorities through the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"18.666666666666668",1:"-72.38472222222222",2:"Attack ID: 072-22 <br /> Sitrep: <small> 17.02.2022: 2240 UTC: Posn: 18:40.0N &ndash; 072:23.5W, Port Lafiteau, Haiti.<br /><br />\r\nThree robbers armed with guns and machetes boarded a drifting container ship. They threatened and took the bosun hostage and stole his personal belongings. Alarm raised, crew mustered and engine started. Seeing the alerted crew the robbers escaped with stolen ship&rsquo;s stores. VTS and Pilot Station called. No response received. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.16",1:"103.45333333333333",2:"Attack ID: 071-22 <br /> Sitrep: <small> 29.07.2022: 1840 UTC: Posn: 01:09.6N &ndash; 103:27.2E, Singapore Straits.<br /><br />\r\nTwo robbers boarded a general cargo ship underway. They entered the engine room, stole engine spares, and escaped. Crew mustered, and a search was carried out. Vessel and crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"3.9333333333333336",1:"98.79",2:"Attack ID: 070-22 <br /> Sitrep: <small> 17.08.2022: 2145 UTC: Posn: 03:56.0N &ndash; 098:47.4E, Belawan Anchorage, Indonesia.<br /><br />\r\nDuty AB onboard an anchored bulk carrier noticed two robbers armed with knives near the forecastle store and immediately notified the OOW. Alarm raised, PA announcement made and crew mustered. Hearing the alarm and seeing the crew alertness, the robbers escaped with stolen ship&rsquo;s properties. Incident reported to Belawan VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"5.823166666666666",1:"118.137",2:'Attack ID: 069-22 <br /> Sitrep: <small> 11.08.2022: 2020 UTC: Posn: 05:49.39N &ndash; 118:08.22E, Sandakan Anchorage, Sabah, Malaysia.<br /><br />\r\nFour robbers in a speed boat approached and boarded an anchored tanker. Duty officer noticed some movements near the bosun store and immediately raised the alarm, sounded ship&rsquo;s whistle and made PA announcement. Hearing the alarm and seeing the crew alertness, the robbers escaped with stolen ship"s stores. Incident reported to the local agent. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2466666666666666",1:"103.44166666666666",2:"Attack ID: 068-22 <br /> Sitrep: <small> 31.07.2022: 0500 UTC: Posn: 01:14.8N &ndash; 103:26.5E, Singapore Straits.<br /><br />\r\nWhile underway a barge under tow was boarded by unknown number of robbers who escaped with stolen cargo. Master reported the incident to Singapore and Malaysia VTS. Authorities boarded the vessel for investigation. All crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.1733333333333333",1:"103.47833333333334",2:"Attack ID: 067-22 <br /> Sitrep: <small> 29.01.2022: 2000 UTC: Posn: 01:10.4N &ndash; 103:28.7E, Singapore Straits.<br /><br />\r\nTwo robbers boarded an offshore tug underway. Alarm raised, crew mustered and VTS informed. Upon hearing the alarm and seeing the crew alertness, the robbers escaped without stealing anything. All crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.1483333333333334",1:"103.47833333333334",2:"Attack ID: 066-22 <br /> Sitrep: <small> 22.07.2022: 1700 UTC: Posn: 01:08.9N &ndash; 103:28.7E, Singapore Straits.<br /><br />\r\nSix robbers armed with knives boarded a bulk carrier underway, stole engine spares, and escaped. Alarm raised, crew mustered, and a search was carried out. VTIS informed. The Singapore Coast Guard boarded the ship for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.3116666666666665",1:"104.35166666666667",2:"Attack ID: 065-22 <br /> Sitrep: <small> 29.07.2022: 1948 UTC: Posn: 01:18.7N - 104:21.1E, Singapore Straits.<br /><br />\r\nThree robbers armed with knives boarded a bulk carrier underway and entered the engine room. They warned the engine crew and cadet not to react by showing knives, stole engine spares, and escaped. Alarm raised, crew mustered, and a search was carried out. VTIS informed. On anchoring, the Singapore Police Coast Guard boarded the ship for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"21.934333333333335",1:"89.52833333333334",2:"Attack ID: 064-22 <br /> Sitrep: <small> 11.07.2022: 1505 UTC: Posn: 21:56.06N - 089:31.70E, Pussur River, Mongla, Bangladesh.<br /><br />\r\nRobbers armed with knives and sticks boarded an anchored heavy load carrier three times within a 24-hour period. On each occasion, the alert crew noticed the robbers and raised the alarm resulting in the robbers escaping empty handed. Incident reported to the coast guard. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2833333333333332",1:"104.28333333333333",2:"Attack ID: 063-22 <br /> Sitrep: <small> 29.07.2022: 1730 UTC: Posn: 01:17N &ndash; 104:17E, Singapore Straits.<br /><br />\r\nFour robbers armed with knives boarded a bulk carrier underway and entered the engine room. They warned the engine crew not to react by showing knives, stole engine spares and escaped. Alarm raised, crew mustered, and a search was carried out. Port control informed. No injuries were reported to the crew. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"11.838055555555556",1:"122.68516666666666",2:"Attack ID: 062-22 <br /> Sitrep: <small> 12.07.2022: 1400-1500 UTC: Posn: 11:50.17N &ndash; 122:41.11E, Around 14nm NNW of Roxas City, Philippines.<br /><br />\r\nArmed robbers boarded a sailing vessel underway, stole crew personal belongings and escaped. Vessel and crew reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-6.033888888888889",1:"106.90055555555556",2:"Attack ID: 061-22 <br /> Sitrep: <small> 17.07.2022: 1800 UTC: Posn: 06:02.2S &ndash; 106:54.2E, Jakarta C Anchorage, Indonesia.<br /><br />\r\nThree persons armed with a long knife boarded a bulk carrier as she approached the anchorage area. Duty watchkeeper on routine rounds noticed the persons, and he immediately informed the bridge. General alarm sounded and the watchkeeper shouted at the persons, resulting in them escaping without stealing anything.  Incident reported to the Tanjung Priok VTS. Port police boarded the vessel to investigate. Vessel and crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2686111111111111",1:"104.28583333333333",2:"Attack ID: 060-22 <br /> Sitrep: <small> 08.07.2022: 1524 UTC: Posn: 01:16.7N &ndash; 104:17.9E, Singapore Straits.<br /><br />\r\nArmed robbers boarded a tanker underway, entered the engine room and took the fourth engineer hostage. During routine rounds, duty oiler noticed two robbers and immediately notified the bridge. Alarm raised, PA announcement made, crew mustered and VTIS informed. Upon hearing the alarm and seeing the crew alertness, the robbers escaped without stealing anything. All crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.335",1:"104.30166666666666",2:"Attack ID: 059-22 <br /> Sitrep: <small> 03.07.2022: 2000 UTC: Posn: 01:20.1N &ndash; 104:18.1E, Singapore Straits.<br /><br />\r\nSix persons armed with guns boarded a bulk carrier underway. They took hostage the duty oiler by pointing a gun to his head and tied him up. Two of the persons guarded the oiler while the others stole engine spares. After the robbers escaped the oiler managed to release himself and alerted the bridge. Alarm raised and crew mustered. VTIS informed and a coastguard patrol boat followed and monitored the ship. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"3.7880000000000003",1:"98.69733333333333",2:"Attack ID: 058-22 <br /> Sitrep: <small> 28.06.2022: 1930 UTC: Posn: 03:47.28N - 098:41.84E, Belawan Port, Indonesia.<br /><br />\r\nDuring loading operations, duty crew onboard a berthed tanker noticed two unauthorised persons fleeing from the tanker from the seaside by boat. OOW notified and a search was carried out. Ship&rsquo;s properties were reported missing. The incident was reported to the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"22.138333333333332",1:"91.72166666666666",2:"Attack ID: 057-22 <br /> Sitrep: <small> 27.06.2022: 2130 UTC: Posn: 22:08.3N \uff1f 091:43.3E, Chittagong Anchorage, Bangladesh.<br /><br />\r\nThree unauthorised persons boarded an anchored container ship during heavy rain. Duty AB on routine rounds noticed the persons near the forward store and immediately notified the OOW. Alarm raised and crew mustered. Hearing the alarm and seeing the crew alertness, the persons escaped. A search was carried out. Ship&rsquo;s properties were reported stolen. Incident reported to port control via VHF channel.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12.018333333333333",1:"-77.22166666666666",2:'Attack ID: 056-22 <br /> Sitrep: <small> 23.06.2022: 0745 UTC: Posn: 12:01.1S &ndash; 077:13.3W, Callao Anchorage, Peru.<br /><br />\r\nAround three robbers armed with long knives boarded an anchored tanker. Alarm raised. Upon hearing the alarm, the robbers escaped with ship"s stores. Incident reported to TRAMAR and port authorities. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2766666666666666",1:"104.25333333333333",2:"Attack ID: 055-22 <br /> Sitrep: <small> 19.06.2022: 1730 UTC: Posn: 01:16.6N &ndash; 104:15.2E, Singapore Straits.<br /><br />\r\nDuty crew onboard a bulk carrier underway noticed two unauthorized persons in the steering gear room. Alarm raised, crew mustered and VTS informed. The persons escaped upon seeing the crew alertness. A naval patrol boat came to assist. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"22.226666666666667",1:"91.73",2:'Attack ID: 054-22 <br /> Sitrep: <small> 25.04.2022: 1850 UTC: Posn: 22:13.6N &ndash; 091:43.8E, Chittagong Anchorage, Bangladesh.<br /><br />\r\nDuty officer onboard an anchored product tanker noticed three robbers on the forecastle deck and raised the alarm. Crew mustered and proceeded towards the forecastle. Hearing the alarm and seeing the crew alertness, the robbers escaped with stolen ship"s stores. Incident reported to port control and the Bangladesh coast guard, who later boarded the vessel for investigation. Two days later, the stolen items were recovered by the coast guard and returned to the tanker. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.1193333333333333",1:"103.52316666666667",2:"Attack ID: 053-22 <br /> Sitrep: <small> 27.05.2022: 1440UTC: Posn: 01:07.16N &ndash; 103:31.39E, Singapore Straits.<br /><br />\r\nThree robbers boarded a product tanker underway. Alert crew noticed the robbers and raised the alarm resulting in the robbers escaping empty handed. Incident reported to VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2483333333333333",1:"104.05833333333334",2:"Attack ID: 052-22 <br /> Sitrep: <small> 16.02.2022: 1805 UTC: Posn: 01:14.9N &ndash; 104:03.5E, Singapore Straits.<br /><br />\r\nTwo robbers boarded a bulk carrier underway using a hook attached with a rope. Alert crew noticed the robbers and raised the alarm. Hearing the alarm and seeing the crew alertness, the robbers escaped empty handed. Incident reported to VTIS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.1416666666666666",1:"103.475",2:"Attack ID: 051-22 <br /> Sitrep: <small> 27.05.2022: 1830 UTC: Posn: 01:08.5N &ndash; 103:28.5E, Singapore Straits.<br /><br />\r\nThree robbers armed with long knives boarded a bulk carrier underway. Duty oiler on routine rounds noticed the robbers and informed the C/E. Alarm raised, PA announcement made, and crew mustered. Hearing the alarm, the robbers escaped with the stolen ship&rsquo;s property. VTIS informed. A navy patrol boat escorted the ship to the anchorage area.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-6.0065",1:"106.9025",2:"Attack ID: 050-22 <br /> Sitrep: <small> 10.04.2022: 2056 UTC: Posn: 06:00.39S &ndash; 106:54.15E, Jakarta Anchorage, Indonesia.<br /><br />\r\nThree robbers boarded an anchored bulk carrier. Duty oiler noticed the robbers and informed bridge. Alarm raised and crew mustered. A search was made throughout the ship. Nothing reported stolen. Incident was reported to the Jakarta Port Control and port police boarded the vessel to investigate. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"4.8955",1:"-1.7065000000000001",2:"Attack ID: 049-22 <br /> Sitrep: <small> 20.05.2022: 0600 UTC: Posn: 04:53.73N &ndash; 001:42.39W, Takoradi Anchorage, Ghana.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier by pulling down the razor wire. They broke into the paint store, stole ship&rsquo;s stores, and escaped. The theft was noticed by the duty crew on routine rounds. Port control informed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"0.9716666666666667",1:"105.11666666666666",2:"Attack ID: 048-22 <br /> Sitrep: <small> 20.05.2022: 1950 UTC: Posn: 00:58.3N &ndash; 105:07.0E, Around 15nm East of Mapur Island, Indonesia.<br /><br />\r\nFour persons armed with machetes boarded a bulk carrier underway. Alarm raised, SSAS activated, and non-essential crew locked themselves in their cabins. Authorities informed. The persons attempted to gain access into the Master&rsquo;s cabin but failed. Later, the crew mustered and made a search throughout the ship. No persons were found onboard, and nothing reported stolen. The ship continued her passage. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"7.043333333333333",1:"-57.975",2:"Attack ID: 047-22 <br /> Sitrep: <small> 19.05.2022: 0430 UTC: Posn: 07:02.6N - 057:58.5W, Georgetown Anchorage, Guyana.<br /><br />\r\nAn anchored bulk carrier was boarded by five robbers armed with knives. During routine rounds, duty crew noticed the robbers. General alarm raised, PA announcement made and crew mustered. The duty crew was threatened with knives but managed to escape. Upon hearing the alarm, the robbers escaped without stealing anything. Incident reported to Georgetown VTS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-6.009166666666666",1:"106.9135",2:"Attack ID: 046-22 <br /> Sitrep: <small> 17.05.2022: 1615 UTC: Posn: 06:00.55S - 106:54.81E, Jakarta Anchorage, Indonesia.<br /><br />\r\nOfficer on watch onboard an anchored container ship noticed a small unlit boat near the stern. At the same time the steering gear room door alarm was activated. Alarm raised and crew mustered. Hearing the alerted crew the robbers escaped. A search was carried out and nothing reported stolen. Incident report to Jakarta VTS and port control. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-5.822852075034246",1:"13.452058486938489",2:'Attack ID: 045-22 <br /> Sitrep: <small> 06.05.2022: 1924 UTC: Posn: 05:50.0S - 013:25.8E, Matadi Port, Democratic Republic of the Congo.<br /><br />\r\nA berthed container ship was boarded by three persons who stole ship"s properties and escaped. The incident was reported to the Harbour Master. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"13.716666666666667",1:"121.03333333333333",2:"Attack ID: 044-22 <br /> Sitrep: <small> 27.04.2022: 1945 UTC: Posn: Batangas Anchorage, Philippines.<br /><br />\r\nAround three to four robbers armed with knives boarded an anchored product tanker. They broke into the bosun store and stole ship&rsquo;s stores. Duty crew on routine rounds noticed the robbers and raised the alarm. Crew mustered. Hearing the alarm and seeing the crew alertness, the robbers escaped with the stolen stores. VTS Batangas informed. The coast guard boarded the tanker for inspection. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-0.06416666666666666",1:"-51.108333333333334",2:"Attack ID: 043-22 <br /> Sitrep: <small> 26.04.2022: 0700 UTC: Posn: 00:03.85S &ndash; 051:06.50W, Macapa Anchorage, Brazil.<br /><br />\r\nThree robbers boarded an anchored bulk carrier. During routine rounds, duty crew noticed the robbers. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped empty handed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2383333333333333",1:"103.98116666666667",2:"Attack ID: 042-22 <br /> Sitrep: <small> 15.04.2022: 2042 UTC: Posn: 01:14.30N &ndash; 103:58.87E, Singapore Straits.<br /><br />\r\nAlert crew onboard a tanker underway noticed an unauthorised person attempting to break into the accommodation via the poop-deck entrance and immediately informed the bridge.  Alarm raised and crew mustered resulting in the robber escaping empty handed. Incident reported to Singapore VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"4.898333333333333",1:"-1.6816666666666666",2:"Attack ID: 041-22 <br /> Sitrep: <small> 13.04.2022: 0345 UTC: Posn: 04:53.9N &ndash; 001:40.9W, Takoradi Anchorage, Ghana.<br /><br />\r\nTwo robbers in a fishing boat approached and boarded an anchored bulk carrier during heavy rain. They broke into the forward store and stole ship&rsquo;s stores. The duty crew on rounds noticed the robbers and informed the officer on watch who raised the general alarm and sounded the ship&rsquo;s horn. Crew mustered. Hearing the alerted crew the robbers escaped. Port control informed. A patrol boat was sent to the location. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"22.225",1:"91.735",2:'Attack ID: 040-22 <br /> Sitrep: <small> 09.04.2022: 0800 UTC: Posn: 22:13.5N &ndash; 091:44.1E, Chittagong Anchorage, Bangladesh.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier during cargo operations. They stole the rescue boat"s engine and escaped. The theft was noticed by the duty crew on rounds. A search was carried out. Authorities informed. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.52",1:"1.5113333333333334",2:"Attack ID: 039-22 <br /> Sitrep: <small> 03.04.2022: 1848 UTC: Posn: 01:31.20N &ndash; 001:30.68E, Around 261nm SE of Accra, Ghana.<br /><br />\r\nA bulk carrier was boarded by an unknown number of pirates and the crew retreated into the citadel. On being notified of the incident, the IMB Piracy Reporting Centre immediately alerted and liaised with the Regional Authorities and international warships to request their assistance. An Italian Navy warship and its helicopter responded and proceeded to render assistance resulting in the crew and ship being safe. The vessel proceeded to a safe port under the escort of the warship. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"13.756666666666666",1:"121.02666666666667",2:"Attack ID: 038-22 <br /> Sitrep: <small> 02.04.2022: 1630 UTC: Posn: 13:45.4N &ndash; 121:01.6E, Batangas Anchorage, Philippines.<br /><br />\r\nFive robbers boarded an anchored vehicle carrier via the secured hawse pipe through a small gap between the cover and the anchor chain. Duty crew noticed the robbers and retreated to the bridge. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped with stolen ship&rsquo;s properties. Incident reported to VTS, and the coast guard boarded the ship for inspections. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"3.9166666666666665",1:"98.76666666666667",2:"Attack ID: 037-22 <br /> Sitrep: <small> 23.03.2022: 2120 UTC: Posn: 03:55N - 098:46E, Belawan Anchorage, Indonesia.<br /><br />\r\nThree robbers armed with knives boarded an anchored bulk carrier. Duty crew on routine rounds noticed the robbers near the forecastle and raised the alarm. Crew mustered. Seeing the crew alertness, the robbers escaped with stolen ship&rsquo;s properties. The incident was reported to port authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.047",1:"103.63516666666666",2:"Attack ID: 036-22 <br /> Sitrep: <small> 27.02.2022: 1800 UTC: Posn: 01:02.82N &ndash; 103:38.11E, Singapore Straits.<br /><br />\r\nDuty Engineer onboard a bulk carrier underway was alerted by the trainee engineer of the presence of robbers in the workshop. He informed the OOW who raised the alarm and made an announcement on the PA resulting in all crew mustering. On hearing the alarm, the robbers tried to escape but were confronted by the oiler and 4th Engineer. The robbers waved their knives at them, and escaped. A search was carried out. It was reported that ship&rsquo;s spares were stolen. VTS informed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"22.238333333333333",1:"91.82666666666667",2:'Attack ID: 035-22 <br /> Sitrep: <small> 15.03.2022: 1655 UTC: Posn: 22:14.3N &ndash; 091:49.6E, CUFL Jetty, Chittagong, Bangladesh.<br /><br />\r\nSix robbers boarded a berthed chemical tanker during cargo operations. Duty crew noticed the robbers near the forecastle store. Alarm raised and crew mustered. Hearing the alarm and seeing the crew alertness, the robbers escaped with stolen ship"s stores. Port control and coast guard informed and inspections carried out. Additional watchmen were arranged by the local agent. Later, the coast guard recovered the stolen items and returned it to the tanker. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12.026833333333334",1:"-77.19716666666666",2:'Attack ID: 034-22 <br /> Sitrep: <small> 14.03.2022: 0100 UTC: Posn: 12:01.61S - 077:11.83W, Callao Anchorage, Peru.<br /><br />\r\nSeven robbers armed with knives boarded an anchored container vessel. Alarm raised, PA announcement made, and crew mustered resulting in the robbers escaping with stolen ship"s properties and stores. Incident reported to TRAMAR and the port authorities boarded the ship for investigation. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12.016666666666667",1:"-77.2",2:"Attack ID: 033-22 <br /> Sitrep: <small> 13.03.2022: 0100 UTC: Posn: 12:01.0S &ndash; 077:12.0W, Callao Anchorage, Peru.<br /><br />\r\nUnnoticed, robbers boarded an anchored vehicle carrier and escaped with ship&rsquo;s properties. The theft was noticed by the duty crew on routine rounds. Incident reported to port authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12",1:"-77.21166666666667",2:'Attack ID: 032-22 <br /> Sitrep: <small> 10.03.2022: 0800 UTC: Posn: 12:00.0S &ndash; 077:12.7W, Callao Anchorage, Peru.<br /><br />\r\nAround seven robbers armed with long knives in a small boat approached and boarded an anchored bulk carrier during dense fog. They took hostage the duty AB and stole ship&rsquo;s stores. The bridge duty officer tried to contact the AB. When no response was received he instructed the duty bosun and OS to investigate. Alarm raised and crew mustered. Hearing the alarm and seeing the crew"s alertness, the robbers released the duty AB and escaped in their boat. The incident was reported to the port authorities, local agent, and CSO.<br /><br />\r\n </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2583333333333333",1:"104.07666666666667",2:"Attack ID: 031-22 <br /> Sitrep: <small> 03.03.2022: 1630 UTC: Posn: 01:15.5N - 104:04.6E, Singapore Straits.<br /><br />\r\nFive robbers boarded a bulk carrier underway. Duty Engineer noticed the robbers and informed the bridge. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped empty handed. Incident reported to the Singapore VTIS. A Singaporean Navy vessel came to assist and followed the vessel until the inspection by the ship&rsquo;s crew was completed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2366666666666666",1:"104.00283333333333",2:"Attack ID: 030-22 <br /> Sitrep: <small> 01.03.2022: 2125 UTC: Posn: 01:14.20N &ndash; 104:00.17E, Singapore Straits.<br /><br />\r\nA tanker underway received a VHF call from VTIS stating that small crafts are following the tanker. The duty watchkeepers directed searchlights and aldis lamp towards the crafts. At the same time, the junior engineer on routine rounds in the engine room noticed six robbers armed with a gun. Upon seeing the engineer, the robbers escaped. Alarm raised and crew mustered. A naval boat came closer and assisted the tanker. A search was carried out, nothing reported stolen. Bare footprints were noticed on the poop deck area. The tanker continued her passage. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2429999999999999",1:"104.06833333333333",2:"Attack ID: 029-22 <br /> Sitrep: <small> 01.03.2022: 1810 UTC: Posn: 01:14.58N &ndash; 104:04.10E, Singapore Straits.<br /><br />\r\nThree robbers armed with knives boarded a bulk carrier underway. Duty AB on routine rounds noticed the robbers and informed the OOW. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped empty handed. Incident reported to the Singapore VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.0638333333333334",1:"103.68516666666666",2:"Attack ID: 028-22 <br /> Sitrep: <small> 25.02.2022: 1838 UTC: Posn: 01:03.83N &ndash; 103:41.11E, Singapore Straits.<br /><br />\r\nFive robbers armed with long knives boarded a bulk carrier underway. They broke the steering gear room padlock and entered the engine room, threatened the duty Engr with a knife and took him hostage, stole ship&rsquo;s properties from the engine room workshop and escaped. Alarm raised and crew mustered. A search was carried out and footprints on the deck were identified. VTIS informed. On anchoring the Singapore coast guard boarded the ship for inspection. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.254",1:"104.14633333333333",2:"Attack ID: 027-22 <br /> Sitrep: <small> 24.02.2022: 1840 UTC: Posn: 01:15.24N - 104:08.78E, Singapore Straits.<br /><br />\r\nTwo robbers boarded a tanker underway. Duty oiler and 3rd Engineer noticed the robbers in the engine room and immediately informed the bridge. Alarm raised and crew mustered resulting in the robbers escaping. A search was carried out and ship&rsquo;s stores reported stolen. VTIS notified.<br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12.0175",1:"-77.18966666666667",2:"Attack ID: 026-22 <br /> Sitrep: <small> 28.01.2022: 0710 UTC: Posn: 12:01.05S - 077:11.38W, Callao Anchorage, Peru.<br /><br />\r\nSeven robbers armed with guns and knives boarded an anchored bulk carrier. They took the duty AB as hostage, hit him on the head and tied his hands and legs. When the duty AB did not answer the radio calls from the bridge, the OOW instructed the second duty crew to check. Alarm raised and crew mustered. A search was carried out. Ship&rsquo;s properties and stores were reported stolen. Incident reported to TRAMAR and the coast guard who boarded the ship for inspection. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-8.766666666666667",1:"13.25",2:"Attack ID: 025-22 <br /> Sitrep: <small> 23.02.2022: 0200 UTC: Posn: 08:46S &ndash; 013:15E, Luanda Anchorage, Angola.<br /><br />\r\nUnnoticed, robbers boarded an anchored offshore supply ship and escaped with ship&rsquo;s stores and properties. The theft was noticed by the duty crew on routine rounds. Incident reported to port authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2483333333333333",1:"104.025",2:"Attack ID: 024-22 <br /> Sitrep: <small> 18.02.2022: 1252 UTC: Posn: 01:14.9N - 104:01.5E, Singapore Straits.<br /><br />\r\nTwo robbers boarded a tanker underway. Alert crew noticed the robbers and raised the alarm resulting in the robbers escaping in their wooden boat. Nothing reported stolen. Incident reported to the Singapore VTS.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"4.901666666666666",1:"-1.6866666666666665",2:"Attack ID: 023-22 <br /> Sitrep: <small> 18.02.2022: 0050 UTC: Posn: 04:54.1N &ndash; 001:41.2W, Takoradi Anchorage, Ghana.<br /><br />\r\nDuty crew onboard an anchored bulk carrier noticed four robbers armed with knives. Alarm raised and crew mustered. Upon hearing the alarm and seeing the alerted crew, the robbers escaped. A search was carried out and which identified ship&rsquo;s stores were stolen. Incident reported to local authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2383333333333333",1:"104.031",2:"Attack ID: 022-22 <br /> Sitrep: <small> 16.02.2022: 1400 UTC: Posn: 01:14.30N - 104:01.86E, Singapore Straits.<br /><br />\r\nTwo robbers boarded a bulk carrier underway. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped empty handed. Incident reported to the Singapore VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2833333333333332",1:"104.30666666666667",2:"Attack ID: 021-22 <br /> Sitrep: <small> 11.02.2022: 1930 UTC: Posn: 01:17.0N &ndash; 104:18.4E, Singapore Straits.<br /><br />\r\nRobbers boarded a bulk carrier underway and entered the engine room. Duty crew on rounds noticed wet footprints on the deck, and immediately raised the alarm resulting in the robbers escaping. Crew mustered and a search was conducted. It was reported that engine spares were stolen. Authorities informed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-1.26",1:"116.785",2:"Attack ID: 020-22 <br /> Sitrep: <small> 07.02.2022: 1714 UTC: Posn: 01:15.6S - 116:47.1E, Balikpapan Inner Anchorage, Indonesia.<br /><br />\r\nDuring anchor watch on bridge of a product tanker, duty lookout saw a rope being thrown over the forecastle. Two robbers were noticed climbing onboard and forcing their way into the bosun store. General alarm activated and crew mustered. Hearing the alarm and seeing the crew alertness, the robbers jumped overboard and escaped in their boat with two accomplices. A search was carried out throughout the tanker. Ship&rsquo;s stores were reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-8.738333333333333",1:"13.295",2:"Attack ID: 019-22 <br /> Sitrep: <small> 08.02.2022: 0315 UTC: Posn: 08:44.3S &ndash; 013:17.7E, Luanda Anchorage, Angola.<br /><br />\r\nUnnoticed, robbers boarded an anchored LPG tanker and escaped with ship&rsquo;s properties and stores. The theft was noticed by duty crew on routine rounds. On conducting a search, it was identified that the perpetrators had gained access via the hawse pipe. Incident reported to port control. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.24",1:"104.06666666666666",2:"Attack ID: 018-22 <br /> Sitrep: <small> 07.02.2022: 1726 UTC: Posn: 01:14.4N &ndash; 104:04.0E, Singapore Straits.<br /><br />\r\nFour robbers boarded a tanker underway. They entered the engine room and attempted to steal engine spares. 3/E noticed the robbers, reported to the bridge and raised the alarm. Upon hearing the alarm, the robbers escaped without stealing anything. All crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"22.031166666666667",1:"88.08483333333334",2:"Attack ID: 017-22 <br /> Sitrep: <small> 24.01.2022: 2316 UTC: Posn: 22:01.87N &ndash; 088:05.09E, Haldia Port, India.<br /><br />\r\nUnnoticed, robbers boarded a berthed bulk carrier and escaped with ship&rsquo;s engine spares. The theft was noticed by the duty crew on routine rounds. The incident was reported to the local authorities through the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-29.870833333333334",1:"31.033",2:"Attack ID: 016-22 <br /> Sitrep: <small> 02.02.2022: 1915 UTC: Posn: 29:52.25S - 031:01.98E, Berth N, Durban Port, South Africa.<br /><br />\r\nUnnoticed, robbers boarded a berthed bulk carrier, stole cash and crew personal belongings and escaped. Incident reported to the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12.025",1:"-77.22",2:'Attack ID: 015-22 <br /> Sitrep: <small> 04.02.2022: 0700 UTC: Posn: 12:01.5S - 077:13.2W, Callao Anchorage, Peru.<br /><br />\r\nThree robbers armed with knives boarded an anchored bulk carrier. They took hostage the duty crew and tied him up. Duty officer noticed the robbers and raised the alarm. Seeing the alerted crew, the robbers escaped in a waiting boat. Ship"s stores reported stolen.<br /><br />\r\n </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"4.7330000000000005",1:"-1.6948333333333334",2:"Attack ID: 014-22 <br /> Sitrep: <small> 02.02.2022: 0116 UTC: Posn: 04:43.98N - 001:41.69W, Takoradi Anchorage, Ghana.<br /><br />\r\nDuty crew onboard an anchored container vessel heard a sound near the anchor hawse pipe. Upon checking, a person was seen in the hawse pipe attempting to board the vessel. The crew shouted at the person and notified the OOW who raised the alarm. Seeing the alerted crew and hearing the alarm the person aborted the boarding and escaped. Incident reported to the Takoradi Port Control. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"3.9076666666666666",1:"98.78616666666667",2:"Attack ID: 013-22 <br /> Sitrep: <small> 01.02.2022: 2035 UTC: Posn: 03:54.46N &ndash; 098:47.17E, Belawan Anchorage, Indonesia.<br /><br />\r\nThree robbers armed with knives boarded an anchored ship using a hook attached to a rope. They chased the duty AB on routine rounds, who managed to escape and informed the OOW. Alarm raised and crew mustered. Upon hearing the alarm and seeing the crew alertness, the robbers escaped. A search was made throughout the ship and found out that ship&rsquo;s properties was reported stolen. Local authorities informed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"5.787",1:"118.02533333333334",2:"Attack ID: 012-22 <br /> Sitrep: <small> 01.02.2022: 2140 UTC: Posn: 05:47.22N &ndash; 118:01.52E, MOT Terminal, Sandakan Port, Sabah, Malaysia.<br /><br />\r\nDuty AB on routine rounds onboard a berthed tanker noticed an unidentified person near the forecastle store and immediately notified the OOW. Alarm raised and crew mustered. Hearing the alarm and seeing the alerted crew, the person escaped. A search was made throughout the tanker. It was reported that the forecastle store was broken into and ship&rsquo;s stores stolen. Local authorities informed.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"0.03333333333333333",1:"-50.983333333333334",2:"Attack ID: 011-22 <br /> Sitrep: <small> 25.01.2022: 2240 UTC: Macapa Anchorage, Brazil.<br /><br />\r\nChief Officer onboard an anchored bulk carrier noticed two small boats in the vicinity of the vessel and notified the duty AB. While checking the forecastle deck the duty AB noticed two unauthorised persons attempting to board via the anchor chain. Alarm raised and crew mustered. Hearing the alarm, the unauthorised persons escaped. A search was made throughout the ship. Nothing reported stolen. Incident was reported to the Port Authorities.<br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"0.035",1:"-50.99166666666667",2:"Attack ID: 010-22 <br /> Sitrep: <small> 23.01.2022: 0420 UTC: Posn: 00:02.1N - 050:59.5W, Macapa Anchorage, Brazil.<br /><br />\r\nFour robbers armed with knives and guns boarded an anchored bulk carrier. They took the duty OS as hostage, threatened him, tied his hands and covered his face with burlap. The robbers stole ship&rsquo;s stores and released the OS before escaping. Incident reported to the OOW who raised the alarm. Incident reported to pilot station and port control. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-8.791666666666666",1:"13.253333333333334",2:"Attack ID: 009-22 <br /> Sitrep: <small> 29.01.2022: 0110 UTC: Posn: 08:47.5S &ndash; 013:15.2E, Luanda Anchorage, Angola.<br /><br />\r\nTwo crew boats alongside each other were boarded by three unauthorised persons while at anchored. Duty crew on routine rounds noticed the unauthorised persons and immediately raised the alarm. Upon hearing the alarm and seeing the alerted crew, the unauthorised persons escaped with their accomplices in a canoe. Nothing reported stolen. Incident was reported to the Port Authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"4.378333333333333",1:"-4.175",2:'Attack ID: 008-22 <br /> Sitrep: <small> 24.01.2022: 2315 UTC: Posn: 04:22.7N - 004:10.5W, Around 59nm SSW of Abidjan, Ivory Coast.<br /><br />\r\nAround 9-11 pirates armed with guns boarded and hijacked the drifting tanker. All crew taken as hostage and detained initially on the bridge and then moved to the crew mess room. All communication and navigation equipment switched off and the bosun was instructed to paint over the vessel"s name written on top of the bridge. The pirates were heard communicating with another vessel. They then navigated the tanker using their own GPS equipment to rendezvous with the offtake vessel. While enroute the bosun was told to prepare the manifold. Once the tanker was alongside the offtake vessel, the chief officer and  bosun were told to commence discharge operations. After around six hours the cargo operations were stopped. The pirates disembarked and escaped with part of the tanker&rsquo;s cargo as well as ship&rsquo;s and crew cash, crew personal belongings and ship&rsquo;s properties before escaping. All crew reported safe. </small>',3:"media/com_fabrik/images/red-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"10.271666666666667",1:"-64.57833333333333",2:'Attack ID: 007-22 <br /> Sitrep: <small> 25.01.2022: 0610 UTC: Posn: 10:16.3N - 064:34.7W, Guanta Anchorage, Venezuela.<br /><br />\r\nTwo robbers boarded an anchored bulk carrier. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped with stolen ship"s properties and stores. Incident reported to the Harbour Master and Coast Guard via local agent. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-12.013333333333334",1:"-77.21333333333334",2:"Attack ID: 006-22 <br /> Sitrep: <small> 23.01.2022: 0040 UTC: Posn: 12:00.8S &ndash; 077:12.8W, Callao Anchorage, Peru.<br /><br />\r\nThree unidentified persons boarded an anchored bulk carrier. General alarm was raised, and crew mustered. Upon hearing the alarm and seeing the alerted crew, the unauthorised persons escaped. A search was made throughout the ship. Nothing reported stolen. Incident reported to TRAMAR and the port authority boarded the ship for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"-8.783333333333333",1:"13.233333333333333",2:'Attack ID: 005-22 <br /> Sitrep: <small> 23.01.2022: 0025 UTC: Posn: 08:47S - 013:14E, Luanda Anchorage, Angola.<br /><br />\r\nTwo robbers boarded an anchored crew boat, stole ship"s equipment, and escaped with their accomplices in a canoe. Port authorities notified. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"0.03166666666666667",1:"-50.995",2:"Attack ID: 004-22 <br /> Sitrep: <small> 10.01.2022: 0915 UTC: Posn: 00:01.9N &ndash; 050:59.7W, Macapa Anchorage, Brazil.<br /><br />\r\nDuty crew on routine rounds onboard an anchored bulk carrier noticed three robbers armed with guns and knives and immediately informed the D/O.  Alarm raised and crew mustered. The robbers pointed their guns at the mustered crew as they lowered ship&rsquo;s stores into a waiting boat. Incident reported to local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"22.779166666666665",1:"70.0615",2:"Attack ID: 003-22 <br /> Sitrep: <small> 03.01.2022: 1715 UTC: Posn: 22:46.75N &ndash; 070:03.69E, Kandla Anchorage, India.<br /><br />\r\nDuty AB on routine rounds onboard an anchored tanker noticed three unauthorized persons onboard and notified the officer on watch. Alarm raised, PA announcement made, and crew mustered resulting in the persons escaping in their boat. A search was carried out throughout the tanker. Ship&rsquo;s properties were reported stolen. Port control was informed, and coast guard officials boarded the tanker for inspection. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"6.351666666666667",1:"-10.796666666666667",2:"Attack ID: 002-22 <br /> Sitrep: <small> 09.01.2022: 0500 UTC: Posn: 06:21.1N &ndash; 010:47.8W, BMC Pier, Monrovia, Liberia.<br /><br />\r\nUnnoticed, robbers boarded a berthed tanker, stole ship&rsquo;s properties, and escaped. The theft was discovered by the duty officer on routine rounds. Incident reported to the Port Authorities and local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0},{0:"1.2758333333333334",1:"104.27566666666667",2:"Attack ID: 001-22 <br /> Sitrep: <small> 07.01.2022: 1842 UTC: Posn: 01:16.55N &ndash; 104:16.54E, Singapore Straits.<br /><br />\r\nAlert crew on deck rounds spotted four robbers armed with a long knife on the poop deck. Alarm raised, PA announcement made, and crew mustered resulting in the robbers escaping. A search was carried out throughout the tanker. Nothing was reported stolen. VTIS notified. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197121",title:"",groupClass:"type",c:0}]),u([{0:"-12.025",1:"-77.2",2:"Attack ID: 001-23 <br /> Sitrep: <small> 09.01.2023: 0425 UTC: Posn: 12:01.5S &ndash; 077:12.0W, Callao Anchorage, Peru.<br /><br />\r\nFour robbers armed with knives boarded an anchored general cargo ship via the anchor chain and broke into the forecastle store. Duty watchman on routine rounds was threatened with a knife as he approached the forecastle, and he immediately notified the bridge. Alarm raised, ship&rsquo;s horn sounded, and crew mustered. Hearing the alarm and seeing the crew alertness, the robbers escaped without stealing anything. Local authorities informed through the agents. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.2966666666666666",1:"104.175",2:"Attack ID: 002-23 <br /> Sitrep: <small> 04.01.2023: 0555 UTC: Posn: 01:17.8N &ndash; 104:10.5E, Singapore Straits.<br /><br />\r\nAround three to four robbers, in fishing boats, boarded a barge under tow. It is understood that some of the scrap metal transported by the barge were stolen. Incident reported to Singapore VTS and a coast guard boat responded. All crew members safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.35",1:"104.35",2:"Attack ID: 003-23 <br /> Sitrep: <small> 05.01.2023: 0400-1000 UTC: Posn: 01:21N &ndash; 104:21E, Singapore Straits.<br /><br />\r\nUnauthorised persons boarded a barge laden with scrap metal, stole some of the cargo and escaped. All crew members reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"10.213333333333333",1:"-75.84333333333333",2:"Attack ID: 004-23 <br /> Sitrep: <small> 19.01.2023: 0540 UTC: Posn: 10:12.8N &ndash; 075:50.6W, Cartagena, Colombia.<br /><br />\r\nThree unauthorised persons boarded a container ship underway. Alarm raised, ship&rsquo;s horn sounded, crew mustered, and coast guard notified. Hearing the alarm and seeing the crew alertness the persons escaped in their boat. The coast guard escorted the vessel and after berthing boarded the vessel for investigation. All crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"4.916666666666667",1:"-1.0833333333333333",2:"Attack ID: 006-23 <br /> Sitrep: <small> 25.01.2023: 2350 UTC: Posn: 04:55N - 001:05W, Takoradi Anchorage, Ghana.<br /><br />\r\nDuty officer onboard an anchored tanker spotted three unauthorised persons on the forecastle area. Alarm raised, crew mustered and port control notified. Hearing the alarm and seeing the crew alertness the persons escaped without stealing anything. A patrol boat was dispatched to the location and conducted an investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-6.238666666666667",1:"108.42216666666667",2:"Attack ID: 005-23 <br /> Sitrep: <small> 25.01.2023: 1915 UTC: Posn: 06:14.32S &ndash; 108:25.33E, Balongan Anchorage, Indonesia.<br /><br />\r\nAround five persons in a small boat approached an anchored tanker. Duty crew on rounds noticed one unauthorised person standing on the poop deck assisting another one to board. Alarm raised and crew mustered. Seeing the crew alertness, the unauthorised persons escaped with their accomplices in their boat. Incident reported to port control. All crew safe. Nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-5.5",1:"105.28666666666666",2:"Attack ID: 007-23 <br /> Sitrep: <small> 28.01.2023: 2140 UTC: Posn: 05:30.0S &ndash; 105:17.2E, Panjang Anchorage, Indonesia.<br /><br />\r\nSecond engineer onboard an anchored bulk carrier noticed four unauthorized persons in the engine room. He shouted at them, and the persons ran inside the steering flat, which the 2/E managed to secure. Alarm raised, crew mustered and the incident was reported to the local agent and port authorities who boarded the ship. No unauthorized persons were found, and nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0421666666666667",1:"103.6475",2:"Attack ID: 008-23 <br /> Sitrep: <small> 27.01.2023: 1530 UTC: Posn: 01:02.53N &ndash; 103:38.85E, Singapore Straits<br /><br />\r\nTwo unauthorised persons boarded a bulk carrier underway. Alarm raised, crew mustered and VTIS informed. Seeing the crew alertness, the persons escaped without stealing anything. The coast guard escorted the vessel to a safe anchorage and then boarded the vessel for investigations. All crew safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.2928333333333333",1:"104.17533333333333",2:"Attack ID: 009-23 <br /> Sitrep: <small> 01.02.2023: Around 0630 UTC: Posn: 01:17.57N &ndash; 104:10.52E, Around 2.8nm South of Pengerang Terminal, Malaysia.<br /><br />\r\nThree unauthorised persons were seen boarding a barge under tow. Incident reported to VTIS East and a Malaysian Coast Guard patrol boat intercepted the tug and barge for investigation. Cargo of scrap metal reported stolen. All crew members reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.1916666666666667",1:"103.86233333333334",2:"Attack ID: 010-23 <br /> Sitrep: <small> 08.02.2023: 0930 UTC: Posn: 01:11.50N &ndash; 103:51.74E, Singapore Straits.<br /><br />\r\nFour unauthorised persons boarded a barge under tow, stole some of its scrap metal cargo and escaped. Master reported the incident to Singapore VTS. All crew members are safe.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"12.29",1:"-72.02833333333334",2:'Attack ID: 011-23 <br /> Sitrep: <small> 12.02.2023: 0830 UTC: Posn: 12:17.4N - 072:01.7W, Puerto Bolivar Anchorage, Colombia.<br /><br />\r\nTwo unauthorised persons in a motorized boat approached an anchored bulk carrier and attempted to board using a rope attached to a hook. Duty AB on routine rounds noticed the attempt and notified the bridge. Alarm raised and ship"s horn sounded. Hearing the alarm, the persons aborted the attempted boarding and moved away. Incident reported to Puerto Bolivar Marine Operations via VHF Ch14. A patrol boat responded and searched the waters around the vessel. </small>',3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.2616666666666667",1:"104.205",2:"Attack ID: 012-23 <br /> Sitrep: <small> 14.02.2023: 2110 UTC: Posn: 01:15.7N - 104:12.3E, Singapore Straits.<br /><br />\r\nTwo robbers armed with knives boarded a bulk carrier underway and entered the engine room. The robbers were spotted by the duty crew. Alarm raised and crew mustered. A search was carried out and engine stores reported stolen. All crew members safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-12.023333333333333",1:"-77.22",2:"Attack ID: 013-23 <br /> Sitrep: <small> 21.02.2023: 0548 UTC: Posn: 12:01.4S &ndash; 077:13.2W, Callao Anchorage, Peru.<br /><br />\r\nThree robbers armed with knives boarded an anchored tanker, stole ship&rsquo;s stores and escaped. Alarm raised, ship&rsquo;s horn sounded, and crew mustered. Incident was reported to the Port Authorities and a patrol boat was dispatched to search the waters around the ship. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"0.08333333333333333",1:"-50.96666666666667",2:"Attack ID: 014-23 <br /> Sitrep: <small> 28.02.2023: 0245 UTC: Posn: 00:05N &ndash; 050:58W, Macapa Anchorage, Brazil.<br /><br />\r\nFive robbers armed with long knives boarded an anchored bulk carrier. Duty crew on routine rounds noticed the robbers near the forecastle and informed the duty officer. Alarm raised, ship&rsquo;s horn sounded, crew mustered, and port control notified. Hearing the alarm and seeing the crew alertness, the robbers escaped with the stolen ship&rsquo;s stores. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.2650000000000001",1:"104.19833333333334",2:"Attack ID: 015-23 <br /> Sitrep: <small> 17.02.2023: 2010 UTC: Posn: 01:15.9N - 104:11.9E, Singapore Straits.<br /><br />\r\nDuty crew onboard a bulk carrier underway spotted six unauthorized persons at the engine room entrance door. Alarm raised and crew mustered. Seeing the crew alertness, the unauthorized persons escaped. Incident reported to VTIS and later a patrol boat arrived at the location. A search was carried out and nothing reported stolen. All crew members safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"4.895",1:"-1.6866666666666665",2:'Attack ID: 016-23 <br /> Sitrep: <small> 02.03.2023: 0236 UTC: Posn: 04:53.7N - 001:41.2W, Takoradi Anchorage, Ghana.<br /><br />\r\nDuty crew onboard an anchored tanker noticed an unauthorised person near the forecastle and immediately raised the alarm. Upon hearing the alarm, the individual escaped with stolen ship"s stores. The incident was reported to Takoradi port control and a patrol boat was sent to investigate. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-12.02361111111111",1:"-77.22888888888889",2:'Attack ID: 017-23 <br /> Sitrep: <small> 09.03.2023: 0645 UTC: Posn: 12:01.25S &ndash; 077:13.44W, Callao Anchorage, Peru.<br /><br />\r\nAround fifteen robbers armed with knives boarded an anchored bulk carrier. They assaulted and tied the duty crew and stole his cell phone. Alarm raised and crew mustered. The robbers escaped with stolen ship"s properties. Incident was reported to the Port Authorities and a patrol boat was dispatched to search the waters around the ship. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"14.596666666666668",1:"120.86666666666666",2:"Attack ID: 018-23 <br /> Sitrep: <small> 12.03.2023: 2050 UTC: Posn: 14:35.8N &ndash; 120:52.0E, Manila Anchorage, Philippines.<br /><br />\r\nDuty crew on routine rounds onboard an anchored container ship noticed the forecastle store door open and raised the alarm. Crew mustered and a search was carried out. Ship&rsquo;s properties reported stolen. VTMS port were informed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0676666666666668",1:"103.59533333333333",2:"Attack ID: 019-23 <br /> Sitrep: <small> 10.03.2023: 2112 UTC: Posn: 01:04.06N - 103:35.72E, Singapore Straits.<br /><br />\r\nDuty crew onboard a bulk carrier underway spotted three perpetrators onboard the vessel and raised the alarm resulting in the perpetrators escaping without stealing anything. Incident reported to local authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"3.925",1:"98.74833333333333",2:"Attack ID: 020-23 <br /> Sitrep: <small> 19.03.2023: 1915 UTC: Posn: 03:55.5N &ndash; 098:44.9E, Belawan Anchorage, Indonesia.<br /><br />\r\nTwo robbers boarded an anchored product tanker via the anchor chain and broke into the paint store. Duty crew spotted the robbers and raised the alarm resulting in the robbers escaping without stealing anything. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-12.0305",1:"-77.20133333333334",2:"Attack ID: 021-23 <br /> Sitrep: <small> 26.03.2023: 2359 UTC: Posn: 12:01.83S &ndash; 077:12.08W, Callao Anchorage, Peru.<br /><br />\r\nUnauthorised persons boarded an anchored bulk carrier and attempted to steal ship&rsquo;s property. Deck watch noticed the persons and informed bridge who raised the alarm and sounded the ship&rsquo;s horn. Port control informed via vhf ch.16 and all crew mustered on the bridge. Hearing the alarm and seeing the crew alertness, the persons escaped without stealing anything. Coast guard boarded the ship for inspection. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-5.498333333333333",1:"105.30222222222223",2:"Attack ID: 022-23 <br /> Sitrep: <small> 23.02.2023: 1954 UTC: Posn: 05:29.90S &ndash; 105:18.14E, Panjang Anchorage, Indonesia.<br /><br />\r\nThree robbers armed with long knives boarded an anchored product tanker during heavy rain. They entered the engine room, threatened the duty engineer and stole ship&rsquo;s engine spares. Incident reported to the OOW who raised the alarm resulting in the robbers escaping in a waiting boat along with two accomplices. Incident reported to VTS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-12",1:"-77.21666666666667",2:"Attack ID: 023-23 <br /> Sitrep: <small> 28.03.2023: 0730 UTC: Posn: 12:00.58S - 077:13.77W, Callao Anchorage, Peru.<br /><br />\r\nTen robbers armed with knives boarded an anchored bulk carrier. They took hostage and tied the duty crew, stole their personnel belongings and escaped with stolen ship&rsquo;s stores. Incident reported to the Port Authorities and the Coast Guard boarded the ship for investigations. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-8.7435",1:"13.289333333333333",2:"Attack ID: 024-23 <br /> Sitrep: <small> 26.03.2023: 0230 UTC: Posn: 08:44.61S &ndash; 013:17.36E, Luanda Anchorage, Angola.<br /><br />\r\nRobbers in a canoe approached and boarded an anchored tug. Alert crew noticed the robbers and informed the OOW who raised the alarm and crew mustered resulting in the robbers escaping with stolen ship&rsquo;s properties. Port Authorities informed. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.7693333333333334",1:"101.36216666666667",2:"Attack ID: 026-23 <br /> Sitrep: <small> 02.04.2023: 2000 UTC: Posn: 01:46.16N &ndash; 101:21.73E, OSM Jetty 1, Lubuk Gaung, Indonesia.<br /><br />\r\nThree persons in a small boat approached a berthed tanker. Duty crew immediately informed the bridge after identifying one unauthorised person onboard the tanker. Seeing the crew alertness, the person escaped without stealing anything. Incident reported to local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.1433333333333333",1:"103.47833333333334",2:"Attack ID: 025-23 <br /> Sitrep: <small> 02.04.2023: 1755 UTC: Posn: 01:08.6N &ndash; 103:28.7E, Singapore Straits.<br /><br />\r\nDuty crew onboard a bulk carrier underway spotted five unauthorised persons in the engine room and immediately informed the OOW who raised the alarm. Upon hearing the alarm, the perpetrators escaped with stolen engine spares. Crew mustered and a search was carried out. The incident was reported to VTIS and once the vessel anchored the Singapore authorities boarded the ship for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"14.608333333333333",1:"120.86666666666666",2:"Attack ID: 027-23 <br /> Sitrep: <small> 04.04.2023: 1802 UTC: Posn: 14:36.5N &ndash; 120:52.0E, Manila Anchorage, Philippines.<br /><br />\r\nAround eight robbers armed with knives and iron bars boarded an anchored container ship. Alarm raised, ship&rsquo;s whistle sounded, and crew mustered. VTMS informed. The robbers stole ship&rsquo;s properties and escaped. Coast guard boarded the ship for inspection. One crew on duty was injured during the incident. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"4.741388888888888",1:"-6.618888888888889",2:"Attack ID: 028-23 <br /> Sitrep: <small> 31.03.2023: 2200 UTC: Posn: 04:44.48N &ndash; 006:37.13W, Port of San Pedro, Ivory Coast.<br /><br />\r\nTwo unauthorised persons attempted to board a berthed container ship by crawling under the razor wire while a third was assisting from their wooden canoe to move the razor wire. Alert crew detected the persons and raised the alarm. Hearing the alarm and seeing the crew alertness, the persons escaped without stealing anything. At the time of event the pilot was still onboard. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0965",1:"103.556",2:"Attack ID: 029-23 <br /> Sitrep: <small> 31.03.2023: 1705 UTC: Posn: 01:05.79N &ndash; 103:33.36E, Singapore Straits.<br /><br />\r\nAround five to six robbers boarded a bulk carrier underway. Master observed the perpetrators on the poop deck and immediately raised the alarm. Hearing the alarm, the robbers escaped in their speed boat. Crew mustered, a search was carried out and engine spares were reported stolen. A white colour drone was sighted by the 3/O and 4/E near the stern of the ship, which the crew suspect was used by the perpetrators to monitor the ship&rsquo;s activity. Incident reported to VTIS. Once the ship arrived at the pilot station the coast guard boarded the ship for investigation.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-5.05",1:"9.583333333333334",2:"Attack ID: 030-23 <br /> Sitrep: <small> 25.03.2023: 2138 UTC: Posn: 05:03S &ndash; 009:35E, Around 135nm WSW of Pointe Noire, The Congo.<br /><br />\r\nMore than ten pirates armed with guns attacked and boarded a tanker underway. Alarm raised and all crew members mustered in the citadel. On being notified of the incident, the IMB Piracy Reporting Centre immediately informed the regional authorities in the Gulf of Guinea and the French authorities and requested their assistance. The pirates managed to break into the citadel, took hostage all crew members, and took control of the tanker. They hijacked the tanker and sailed to another location. All communication with the tanker was lost as the pirates had destroyed the navigational and communication equipment. The IMB broadcast a missing tanker message to all ships at sea. On 30 March 2023, a French naval asset intercepted the tanker Off Bonny, Nigeria. Part of the cargo was stolen and six crew were reported kidnapped. The tanker was escorted to a safe port. On 08 May 2023, the Owners confirmed that the six kidnapped crew were released safely. </small>",3:"media/com_fabrik/images/red-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"14.546833333333334",1:"120.88466666666666",2:'Attack ID: 031-23 <br /> Sitrep: <small> 18.03.2023: 2015 UTC: Posn: 14:32.81N - 120:53.08E, Manila Anchorage, Philippines.<br /><br />\r\nDuty AB on routine rounds onboard an anchored container vessel noticed a small boat with two robbers alongside near the forecastle and an additional three robbers on the forecastle deck. Alarm raised and ship"s horn sounded. Hearing the alarm, the robbers jumped overboard and escaped with their accomplices. A search was carried out and ship&rsquo;s stores were reported as stolen. Incident reported to Manila port control. Two patrol boats were dispatched and searched the waters around the vessel. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0683333333333334",1:"103.67833333333333",2:"Attack ID: 032-23 <br /> Sitrep: <small> 29.03.2023: 1357 UTC: Posn: 01:04.1N &ndash; 103:40.7E, Singapore Straits<br /><br />\r\nFour robbers armed with a gun boarded a bulk carrier underway using a rope attached to a hook and entered the engine room. Alert crew noticed the robbers and raised the alarm. All crew mustered and seeing the crew alertness, the robbers escaped with stolen engine spares. The incident was reported to Singapore VTIS and the ship was escorted by Singapore Coast Guard. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"3.9169444444444443",1:"98.76722222222222",2:"Attack ID: 033-23 <br /> Sitrep: <small> 16.04.2023: 2145 UTC: Posn: 03:55.1N &ndash; 098:46.2E, Belawan Anchorage, Indonesia.<br /><br />\r\nDuty watchman onboard an anchored chemical tanker noticed two unauthorised persons near the paint locker and raised the alarm. Seeing the watchman, the persons jumped overboard and escaped in a small wooden boat with stolen ship&rsquo;s stores. Port Authorities informed through the agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"10.15",1:"107.15",2:"Attack ID: 034-23 <br /> Sitrep: <small> 16.04.2023: 1730-2300 UTC: Posn: 10:09.0N &ndash; 107:09.0E, Ho Chi Minh Anchorage, Vietnam.<br /><br />\r\nDuty crew on routine rounds onboard a drifting container ship noticed the paint store padlock broken and ship&rsquo;s stores stolen. Tried to contact port control on VHF but there was no response. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0833333333333333",1:"103.55",2:"Attack ID: 045-23 <br /> Sitrep: <small> 21.05.2023: 1800 UTC: Posn: 01:05N &ndash; 103:33E, Singapore Straits.<br /><br />\r\nFour robbers armed with a knife, boarded a bulk carrier underway. Alarm raised and crew mustered resulting in the robbers escaping with stolen ship&rsquo;s stores. All crew reported safe. Incident reported to Singapore Police Coast Guard. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"8.877833333333333",1:"-79.48483333333333",2:"Attack ID: 035-23 <br /> Sitrep: <small> 22.04.2023: 0350 UTC: Posn: 08:52.67N &ndash; 079:29.09W, Panama East Anchorage, Panama.<br /><br />\r\nDuty AB on routine rounds onboard an anchored container vessel noticed unauthorised persons attempting to board via the anchor chain and hawse pipe. Alarm raised, PA announcement made and crew mustered. Hearing the alerted crew the persons aborted the boarding attempt. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"14.5575",1:"120.92583333333333",2:"Attack ID: 036-23 <br /> Sitrep: <small> 14.04.2023: 2055-2130 UTC: Posn: 14:33.45N &ndash; 120:55.55E, Manila Quarantine Anchorage, Philippines.<br /><br />\r\nDuty crew on routine rounds onboard an anchored container ship noticed the forward store broken into and ship&rsquo;s properties were reported stolen. The theft was reported to Manila VTMS and the authorities boarded for investigation.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"22.756666666666668",1:"70.015",2:"Attack ID: 037-23 <br /> Sitrep: <small> 24.04.2023: 2000 UTC: Posn: 22:45.4N &ndash; 070:00.9E, Kandla Anchorage, India.<br /><br />\r\nCrew onboard an anchored product tanker noticed ship&rsquo;s cargo equipment was missing. Checking of CCTV footage showed five unauthorised persons onboard the vessel. Incident reported to port control. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-8.784333333333333",1:"13.2475",2:"Attack ID: 038-23 <br /> Sitrep: <small> 25.04.2023: 0230 UTC: Posn: 08:47.06S &ndash; 013:14.85E, Luanda Inner Anchorage, Angola.<br /><br />\r\nAlert crew noticed unauthorised persons onboard an anchored offshore supply ship attempting to steal an outboard engine of the FRC. Alarm raised and ship&rsquo;s horn sounded resulting in the robbers escaping. Authorities informed and the police boarded the vessel for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"0.10249999999999998",1:"-4.566666666666666",2:"Attack ID: 040-23 <br /> Sitrep: <small> 10.04.2023: 1350 UTC: Posn: 00:06.9N &ndash; 004:34.0W, Around 307nm SSW of Abidjan, Ivory Coast.<br /><br />\r\nTwelve pirates armed with guns attacked, boarded, and hijacked a tanker underway. All communications with the tanker were lost. The pirates self-navigated the tanker. On being notified of the incident, the IMB Piracy Reporting Centre immediately informed the regional and French authorities in the Gulf of Guinea. A missing tanker message was broadcast to all ships to lookout for the tanker. Position updates received from all sources were communicated with the relevant authorities for their coordination. On 15 April, a French naval asset located the tanker and the tanker escorted to a safe port by an Ivory Coast Guard patrol boat. The pirates had destroyed the navigational equipment, handcuffed all crew with cable tie and stolen part of the cargo before escaping. All crew reported safe. </small>",3:"media/com_fabrik/images/red-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-12.011666666666667",1:"-77.22333333333333",2:"Attack ID: 039-23 <br /> Sitrep: <small> 27.04.2023: 0700 UTC: Posn: 12:00.7S &ndash; 077:13.4W, Callao Anchorage, Peru.<br /><br />\r\nUnauthorised persons boarded an anchored container ship, tied two duty crew, stole their personal properties and ship&rsquo;s stores and escaped. Alarm raised, crew mustered and a search was carried out. Incident was reported to the Port control and a patrol boat was dispatched to the location. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"6.429333333333333",1:"3.3421666666666665",2:"Attack ID: 041-23 <br /> Sitrep: <small> 28.04.2023: 0500 UTC: Posn: 06:25.76N - 003:20.53E, Tin Can Island Terminal, Lagos, Nigeria.<br /><br />\r\nAround eight armed persons boarded a berthed general cargo ship. Alert crew on rounds spotted the persons resulting in the persons escaping empty handed in their boat. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"22.038067199692417",1:"88.08962043126424",2:"Attack ID: 042-23 <br /> Sitrep: <small> 17.04.2023: 1615 UTC: Posn: 22:02N &ndash; 088:05E, Haldia Port, India.<br /><br />\r\nUnnoticed, persons boarded a berthed bulk carrier and escaped with engine spares. Authorities informed through the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.28",1:"104.11333333333333",2:"Attack ID: 043-23 <br /> Sitrep: <small> 22.04.2023: 0130 UTC: Posn: 01:16.8N &ndash; 104:06.8E, Singapore Straits.<br /><br />\r\nUnauthorised persons boarded a barge under tow, stole some of the scrap metal cargo and escaped. Incident reported to Singapore VTIS. All crew members are safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.215",1:"103.36633333333333",2:"Attack ID: 044-23 <br /> Sitrep: <small> 09.05.2023: 1600-1800 UTC: Posn: 01:12.90N &ndash; 103:21.98E, Singapore Straits.<br /><br />\r\nUnauthorised persons boarded an unmanned barge under tow, twice within three hours.  Incident reported to local authorities via VHF. All crew members reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"22.2755",1:"91.80266666666667",2:"Attack ID: 046-23 <br /> Sitrep: <small> 23.05.2023: 1915 UTC: Posn: 22:16.53N - 091:48.16E, Berth DOJ-3, Chittagong, Bangladesh.<br /><br />\r\nAround six to eight robbers armed with knives boarded a berthed tanker. Alert crew raised the alarm and mustered resulting in the robbers escaping with stolen ship&rsquo;s stores. Incident reported to the coast guard who boarded the tanker for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.4383333333333335",1:"104.50666666666666",2:"Attack ID: 047-23 <br /> Sitrep: <small> 25.05.2023: 1900-2300 UTC: Posn: 01:26.3N &ndash; 104:30.4E, Singapore Straits.<br /><br />\r\nDuty crew on routine rounds noticed a storeroom broken into and ship&rsquo;s properties missing. Theft reported to local authorities. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"0.30666666666666664",1:"9.405",2:"Attack ID: 048-23 <br /> Sitrep: <small> 02.05.2023: 0030 UTC: Posn: 00:18.4N &ndash; 009:24.3E, Owendo Inner Anchorage, Gabon.<br /><br />\r\nChief Officer onboard an anchored bulk carrier noticed the door to the master&rsquo;s cabin was damaged, opened and the Master missing. The ship&rsquo;s safe was also opened with contents missing. On searching the 2/O and 3/O were also missing and their cabin doors damaged and opened. The incident was immediately reported to the local authorities who boarded the ship for investigation. The CSO confirmed that the three crews were kidnapped and later released on 21 May 2023. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-12.012833333333333",1:"-77.196",2:"Attack ID: 049-23 <br /> Sitrep: <small> 03.06.2023: 0842 UTC: Posn: 12:00.77S &ndash; 077:11.76W, Callao Anchorage, Peru.<br /><br />\r\nAn unauthorised person boarded an anchored chemical tanker from the bow area and unlashed the anchor hawse pipe cover giving access to his accomplices. They broke into the forecastle store and stole ship&rsquo;s stores. Alert crew noticed the thieves and raised the alarm resulting in the persons escaping with the stolen items. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"14.611666666666666",1:"120.84166666666667",2:"Attack ID: 050-23 <br /> Sitrep: <small> 04.06.2023: 1750 UTC: Posn: 14:36.7N &ndash; 120:50.5E, Manila Anchorage, Philippines.<br /><br />\r\nUnnoticed, robbers boarded an anchored container ship, stole ships properties and escaped. Theft noticed by deck crew on routine rounds. Incident reported to VTMS Manila via VHF Ch.16.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0735000000000001",1:"103.704",2:"Attack ID: 052-23 <br /> Sitrep: <small> 29.05.2023: 1500 UTC: Posn: 01:04.41N &ndash; 103:42.24E, Singapore Straits.<br /><br />\r\nFour robbers armed with a knife, boarded a bulk carrier underway. They took hostage and tied the duty crew, stole personal properties and ship&rsquo;s engine spares. Alert crew raised the alarm and crew mustered. Hearing the alarm the robbers escaped with stolen ship&rsquo;s engine spare parts. Incident reported to local authority. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.2883333333333333",1:"104.03333333333333",2:"Attack ID: 051-23 <br /> Sitrep: <small> 02.06.2023: 1900 UTC: Posn: 01:17.3N &ndash; 104:02.0E, Singapore Straits.<br /><br />\r\nUnnoticed, thieves boarded an anchored bulk carrier while the crew were busy with bunkering operations and store replenishment and escaped with ship&rsquo;s engine spares. The theft was noticed after departure. Footprints were discovered at the poop deck and a search was carried out.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"10.241666666666667",1:"107.04333333333334",2:"Attack ID: 053-23 <br /> Sitrep: <small> 19.05.2023: 1645 UTC: Posn: 10:14.5N &ndash; 107:02.6E, Vung Tau Anchorage, Vietnam.<br /><br />\r\nDuty AB on routine rounds onboard an anchored bulk carrier, noticed the paint store padlock broken and ship&rsquo;s stores stolen. A search was carried out and no unauthorised persons were found onboard the ship. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-2.9033333333333333",1:"-80.55333333333333",2:"Attack ID: 054-23 <br /> Sitrep: <small> 10.06.2023: 0215 UTC: Posn: 02:54.2S &ndash; 080:33.2W, Around 21nm WSW of Posorja, Ecuador.<br /><br />\r\nAn unknown number of persons in speed boats came alongside and attempted to board a container vessel underway using ladders. Alarm raised and crew mustered. Deck lights switched on and evasive manoeuvres carried out. Coast Guard notified and a patrol boat was sent to the location. Seeing the approaching patrol vessel the persons aborted the attempted boarding and moved away. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.2583333333333333",1:"104.21666666666667",2:"Attack ID: 055-23 <br /> Sitrep: <small> 30.04.2023: 1830 UTC: Posn: 01:15.5N &ndash; 104:13.0E, Singapore Straits.<br /><br />\r\nDuty Engineer on board a tanker underway spotted four unauthorized persons and immediately informed the OOW. Alarm raised and crew mustered resulting in the persons escaping without stealing anything. Incident reported to Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"9.2255",1:"-13.840666666666667",2:"Attack ID: 057-23 <br /> Sitrep: <small> 22.06.2023: 0340 UTC: Posn: 09:13.53N - 013:50.44W, Conakry Anchorage, Guinea.<br /><br />\r\nFour robbers armed with guns boarded an anchored bulk carrier. Duty crew noticed the robbers and notified the duty officer who raised the alarm. SSAS activated and all crew instructed to remain in their cabins. The robbers entered the accommodation, stole crew personal belongings and contents from the ship&rsquo;s safe prior to escaping in a waiting boat. One crew was injured with minor bruises during the incident. Port authorities notified and a patrol boat was dispatched to the location for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.1638333333333333",1:"103.44616666666667",2:"Attack ID: 056-23 <br /> Sitrep: <small> 10.06.2023: 1735 UTC: Posn: 01:09.83N &ndash; 103:26.77E, Singapore Straits.<br /><br />\r\nDuty Engineer on board a bulk carrier underway spotted four unauthorized persons in the engine storeroom and immediately informed the Master. Alarm raised and crew mustered resulting in the persons escaping without stealing anything. Incident reported to Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-12.034833333333333",1:"-77.18466666666667",2:'Attack ID: 058-23 <br /> Sitrep: <small> 21.06.2023: 0500-0905 UTC: Posn: 12:02.09S &ndash; 077:11.08W, Callao Anchorage, Peru.<br /><br />\r\nUnnoticed, robbers boarded an anchored bulk carrier, stole ship"s stores and escaped. Theft noticed by duty crew on routine rounds. Incident reported to the local agent. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.2745",1:"104.19783333333334",2:"Attack ID: 060-23 <br /> Sitrep: <small> 23.06.2023: 1630 UTC: Posn: 01:16.47N - 104:11.87E, Singapore Straits.<br /><br />\r\nFour unauthorised persons boarded bulk carrier underway and entered the engine room. Duty crew spotted the persons and raised the alarm resulting in the perpetrators escaping with stolen engine stores. Incident reported to VTIS. <br /><br />\r\n<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.09",1:"103.71333333333334",2:"Attack ID: 059-23 <br /> Sitrep: <small> 21.06.2023: 1910 UTC: Posn: 01:05.4N &ndash; 103:42.8E, Singapore Straits.<br /><br />\r\nDuty engineer onboard a tanker under pilotage spotted two unauthorised persons armed with knives trying to gain access to the steering gear room. Alarm raised, crew mustered and a search carried out. The incident was reported to VTIS and once anchored, the Singapore authorities boarded the tanker for investigation. All crew members are safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.7033333333333334",1:"101.47833333333334",2:"Attack ID: 061-23 <br /> Sitrep: <small> 26.06.2023: 2000 UTC: Posn: 01:42.2N &ndash; 101:28.7E, Dumai Inner Anchorage, Indonesia.<br /><br />\r\nDuty oiler onboard an anchored tanker noticed three robbers armed with steel bars near the engine room. The robbers saw the duty oiler and threatened to attack him, but the oiler managed to run away. Alarm raised and PA announcement made, resulting in the robbers escaping without stealing anything. All crew mustered and a search was carried out. Incident reported to the authorities through the local agent.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"4.888333333333334",1:"-1.6433333333333333",2:'Attack ID: 062-23 <br /> Sitrep: <small> 28.06.2023: 0055 UTC: Posn: 04:53.3N &ndash; 001:38.6W, Takoradi Anchorage, Ghana.<br /><br />\r\nDuty crew onboard an anchored container ship spotted three unauthorised persons on the main deck. Alarm raised, crew mustered and port control notified. Upon hearing the alarm, the persons escaped with stolen ship"s stores. The incident was reported to Takoradi port control and a patrol boat was sent to investigate. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"4.009333333333333",1:"9.6385",2:"Attack ID: 063-23 <br /> Sitrep: <small> 30.06.2023: 2140 UTC: Posn: 04:00.56N - 009:38.31E, Douala Anchorage, Cameroon.<br /><br />\r\nArmed persons fired upon an anchored fishing vessel. The armed naval security team onboard retaliated causing an exchange of fire resulting in the persons aborting the attempted boarding.<br /><br />\r\n </small><br />Attack ID: 064-23 <br /> Sitrep: <small> 30.06.2023: 2140 UTC: Posn: 04:00.56N - 009:38.31E, Douala Anchorage, Cameroon.<br /><br />\r\nArmed persons fired upon an anchored fishing vessel. The armed naval security team onboard retaliated causing an exchange of fire resulting in the persons aborting the attempted boarding. </small>",3:"media/com_fabrik/images/blue-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"4.0008333333333335",1:"9.633333333333333",2:"Attack ID: 065-23 <br /> Sitrep: <small> 30.06.2023: 2245 UTC: Posn: 04:00.05N - 009:38.00E, Douala Anchorage, Cameroon.<br /><br />\r\nArmed persons boarded an anchored general cargo vessel, kidnapped five crew members and escaped. Alarm raised and a patrol boat came to assist. Remaining crew and vessel reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-6.016666666666667",1:"106.90333333333334",2:"Attack ID: 066-23 <br /> Sitrep: <small> 02.07.2023: 2045 UTC: Posn: 06:01.0S &ndash; 106:54.2E, Tanjung Priok Anchorage, Jakarta, Indonesia.<br /><br />\r\nDuty crew on rounds onboard an anchored tanker noticed an unauthorized person on the aft deck. Alarm raised and crew mustered. Hearing the alarm, the person escaped with his accomplices in their boat. A search was carried out, nothing reported stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"9.283333333333333",1:"-13.761666666666667",2:"Attack ID: 067-23 <br /> Sitrep: <small> 05.07.2023: 0150 UTC: Posn: 09:17.0N &ndash; 013:45.7W, Conakry Anchorage, Guinea<br /><br />\r\nDuty AB on routine rounds onboard an anchored tanker noticed six unauthorised persons attempting to board via the stern, using a long ladder. Alarm raised and crew mustered. Hearing the alerted crew, the persons aborted the boarding attempt. Incident reported to the authorities through the local agent. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-19.920166666666667",1:"35.08583333333333",2:'Attack ID: 068-23 <br /> Sitrep: <small> 16.07.2023: 1030 UTC: Posn: 19.55.21S &ndash; 035:05.15E, Beira Anchorage, Mozambique.<br /><br />\r\nCrew onboard an anchored bulk carrier noticed ship"s stores stolen. A search was carried out. No unauthorised persons found onboard the ship. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"4.895",1:"-1.6966666666666668",2:"Attack ID: 069-23 <br /> Sitrep: <small> 10.07.2023: 0035 UTC: Posn: 04:53.7N - 001:41.8W, Takoradi Anchorage, Ghana.<br /><br />\r\nCrew on routine rounds onboard an anchored general cargo ship noticed the rigged razor wire around the forward port bow as partly removed and two unauthorised persons onboard. Alarm raised, crew mustered and port control informed. Hearing the alarm and seeing the alerted crew, the persons escaped empty handed with their accomplices who were waiting in a boat. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.1756666666666666",1:"103.94333333333333",2:"Attack ID: 071-23 <br /> Sitrep: <small> 19.07.2023: 1925 UTC: Posn: 01:10.54N - 103:56.60E, Batam Anchorage, Indonesia.<br /><br />\r\nThree robbers armed with knives boarded an anchored tanker. Alam raised and crew mustered. Seeing the crew alertness, the robbers escaped. Incident reported to the Batam VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0933333333333333",1:"103.55666666666667",2:"Attack ID: 070-23 <br /> Sitrep: <small> 11.07.2023: 2000 UTC: Posn: 01:05.6N - 103:33.4E, Singapore Straits.<br /><br />\r\nFive robbers armed with a knife boarded a bulk carrier underway. The robbers threatened the duty oiler on routine rounds who retreated and alerted the bridge. Alarm raised, PA announcement made, and crew mustered. Upon hearing the alarm, the robbers escaped with stolen ship&rsquo;s engine spare parts. Incident reported to Singapore VTIS. All crew members reported safe. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-12.03",1:"-77.18166666666667",2:"Attack ID: 072-23 <br /> Sitrep: <small> 18.07.2023: 2350 UTC: Posn: 12:01.8S - 077:10.9W, Callao Anchorage, Peru.<br /><br />\r\nDuty AB on routine rounds onboard an anchored container ship noticed an unauthorised person attempting to board via the anchor chain. Alarm raised and crew mustered. Hearing the alarm, the person aborted the boarding attempt. Incident reported to the Port Control and a Security Message was broadcast to all vessels in the vicinity. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-5.546",1:"105.30916666666667",2:"Attack ID: 073-23 <br /> Sitrep: <small> 22.07.2023: 2050 UTC: Posn: 05:32.76S &ndash; 105:18.55E, Tarahan Anchorage, Indonesia.<br /><br />\r\nThree robbers armed with knives were noticed in the engine room by duty crew onboard an anchored tanker. Alarm raised and crew mustered. Upon hearing the alarm, the robbers escaped with stolen engine spares. Incident reported to Panjang VTS via VHF Ch 16. Local authorities boarded the tanker for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.1433333333333333",1:"103.47333333333333",2:"Attack ID: 074-23 <br /> Sitrep: <small> 21.07.2023: 2215 UTC: Posn: 01:08.6N - 103:28.4E, Singapore Straits.<br /><br />\r\nDuty oiler on routine rounds onboard a bulk carrier underway noticed four robbers in the engine room. Alarm raised and crew mustered. Hearing the alarm and seeing the crew alertness, the robbers escaped with stolen ship&rsquo;s engine spares. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"8.366666666666667",1:"-13.533333333333333",2:"Attack ID: 075-23 <br /> Sitrep: <small> 22.07.2023: 0500 UTC: Posn: 08:22N - 013:32W, Around 18nm SW of Freetown, Sierra Leone.<br /><br />\r\nThe IMB Piracy Reporting Centre received information from the Regional Authorities that 13 pirates armed with guns boarded and hijacked a fishing vessel underway and took hostage its 23 crew. The Liberian Coast Guard located the vessel off Monrovia, Liberia. After an exchange of gunfire between the pirates and the Coast Guard, the vessel and crew were secured. Two pirates were apprehended while the others escaped. </small>",3:"media/com_fabrik/images/red-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.2755",1:"104.24633333333334",2:"Attack ID: 076-23 <br /> Sitrep: <small> 14.07.2023: 1810 UTC: Posn: 01:16.53N &ndash; 104:14.78E, Singapore Straits.<br /><br />\r\nFive robbers armed with knives boarded a bulk carrier underway. Duty watchman noticed the robbers and immediately informed the bridge. Alarm raised and all deck lights switched on. Upon hearing the alarm, the robbers jumped overboard and escaped with stolen crew personal belongings and ship&rsquo;s spares. Incident reported to Singapore VTIS. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"13.766666666666667",1:"120.98833333333333",2:"Attack ID: 077-23 <br /> Sitrep: <small> 22.07.2023: 1900-2200 UTC: Posn: 13:46.0N &ndash; 120:59.3E, Batangas Anchorage, Philippines.<br /><br />\r\nDuty crew on routine rounds onboard an anchored LNG tanker noticed the hawse pipe cover open and notified the duty officer. On searching the vessel, ship&rsquo;s properties were reported as stolen. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-12.020833333333334",1:"-77.201",2:"Attack ID: 078-23 <br /> Sitrep: <small> 24.07.2023: 0830 UTC: Posn: 12:01.25S &ndash; 077:12.06W, Callao Anchorage, Peru.<br /><br />\r\nDuty crew on routine rounds onboard an anchored bulk carrier, noticed the store padlock broken and ship&rsquo;s stores stolen. A search was carried out and no unauthorised persons were found onboard the ship. Incident was reported to the Port Control and a patrol boat was dispatched to the location. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0695",1:"103.69433333333333",2:"Attack ID: 079-23 <br /> Sitrep: <small> 21.07.2023: 1925 UTC: Posn: 01:04.17N &ndash; 103:41.66E, Singapore Straits.<br /><br />\r\nSix robbers armed with knives boarded a bulk carrier underway. They took hostage and tied up the 2/E and 4/E. Prior to escaping the robbers stole engine spares and personal effects of the 4/E. The crew released by C/E who raised the alarm. Incident reported to VTIS and Singapore Port Police. The authorities boarded the ship for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.1996666666666667",1:"103.58383333333333",2:"Attack ID: 080-23 <br /> Sitrep: <small> 13.07.2023: 1545 UTC: Posn: 01:11.98N - 103:35.03E, Singapore Straits.<br /><br />\r\nDuty crew on routine rounds onboard a bulk carrier underway noticed a wooden boat with seven unauthorised persons near the starboard quarter. One person was attempting to board using a rope. Alarm raised and all deck lights switched on. Upon hearing the alarm, the attempted boarding was aborted. Incident reported to Singapore VTS. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.2973333333333334",1:"104.182",2:"Attack ID: 081-23 <br /> Sitrep: <small> 23.07.2023: 1420 UTC: Posn: 01:17.84N &ndash; 104:10.92E, Singapore Straits.<br /><br />\r\nFour robbers in a wooden boat approached and boarded a laden barge under tow. The tug Captain noticed the robbers stealing scrap metal from the barge and immediately reported the incident to the Owners, who in turn notified the Authorities. The Malaysian Maritime Enforcement Agencies (MMEA) sent a patrol boat to the location and were able to apprehend the robbers. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"4.833333333333333",1:"-1.7166666666666668",2:"Attack ID: 082-23 <br /> Sitrep: <small> 05.08.2023: 2352 UTC: Posn: 04:50N &ndash; 001:43W, Takoradi Anchorage, Ghana.<br /><br />\r\nAround five unauthorised persons in a canoe approached and attempted to board an anchored fire fighting vessel twice within 48 hours. Alert crew raised the alarm resulting in the persons aborting the attempted boarding and moving away. Incident reported to local authorities via VHF. </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"14.593",1:"120.84216666666667",2:"Attack ID: 083-23 <br /> Sitrep: <small> 10.08.2023: 1602 UTC: Posn: 14:35.58N - 120:50.53E, Manila Anchorage, Philippines.<br /><br />\r\nEight robbers armed with guns boarded an anchored container ship. They took the duty crew hostage, tied him up and stole his cell phone. Alarm raised and the crew mustered. Seeing the alerted crew, the robbers escaped. The incident was reported to VTMS and Philippines Coast Guard boarded the vessel for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.1466666666666667",1:"103.46",2:"Attack ID: 084-23 <br /> Sitrep: <small> 15.07.2023: 1840 UTC: Posn: 01:08.8N &ndash; 103:27.6E, Singapore Straits.<br /><br />\r\nAround five persons in a small boat approached a bulk carrier underway with intent to board. The alert crew noticed the persons and raised the alarm and the ship&rsquo;s horn sounded. Hearing the alarm, the robbers aborted the attempted boarding and moved away. The incident was reported to Singapore VTIS. After dropping anchor, the Authorities boarded the ship for security inspection.<br /><br />\r\n </small>",3:"media/com_fabrik/images/yellow-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.275",1:"104.25166666666667",2:"Attack ID: 085-23 <br /> Sitrep: <small> 06.08.2023: 1650 UTC: Posn: 01:16.5N &ndash; 104:15.1E, Singapore Straits.<br /><br />\r\nDuty 2/E onboard a bulk carrier underway noticed several unauthorized persons in the engine room store and notified the C/E and 2/O. General alarm raised, VTIS informed, crew mustered and a search was carried out. No unauthorized persons were found onboard, but some M/E spares were missing. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0656666666666668",1:"103.687",2:"Attack ID: 086-23 <br /> Sitrep: <small> 08.08.2023: 1930 UTC: Posn: 01:03.94N &ndash; 103:41.22E, Singapore Straits.<br /><br />\r\nDuty oiler onboard a bulk carrier underway noticed three robbers in the engine room and immediately notified the bridge. Alarm raised, VTIS informed, and all crew mustered. A search was carried out and ship&rsquo;s engine spares were reported stolen. After dropping anchor, the coast guard boarded the ship for investigation.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0483333333333333",1:"103.5",2:"Attack ID: 087-23 <br /> Sitrep: <small> 08.08.2023: 1435 UTC: Posn: 01:02.9N &ndash; 103:30.0E, Singapore Straits.<br /><br />\r\nTen robbers armed with knives and steel bars boarded a bulk carrier underway and entered the engine room. They took hostage and tied up the 3/E in the Engine Control Room. Prior to escaping the robbers stole engine spares. On activation of the dead man alarm the C/E found the 3/E tied up and immediately informed the Master. General alarm raised and incident reported to Singapore VTS. Coast Guard boarded the vessel for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.0448333333333333",1:"103.64966666666666",2:"Attack ID: 088-23 <br /> Sitrep: <small> 08.08.2023: 1350 UTC: Posn: 01:02.69N &ndash; 103:38.98E, Singapore Straits.<br /><br />\r\nFour unauthorised persons boarded a bulk carrier underway and entered the engine room. Alert crew noticed the persons and raised the alarm resulting in the persons escaping with stolen engine spares. The incident was reported to VTIS and once the vessel anchored the Singapore authorities boarded the ship for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"3.788333333333333",1:"98.70361111111112",2:"Attack ID: 089-23 <br /> Sitrep: <small> 29.08.2023: 0900 UTC: Posn: 03:47.30N - 098:42.21E, Berth 112, Belawan Port, Indonesia.<br /><br />\r\nDuty crew onboard a berthed bulk carrier noticed three robbers armed with knives at the forecastle. Alarm raised and crew mustered. Upon hearing the alarm, the robbers escaped with stolen ship&rsquo;s stores. Incident reported to the local authorities through the local agent. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-11.996666666666666",1:"-77.20666666666666",2:"Attack ID: 090-23 <br /> Sitrep: <small> 02.09.2023: 0720 UTC: Posn: 11:59.8S - 077:12.4W, Callao Anchorage, Peru.<br /><br />\r\nFour robbers armed with knives boarded an anchored tanker. They took one duty crew as hostage and tied him up. General alarm raised. Hearing the alarm, the robbers escaped with the stolen ship&rsquo;s properties and stores. Incident was reported to the Port Control and the coast guard boarded the ship for investigation. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-8.7445",1:"13.306833333333334",2:"Attack ID: 091-23 <br /> Sitrep: <small> 04.09.2023: 0215 UTC: Posn: 08:44.67S &ndash; 013:18.41E, Luanda Anchorage, Angola.<br /><br />\r\nTwo unauthorised persons in a canoe approached and boarded an anchored tug. Duty AB on routine rounds noticed the persons and immediately raised the alarm. Upon hearing the alarm, the persons escaped with the stolen ship&rsquo;s properties.  </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.043",1:"103.6515",2:"Attack ID: 092-23 <br /> Sitrep: <small> 15.07.2023: 1308 UTC: Posn: 01:02.58N &ndash; 103:39.09E, Singapore Straits.<br /><br />\r\nAround five to six robbers armed with knives boarded a bulk carrier underway. Alarm raised and crew mustered. Upon hearing the alarm, the robbers escaped with stolen engine spares. Incident reported to Singapore VTS and once the vessel anchored, the coast guard boarded the vessel for investigation.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"8.883333333333333",1:"-13.516666666666667",2:"Attack ID: 093-23 <br /> Sitrep: <small> 05.07.2023: 0355 UTC: Posn: 08:53N &ndash; 013:31W, Around 14.20nm WSW of Yelibuya Island, Sierra Leone.<br /><br />\r\nEight armed pirates boarded a fishing vessel engaged in fishing activities. They destroyed the cameras onboard the vessel and other communication equipment. Before escaping, they stole valuables and shot the captain. Authorities informed. A naval patrol team was dispatched to the location. The vessel managed to sail into Freetown port. The captain was hospitalized and underwent surgical treatment. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"6.429889892486697",1:"3.344656314849872",2:'Attack ID: 094-23 <br /> Sitrep: <small> 10.09.2023: 2335 UTC: Posn: 06:25.7N &ndash; 003:20.4E, Tin Can Berth 10, Lagos, Nigeria.<br /><br />\r\nAround four to five robbers armed with knives and a steel bar boarded a berthed general cargo ship. Alarm raised and crew mustered. Seeing the crew alertness, the robbers escaped in a wooden boat with stolen ship"s properties. </small>',3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"-11.988333333333333",1:"-77.22833333333334",2:"Attack ID: 095-23 <br /> Sitrep: <small> 23.09.2023: 0830 UTC: Posn: 11:59.3S &ndash; 077:13.7W, Callao Anchorage, Peru.<br /><br />\r\nSix persons in a small boat approached an anchored tanker. Two persons armed with knives managed to board the tanker by crawling in between the anchor chain and hawse pipe cover which they later removed. The persons threw the hawse pipe cover securing bar towards approaching crew, who raised the alarm resulting in the persons escaping in their boat. Nothing reported stolen. Several attempts were made to call the Authorities but no response received. </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0},{0:"1.7216666666666667",1:"101.43972222222222",2:"Attack ID: 096-23 <br /> Sitrep: <small> 23.08.2023: 1850 UTC: Posn: 01:43.18N &ndash; 101:26.23E, Dumai Inner Anchorage, Indonesia<br /><br />\r\nDuty crew onboard an anchored tanker noticed three robbers armed with knives near the engine room. The robbers threatened the duty crew, who fled from the vicinity and raised the alarm resulting in the robbers escaping with stolen engine spare parts.<br /><br />\r\n </small>",3:"media/com_fabrik/images/orange-dot.png",4:25,5:25,groupkey:0,listid:"197124",title:"",groupClass:"type",c:0}])),Qk=function(){var t=l((0,e.useState)(new Date("2023-01-01")),2),r=t[0],n=t[1],i=l((0,e.useState)(new Date),2),a=i[0],o=i[1],s=l((0,e.useState)("symbol"),2),c=s[0],u=s[1],d=function(e,t,r){return e.filter((function(e){try{var n=Ik(e[2].split("<small> ")[1].split(":")[0],"dd.MM.yyyy",new Date);return n.getTime()>=t&&n.getTime()<=r}catch(i){return!1}}))},h=l((0,e.useState)(d(Jk,r,a)),2),p=h[0],f=h[1];return(0,e.useEffect)((function(){var e=d(Jk,r,a);f(e)}),[r,a]),(0,Ye.jsx)(Uv,{children:(0,Ye.jsxs)("div",{style:{margin:"1rem"},children:[(0,Ye.jsx)(jv,{fontSize:"xl",children:"Piracy Map '21 - '23 South China Sea - Yemen"}),(0,Ye.jsx)(Uk,{reports:p,layerType:c}),(0,Ye.jsx)(Nk,{}),(0,Ye.jsxs)(Gv,{children:[(0,Ye.jsx)(Zv,{children:(0,Ye.jsxs)(Gv,{children:[(0,Ye.jsxs)(Kv,{alignItems:"flex-start",children:[(0,Ye.jsx)(jv,{py:"0.5",fontWeight:"bold",color:"gray.600",children:"Start At"}),(0,Ye.jsx)(fx,{value:Kk(r),onChange:function(e){return n(new Date(""===e.target.value?"2020-01-01":e.target.value))},placeholder:"Select Start Date",size:"md",type:"date",min:"2020-01-01",max:Kk(a)})]}),(0,Ye.jsxs)(Kv,{alignItems:"flex-start",children:[(0,Ye.jsx)(jv,{py:"0.5",fontWeight:"bold",color:"gray.600",children:"End At"}),(0,Ye.jsx)(fx,{value:Kk(a),onChange:function(e){return o(new Date(""===e.target.value?Kk(new Date):e.target.value))},placeholder:"Select End Date",size:"md",type:"date",min:Kk(r),max:Kk(new Date)})]})]})}),(0,Ye.jsx)(Zv,{children:(0,Ye.jsxs)(Kv,{alignItems:"flex-start",children:[(0,Ye.jsx)(jv,{py:"0.5",fontWeight:"bold",color:"gray.600",children:"Map Layer"}),(0,Ye.jsxs)(Gv,{children:[(0,Ye.jsx)(wx,{leftIcon:(0,Ye.jsx)(Gk,{}),colorScheme:"teal",variant:"symbol"===c?"solid":"outline",onClick:function(){return u("symbol")},children:"Marker"}),(0,Ye.jsx)(wx,{leftIcon:(0,Ye.jsx)(Yk,{}),colorScheme:"teal",variant:"heatmap"===c?"solid":"outline",onClick:function(){return u("heatmap")},children:"Heatmap"})]})]})}),(0,Ye.jsx)(Zv,{children:(0,Ye.jsxs)(Kv,{alignItems:"flex-start",children:[(0,Ye.jsx)(jv,{py:"0.5",fontWeight:"bold",color:"gray.600",children:"Route"}),(0,Ye.jsx)(wx,{colorScheme:"blue",disabled:!0,children:"Follow"})]})})]})]})})};n.createRoot(document.getElementById("root")).render((0,Ye.jsx)(e.StrictMode,{children:(0,Ye.jsx)(Qk,{})}))}()}();
//# sourceMappingURL=main.7e92bc56.js.map